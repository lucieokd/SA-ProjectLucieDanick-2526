import { ErrorType } from '../types/index.js';
import { ConcreteException } from '../base.js';
import { mapErrorMessage } from '../utils/maps.js';
const removeRabbyWalletFromErrorString = (message) => message
    .replaceAll('RabbyWallet', '')
    .replaceAll('Rabby Wallet', '')
    .replaceAll('Rabbywallet', '')
    .replaceAll('RabbyWallet:', '')
    .replaceAll('Rabby Wallet:', '');
export class RabbyWalletException extends ConcreteException {
    static errorClass = 'RabbyWalletException';
    constructor(error, context) {
        super(error, context);
        this.type = ErrorType.WalletError;
    }
    parse() {
        const { message } = this;
        if (message
            .trim()
            .toLowerCase()
            .includes('missing or invalid parameters'.toLowerCase())) {
            this.setMessage('Please make sure you are using Rabby Wallet');
        }
        else {
            this.setMessage(mapErrorMessage(removeRabbyWalletFromErrorString(message)));
        }
        this.setName(RabbyWalletException.errorClass);
    }
}
