(function(){"use strict";function _mergeNamespaces(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(r){if("default"!==r&&!(r in e)){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}))})),Object.freeze(e)}var ChallengeId;!function(e){e.TRACK_UPLOADS="u",e.REFERRALS="r",e.VERIFIED_REFERRALS="rv",e.REFERRED="rd",e.MOBILE_INSTALL="m",e.CONNECT_VERIFIED_ACCOUNT="v",e.LISTEN_STREAK_ENDLESS="e",e.COMPLETE_PROFILE="p",e.SEND_FIRST_TIP="ft",e.CREATE_FIRST_PLAYLIST="fp",e.AUDIO_MATCHING_BUYER="b",e.AUDIO_MATCHING_SELLER="s",e.TRENDING_TRACK="tt",e.TRENDING_PLAYLIST="tp",e.TRENDING_UNDERGROUND_TRACK="tut",e.ONE_SHOT="o",e.FIRST_WEEKLY_COMMENT="c",e.PLAY_COUNT_250_MILESTONE_2025="p1",e.PLAY_COUNT_1000_MILESTONE_2025="p2",e.PLAY_COUNT_10000_MILESTONE_2025="p3",e.TASTEMAKER="t",e.COSIGN="cs",e.PINNED_COMMENT="cp",e.REMIX_CONTEST_WINNER="w"}(ChallengeId||(ChallengeId={}));const developmentConfig={network:{minVersion:"0.0.0",apiEndpoint:"http://audius-api",storageNodes:[{delegateOwnerWallet:"0x0D38e653eC28bdea5A2296fD5940aaB2D0B8875c",endpoint:"http://audius-creator-node-1"}],antiAbuseOracleNodes:{endpoints:["http://audius-anti-abuse-oracle-1:8000"],registeredAddresses:["0xF0D5BC18421fa04D0a2A2ef540ba5A9f04014BE3"]},identityService:"http://audius-identity-service-1"},acdc:{entityManagerContractAddress:"0x254dffcd3277C0b1660F6d42EFbB754edaBAbC2B",chainId:1337},solana:{claimableTokensProgramAddress:"testHKV1B56fbvop4w6f2cTGEub9dRQ2Euta5VmqdX9",rewardManagerProgramAddress:"testLsJKtyABc9UXJF8JWFKf1YH4LmqCWBC42c6akPb",rewardManagerStateAddress:"DJPzVothq58SmkpRb1ATn5ddN2Rpv1j2TcGvM3XsHf1c",paymentRouterProgramAddress:"apaySbqV1XAmuiGszeN4NyWrXkkMrnuJVoNhzmS1AMa",stakingBridgeProgramAddress:"",rpcEndpoint:"http://audius-solana-test-validator-1",usdcTokenMint:"26Q7gP8UfkDzi7GMFEQxTJaNJ8D2ybCUjex58M5MLu8y",wAudioTokenMint:"37RCjhgV1qGV2Q54EHFScdxZ22ydRMdKMtVgod47fDP3",bonkTokenMint:"DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263",rewardManagerLookupTableAddress:"GNHKVSmHvoRBt1JJCxz7RSMfzDQGDGhGEjmhHyxb3K5J"},ethereum:{rpcEndpoint:"http://audius-eth-ganache-1",addresses:{ethRewardsManagerAddress:"0x",serviceProviderFactoryAddress:"0x",serviceTypeManagerAddress:"0x",audiusTokenAddress:"0xdcB2fC9469808630DD0744b0adf97C0003fC29B2",audiusWormholeAddress:"0x",delegateManagerAddress:"0x",stakingAddress:"0x"}}},productionConfig={network:{minVersion:"0.7.0",apiEndpoint:"https://api.audius.co",storageNodes:[{endpoint:"https://creatornode.audius.co",delegateOwnerWallet:"0xc8d0C29B6d540295e8fc8ac72456F2f4D41088c8"},{endpoint:"https://creatornode2.audius.co",delegateOwnerWallet:"0xf686647E3737d595C60c6DE2f5F90463542FE439"},{endpoint:"https://creatornode3.audius.co",delegateOwnerWallet:"0x0C32BE6328578E99b6F06E0e7A6B385EB8FC13d1"},{endpoint:"https://audius-content-1.figment.io",delegateOwnerWallet:"0xBfdE9a7DD3620CB6428463E9A9e9932B4d10fdc5"},{endpoint:"https://creatornode.audius.prod-eks-ap-northeast-1.staked.cloud",delegateOwnerWallet:"0x675086B880260D217963cF14F503272AEb44b2E9"},{endpoint:"https://audius-content-2.figment.io",delegateOwnerWallet:"0x6444212FFc23a4CcF7460f8Fe6D0e6074db59036"},{endpoint:"https://audius-content-3.figment.io",delegateOwnerWallet:"0xECEDCaABecb40ef4bE733BA47FaD612aeA1F396F"},{endpoint:"https://audius-content-4.figment.io",delegateOwnerWallet:"0x08fEF3884Db16E2E6211272cdC9Eee68E8b63b09"},{endpoint:"https://audius-content-5.figment.io",delegateOwnerWallet:"0x10fF8197f2e94eF880d940D2414E0A14983c3bFE"},{endpoint:"https://creatornode.audius1.prod-eks-ap-northeast-1.staked.cloud",delegateOwnerWallet:"0xC23Ee959E0B22a9B0F5dF18D7e7875cA4B6c4236"},{endpoint:"https://creatornode.audius2.prod-eks-ap-northeast-1.staked.cloud",delegateOwnerWallet:"0x51a5575dc04c1f5f2e39390d090aaf78554F5f7B"},{endpoint:"https://creatornode.audius3.prod-eks-ap-northeast-1.staked.cloud",delegateOwnerWallet:"0xe0b56BAe2276E016d3DB314Dd7374e596B0457ac"},{endpoint:"https://audius-content-6.figment.io",delegateOwnerWallet:"0x68a4Bd6b4177ffB025AF9844cBE4Fe31348AEE1D"},{endpoint:"https://audius-content-7.figment.io",delegateOwnerWallet:"0xf45a6DBf3ce0201F4012a19b1fB04D4f05B53a37"},{endpoint:"https://audius-content-8.figment.io",delegateOwnerWallet:"0x9708Fb04DeA029212126255B311a21F1F884cCB4"},{endpoint:"https://audius-content-9.figment.io",delegateOwnerWallet:"0x7c34c9709ed69513D55dF2020e799DA44fC52E6e"},{endpoint:"https://audius-content-10.figment.io",delegateOwnerWallet:"0xff753331CEa586DD5B23bd21222a3c902909F2dd"},{endpoint:"https://audius-content-11.figment.io",delegateOwnerWallet:"0xC9721F892BcC8822eb34237E875BE93904f11073"},{endpoint:"https://content.grassfed.network",delegateOwnerWallet:"0x33Ab85445c8A2690B9488e9fB5E6A9849d3a18d3"},{endpoint:"https://blockdaemon-audius-content-01.bdnodes.net",delegateOwnerWallet:"0x807C0fba7405aeb8b6a37A974df6259C6aB9bB1e"},{endpoint:"https://audius-content-1.cultur3stake.com",delegateOwnerWallet:"0xCEb6a23d6132Cfe329b3c8E3c45f9DDc28A62Bd4"},{endpoint:"https://audius-content-2.cultur3stake.com",delegateOwnerWallet:"0x2e9e7A4e35C3136fB651a0dBF8f91c9f5C27BBf7"},{endpoint:"https://audius-content-3.cultur3stake.com",delegateOwnerWallet:"0x742da6cAc2782FeA961bB7B9150a048F5167D1e1"},{endpoint:"https://audius-content-4.cultur3stake.com",delegateOwnerWallet:"0xcbb0cE7481685587b0988195Ff0cD6AA1A701657"},{endpoint:"https://audius-content-5.cultur3stake.com",delegateOwnerWallet:"0xFec4708155277D35d568aD6Ca322262577683584"},{endpoint:"https://audius-content-6.cultur3stake.com",delegateOwnerWallet:"0x3Db0E61591063310eEd22fd57E6f7F1ab2Bb538E"},{endpoint:"https://audius-content-7.cultur3stake.com",delegateOwnerWallet:"0xE6C00e7E8d582fD2856718a5439f1aeEB68e27E5"},{endpoint:"https://blockdaemon-audius-content-02.bdnodes.net",delegateOwnerWallet:"0x4Ad694B3fC34b3cC245aF6AA7B43C52ddD0d7AAE"},{endpoint:"https://blockdaemon-audius-content-03.bdnodes.net",delegateOwnerWallet:"0x8ea81225013719950E968DE0602c4Eca458fA9f4"},{endpoint:"https://blockdaemon-audius-content-04.bdnodes.net",delegateOwnerWallet:"0xcfFA8ACF0b04d9278eEE13928be264b2E9aaab97"},{endpoint:"https://blockdaemon-audius-content-05.bdnodes.net",delegateOwnerWallet:"0xB4Ff0cab630FB05a7fcEfec9E979a968b8f4fE55"},{endpoint:"https://blockdaemon-audius-content-06.bdnodes.net",delegateOwnerWallet:"0x7449da7d1548C11c481b87667EC9b2A8F20C13A0"},{endpoint:"https://blockdaemon-audius-content-07.bdnodes.net",delegateOwnerWallet:"0x00B1CA1A34257860f66e742eF163Ad30bF42d075"},{endpoint:"https://blockdaemon-audius-content-08.bdnodes.net",delegateOwnerWallet:"0x16650eDB44C720ea627d5a59ff0b4f74c37fe419"},{endpoint:"https://blockdaemon-audius-content-09.bdnodes.net",delegateOwnerWallet:"0xD5Cfcf4149c683516239fc653D5a470F3F4A606D"},{endpoint:"https://audius-content-8.cultur3stake.com",delegateOwnerWallet:"0xff432F81D0eb77DA5973Cf55e24A897882fdd3E6"},{endpoint:"https://blockchange-audius-content-01.bdnodes.net",delegateOwnerWallet:"0x8464c88502925a0076c381962F8B70b6EC892861"},{endpoint:"https://blockchange-audius-content-02.bdnodes.net",delegateOwnerWallet:"0x5e0D0BeDC11F0B512457f6f707A35703b1447Fb5"},{endpoint:"https://blockchange-audius-content-03.bdnodes.net",delegateOwnerWallet:"0xe3F1c416c3919bB2ffD78F1e38b9E81E8c80815F"},{endpoint:"https://audius-content-9.cultur3stake.com",delegateOwnerWallet:"0xB6f506557B2e9026743FeA6157e52F204D26690F"},{endpoint:"https://audius-content-10.cultur3stake.com",delegateOwnerWallet:"0x2AF4598D3CF95D8e76987c02BC8A8D71F58d49d5"},{endpoint:"https://audius-content-11.cultur3stake.com",delegateOwnerWallet:"0xB2684Cca5281d2bA6D9Ce66Cca215635FF2Ba466"},{endpoint:"https://audius-content-12.cultur3stake.com",delegateOwnerWallet:"0x28924C99822eA08bFCeDdE3a411308633948b349"},{endpoint:"https://audius-content-13.cultur3stake.com",delegateOwnerWallet:"0xcb23908aa0dCDef762ebEaA38391D8fFC69E6e8F"},{endpoint:"https://audius-content-14.cultur3stake.com",delegateOwnerWallet:"0xCbDa351492e52fdb2f0E7FBc440cA2047738b71C"},{endpoint:"https://audius-content-15.cultur3stake.com",delegateOwnerWallet:"0x2fE2652296c40BB22D33C6379558Bf63A25b4f9a"},{endpoint:"https://audius-content-16.cultur3stake.com",delegateOwnerWallet:"0x47367ED3Db5D9691d866cb09545DE7cccD571579"},{endpoint:"https://audius-content-17.cultur3stake.com",delegateOwnerWallet:"0xb472c555Ab9eA1D33543383d6d1F8885c97eF83A"},{endpoint:"https://audius-content-18.cultur3stake.com",delegateOwnerWallet:"0x4F62C17Dc54E58289354847974E1F246c8EAcf11"},{endpoint:"https://audius-content-12.figment.io",delegateOwnerWallet:"0x780641e157621621658F118375dc1B36Ea514d46"},{endpoint:"https://cn0.mainnet.audiusindex.org",delegateOwnerWallet:"0xf9b373E223b73473C59034072263f52aEF60133B"},{endpoint:"https://cn1.mainnet.audiusindex.org",delegateOwnerWallet:"0x9b0D01bd7F01BD6916Ba139743Ce9C524B9375Dd"},{endpoint:"https://cn2.mainnet.audiusindex.org",delegateOwnerWallet:"0xf6e297203c0086dc229DAE17F5b61a15F42A1A00"},{endpoint:"https://cn3.mainnet.audiusindex.org",delegateOwnerWallet:"0x24C4b2cb6eC4c87a03F66723d8750dbe98Fa3e4f"},{endpoint:"https://audius-content-13.figment.io",delegateOwnerWallet:"0x33a2da466B14990E0124383204b06F9196f62d8e"},{endpoint:"https://audius-content-14.figment.io",delegateOwnerWallet:"0x817c513C1B702eA0BdD4F8C1204C60372f715006"},{endpoint:"https://cn4.mainnet.audiusindex.org",delegateOwnerWallet:"0x69e749266C59757dA81F8C659Be6B07ce5Bac6C9"},{endpoint:"https://audius-creator-1.theblueprint.xyz",delegateOwnerWallet:"0x0E0aF7035581C615d07372be16D99A9B64E5B2e9"},{endpoint:"https://audius-creator-2.theblueprint.xyz",delegateOwnerWallet:"0x3D0dD2Cd46c2658d228769f4a394662946A28987"},{endpoint:"https://audius-creator-3.theblueprint.xyz",delegateOwnerWallet:"0x292B0d5987a7DE879909C48a54f0853C211da5f3"},{endpoint:"https://audius-creator-4.theblueprint.xyz",delegateOwnerWallet:"0xA815f8108C2772D24D7DCB866c861148f043224D"},{endpoint:"https://audius-creator-5.theblueprint.xyz",delegateOwnerWallet:"0x65Fe5BEf65A0E0b0520d6beE7767ea6Da7f792f6"},{endpoint:"https://audius-creator-6.theblueprint.xyz",delegateOwnerWallet:"0x19B026B0f0Dbf619DBf8C4Efb0190308ace56366"},{endpoint:"https://creatornode.audius8.prod-eks-ap-northeast-1.staked.cloud",delegateOwnerWallet:"0xc69F344FCDbc9D747559c968562f682ABfBa442C"},{endpoint:"https://cn1.stuffisup.com",delegateOwnerWallet:"0x0D16f8bBfFF114B1a525Bf8b8d98ED177FA74AD3"},{endpoint:"https://audius-cn1.tikilabs.com",delegateOwnerWallet:"0x159200F84c2cF000b3A014cD4D8244500CCc36ca"},{endpoint:"https://audius-creator-7.theblueprint.xyz",delegateOwnerWallet:"0x720758adEa33433833c14e2516fA421261D0875e"},{endpoint:"https://cn1.shakespearetech.com",delegateOwnerWallet:"0x44955AD360652c302644F564B42D1458C584A4ec"},{endpoint:"https://cn2.shakespearetech.com",delegateOwnerWallet:"0x68835714d9c208f9d6F4953F0555507e492fd898"},{endpoint:"https://cn3.shakespearetech.com",delegateOwnerWallet:"0x7162Ee2b7F0cB9651fd2FA2838B0CAF225B2a8D3"},{endpoint:"https://audius-creator-8.theblueprint.xyz",delegateOwnerWallet:"0x078842E88B82e6a69549043269AE3aADD5581105"},{endpoint:"https://audius-creator-9.theblueprint.xyz",delegateOwnerWallet:"0x2DfC8152eF49e91b83638ad2bd0D2F9efC6f65b5"},{endpoint:"https://audius-creator-10.theblueprint.xyz",delegateOwnerWallet:"0x97BcBFA8289731d694440795094E831599Ab7A11"},{endpoint:"https://audius-creator-11.theblueprint.xyz",delegateOwnerWallet:"0xfe38c5Ea3579c9333fE302414fe1895F7a320beF"},{endpoint:"https://audius-creator-12.theblueprint.xyz",delegateOwnerWallet:"0x8C78ef541135e2cb037f91109fb8EE780fa4709d"},{endpoint:"https://audius-creator-13.theblueprint.xyz",delegateOwnerWallet:"0x75D2269D18C59CC2ED00a63a40367AC495E3F330"}],antiAbuseOracleNodes:{endpoints:["https://discoveryprovider.audius.co","https://audius-oracle.creatorseed.com","https://oracle.audius.endl.net"],registeredAddresses:["0x9811BA3eAB1F2Cd9A2dFeDB19e8c2a69729DC8b6","0xe60d50356cd891f56B744165fcc1D8B352201A76","0x7A03cFAE79266683D9706731D6E187868E939c9C"]},identityService:"https://identityservice.audius.co"},acdc:{entityManagerContractAddress:"0x1Cd8a543596D499B9b6E7a6eC15ECd2B7857Fd64",chainId:31524},solana:{claimableTokensProgramAddress:"Ewkv3JahEFRKkcJmpoKB7pXbnUHwjAyXiwEo4ZY2rezQ",rewardManagerProgramAddress:"DDZDcYdQFEMwcu2Mwo75yGFjJ1mUQyyXLWzhZLEVFcei",rewardManagerStateAddress:"71hWFVYokLaN1PNYzTAWi13EfJ7Xt9VbSWUKsXUT8mxE",paymentRouterProgramAddress:"paytYpX3LPN98TAeen6bFFeraGSuWnomZmCXjAsoqPa",stakingBridgeProgramAddress:"stkB5DZziVJT1C1VmzvDdRtdWxfs5nwcHViiaNBDK31",rpcEndpoint:"https://audius-fe.rpcpool.com",usdcTokenMint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",wAudioTokenMint:"9LzCMqDgTKYz9Drzqnpgee3SGa89up3a247ypMj2xrqM",bonkTokenMint:"DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263",rewardManagerLookupTableAddress:"4UQwpGupH66RgQrWRqmPM9Two6VJEE68VZ7GeqZ3mvVv"},ethereum:{rpcEndpoint:"https://eth-client.audius.co",addresses:{ethRewardsManagerAddress:"0x5aa6B99A2B461bA8E97207740f0A689C5C39C3b0",serviceProviderFactoryAddress:"0xD17A9bc90c582249e211a4f4b16721e7f65156c8",serviceTypeManagerAddress:"0x9EfB0f4F38aFbb4b0984D00C126E97E21b8417C5",audiusTokenAddress:"0x18aAA7115705e8be94bfFEBDE57Af9BFc265B998",audiusWormholeAddress:"0x6E7a1F7339bbB62b23D44797b63e4258d283E095",delegateManagerAddress:"0x4d7968ebfD390D5E7926Cb3587C39eFf2F9FB225",stakingAddress:"0xe6D97B2099F142513be7A2a068bE040656Ae4591"}}},stagingConfig={network:{minVersion:"0.6.0",apiEndpoint:"https://api.staging.audius.co",storageNodes:[{endpoint:"https://creatornode12.staging.audius.co",delegateOwnerWallet:"0x6b52969934076318863243fb92E9C4b3A08267b5"},{endpoint:"https://creatornode5.staging.audius.co",delegateOwnerWallet:"0xDC2BDF1F23381CA2eC9e9c70D4FD96CD8645D090"},{endpoint:"https://creatornode6.staging.audius.co",delegateOwnerWallet:"0x68039d001D87E7A5E6B06fe0825EA7871C1Cd6C2"},{endpoint:"https://creatornode7.staging.audius.co",delegateOwnerWallet:"0x1F8e7aF58086992Ef4c4fc0371446974BBbC0D9F"},{endpoint:"https://creatornode9.staging.audius.co",delegateOwnerWallet:"0x140eD283b33be2145ed7d9d15f1fE7bF1E0B2Ac3"},{endpoint:"https://creatornode11.staging.audius.co",delegateOwnerWallet:"0x4c88d2c0f4c4586b41621aD6e98882ae904B98f6"}],antiAbuseOracleNodes:{endpoints:["https://discoveryprovider.staging.audius.co"],registeredAddresses:["0x00b6462e955dA5841b6D9e1E2529B830F00f31Bf","0x57B57efFA54ba37DBF8A06B9c42E7611e84BDe6F","0xF617bbc0913bAE0a13f6D4A19eCDE5Aa07B0fF0A"]},identityService:"https://identityservice.staging.audius.co"},acdc:{entityManagerContractAddress:"0x1Cd8a543596D499B9b6E7a6eC15ECd2B7857Fd64",chainId:1056801},solana:{claimableTokensProgramAddress:"2sjQNmUfkV6yKKi4dPR8gWRgtyma5aiymE3aXL2RAZww",rewardManagerProgramAddress:"CDpzvz7DfgbF95jSSCHLX3ERkugyfgn9Fw8ypNZ1hfXp",rewardManagerStateAddress:"GaiG9LDYHfZGqeNaoGRzFEnLiwUT7WiC6sA6FDJX9ZPq",paymentRouterProgramAddress:"sp28KA2bTnTA4oSZ3r9tTSKfmiXZtZQHnYYQqWfUyVa",stakingBridgeProgramAddress:"stkuyR7dTzxV1YnoDo5tfuBmkuKn7zDatimYRDTmQvj",rpcEndpoint:"https://audius-fe.rpcpool.com",usdcTokenMint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",wAudioTokenMint:"BELGiMZQ34SDE6x2FUaML2UHDAgBLS64xvhXjX5tBBZo",bonkTokenMint:"DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263",rewardManagerLookupTableAddress:"ChFCWjeFxM6SRySTfT46zXn2K7m89TJsft4HWzEtkB4J"},ethereum:{rpcEndpoint:"https://eth-client.staging.audius.co",addresses:{ethRewardsManagerAddress:"0x563483ccD66a49Ca730275F8cf37Dd3E6Da864f1",serviceProviderFactoryAddress:"0x377BE01aD31360d0DFB16035A4515954395A8185",serviceTypeManagerAddress:"0x9fd76d2cD48022526F3a164541E6552291F4a862",audiusTokenAddress:"0x1376180Ee935AA64A27780F4BE97726Df7B0e2B2",audiusWormholeAddress:"0xf6f45e4d836da1d4ecd43bb1074620bfb0b7e0d7",delegateManagerAddress:"0xDA74d6FfbF268Ac441404f5a61f01103451E8697",stakingAddress:"0x5bcF21A4D5Bab9B0869B9c55D233f80135C814C6"}}},version$2="1.0.6";class BaseError$1 extends Error{constructor(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=r.cause instanceof BaseError$1?r.cause.details:null!==(t=r.cause)&&void 0!==t&&t.message?r.cause.message:r.details,i=r.cause instanceof BaseError$1&&r.cause.docsPath||r.docsPath;super([e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: https://abitype.dev${i}`]:[],...n?[`Details: ${n}`]:[],`Version: abitype@${version$2}`].join("\n")),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),r.cause&&(this.cause=r.cause),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.shortMessage=e}}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function execTyped(e,t){const r=e.exec(t);return null==r?void 0:r.groups}const bytesRegex$1=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,integerRegex$1=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,isTupleRegex=/^\(.+?\).*?$/;function _wrapRegExp$5(){_wrapRegExp$5=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,i){var a=RegExp(e,n);return t.set(a,i||t.get(e)),_setPrototypeOf(a,r.prototype)}function n(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){var i=n[r];if("number"==typeof i)t[r]=e[i];else{for(var a=0;void 0===e[i[a]]&&a+1<i.length;)a++;t[r]=e[i[a]]}return t}),Object.create(null))}return _inherits(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);if(r){r.groups=n(r,this);var i=r.indices;i&&(i.groups=n(i,this))}return r},r.prototype[Symbol.replace]=function(r,i){if("string"==typeof i){var a=t.get(this);return e[Symbol.replace].call(this,r,i.replace(/\$<([^>]+)(>|$)/g,(function(e,t,r){if(""===r)return e;var n=a[t];return Array.isArray(n)?"$"+n.join("$"):"number"==typeof n?"$"+n:""})))}if("function"==typeof i){var o=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(n(e,o)),i.apply(this,e)}))}return e[Symbol.replace].call(this,r,i)},_wrapRegExp$5.apply(this,arguments)}const tupleRegex=_wrapRegExp$5(/^tuple((\[(\d*)\])*)$/,{array:1});function formatAbiParameter(e){let t=e.type;if(tupleRegex.test(e.type)&&"components"in e){var r;t="(";const n=e.components.length;for(let r=0;r<n;r++){t+=formatAbiParameter(e.components[r]),r<n-1&&(t+=", ")}const i=execTyped(tupleRegex,e.type);return t+=`)${null!==(r=null==i?void 0:i.array)&&void 0!==r?r:""}`,formatAbiParameter({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function formatAbiParameters(e){let t="";const r=e.length;for(let n=0;n<r;n++){t+=formatAbiParameter(e[n]),n!==r-1&&(t+=", ")}return t}function formatAbiItem$1(e){return"function"===e.type?`function ${e.name}(${formatAbiParameters(e.inputs)})${e.stateMutability&&"nonpayable"!==e.stateMutability?` ${e.stateMutability}`:""}${e.outputs.length?` returns (${formatAbiParameters(e.outputs)})`:""}`:"event"===e.type?`event ${e.name}(${formatAbiParameters(e.inputs)})`:"error"===e.type?`error ${e.name}(${formatAbiParameters(e.inputs)})`:"constructor"===e.type?`constructor(${formatAbiParameters(e.inputs)})${"payable"===e.stateMutability?" payable":""}`:"fallback"===e.type?"fallback()":"receive() external payable"}function _wrapRegExp$4(){_wrapRegExp$4=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,i){var a=RegExp(e,n);return t.set(a,i||t.get(e)),_setPrototypeOf(a,r.prototype)}function n(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){var i=n[r];if("number"==typeof i)t[r]=e[i];else{for(var a=0;void 0===e[i[a]]&&a+1<i.length;)a++;t[r]=e[i[a]]}return t}),Object.create(null))}return _inherits(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);if(r){r.groups=n(r,this);var i=r.indices;i&&(i.groups=n(i,this))}return r},r.prototype[Symbol.replace]=function(r,i){if("string"==typeof i){var a=t.get(this);return e[Symbol.replace].call(this,r,i.replace(/\$<([^>]+)(>|$)/g,(function(e,t,r){if(""===r)return e;var n=a[t];return Array.isArray(n)?"$"+n.join("$"):"number"==typeof n?"$"+n:""})))}if("function"==typeof i){var o=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(n(e,o)),i.apply(this,e)}))}return e[Symbol.replace].call(this,r,i)},_wrapRegExp$4.apply(this,arguments)}const errorSignatureRegex=_wrapRegExp$4(/^error ([a-zA-Z$_][a-zA-Z0-9$_]*)\((.*?)\)$/,{name:1,parameters:2});function isErrorSignature(e){return errorSignatureRegex.test(e)}function execErrorSignature(e){return execTyped(errorSignatureRegex,e)}const eventSignatureRegex=_wrapRegExp$4(/^event ([a-zA-Z$_][a-zA-Z0-9$_]*)\((.*?)\)$/,{name:1,parameters:2});function isEventSignature(e){return eventSignatureRegex.test(e)}function execEventSignature(e){return execTyped(eventSignatureRegex,e)}const functionSignatureRegex=_wrapRegExp$4(/^function ([a-zA-Z$_][a-zA-Z0-9$_]*)\((.*?)\)(?: (external|public{1}))?(?: (pure|view|nonpayable|payable{1}))?(?: returns\s?\((.*?)\))?$/,{name:1,parameters:2,scope:3,stateMutability:4,returns:5});function isFunctionSignature(e){return functionSignatureRegex.test(e)}function execFunctionSignature(e){return execTyped(functionSignatureRegex,e)}const structSignatureRegex=_wrapRegExp$4(/^struct ([a-zA-Z$_][a-zA-Z0-9$_]*) \{(.*?)\}$/,{name:1,properties:2});function isStructSignature(e){return structSignatureRegex.test(e)}function execStructSignature(e){return execTyped(structSignatureRegex,e)}const constructorSignatureRegex=_wrapRegExp$4(/^constructor\((.*?)\)(?:\s(payable{1}))?$/,{parameters:1,stateMutability:2});function isConstructorSignature(e){return constructorSignatureRegex.test(e)}function execConstructorSignature(e){return execTyped(constructorSignatureRegex,e)}const fallbackSignatureRegex=_wrapRegExp$4(/^fallback\(\) external(?:\s(payable{1}))?$/,{stateMutability:1});function isFallbackSignature(e){return fallbackSignatureRegex.test(e)}const receiveSignatureRegex=/^receive\(\) external payable$/;function isReceiveSignature(e){return receiveSignatureRegex.test(e)}const eventModifiers=new Set(["indexed"]),functionModifiers=new Set(["calldata","memory","storage"]);class InvalidAbiItemError extends BaseError$1{constructor(e){let{signature:t}=e;super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class UnknownTypeError extends BaseError$1{constructor(e){let{type:t}=e;super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class UnknownSolidityTypeError extends BaseError$1{constructor(e){let{type:t}=e;super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class InvalidAbiParameterError extends BaseError$1{constructor(e){let{param:t}=e;super("Failed to parse ABI parameter.",{details:`parseAbiParameter(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiparameter-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParameterError"})}}class InvalidAbiParametersError extends BaseError$1{constructor(e){let{params:t}=e;super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class InvalidParameterError extends BaseError$1{constructor(e){let{param:t}=e;super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class SolidityProtectedKeywordError extends BaseError$1{constructor(e){let{param:t,name:r}=e;super("Invalid ABI parameter.",{details:t,metaMessages:[`"${r}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class InvalidModifierError extends BaseError$1{constructor(e){let{param:t,type:r,modifier:n}=e;super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${n}" not allowed${r?` in "${r}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class InvalidFunctionModifierError extends BaseError$1{constructor(e){let{param:t,type:r,modifier:n}=e;super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${n}" not allowed${r?` in "${r}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${n}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class InvalidAbiTypeParameterError extends BaseError$1{constructor(e){let{abiParameter:t}=e;super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class InvalidSignatureError extends BaseError$1{constructor(e){let{signature:t,type:r}=e;super(`Invalid ${r} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class UnknownSignatureError extends BaseError$1{constructor(e){let{signature:t}=e;super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class InvalidStructSignatureError extends BaseError$1{constructor(e){let{signature:t}=e;super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class CircularReferenceError extends BaseError$1{constructor(e){let{type:t}=e;super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class InvalidParenthesisError extends BaseError$1{constructor(e){let{current:t,depth:r}=e;super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${r>0?"opening":"closing"} parentheses.`],details:`Depth "${r}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function getParameterCacheKey(e,t){return t?`${t}:${e}`:e}const parameterCache=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function _wrapRegExp$3(){_wrapRegExp$3=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,i){var a=RegExp(e,n);return t.set(a,i||t.get(e)),_setPrototypeOf(a,r.prototype)}function n(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){var i=n[r];if("number"==typeof i)t[r]=e[i];else{for(var a=0;void 0===e[i[a]]&&a+1<i.length;)a++;t[r]=e[i[a]]}return t}),Object.create(null))}return _inherits(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);if(r){r.groups=n(r,this);var i=r.indices;i&&(i.groups=n(i,this))}return r},r.prototype[Symbol.replace]=function(r,i){if("string"==typeof i){var a=t.get(this);return e[Symbol.replace].call(this,r,i.replace(/\$<([^>]+)(>|$)/g,(function(e,t,r){if(""===r)return e;var n=a[t];return Array.isArray(n)?"$"+n.join("$"):"number"==typeof n?"$"+n:""})))}if("function"==typeof i){var o=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(n(e,o)),i.apply(this,e)}))}return e[Symbol.replace].call(this,r,i)},_wrapRegExp$3.apply(this,arguments)}function parseSignature$1(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(isFunctionSignature(e)){var r;const n=execFunctionSignature(e);if(!n)throw new InvalidSignatureError({signature:e,type:"function"});const i=splitParameters(n.parameters),a=[],o=i.length;for(let e=0;e<o;e++)a.push(parseAbiParameter(i[e],{modifiers:functionModifiers,structs:t,type:"function"}));const s=[];if(n.returns){const e=splitParameters(n.returns),r=e.length;for(let n=0;n<r;n++)s.push(parseAbiParameter(e[n],{modifiers:functionModifiers,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:null!==(r=n.stateMutability)&&void 0!==r?r:"nonpayable",inputs:a,outputs:s}}if(isEventSignature(e)){const r=execEventSignature(e);if(!r)throw new InvalidSignatureError({signature:e,type:"event"});const n=splitParameters(r.parameters),i=[],a=n.length;for(let e=0;e<a;e++)i.push(parseAbiParameter(n[e],{modifiers:eventModifiers,structs:t,type:"event"}));return{name:r.name,type:"event",inputs:i}}if(isErrorSignature(e)){const r=execErrorSignature(e);if(!r)throw new InvalidSignatureError({signature:e,type:"error"});const n=splitParameters(r.parameters),i=[],a=n.length;for(let e=0;e<a;e++)i.push(parseAbiParameter(n[e],{structs:t,type:"error"}));return{name:r.name,type:"error",inputs:i}}if(isConstructorSignature(e)){var n;const r=execConstructorSignature(e);if(!r)throw new InvalidSignatureError({signature:e,type:"constructor"});const i=splitParameters(r.parameters),a=[],o=i.length;for(let e=0;e<o;e++)a.push(parseAbiParameter(i[e],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:null!==(n=r.stateMutability)&&void 0!==n?n:"nonpayable",inputs:a}}if(isFallbackSignature(e))return{type:"fallback"};if(isReceiveSignature(e))return{type:"receive",stateMutability:"payable"};throw new UnknownSignatureError({signature:e})}const abiParameterWithoutTupleRegex=_wrapRegExp$3(/^([a-zA-Z$_][a-zA-Z0-9$_]*)((?:\[\d*?\])+?)?(?:\s(calldata|indexed|memory|storage{1}))?(?:\s([a-zA-Z$_][a-zA-Z0-9$_]*))?$/,{type:1,array:2,modifier:3,name:4}),abiParameterWithTupleRegex=_wrapRegExp$3(/^\((.+?)\)((?:\[\d*?\])+?)?(?:\s(calldata|indexed|memory|storage{1}))?(?:\s([a-zA-Z$_][a-zA-Z0-9$_]*))?$/,{type:1,array:2,modifier:3,name:4}),dynamicIntegerRegex=/^u?int$/;function parseAbiParameter(e,t){var r,n;const i=getParameterCacheKey(e,null==t?void 0:t.type);if(parameterCache.has(i))return parameterCache.get(i);const a=isTupleRegex.test(e),o=execTyped(a?abiParameterWithTupleRegex:abiParameterWithoutTupleRegex,e);if(!o)throw new InvalidParameterError({param:e});if(o.name&&isSolidityKeyword(o.name))throw new SolidityProtectedKeywordError({param:e,name:o.name});const s=o.name?{name:o.name}:{},u="indexed"===o.modifier?{indexed:!0}:{},c=null!==(r=null==t?void 0:t.structs)&&void 0!==r?r:{};let d,l={};if(a){d="tuple";const e=splitParameters(o.type),t=[],r=e.length;for(let n=0;n<r;n++)t.push(parseAbiParameter(e[n],{structs:c}));l={components:t}}else if(o.type in c)d="tuple",l={components:c[o.type]};else if(dynamicIntegerRegex.test(o.type))d=`${o.type}256`;else if(d=o.type,"struct"!==(null==t?void 0:t.type)&&!isSolidityType(d))throw new UnknownSolidityTypeError({type:d});if(o.modifier){var p,h;if(null==t||null===(p=t.modifiers)||void 0===p||null===(h=p.has)||void 0===h||!h.call(p,o.modifier))throw new InvalidModifierError({param:e,type:null==t?void 0:t.type,modifier:o.modifier});if(functionModifiers.has(o.modifier)&&!isValidDataLocation(d,!!o.array))throw new InvalidFunctionModifierError({param:e,type:null==t?void 0:t.type,modifier:o.modifier})}const f={type:`${d}${null!==(n=o.array)&&void 0!==n?n:""}`,...s,...u,...l};return parameterCache.set(i,f),f}function splitParameters(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=e.trim().length;for(let a=0;a<i;a++){const i=e[a],o=e.slice(a+1);switch(i){case",":return 0===n?splitParameters(o,[...t,r.trim()]):splitParameters(o,t,`${r}${i}`,n);case"(":return splitParameters(o,t,`${r}${i}`,n+1);case")":return splitParameters(o,t,`${r}${i}`,n-1);default:return splitParameters(o,t,`${r}${i}`,n)}}if(""===r)return t;if(0!==n)throw new InvalidParenthesisError({current:r,depth:n});return t.push(r.trim()),t}function isSolidityType(e){return"address"===e||"bool"===e||"function"===e||"string"===e||bytesRegex$1.test(e)||integerRegex$1.test(e)}const protectedKeywordsRegex=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function isSolidityKeyword(e){return"address"===e||"bool"===e||"function"===e||"string"===e||"tuple"===e||bytesRegex$1.test(e)||integerRegex$1.test(e)||protectedKeywordsRegex.test(e)}function isValidDataLocation(e,t){return t||"bytes"===e||"string"===e||"tuple"===e}function _wrapRegExp$2(){_wrapRegExp$2=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,i){var a=RegExp(e,n);return t.set(a,i||t.get(e)),_setPrototypeOf(a,r.prototype)}function n(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){var i=n[r];if("number"==typeof i)t[r]=e[i];else{for(var a=0;void 0===e[i[a]]&&a+1<i.length;)a++;t[r]=e[i[a]]}return t}),Object.create(null))}return _inherits(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);if(r){r.groups=n(r,this);var i=r.indices;i&&(i.groups=n(i,this))}return r},r.prototype[Symbol.replace]=function(r,i){if("string"==typeof i){var a=t.get(this);return e[Symbol.replace].call(this,r,i.replace(/\$<([^>]+)(>|$)/g,(function(e,t,r){if(""===r)return e;var n=a[t];return Array.isArray(n)?"$"+n.join("$"):"number"==typeof n?"$"+n:""})))}if("function"==typeof i){var o=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(n(e,o)),i.apply(this,e)}))}return e[Symbol.replace].call(this,r,i)},_wrapRegExp$2.apply(this,arguments)}function parseStructs(e){const t={},r=e.length;for(let n=0;n<r;n++){const r=e[n];if(!isStructSignature(r))continue;const i=execStructSignature(r);if(!i)throw new InvalidSignatureError({signature:r,type:"struct"});const a=i.properties.split(";"),o=[],s=a.length;for(let e=0;e<s;e++){const t=a[e].trim();if(!t)continue;const r=parseAbiParameter(t,{type:"struct"});o.push(r)}if(!o.length)throw new InvalidStructSignatureError({signature:r});t[i.name]=o}const n={},i=Object.entries(t),a=i.length;for(let e=0;e<a;e++){const[r,a]=i[e];n[r]=resolveStructs(a,t)}return n}const typeWithoutTupleRegex=_wrapRegExp$2(/^([a-zA-Z$_][a-zA-Z0-9$_]*)((?:\[\d*?\])+?)?$/,{type:1,array:2});function resolveStructs(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const n=[],i=e.length;for(let o=0;o<i;o++){const i=e[o];if(isTupleRegex.test(i.type))n.push(i);else{const e=execTyped(typeWithoutTupleRegex,i.type);if(null==e||!e.type)throw new InvalidAbiTypeParameterError({abiParameter:i});const{array:o,type:s}=e;if(s in t){var a;if(r.has(s))throw new CircularReferenceError({type:s});n.push({...i,type:`tuple${null!=o?o:""}`,components:resolveStructs(null!==(a=t[s])&&void 0!==a?a:[],t,new Set([...r,s]))})}else{if(!isSolidityType(s))throw new UnknownTypeError({type:s});n.push(i)}}}return n}function parseAbi(e){const t=parseStructs(e),r=[],n=e.length;for(let i=0;i<n;i++){const n=e[i];isStructSignature(n)||r.push(parseSignature$1(n,t))}return r}function getAction(e,t,r){const n=e[t.name];if("function"==typeof n)return n;const i=e[r];return"function"==typeof i?i:r=>t(e,r)}function formatAbiItem(e){let{includeName:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new InvalidDefinitionTypeError(e.type);return`${e.name}(${formatAbiParams(e.inputs,{includeName:t})})`}function formatAbiParams(e){let{includeName:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?e.map((e=>formatAbiParam(e,{includeName:t}))).join(t?", ":","):""}function formatAbiParam(e,t){let{includeName:r}=t;return e.type.startsWith("tuple")?`(${formatAbiParams(e.components,{includeName:r})})${e.type.slice(5)}`:e.type+(r&&e.name?` ${e.name}`:"")}function isHex(e){let{strict:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!!e&&("string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}function size$1(e){return isHex(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const version$1="2.21.21";let errorConfig={getDocsUrl:e=>{let{docsBaseUrl:t,docsPath:r="",docsSlug:n}=e;return r?`${null!=t?t:"https://viem.sh"}${r}${n?`#${n}`:""}`:void 0},version:version$1};class BaseError extends Error{constructor(e){var t,r,n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=i.cause instanceof BaseError?i.cause.details:null!==(o=i.cause)&&void 0!==o&&o.message?i.cause.message:i.details;var o;const s=i.cause instanceof BaseError&&i.cause.docsPath||i.docsPath,u=null===(t=(r=errorConfig).getDocsUrl)||void 0===t?void 0:t.call(r,{...i,docsPath:s});super([e||"An error occurred.","",...i.metaMessages?[...i.metaMessages,""]:[],...u?[`Docs: ${u}`]:[],...a?[`Details: ${a}`]:[],...errorConfig.version?[`Version: ${errorConfig.version}`]:[]].join("\n"),i.cause?{cause:i.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=a,this.docsPath=s,this.metaMessages=i.metaMessages,this.name=null!==(n=i.name)&&void 0!==n?n:this.name,this.shortMessage=e,this.version=version$1}walk(e){return walk(this,e)}}function walk(e,t){return null!=t&&t(e)?e:e&&"object"==typeof e&&"cause"in e?walk(e.cause,t):t?null:e}class AbiConstructorNotFoundError extends BaseError{constructor(e){let{docsPath:t}=e;super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join("\n"),{docsPath:t,name:"AbiConstructorNotFoundError"})}}class AbiConstructorParamsNotFoundError extends BaseError{constructor(e){let{docsPath:t}=e;super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join("\n"),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}}class AbiDecodingDataSizeTooSmallError extends BaseError{constructor(e){let{data:t,params:r,size:n}=e;super([`Data size of ${n} bytes is too small for given parameters.`].join("\n"),{metaMessages:[`Params: (${formatAbiParams(r,{includeName:!0})})`,`Data:   ${t} (${n} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=r,this.size=n}}class AbiDecodingZeroDataError extends BaseError{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class AbiEncodingArrayLengthMismatchError extends BaseError{constructor(e){let{expectedLength:t,givenLength:r,type:n}=e;super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${t}`,`Given length: ${r}`].join("\n"),{name:"AbiEncodingArrayLengthMismatchError"})}}class AbiEncodingBytesSizeMismatchError extends BaseError{constructor(e){let{expectedSize:t,value:r}=e;super(`Size of bytes "${r}" (bytes${size$1(r)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class AbiEncodingLengthMismatchError extends BaseError{constructor(e){let{expectedLength:t,givenLength:r}=e;super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${r}`].join("\n"),{name:"AbiEncodingLengthMismatchError"})}}class AbiErrorSignatureNotFoundError extends BaseError{constructor(e,t){let{docsPath:r}=t;super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:r,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class AbiEventSignatureEmptyTopicsError extends BaseError{constructor(e){let{docsPath:t}=e;super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class AbiEventSignatureNotFoundError extends BaseError{constructor(e,t){let{docsPath:r}=t;super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:r,name:"AbiEventSignatureNotFoundError"})}}class AbiEventNotFoundError extends BaseError{constructor(e){let{docsPath:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join("\n"),{docsPath:t,name:"AbiEventNotFoundError"})}}class AbiFunctionNotFoundError extends BaseError{constructor(e){let{docsPath:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t,name:"AbiFunctionNotFoundError"})}}class AbiFunctionOutputsNotFoundError extends BaseError{constructor(e,t){let{docsPath:r}=t;super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:r,name:"AbiFunctionOutputsNotFoundError"})}}class AbiFunctionSignatureNotFoundError extends BaseError{constructor(e,t){let{docsPath:r}=t;super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:r,name:"AbiFunctionSignatureNotFoundError"})}}class AbiItemAmbiguityError extends BaseError{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${formatAbiItem(e.abiItem)}\`, and`,`\`${t.type}\` in \`${formatAbiItem(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class BytesSizeMismatchError extends BaseError{constructor(e){let{expectedSize:t,givenSize:r}=e;super(`Expected bytes${t}, got bytes${r}.`,{name:"BytesSizeMismatchError"})}}class DecodeLogDataMismatch extends BaseError{constructor(e){let{abiItem:t,data:r,params:n,size:i}=e;super([`Data size of ${i} bytes is too small for non-indexed event parameters.`].join("\n"),{metaMessages:[`Params: (${formatAbiParams(n,{includeName:!0})})`,`Data:   ${r} (${i} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=r,this.params=n,this.size=i}}class DecodeLogTopicsMismatch extends BaseError{constructor(e){let{abiItem:t,param:r}=e;super([`Expected a topic for indexed event parameter${r.name?` "${r.name}"`:""} on event "${formatAbiItem(t,{includeName:!0})}".`].join("\n"),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class InvalidAbiEncodingTypeError extends BaseError{constructor(e,t){let{docsPath:r}=t;super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:r,name:"InvalidAbiEncodingType"})}}class InvalidAbiDecodingTypeError extends BaseError{constructor(e,t){let{docsPath:r}=t;super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:r,name:"InvalidAbiDecodingType"})}}class InvalidArrayError extends BaseError{constructor(e){super([`Value "${e}" is not a valid array.`].join("\n"),{name:"InvalidArrayError"})}}class InvalidDefinitionTypeError extends BaseError{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join("\n"),{name:"InvalidDefinitionTypeError"})}}class FilterTypeNotSupportedError extends BaseError{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}class SliceOffsetOutOfBoundsError extends BaseError{constructor(e){let{offset:t,position:r,size:n}=e;super(`Slice ${"start"===r?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}}class SizeExceedsPaddingSizeError extends BaseError{constructor(e){let{size:t,targetSize:r,type:n}=e;super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${t}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}class InvalidBytesLengthError extends BaseError{constructor(e){let{size:t,targetSize:r,type:n}=e;super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${r} ${n} long, but is ${t} ${n} long.`,{name:"InvalidBytesLengthError"})}}function pad(e){let{dir:t,size:r=32}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e?padHex(e,{dir:t,size:r}):padBytes(e,{dir:t,size:r})}function padHex(e){let{dir:t,size:r=32}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===r)return e;const n=e.replace("0x","");if(n.length>2*r)throw new SizeExceedsPaddingSizeError({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n["right"===t?"padEnd":"padStart"](2*r,"0")}`}function padBytes(e){let{dir:t,size:r=32}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===r)return e;if(e.length>r)throw new SizeExceedsPaddingSizeError({size:e.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const a="right"===t;n[a?i:r-i-1]=e[a?i:e.length-i-1]}return n}class IntegerOutOfRangeError extends BaseError{constructor(e){let{max:t,min:r,signed:n,size:i,value:a}=e;super(`Number "${a}" is not in safe ${i?`${8*i}-bit ${n?"signed":"unsigned"} `:""}integer range ${t?`(${r} to ${t})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class InvalidBytesBooleanError extends BaseError{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class SizeOverflowError extends BaseError{constructor(e){let{givenSize:t,maxSize:r}=e;super(`Size cannot exceed ${r} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}function trim$1(e){let{dir:t="left"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="string"==typeof e?e.replace("0x",""):e,n=0;for(let e=0;e<r.length-1&&"0"===r["left"===t?e:r.length-e-1].toString();e++)n++;return r="left"===t?r.slice(n):r.slice(0,r.length-n),"string"==typeof e?(1===r.length&&"right"===t&&(r=`${r}0`),`0x${r.length%2==1?`0${r}`:r}`):r}function assertSize(e,t){let{size:r}=t;if(size$1(e)>r)throw new SizeOverflowError({givenSize:size$1(e),maxSize:r})}function hexToBigInt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{signed:r}=t;t.size&&assertSize(e,{size:t.size});const n=BigInt(e);if(!r)return n;const i=(e.length-2)/2;return n<=(1n<<8n*BigInt(i)-1n)-1n?n:n-BigInt(`0x${"f".padStart(2*i,"f")}`)-1n}function hexToNumber$3(e){return Number(hexToBigInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}function hexToString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=hexToBytes$3(e);return t.size&&(assertSize(r,{size:t.size}),r=trim$1(r,{dir:"right"})),(new TextDecoder).decode(r)}const hexes$4=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function toHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"==typeof e||"bigint"==typeof e?numberToHex(e,t):"string"==typeof e?stringToHex(e,t):"boolean"==typeof e?boolToHex(e,t):bytesToHex$4(e,t)}function boolToHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=`0x${Number(e)}`;return"number"==typeof t.size?(assertSize(r,{size:t.size}),pad(r,{size:t.size})):r}function bytesToHex$4(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="";for(let t=0;t<e.length;t++)r+=hexes$4[e[t]];const n=`0x${r}`;return"number"==typeof t.size?(assertSize(n,{size:t.size}),pad(n,{dir:"right",size:t.size})):n}function numberToHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{signed:r,size:n}=t,i=BigInt(e);let a;n?a=r?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(a=BigInt(Number.MAX_SAFE_INTEGER));const o="bigint"==typeof a&&r?-a-1n:0;if(a&&i>a||i<o){const t="bigint"==typeof e?"n":"";throw new IntegerOutOfRangeError({max:a?`${a}${t}`:void 0,min:`${o}${t}`,signed:r,size:n,value:`${e}${t}`})}const s=`0x${(r&&i<0?(1n<<BigInt(8*n))+BigInt(i):i).toString(16)}`;return n?pad(s,{size:n}):s}const encoder$3=new TextEncoder;function stringToHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return bytesToHex$4(encoder$3.encode(e),t)}const encoder$2=new TextEncoder;function toBytes$4(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"==typeof e||"bigint"==typeof e?numberToBytes(e,t):"boolean"==typeof e?boolToBytes(e,t):isHex(e)?hexToBytes$3(e,t):stringToBytes$2(e,t)}function boolToBytes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new Uint8Array(1);return r[0]=Number(e),"number"==typeof t.size?(assertSize(r,{size:t.size}),pad(r,{size:t.size})):r}const charCodeMap={zero:48,nine:57,A:65,F:70,a:97,f:102};function charCodeToBase16(e){return e>=charCodeMap.zero&&e<=charCodeMap.nine?e-charCodeMap.zero:e>=charCodeMap.A&&e<=charCodeMap.F?e-(charCodeMap.A-10):e>=charCodeMap.a&&e<=charCodeMap.f?e-(charCodeMap.a-10):void 0}function hexToBytes$3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e;t.size&&(assertSize(r,{size:t.size}),r=pad(r,{dir:"right",size:t.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,a=new Uint8Array(i);for(let e=0,t=0;e<i;e++){const r=charCodeToBase16(n.charCodeAt(t++)),i=charCodeToBase16(n.charCodeAt(t++));if(void 0===r||void 0===i)throw new BaseError(`Invalid byte sequence ("${n[t-2]}${n[t-1]}" in "${n}").`);a[e]=16*r+i}return a}function numberToBytes(e,t){return hexToBytes$3(numberToHex(e,t))}function stringToBytes$2(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=encoder$2.encode(e);return"number"==typeof t.size?(assertSize(r,{size:t.size}),pad(r,{dir:"right",size:t.size})):r}function number$3(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function isBytes$3(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function bytes$2(e){if(!isBytes$3(e))throw new Error("Uint8Array expected");for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(r.length>0&&!r.includes(e.length))throw new Error(`Uint8Array expected of length ${r}, not of length=${e.length}`)}function hash$2(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");number$3(e.outputLen),number$3(e.blockLen)}function exists$4(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function output$2(e,t){bytes$2(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const U32_MASK64$2=BigInt(2**32-1),_32n$2=BigInt(32);function fromBig$2(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&U32_MASK64$2),l:Number(e>>_32n$2&U32_MASK64$2)}:{h:0|Number(e>>_32n$2&U32_MASK64$2),l:0|Number(e&U32_MASK64$2)}}function split$2(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:a,l:o}=fromBig$2(e[i],t);[r[i],n[i]]=[a,o]}return[r,n]}const rotlSH$2=(e,t,r)=>e<<r|t>>>32-r,rotlSL$2=(e,t,r)=>t<<r|e>>>32-r,rotlBH$2=(e,t,r)=>t<<r-32|e>>>64-r,rotlBL$2=(e,t,r)=>e<<r-32|t>>>64-r,crypto$4="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,u32$4=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),createView$3=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),rotr$3=(e,t)=>e<<32-t|e>>>t,isLE$3=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],byteSwap$1=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function byteSwap32$1(e){for(let t=0;t<e.length;t++)e[t]=byteSwap$1(e[t])}function utf8ToBytes$5(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function toBytes$3(e){return"string"==typeof e&&(e=utf8ToBytes$5(e)),bytes$2(e),e}function concatBytes$6(){let e=0;for(let t=0;t<arguments.length;t++){const r=t<0||arguments.length<=t?void 0:arguments[t];bytes$2(r),e+=r.length}const t=new Uint8Array(e);for(let e=0,r=0;e<arguments.length;e++){const n=e<0||arguments.length<=e?void 0:arguments[e];t.set(n,r),r+=n.length}return t}class Hash$5{clone(){return this._cloneInto()}}function wrapConstructor$3(e){const t=t=>e().update(toBytes$3(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function randomBytes$2(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(crypto$4&&"function"==typeof crypto$4.getRandomValues)return crypto$4.getRandomValues(new Uint8Array(e));if(crypto$4&&"function"==typeof crypto$4.randomBytes)return crypto$4.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const SHA3_PI$2=[],SHA3_ROTL$2=[],_SHA3_IOTA$2=[],_0n$d=BigInt(0),_1n$f=BigInt(1),_2n$c=BigInt(2),_7n$2=BigInt(7),_256n$2=BigInt(256),_0x71n$2=BigInt(113);for(let e=0,t=_1n$f,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],SHA3_PI$2.push(2*(5*n+r)),SHA3_ROTL$2.push((e+1)*(e+2)/2%64);let i=_0n$d;for(let e=0;e<7;e++)t=(t<<_1n$f^(t>>_7n$2)*_0x71n$2)%_256n$2,t&_2n$c&&(i^=_1n$f<<(_1n$f<<BigInt(e))-_1n$f);_SHA3_IOTA$2.push(i)}const[SHA3_IOTA_H$2,SHA3_IOTA_L$2]=split$2(_SHA3_IOTA$2,!0),rotlH$2=(e,t,r)=>r>32?rotlBH$2(e,t,r):rotlSH$2(e,t,r),rotlL$2=(e,t,r)=>r>32?rotlBL$2(e,t,r):rotlSL$2(e,t,r);function keccakP$2(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,a=r[i],o=r[i+1],s=rotlH$2(a,o,1)^r[n],u=rotlL$2(a,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=s,e[t+r+1]^=u}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=SHA3_ROTL$2[r],a=rotlH$2(t,i,n),o=rotlL$2(t,i,n),s=SHA3_PI$2[r];t=e[s],i=e[s+1],e[s]=a,e[s+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=SHA3_IOTA_H$2[n],e[1]^=SHA3_IOTA_L$2[n]}r.fill(0)}class Keccak$2 extends Hash$5{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,number$3(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=u32$4(this.state)}keccak(){isLE$3||byteSwap32$1(this.state32),keccakP$2(this.state32,this.rounds),isLE$3||byteSwap32$1(this.state32),this.posOut=0,this.pos=0}update(e){exists$4(this);const{blockLen:t,state:r}=this,n=(e=toBytes$3(e)).length;for(let i=0;i<n;){const a=Math.min(t-this.pos,n-i);for(let t=0;t<a;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!=(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){exists$4(this,!1),bytes$2(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return number$3(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(output$2(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:a}=this;return e||(e=new Keccak$2(t,r,n,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=a,e.destroyed=this.destroyed,e}}const gen$2=(e,t,r)=>wrapConstructor$3((()=>new Keccak$2(t,e,r))),keccak_256$2=gen$2(1,136,32);function keccak256(e,t){const r=t||"hex",n=keccak_256$2(isHex(e,{strict:!1})?toBytes$4(e):e);return"bytes"===r?n:toHex(n)}const hash$1=e=>keccak256(toBytes$4(e));function hashSignature(e){return hash$1(e)}function normalizeSignature$1(e){let t=!0,r="",n=0,i="",a=!1;for(let o=0;o<e.length;o++){const s=e[o];if(["(",")",","].includes(s)&&(t=!0),"("===s&&n++,")"===s&&n--,t)if(0!==n)" "!==s?(i+=s,r+=s):","!==e[o-1]&&","!==r&&",("!==r&&(r="",t=!1);else if(" "===s&&["event","function",""].includes(i))i="";else if(i+=s,")"===s){a=!0;break}}if(!a)throw new BaseError("Unable to normalize signature.");return i}const toSignature=e=>normalizeSignature$1("string"==typeof e?e:formatAbiItem$1(e));function toSignatureHash(e){return hashSignature(toSignature(e))}const toEventSelector=toSignatureHash;class InvalidAddressError extends BaseError{constructor(e){let{address:t}=e;super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class LruMap extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const checksumAddressCache=new LruMap(8192);function checksumAddress(e,t){if(checksumAddressCache.has(`${e}.${t}`))return checksumAddressCache.get(`${e}.${t}`);const r=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),n=keccak256(stringToBytes$2(r),"bytes"),i=(t?r.substring(`${t}0x`.length):r).split("");for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&i[e]&&(i[e]=i[e].toUpperCase()),(15&n[e>>1])>=8&&i[e+1]&&(i[e+1]=i[e+1].toUpperCase());const a=`0x${i.join("")}`;return checksumAddressCache.set(`${e}.${t}`,a),a}function getAddress(e,t){if(!isAddress(e,{strict:!1}))throw new InvalidAddressError({address:e});return checksumAddress(e,t)}const addressRegex=/^0x[a-fA-F0-9]{40}$/,isAddressCache=new LruMap(8192);function isAddress(e,t){const{strict:r=!0}=null!=t?t:{},n=`${e}.${r}`;if(isAddressCache.has(n))return isAddressCache.get(n);const i=!(!addressRegex.test(e)||e.toLowerCase()!==e&&r&&checksumAddress(e)!==e);return isAddressCache.set(n,i),i}function concat(e){return"string"==typeof e[0]?concatHex(e):concatBytes$5(e)}function concatBytes$5(e){let t=0;for(const r of e)t+=r.length;const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}function concatHex(e){return`0x${e.reduce(((e,t)=>e+t.replace("0x","")),"")}`}function slice(e,t,r){let{strict:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return isHex(e,{strict:!1})?sliceHex(e,t,r,{strict:n}):sliceBytes(e,t,r,{strict:n})}function assertStartOffset(e,t){if("number"==typeof t&&t>0&&t>size$1(e)-1)throw new SliceOffsetOutOfBoundsError({offset:t,position:"start",size:size$1(e)})}function assertEndOffset(e,t,r){if("number"==typeof t&&"number"==typeof r&&size$1(e)!==r-t)throw new SliceOffsetOutOfBoundsError({offset:r,position:"end",size:size$1(e)})}function sliceBytes(e,t,r){let{strict:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};assertStartOffset(e,t);const i=e.slice(t,r);return n&&assertEndOffset(i,t,r),i}function sliceHex(e,t,r){let{strict:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};assertStartOffset(e,t);const i=`0x${e.replace("0x","").slice(2*(null!=t?t:0),2*(null!=r?r:e.length))}`;return n&&assertEndOffset(i,t,r),i}function encodeAbiParameters(e,t){if(e.length!==t.length)throw new AbiEncodingLengthMismatchError({expectedLength:e.length,givenLength:t.length});const r=encodeParams(prepareParams({params:e,values:t}));return 0===r.length?"0x":r}function prepareParams(e){let{params:t,values:r}=e;const n=[];for(let e=0;e<t.length;e++)n.push(prepareParam({param:t[e],value:r[e]}));return n}function prepareParam(e){let{param:t,value:r}=e;const n=getArrayComponents(t.type);if(n){const[e,i]=n;return encodeArray(r,{length:e,param:{...t,type:i}})}if("tuple"===t.type)return encodeTuple(r,{param:t});if("address"===t.type)return encodeAddress(r);if("bool"===t.type)return encodeBool(r);if(t.type.startsWith("uint")||t.type.startsWith("int")){return encodeNumber(r,{signed:t.type.startsWith("int")})}if(t.type.startsWith("bytes"))return encodeBytes(r,{param:t});if("string"===t.type)return encodeString(r);throw new InvalidAbiEncodingTypeError(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function encodeParams(e){let t=0;for(let r=0;r<e.length;r++){const{dynamic:n,encoded:i}=e[r];t+=n?32:size$1(i)}const r=[],n=[];let i=0;for(let a=0;a<e.length;a++){const{dynamic:o,encoded:s}=e[a];o?(r.push(numberToHex(t+i,{size:32})),n.push(s),i+=size$1(s)):r.push(s)}return concat([...r,...n])}function encodeAddress(e){if(!isAddress(e))throw new InvalidAddressError({address:e});return{dynamic:!1,encoded:padHex(e.toLowerCase())}}function encodeArray(e,t){let{length:r,param:n}=t;const i=null===r;if(!Array.isArray(e))throw new InvalidArrayError(e);if(!i&&e.length!==r)throw new AbiEncodingArrayLengthMismatchError({expectedLength:r,givenLength:e.length,type:`${n.type}[${r}]`});let a=!1;const o=[];for(let t=0;t<e.length;t++){const r=prepareParam({param:n,value:e[t]});r.dynamic&&(a=!0),o.push(r)}if(i||a){const e=encodeParams(o);if(i){const t=numberToHex(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?concat([t,e]):t}}if(a)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:concat(o.map((e=>{let{encoded:t}=e;return t})))}}function encodeBytes(e,t){let{param:r}=t;const[,n]=r.type.split("bytes"),i=size$1(e);if(!n){let t=e;return i%32!=0&&(t=padHex(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:concat([padHex(numberToHex(i,{size:32})),t])}}if(i!==Number.parseInt(n))throw new AbiEncodingBytesSizeMismatchError({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:padHex(e,{dir:"right"})}}function encodeBool(e){if("boolean"!=typeof e)throw new BaseError(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:padHex(boolToHex(e))}}function encodeNumber(e,t){let{signed:r}=t;return{dynamic:!1,encoded:numberToHex(e,{size:32,signed:r})}}function encodeString(e){const t=stringToHex(e),r=Math.ceil(size$1(t)/32),n=[];for(let e=0;e<r;e++)n.push(padHex(slice(t,32*e,32*(e+1)),{dir:"right"}));return{dynamic:!0,encoded:concat([padHex(numberToHex(size$1(t),{size:32})),...n])}}function encodeTuple(e,t){let{param:r}=t,n=!1;const i=[];for(let t=0;t<r.components.length;t++){const a=r.components[t],o=prepareParam({param:a,value:e[Array.isArray(e)?t:a.name]});i.push(o),o.dynamic&&(n=!0)}return{dynamic:n,encoded:n?encodeParams(i):concat(i.map((e=>{let{encoded:t}=e;return t})))}}function getArrayComponents(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const toFunctionSelector=e=>slice(toSignatureHash(e),0,4);function getAbiItem(e){const{abi:t,args:r=[],name:n}=e,i=isHex(n,{strict:!1}),a=t.filter((e=>i?"function"===e.type?toFunctionSelector(e)===n:"event"===e.type&&toEventSelector(e)===n:"name"in e&&e.name===n));if(0===a.length)return;if(1===a.length)return a[0];let o;for(const e of a){if(!("inputs"in e))continue;if(!r||0===r.length){if(!e.inputs||0===e.inputs.length)return e;continue}if(!e.inputs)continue;if(0===e.inputs.length)continue;if(e.inputs.length!==r.length)continue;const t=r.every(((t,r)=>{const n="inputs"in e&&e.inputs[r];return!!n&&isArgOfType(t,n)}));if(t){if(o&&"inputs"in o&&o.inputs){const t=getAmbiguousTypes(e.inputs,o.inputs,r);if(t)throw new AbiItemAmbiguityError({abiItem:e,type:t[0]},{abiItem:o,type:t[1]})}o=e}}return o||a[0]}function isArgOfType(e,t){const r=typeof e,n=t.type;switch(n){case"address":return isAddress(e,{strict:!1});case"bool":return"boolean"===r;case"function":case"string":return"string"===r;default:return"tuple"===n&&"components"in t?Object.values(t.components).every(((t,r)=>isArgOfType(Object.values(e)[r],t))):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(n)?"number"===r||"bigint"===r:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(n)?"string"===r||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(n)&&(Array.isArray(e)&&e.every((e=>isArgOfType(e,{...t,type:n.replace(/(\[[0-9]{0,}\])$/,"")}))))}}function getAmbiguousTypes(e,t,r){for(const n in e){const i=e[n],a=t[n];if("tuple"===i.type&&"tuple"===a.type&&"components"in i&&"components"in a)return getAmbiguousTypes(i.components,a.components,r[n]);const o=[i.type,a.type];if(!(!o.includes("address")||!o.includes("bytes20"))||(o.includes("address")&&o.includes("string")||!(!o.includes("address")||!o.includes("bytes")))&&isAddress(r[n],{strict:!1}))return o}}const docsPath$4="/docs/contract/encodeEventTopics";function encodeEventTopics(e){const{abi:t,eventName:r,args:n}=e;let i=t[0];if(r){const e=getAbiItem({abi:t,name:r});if(!e)throw new AbiEventNotFoundError(r,{docsPath:docsPath$4});i=e}if("event"!==i.type)throw new AbiEventNotFoundError(void 0,{docsPath:docsPath$4});const a=formatAbiItem(i),o=toEventSelector(a);let s=[];if(n&&"inputs"in i){var u,c;const e=null===(u=i.inputs)||void 0===u?void 0:u.filter((e=>"indexed"in e&&e.indexed)),t=Array.isArray(n)?n:Object.values(n).length>0&&null!==(c=null==e?void 0:e.map((e=>n[e.name])))&&void 0!==c?c:[];var d;if(t.length>0)s=null!==(d=null==e?void 0:e.map(((e,r)=>Array.isArray(t[r])?t[r].map(((n,i)=>encodeArg({param:e,value:t[r][i]}))):t[r]?encodeArg({param:e,value:t[r]}):null)))&&void 0!==d?d:[]}return[o,...s]}function encodeArg(e){let{param:t,value:r}=e;if("string"===t.type||"bytes"===t.type)return keccak256(toBytes$4(r));if("tuple"===t.type||t.type.match(/^(.*)\[(\d+)?\]$/))throw new FilterTypeNotSupportedError(t.type);return encodeAbiParameters([t],[r])}function createFilterRequestScope(e,t){var r,n;let{method:i}=t;const a={};return"fallback"===e.transport.type&&(null===(r=(n=e.transport).onResponse)||void 0===r||r.call(n,(e=>{let{method:t,response:r,status:n,transport:o}=e;"success"===n&&i===t&&(a[r]=o.request)}))),t=>a[t]||e.request}async function createContractEventFilter(e,t){const{address:r,abi:n,args:i,eventName:a,fromBlock:o,strict:s,toBlock:u}=t,c=createFilterRequestScope(e,{method:"eth_newFilter"}),d=a?encodeEventTopics({abi:n,args:i,eventName:a}):void 0,l=await e.request({method:"eth_newFilter",params:[{address:r,fromBlock:"bigint"==typeof o?numberToHex(o):o,toBlock:"bigint"==typeof u?numberToHex(u):u,topics:d}]});return{abi:n,args:i,eventName:a,id:l,request:c(l),strict:Boolean(s),type:"event"}}function parseAccount(e){return"string"==typeof e?{address:e,type:"json-rpc"}:e}const docsPath$3="/docs/contract/encodeFunctionData";function prepareEncodeFunctionData(e){const{abi:t,args:r,functionName:n}=e;let i=t[0];if(n){const e=getAbiItem({abi:t,args:r,name:n});if(!e)throw new AbiFunctionNotFoundError(n,{docsPath:docsPath$3});i=e}if("function"!==i.type)throw new AbiFunctionNotFoundError(void 0,{docsPath:docsPath$3});return{abi:[i],functionName:toFunctionSelector(formatAbiItem(i))}}function encodeFunctionData(e){const{args:t}=e,{abi:r,functionName:n}=1===e.abi.length&&null!==(i=e.functionName)&&void 0!==i&&i.startsWith("0x")?e:prepareEncodeFunctionData(e);var i;const a=r[0],o=n,s="inputs"in a&&a.inputs?encodeAbiParameters(a.inputs,null!=t?t:[]):void 0;return concatHex([o,null!=s?s:"0x"])}const panicReasons={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},solidityError={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},solidityPanic={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class NegativeOffsetError extends BaseError{constructor(e){let{offset:t}=e;super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class PositionOutOfBoundsError extends BaseError{constructor(e){let{length:t,position:r}=e;super(`Position \`${r}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}}class RecursiveReadLimitExceededError extends BaseError{constructor(e){let{count:t,limit:r}=e;super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}}const staticCursor={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new RecursiveReadLimitExceededError({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new PositionOutOfBoundsError({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new NegativeOffsetError({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new NegativeOffsetError({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=null!=e?e:this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const r=null!=t?t:this.position;return this.assertPosition(r+e-1),this.bytes.subarray(r,r+e)},inspectUint8(e){const t=null!=e?e:this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=null!=e?e:this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=null!=e?e:this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=null!=e?e:this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,255&e),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const r=this.inspectBytes(e);return this.position+=null!=t?t:e,r},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function createCursor(e){let{recursiveReadLimit:t=8192}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=Object.create(staticCursor);return r.bytes=e,r.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=t,r}function bytesToBigInt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0!==t.size&&assertSize(e,{size:t.size});return hexToBigInt(bytesToHex$4(e,t),t)}function bytesToBool(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e;if(void 0!==t.size&&(assertSize(r,{size:t.size}),r=trim$1(r)),r.length>1||r[0]>1)throw new InvalidBytesBooleanError(r);return Boolean(r[0])}function bytesToNumber$1(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0!==t.size&&assertSize(e,{size:t.size});return hexToNumber$3(bytesToHex$4(e,t),t)}function bytesToString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e;return void 0!==t.size&&(assertSize(r,{size:t.size}),r=trim$1(r,{dir:"right"})),(new TextDecoder).decode(r)}function decodeAbiParameters(e,t){const r="string"==typeof t?hexToBytes$3(t):t,n=createCursor(r);if(0===size$1(r)&&e.length>0)throw new AbiDecodingZeroDataError;if(size$1(t)&&size$1(t)<32)throw new AbiDecodingDataSizeTooSmallError({data:"string"==typeof t?t:bytesToHex$4(t),params:e,size:size$1(t)});let i=0;const a=[];for(let t=0;t<e.length;++t){const r=e[t];n.setPosition(i);const[o,s]=decodeParameter(n,r,{staticPosition:0});i+=s,a.push(o)}return a}function decodeParameter(e,t,r){let{staticPosition:n}=r;const i=getArrayComponents(t.type);if(i){const[r,a]=i;return decodeArray(e,{...t,type:a},{length:r,staticPosition:n})}if("tuple"===t.type)return decodeTuple(e,t,{staticPosition:n});if("address"===t.type)return decodeAddress(e);if("bool"===t.type)return decodeBool(e);if(t.type.startsWith("bytes"))return decodeBytes(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return decodeNumber(e,t);if("string"===t.type)return decodeString(e,{staticPosition:n});throw new InvalidAbiDecodingTypeError(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const sizeOfLength=32,sizeOfOffset=32;function decodeAddress(e){return[checksumAddress(bytesToHex$4(sliceBytes(e.readBytes(32),-20))),32]}function decodeArray(e,t,r){let{length:n,staticPosition:i}=r;if(!n){const r=i+bytesToNumber$1(e.readBytes(sizeOfOffset)),n=r+sizeOfLength;e.setPosition(r);const a=bytesToNumber$1(e.readBytes(sizeOfLength)),o=hasDynamicChild(t);let s=0;const u=[];for(let r=0;r<a;++r){e.setPosition(n+(o?32*r:s));const[i,a]=decodeParameter(e,t,{staticPosition:n});s+=a,u.push(i)}return e.setPosition(i+32),[u,32]}if(hasDynamicChild(t)){const r=i+bytesToNumber$1(e.readBytes(sizeOfOffset)),a=[];for(let i=0;i<n;++i){e.setPosition(r+32*i);const[n]=decodeParameter(e,t,{staticPosition:r});a.push(n)}return e.setPosition(i+32),[a,32]}let a=0;const o=[];for(let r=0;r<n;++r){const[r,n]=decodeParameter(e,t,{staticPosition:i+a});a+=n,o.push(r)}return[o,a]}function decodeBool(e){return[bytesToBool(e.readBytes(32),{size:32}),32]}function decodeBytes(e,t,r){let{staticPosition:n}=r;const[i,a]=t.type.split("bytes");if(!a){const t=bytesToNumber$1(e.readBytes(32));e.setPosition(n+t);const r=bytesToNumber$1(e.readBytes(32));if(0===r)return e.setPosition(n+32),["0x",32];const i=e.readBytes(r);return e.setPosition(n+32),[bytesToHex$4(i),32]}return[bytesToHex$4(e.readBytes(Number.parseInt(a),32)),32]}function decodeNumber(e,t){const r=t.type.startsWith("int"),n=Number.parseInt(t.type.split("int")[1]||"256"),i=e.readBytes(32);return[n>48?bytesToBigInt(i,{signed:r}):bytesToNumber$1(i,{signed:r}),32]}function decodeTuple(e,t,r){let{staticPosition:n}=r;const i=0===t.components.length||t.components.some((e=>{let{name:t}=e;return!t})),a=i?[]:{};let o=0;if(hasDynamicChild(t)){const r=n+bytesToNumber$1(e.readBytes(sizeOfOffset));for(let n=0;n<t.components.length;++n){const s=t.components[n];e.setPosition(r+o);const[u,c]=decodeParameter(e,s,{staticPosition:r});o+=c,a[i?n:null==s?void 0:s.name]=u}return e.setPosition(n+32),[a,32]}for(let r=0;r<t.components.length;++r){const s=t.components[r],[u,c]=decodeParameter(e,s,{staticPosition:n});a[i?r:null==s?void 0:s.name]=u,o+=c}return[a,o]}function decodeString(e,t){let{staticPosition:r}=t;const n=r+bytesToNumber$1(e.readBytes(32));e.setPosition(n);const i=bytesToNumber$1(e.readBytes(32));if(0===i)return e.setPosition(r+32),["",32];const a=bytesToString(trim$1(e.readBytes(i,32)));return e.setPosition(r+32),[a,32]}function hasDynamicChild(e){var t;const{type:r}=e;if("string"===r)return!0;if("bytes"===r)return!0;if(r.endsWith("[]"))return!0;if("tuple"===r)return null===(t=e.components)||void 0===t?void 0:t.some(hasDynamicChild);const n=getArrayComponents(e.type);return!(!n||!hasDynamicChild({...e,type:n[1]}))}function decodeErrorResult(e){const{abi:t,data:r}=e,n=slice(r,0,4);if("0x"===n)throw new AbiDecodingZeroDataError;const i=[...t||[],solidityError,solidityPanic].find((e=>"error"===e.type&&n===toFunctionSelector(formatAbiItem(e))));if(!i)throw new AbiErrorSignatureNotFoundError(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?decodeAbiParameters(i.inputs,slice(r,4)):void 0,errorName:i.name}}const stringify$1=(e,t,r)=>JSON.stringify(e,((e,r)=>{const n="bigint"==typeof r?r.toString():r;return"function"==typeof t?t(e,n):n}),r);function formatAbiItemWithArgs(e){let{abiItem:t,args:r,includeFunctionName:n=!0,includeName:i=!1}=e;if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map(((e,t)=>`${i&&e.name?`${e.name}: `:""}${"object"==typeof r[t]?stringify$1(r[t]):r[t]}`)).join(", ")})`}const etherUnits={gwei:9,wei:18},gweiUnits={ether:-9,wei:9};function formatUnits(e,t){let r=e.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(t,"0");let[i,a]=[r.slice(0,r.length-t),r.slice(r.length-t)];return a=a.replace(/(0+)$/,""),`${n?"-":""}${i||"0"}${a?`.${a}`:""}`}function formatEther(e){return formatUnits(e,etherUnits[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wei"])}function formatGwei(e){return formatUnits(e,gweiUnits[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"wei"])}class AccountStateConflictError extends BaseError{constructor(e){let{address:t}=e;super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class StateAssignmentConflictError extends BaseError{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function prettyStateMapping(e){return e.reduce(((e,t)=>{let{slot:r,value:n}=t;return`${e}        ${r}: ${n}\n`}),"")}function prettyStateOverride(e){return e.reduce(((e,t)=>{let{address:r,...n}=t,i=`${e}    ${r}:\n`;return n.nonce&&(i+=`      nonce: ${n.nonce}\n`),n.balance&&(i+=`      balance: ${n.balance}\n`),n.code&&(i+=`      code: ${n.code}\n`),n.state&&(i+="      state:\n",i+=prettyStateMapping(n.state)),n.stateDiff&&(i+="      stateDiff:\n",i+=prettyStateMapping(n.stateDiff)),i}),"  State Override:\n").slice(0,-1)}function prettyPrint(e){const t=Object.entries(e).map((e=>{let[t,r]=e;return void 0===r||!1===r?null:[t,r]})).filter(Boolean),r=t.reduce(((e,t)=>{let[r]=t;return Math.max(e,r.length)}),0);return t.map((e=>{let[t,n]=e;return`  ${`${t}:`.padEnd(r+1)}  ${n}`})).join("\n")}class FeeConflictError extends BaseError{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join("\n"),{name:"FeeConflictError"})}}class InvalidLegacyVError extends BaseError{constructor(e){let{v:t}=e;super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class InvalidSerializableTransactionError extends BaseError{constructor(e){let{transaction:t}=e;super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",prettyPrint(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class InvalidStorageKeySizeError extends BaseError{constructor(e){let{storageKey:t}=e;super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class TransactionExecutionError extends BaseError{constructor(e,t){var r;let{account:n,docsPath:i,chain:a,data:o,gas:s,gasPrice:u,maxFeePerGas:c,maxPriorityFeePerGas:d,nonce:l,to:p,value:h}=t;const f=prettyPrint({chain:a&&`${null==a?void 0:a.name} (id: ${null==a?void 0:a.id})`,from:null==n?void 0:n.address,to:p,value:void 0!==h&&`${formatEther(h)} ${(null==a||null===(r=a.nativeCurrency)||void 0===r?void 0:r.symbol)||"ETH"}`,data:o,gas:s,gasPrice:void 0!==u&&`${formatGwei(u)} gwei`,maxFeePerGas:void 0!==c&&`${formatGwei(c)} gwei`,maxPriorityFeePerGas:void 0!==d&&`${formatGwei(d)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class TransactionNotFoundError extends BaseError{constructor(e){let{blockHash:t,blockNumber:r,blockTag:n,hash:i,index:a}=e,o="Transaction";n&&void 0!==a&&(o=`Transaction at block time "${n}" at index "${a}"`),t&&void 0!==a&&(o=`Transaction at block hash "${t}" at index "${a}"`),r&&void 0!==a&&(o=`Transaction at block number "${r}" at index "${a}"`),i&&(o=`Transaction with hash "${i}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class TransactionReceiptNotFoundError extends BaseError{constructor(e){let{hash:t}=e;super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class WaitForTransactionReceiptTimeoutError extends BaseError{constructor(e){let{hash:t}=e;super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const getContractAddress=e=>e,getUrl=e=>e;class CallExecutionError extends BaseError{constructor(e,t){var r;let{account:n,docsPath:i,chain:a,data:o,gas:s,gasPrice:u,maxFeePerGas:c,maxPriorityFeePerGas:d,nonce:l,to:p,value:h,stateOverride:f}=t;const m=n?parseAccount(n):void 0;let y=prettyPrint({from:null==m?void 0:m.address,to:p,value:void 0!==h&&`${formatEther(h)} ${(null==a||null===(r=a.nativeCurrency)||void 0===r?void 0:r.symbol)||"ETH"}`,data:o,gas:s,gasPrice:void 0!==u&&`${formatGwei(u)} gwei`,maxFeePerGas:void 0!==c&&`${formatGwei(c)} gwei`,maxPriorityFeePerGas:void 0!==d&&`${formatGwei(d)} gwei`,nonce:l});f&&(y+=`\n${prettyStateOverride(f)}`),super(e.shortMessage,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",y].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class ContractFunctionExecutionError extends BaseError{constructor(e,t){var r;let{abi:n,args:i,contractAddress:a,docsPath:o,functionName:s,sender:u}=t;const c=getAbiItem({abi:n,args:i,name:s}),d=c?formatAbiItemWithArgs({abiItem:c,args:i,includeFunctionName:!1,includeName:!1}):void 0,l=c?formatAbiItem(c,{includeName:!0}):void 0,p=prettyPrint({address:a&&getContractAddress(a),function:l,args:d&&"()"!==d&&`${[...Array(null!==(r=null==s?void 0:s.length)&&void 0!==r?r:0).keys()].map((()=>" ")).join("")}${d}`,sender:u});super(e.shortMessage||`An unknown error occurred while executing the contract function "${s}".`,{cause:e,docsPath:o,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],p&&"Contract Call:",p].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=i,this.cause=e,this.contractAddress=a,this.functionName=s,this.sender=u}}class ContractFunctionRevertedError extends BaseError{constructor(e){let t,r,n,i,a,{abi:o,data:s,functionName:u,message:c}=e;if(s&&"0x"!==s)try{r=decodeErrorResult({abi:o,data:s});const{abiItem:e,errorName:t,args:a}=r;if("Error"===t)i=a[0];else if("Panic"===t){const[e]=a;i=panicReasons[e]}else{var d;const r=e?formatAbiItem(e,{includeName:!0}):void 0,i=e&&a?formatAbiItemWithArgs({abiItem:e,args:a,includeFunctionName:!1,includeName:!1}):void 0;n=[r?`Error: ${r}`:"",i&&"()"!==i?`       ${[...Array(null!==(d=null==t?void 0:t.length)&&void 0!==d?d:0).keys()].map((()=>" ")).join("")}${i}`:""]}}catch(e){t=e}else c&&(i=c);t instanceof AbiErrorSignatureNotFoundError&&(a=t.signature,n=[`Unable to decode signature "${a}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${a}.`]),super(i&&"execution reverted"!==i||a?[`The contract function "${u}" reverted with the following ${a?"signature":"reason"}:`,i||a].join("\n"):`The contract function "${u}" reverted.`,{cause:t,metaMessages:n,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r,this.reason=i,this.signature=a}}class ContractFunctionZeroDataError extends BaseError{constructor(e){let{functionName:t}=e;super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class CounterfactualDeploymentFailedError extends BaseError{constructor(e){let{factory:t}=e;super("Deployment for counterfactual contract call failed"+(t?` for factory "${t}".`:""),{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class RawContractError extends BaseError{constructor(e){let{data:t,message:r}=e;super(r||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}class HttpRequestError extends BaseError{constructor(e){let{body:t,cause:r,details:n,headers:i,status:a,url:o}=e;super("HTTP request failed.",{cause:r,details:n,metaMessages:[a&&`Status: ${a}`,`URL: ${getUrl(o)}`,t&&`Request body: ${stringify$1(t)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=i,this.status=a,this.url=o}}class WebSocketRequestError extends BaseError{constructor(e){let{body:t,cause:r,details:n,url:i}=e;super("WebSocket request failed.",{cause:r,details:n,metaMessages:[`URL: ${getUrl(i)}`,t&&`Request body: ${stringify$1(t)}`].filter(Boolean),name:"WebSocketRequestError"})}}class RpcRequestError extends BaseError{constructor(e){let{body:t,error:r,url:n}=e;super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${getUrl(n)}`,`Request body: ${stringify$1(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code}}class SocketClosedError extends BaseError{constructor(){let{url:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("The socket has been closed.",{metaMessages:[e&&`URL: ${getUrl(e)}`].filter(Boolean),name:"SocketClosedError"})}}class TimeoutError extends BaseError{constructor(e){let{body:t,url:r}=e;super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${getUrl(r)}`,`Request body: ${stringify$1(t)}`],name:"TimeoutError"})}}const unknownErrorCode=-1;class RpcError extends BaseError{constructor(e,t){let{code:r,docsPath:n,metaMessages:i,name:a,shortMessage:o}=t;super(o,{cause:e,docsPath:n,metaMessages:i||(null==e?void 0:e.metaMessages),name:a||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=a||e.name,this.code=e instanceof RpcRequestError?e.code:null!=r?r:unknownErrorCode}}class ProviderRpcError extends RpcError{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class ParseRpcError extends RpcError{constructor(e){super(e,{code:ParseRpcError.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(ParseRpcError,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class InvalidRequestRpcError extends RpcError{constructor(e){super(e,{code:InvalidRequestRpcError.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(InvalidRequestRpcError,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class MethodNotFoundRpcError extends RpcError{constructor(e){let{method:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,{code:MethodNotFoundRpcError.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(MethodNotFoundRpcError,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class InvalidParamsRpcError extends RpcError{constructor(e){super(e,{code:InvalidParamsRpcError.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(InvalidParamsRpcError,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class InternalRpcError extends RpcError{constructor(e){super(e,{code:InternalRpcError.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(InternalRpcError,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class InvalidInputRpcError extends RpcError{constructor(e){super(e,{code:InvalidInputRpcError.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(InvalidInputRpcError,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class ResourceNotFoundRpcError extends RpcError{constructor(e){super(e,{code:ResourceNotFoundRpcError.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(ResourceNotFoundRpcError,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class ResourceUnavailableRpcError extends RpcError{constructor(e){super(e,{code:ResourceUnavailableRpcError.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(ResourceUnavailableRpcError,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class TransactionRejectedRpcError extends RpcError{constructor(e){super(e,{code:TransactionRejectedRpcError.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(TransactionRejectedRpcError,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class MethodNotSupportedRpcError extends RpcError{constructor(e){let{method:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,{code:MethodNotSupportedRpcError.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not implemented.`})}}Object.defineProperty(MethodNotSupportedRpcError,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class LimitExceededRpcError extends RpcError{constructor(e){super(e,{code:LimitExceededRpcError.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(LimitExceededRpcError,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class JsonRpcVersionUnsupportedError extends RpcError{constructor(e){super(e,{code:JsonRpcVersionUnsupportedError.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(JsonRpcVersionUnsupportedError,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class UserRejectedRequestError extends ProviderRpcError{constructor(e){super(e,{code:UserRejectedRequestError.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(UserRejectedRequestError,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class UnauthorizedProviderError extends ProviderRpcError{constructor(e){super(e,{code:UnauthorizedProviderError.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(UnauthorizedProviderError,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class UnsupportedProviderMethodError extends ProviderRpcError{constructor(e){let{method:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,{code:UnsupportedProviderMethodError.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(UnsupportedProviderMethodError,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class ProviderDisconnectedError extends ProviderRpcError{constructor(e){super(e,{code:ProviderDisconnectedError.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(ProviderDisconnectedError,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class ChainDisconnectedError extends ProviderRpcError{constructor(e){super(e,{code:ChainDisconnectedError.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(ChainDisconnectedError,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class SwitchChainError extends ProviderRpcError{constructor(e){super(e,{code:SwitchChainError.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(SwitchChainError,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class UnknownRpcError extends RpcError{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const EXECUTION_REVERTED_ERROR_CODE=3;function getContractError(e,t){let{abi:r,address:n,args:i,docsPath:a,functionName:o,sender:s}=t;const{code:u,data:c,message:d,shortMessage:l}=e instanceof RawContractError?e:e instanceof BaseError?e.walk((e=>"data"in e))||e.walk():{},p=e instanceof AbiDecodingZeroDataError?new ContractFunctionZeroDataError({functionName:o}):[EXECUTION_REVERTED_ERROR_CODE,InternalRpcError.code].includes(u)&&(c||d||l)?new ContractFunctionRevertedError({abi:r,data:"object"==typeof c?c.data:c,functionName:o,message:null!=l?l:d}):e;return new ContractFunctionExecutionError(p,{abi:r,args:i,contractAddress:n,docsPath:a,functionName:o,sender:s})}function publicKeyToAddress(e){return checksumAddress(`0x${keccak256(`0x${e.substring(4)}`).substring(26)}`)}async function recoverPublicKey(e){let{hash:t,signature:r}=e;const n=isHex(t)?t:toHex(t),{secp256k1:i}=await Promise.resolve().then((function(){return secp256k1$2})),a=(()=>{if("object"==typeof r&&"r"in r&&"s"in r){const{r:e,s:t,v:n,yParity:a}=r,o=toRecoveryBit(Number(null!=a?a:n));return new i.Signature(hexToBigInt(e),hexToBigInt(t)).addRecoveryBit(o)}const e=isHex(r)?r:toHex(r),t=toRecoveryBit(hexToNumber$3(`0x${e.slice(130)}`));return i.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(t)})();return`0x${a.recoverPublicKey(n.substring(2)).toHex(!1)}`}function toRecoveryBit(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw new Error("Invalid yParityOrV value")}async function recoverAddress(e){let{hash:t,signature:r}=e;return publicKeyToAddress(await recoverPublicKey({hash:t,signature:r}))}function toRlp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hex";const r=getEncodable(e),n=createCursor(new Uint8Array(r.length));return r.encode(n),"hex"===t?bytesToHex$4(n.bytes):n.bytes}function getEncodable(e){return Array.isArray(e)?getEncodableList(e.map((e=>getEncodable(e)))):getEncodableBytes(e)}function getEncodableList(e){const t=e.reduce(((e,t)=>e+t.length),0),r=getSizeOfLength(t);return{length:t<=55?1+t:1+r+t,encode(n){t<=55?n.pushByte(192+t):(n.pushByte(247+r),1===r?n.pushUint8(t):2===r?n.pushUint16(t):3===r?n.pushUint24(t):n.pushUint32(t));for(const{encode:t}of e)t(n)}}}function getEncodableBytes(e){const t="string"==typeof e?hexToBytes$3(e):e,r=getSizeOfLength(t.length);return{length:1===t.length&&t[0]<128?1:t.length<=55?1+t.length:1+r+t.length,encode(e){1===t.length&&t[0]<128?e.pushBytes(t):t.length<=55?(e.pushByte(128+t.length),e.pushBytes(t)):(e.pushByte(183+r),1===r?e.pushUint8(t.length):2===r?e.pushUint16(t.length):3===r?e.pushUint24(t.length):e.pushUint32(t.length),e.pushBytes(t))}}}function getSizeOfLength(e){if(e<256)return 1;if(e<65536)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new BaseError("Length is too large.")}function hashAuthorization(e){const{chainId:t,contractAddress:r,nonce:n,to:i}=e,a=keccak256(concatHex(["0x05",toRlp([numberToHex(t),r,n?numberToHex(n):"0x"])]));return"bytes"===i?hexToBytes$3(a):a}async function recoverAuthorizationAddress(e){const{authorization:t,signature:r}=e;return recoverAddress({hash:hashAuthorization(t),signature:null!=r?r:t})}class EstimateGasExecutionError extends BaseError{constructor(e,t){var r;let{account:n,docsPath:i,chain:a,data:o,gas:s,gasPrice:u,maxFeePerGas:c,maxPriorityFeePerGas:d,nonce:l,to:p,value:h}=t;const f=prettyPrint({from:null==n?void 0:n.address,to:p,value:void 0!==h&&`${formatEther(h)} ${(null==a||null===(r=a.nativeCurrency)||void 0===r?void 0:r.symbol)||"ETH"}`,data:o,gas:s,gasPrice:void 0!==u&&`${formatGwei(u)} gwei`,maxFeePerGas:void 0!==c&&`${formatGwei(c)} gwei`,maxPriorityFeePerGas:void 0!==d&&`${formatGwei(d)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class ExecutionRevertedError extends BaseError{constructor(){var e;let{cause:t,message:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null==r||null===(e=r.replace("execution reverted: ",""))||void 0===e?void 0:e.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"})}}Object.defineProperty(ExecutionRevertedError,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(ExecutionRevertedError,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class FeeCapTooHighError extends BaseError{constructor(){let{cause:e,maxFeePerGas:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(`The fee cap (\`maxFeePerGas\`${t?` = ${formatGwei(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(FeeCapTooHighError,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class FeeCapTooLowError extends BaseError{constructor(){let{cause:e,maxFeePerGas:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(`The fee cap (\`maxFeePerGas\`${t?` = ${formatGwei(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(FeeCapTooLowError,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class NonceTooHighError extends BaseError{constructor(){let{cause:e,nonce:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(NonceTooHighError,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class NonceTooLowError extends BaseError{constructor(){let{cause:e,nonce:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(NonceTooLowError,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class NonceMaxValueError extends BaseError{constructor(){let{cause:e,nonce:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(NonceMaxValueError,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class InsufficientFundsError extends BaseError{constructor(){let{cause:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(InsufficientFundsError,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class IntrinsicGasTooHighError extends BaseError{constructor(){let{cause:e,gas:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(IntrinsicGasTooHighError,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class IntrinsicGasTooLowError extends BaseError{constructor(){let{cause:e,gas:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(IntrinsicGasTooLowError,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class TransactionTypeNotSupportedError extends BaseError{constructor(e){let{cause:t}=e;super("The transaction type is not supported for this chain.",{cause:t,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(TransactionTypeNotSupportedError,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class TipAboveFeeCapError extends BaseError{constructor(){let{cause:e,maxPriorityFeePerGas:t,maxFeePerGas:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${formatGwei(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${formatGwei(r)} gwei`:""}).`].join("\n"),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(TipAboveFeeCapError,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class UnknownNodeError extends BaseError{constructor(e){let{cause:t}=e;super(`An error occurred while executing: ${null==t?void 0:t.shortMessage}`,{cause:t,name:"UnknownNodeError"})}}function getNodeError(e,t){const r=(e.details||"").toLowerCase(),n=e instanceof BaseError?e.walk((e=>(null==e?void 0:e.code)===ExecutionRevertedError.code)):e;return n instanceof BaseError?new ExecutionRevertedError({cause:e,message:n.details}):ExecutionRevertedError.nodeMessage.test(r)?new ExecutionRevertedError({cause:e,message:e.details}):FeeCapTooHighError.nodeMessage.test(r)?new FeeCapTooHighError({cause:e,maxFeePerGas:null==t?void 0:t.maxFeePerGas}):FeeCapTooLowError.nodeMessage.test(r)?new FeeCapTooLowError({cause:e,maxFeePerGas:null==t?void 0:t.maxFeePerGas}):NonceTooHighError.nodeMessage.test(r)?new NonceTooHighError({cause:e,nonce:null==t?void 0:t.nonce}):NonceTooLowError.nodeMessage.test(r)?new NonceTooLowError({cause:e,nonce:null==t?void 0:t.nonce}):NonceMaxValueError.nodeMessage.test(r)?new NonceMaxValueError({cause:e,nonce:null==t?void 0:t.nonce}):InsufficientFundsError.nodeMessage.test(r)?new InsufficientFundsError({cause:e}):IntrinsicGasTooHighError.nodeMessage.test(r)?new IntrinsicGasTooHighError({cause:e,gas:null==t?void 0:t.gas}):IntrinsicGasTooLowError.nodeMessage.test(r)?new IntrinsicGasTooLowError({cause:e,gas:null==t?void 0:t.gas}):TransactionTypeNotSupportedError.nodeMessage.test(r)?new TransactionTypeNotSupportedError({cause:e}):TipAboveFeeCapError.nodeMessage.test(r)?new TipAboveFeeCapError({cause:e,maxFeePerGas:null==t?void 0:t.maxFeePerGas,maxPriorityFeePerGas:null==t?void 0:t.maxPriorityFeePerGas}):new UnknownNodeError({cause:e})}function getEstimateGasError(e,t){let{docsPath:r,...n}=t;const i=(()=>{const t=getNodeError(e,n);return t instanceof UnknownNodeError?e:t})();return new EstimateGasExecutionError(i,{docsPath:r,...n})}function extract(e,t){let{format:r}=t;if(!r)return{};const n={};return function t(r){const i=Object.keys(r);for(const a of i)a in e&&(n[a]=e[a]),r[a]&&"object"==typeof r[a]&&!Array.isArray(r[a])&&t(r[a])}(r(e||{})),n}const rpcTransactionType={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function formatTransactionRequest(e){const t={};return void 0!==e.authorizationList&&(t.authorizationList=formatAuthorizationList$1(e.authorizationList)),void 0!==e.accessList&&(t.accessList=e.accessList),void 0!==e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),void 0!==e.blobs&&("string"!=typeof e.blobs[0]?t.blobs=e.blobs.map((e=>bytesToHex$4(e))):t.blobs=e.blobs),void 0!==e.data&&(t.data=e.data),void 0!==e.from&&(t.from=e.from),void 0!==e.gas&&(t.gas=numberToHex(e.gas)),void 0!==e.gasPrice&&(t.gasPrice=numberToHex(e.gasPrice)),void 0!==e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=numberToHex(e.maxFeePerBlobGas)),void 0!==e.maxFeePerGas&&(t.maxFeePerGas=numberToHex(e.maxFeePerGas)),void 0!==e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=numberToHex(e.maxPriorityFeePerGas)),void 0!==e.nonce&&(t.nonce=numberToHex(e.nonce)),void 0!==e.to&&(t.to=e.to),void 0!==e.type&&(t.type=rpcTransactionType[e.type]),void 0!==e.value&&(t.value=numberToHex(e.value)),t}function formatAuthorizationList$1(e){return e.map((e=>({address:e.contractAddress,r:e.r,s:e.s,chainId:numberToHex(e.chainId),nonce:numberToHex(e.nonce),...void 0!==e.yParity?{yParity:numberToHex(e.yParity)}:{},...void 0!==e.v&&void 0===e.yParity?{v:numberToHex(e.v)}:{}})))}function serializeStateMapping(e){if(e&&0!==e.length)return e.reduce(((e,t)=>{let{slot:r,value:n}=t;if(66!==r.length)throw new InvalidBytesLengthError({size:r.length,targetSize:66,type:"hex"});if(66!==n.length)throw new InvalidBytesLengthError({size:n.length,targetSize:66,type:"hex"});return e[r]=n,e}),{})}function serializeAccountStateOverride(e){const{balance:t,nonce:r,state:n,stateDiff:i,code:a}=e,o={};if(void 0!==a&&(o.code=a),void 0!==t&&(o.balance=numberToHex(t)),void 0!==r&&(o.nonce=numberToHex(r)),void 0!==n&&(o.state=serializeStateMapping(n)),void 0!==i){if(o.state)throw new StateAssignmentConflictError;o.stateDiff=serializeStateMapping(i)}return o}function serializeStateOverride(e){if(!e)return;const t={};for(const{address:r,...n}of e){if(!isAddress(r,{strict:!1}))throw new InvalidAddressError({address:r});if(t[r])throw new AccountStateConflictError({address:r});t[r]=serializeAccountStateOverride(n)}return t}const maxUint256=2n**256n-1n;function assertRequest(e){const{account:t,gasPrice:r,maxFeePerGas:n,maxPriorityFeePerGas:i,to:a}=e,o=t?parseAccount(t):void 0;if(o&&!isAddress(o.address))throw new InvalidAddressError({address:o.address});if(a&&!isAddress(a))throw new InvalidAddressError({address:a});if(void 0!==r&&(void 0!==n||void 0!==i))throw new FeeConflictError;if(n&&n>maxUint256)throw new FeeCapTooHighError({maxFeePerGas:n});if(i&&n&&i>n)throw new TipAboveFeeCapError({maxFeePerGas:n,maxPriorityFeePerGas:i})}class BaseFeeScalarError extends BaseError{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Eip1559FeesNotSupportedError extends BaseError{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class MaxFeePerGasTooLowError extends BaseError{constructor(e){let{maxPriorityFeePerGas:t}=e;super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${formatGwei(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class BlockNotFoundError extends BaseError{constructor(e){let{blockHash:t,blockNumber:r}=e,n="Block";t&&(n=`Block at hash "${t}"`),r&&(n=`Block at number "${r}"`),super(`${n} could not be found.`,{name:"BlockNotFoundError"})}}const transactionType={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function formatTransaction(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?hexToNumber$3(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?hexToNumber$3(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?transactionType[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=formatAuthorizationList(e.authorizationList)),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if("bigint"==typeof t.v){if(0n===t.v||27n===t.v)return 0;if(1n===t.v||28n===t.v)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),"eip2930"===t.type&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),"eip1559"===t.type&&delete t.maxFeePerBlobGas,t}function formatAuthorizationList(e){return e.map((e=>({contractAddress:e.address,r:e.r,s:e.s,chainId:Number(e.chainId),nonce:Number(e.nonce),...void 0!==e.yParity?{yParity:Number(e.yParity)}:{},...void 0!==e.v&&void 0===e.yParity?{v:Number(e.v)}:{}})))}function formatBlock(e){var t;const r=null===(t=e.transactions)||void 0===t?void 0:t.map((e=>"string"==typeof e?e:formatTransaction(e)));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:r,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function getBlock(e){var t,r,n;let{blockHash:i,blockNumber:a,blockTag:o,includeTransactions:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=null!=o?o:"latest",c=null!=s&&s,d=void 0!==a?numberToHex(a):void 0;let l=null;if(l=i?await e.request({method:"eth_getBlockByHash",params:[i,c]},{dedupe:!0}):await e.request({method:"eth_getBlockByNumber",params:[d||u,c]},{dedupe:Boolean(d)}),!l)throw new BlockNotFoundError({blockHash:i,blockNumber:a});return((null===(t=e.chain)||void 0===t||null===(r=t.formatters)||void 0===r||null===(n=r.block)||void 0===n?void 0:n.format)||formatBlock)(l)}async function getGasPrice(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function estimateMaxPriorityFeePerGas(e,t){return internal_estimateMaxPriorityFeePerGas(e,t)}async function internal_estimateMaxPriorityFeePerGas(e,t){const{block:r,chain:n=e.chain,request:i}=t||{};try{var a,o,s;const t=null!==(a=null==n||null===(o=n.fees)||void 0===o?void 0:o.maxPriorityFeePerGas)&&void 0!==a?a:null==n||null===(s=n.fees)||void 0===s?void 0:s.defaultPriorityFee;if("function"==typeof t){const n=r||await getAction(e,getBlock,"getBlock")({}),a=await t({block:n,client:e,request:i});if(null===a)throw new Error;return a}if(void 0!==t)return t;return hexToBigInt(await e.request({method:"eth_maxPriorityFeePerGas"}))}catch{const[t,n]=await Promise.all([r?Promise.resolve(r):getAction(e,getBlock,"getBlock")({}),getAction(e,getGasPrice,"getGasPrice")({})]);if("bigint"!=typeof t.baseFeePerGas)throw new Eip1559FeesNotSupportedError;const i=n-t.baseFeePerGas;return i<0n?0n:i}}async function estimateFeesPerGas(e,t){return internal_estimateFeesPerGas(e,t)}async function internal_estimateFeesPerGas(e,t){var r,n,i,a;const{block:o,chain:s=e.chain,request:u,type:c="eip1559"}=t||{},d=await(async(t,r,n)=>"function"==typeof(null==s||null===(t=s.fees)||void 0===t?void 0:t.baseFeeMultiplier)?s.fees.baseFeeMultiplier({block:o,client:e,request:u}):null!==(r=null==s||null===(n=s.fees)||void 0===n?void 0:n.baseFeeMultiplier)&&void 0!==r?r:1.2)();if(d<1)throw new BaseFeeScalarError;const l=10**(null!==(r=null===(n=d.toString().split(".")[1])||void 0===n?void 0:n.length)&&void 0!==r?r:0),p=e=>e*BigInt(Math.ceil(d*l))/BigInt(l),h=o||await getAction(e,getBlock,"getBlock")({});if("function"==typeof(null==s||null===(i=s.fees)||void 0===i?void 0:i.estimateFeesPerGas)){const t=await s.fees.estimateFeesPerGas({block:o,client:e,multiply:p,request:u,type:c});if(null!==t)return t}if("eip1559"===c){var f;if("bigint"!=typeof h.baseFeePerGas)throw new Eip1559FeesNotSupportedError;const t="bigint"==typeof(null==u?void 0:u.maxPriorityFeePerGas)?u.maxPriorityFeePerGas:await internal_estimateMaxPriorityFeePerGas(e,{block:h,chain:s,request:u}),r=p(h.baseFeePerGas);return{maxFeePerGas:null!==(f=null==u?void 0:u.maxFeePerGas)&&void 0!==f?f:r+t,maxPriorityFeePerGas:t}}return{gasPrice:null!==(a=null==u?void 0:u.gasPrice)&&void 0!==a?a:p(await getAction(e,getGasPrice,"getGasPrice")({}))}}async function getTransactionCount(e,t){let{address:r,blockTag:n="latest",blockNumber:i}=t;return hexToNumber$3(await e.request({method:"eth_getTransactionCount",params:[r,i?numberToHex(i):n]},{dedupe:Boolean(i)}))}function blobsToCommitments(e){var t;const{kzg:r}=e,n=null!==(t=e.to)&&void 0!==t?t:"string"==typeof e.blobs[0]?"hex":"bytes",i="string"==typeof e.blobs[0]?e.blobs.map((e=>hexToBytes$3(e))):e.blobs,a=[];for(const e of i)a.push(Uint8Array.from(r.blobToKzgCommitment(e)));return"bytes"===n?a:a.map((e=>bytesToHex$4(e)))}function blobsToProofs(e){var t;const{kzg:r}=e,n=null!==(t=e.to)&&void 0!==t?t:"string"==typeof e.blobs[0]?"hex":"bytes",i="string"==typeof e.blobs[0]?e.blobs.map((e=>hexToBytes$3(e))):e.blobs,a="string"==typeof e.commitments[0]?e.commitments.map((e=>hexToBytes$3(e))):e.commitments,o=[];for(let e=0;e<i.length;e++){const t=i[e],n=a[e];o.push(Uint8Array.from(r.computeBlobKzgProof(t,n)))}return"bytes"===n?o:o.map((e=>bytesToHex$4(e)))}function setBigUint64$3(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),a=BigInt(4294967295),o=Number(r>>i&a),s=Number(r&a),u=n?4:0,c=n?0:4;e.setUint32(t+u,o,n),e.setUint32(t+c,s,n)}const Chi$3=(e,t,r)=>e&t^~e&r,Maj$3=(e,t,r)=>e&t^e&r^t&r;class HashMD$1 extends Hash$5{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView$3(this.buffer)}update(e){exists$4(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=toBytes$3(e)).length;for(let a=0;a<i;){const o=Math.min(n-this.pos,i-a);if(o!==n)r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=createView$3(e);for(;n<=i-a;a+=n)this.process(t,a)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){exists$4(this),output$2(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>n-a&&(this.process(r,0),a=0);for(let e=a;e<n;e++)t[e]=0;setBigUint64$3(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=createView$3(e),s=this.outputLen;if(s%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=s/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)o.setUint32(4*e,c[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:a,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=a,n%t&&e.buffer.set(r),e}}const SHA256_K$3=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_IV$1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$3=new Uint32Array(64);class SHA256$3 extends HashMD$1{constructor(){super(64,32,8,!1),this.A=0|SHA256_IV$1[0],this.B=0|SHA256_IV$1[1],this.C=0|SHA256_IV$1[2],this.D=0|SHA256_IV$1[3],this.E=0|SHA256_IV$1[4],this.F=0|SHA256_IV$1[5],this.G=0|SHA256_IV$1[6],this.H=0|SHA256_IV$1[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:a,G:o,H:s}=this;return[e,t,r,n,i,a,o,s]}set(e,t,r,n,i,a,o,s){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|o,this.H=0|s}process(e,t){for(let r=0;r<16;r++,t+=4)SHA256_W$3[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=SHA256_W$3[e-15],r=SHA256_W$3[e-2],n=rotr$3(t,7)^rotr$3(t,18)^t>>>3,i=rotr$3(r,17)^rotr$3(r,19)^r>>>10;SHA256_W$3[e]=i+SHA256_W$3[e-7]+n+SHA256_W$3[e-16]|0}let{A:r,B:n,C:i,D:a,E:o,F:s,G:u,H:c}=this;for(let e=0;e<64;e++){const t=c+(rotr$3(o,6)^rotr$3(o,11)^rotr$3(o,25))+Chi$3(o,s,u)+SHA256_K$3[e]+SHA256_W$3[e]|0,d=(rotr$3(r,2)^rotr$3(r,13)^rotr$3(r,22))+Maj$3(r,n,i)|0;c=u,u=s,s=o,o=a+t|0,a=i,i=n,n=r,r=t+d|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,s=s+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,i,a,o,s,u,c)}roundClean(){SHA256_W$3.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256$5=wrapConstructor$3((()=>new SHA256$3));function sha256$4(e,t){const r=t||"hex",n=sha256$5(isHex(e,{strict:!1})?toBytes$4(e):e);return"bytes"===r?n:toHex(n)}function commitmentToVersionedHash(e){var t;const{commitment:r,version:n=1}=e,i=null!==(t=e.to)&&void 0!==t?t:"string"==typeof r?"hex":"bytes",a=sha256$4(r,"bytes");return a.set([n],0),"bytes"===i?a:bytesToHex$4(a)}function commitmentsToVersionedHashes(e){var t;const{commitments:r,version:n}=e,i=null!==(t=e.to)&&void 0!==t?t:"string"==typeof r[0]?"hex":"bytes",a=[];for(const e of r)a.push(commitmentToVersionedHash({commitment:e,to:i,version:n}));return a}const blobsPerTransaction=6,bytesPerFieldElement=32,fieldElementsPerBlob=4096,bytesPerBlob=bytesPerFieldElement*fieldElementsPerBlob,maxBytesPerTransaction=bytesPerBlob*blobsPerTransaction-1-1*fieldElementsPerBlob*blobsPerTransaction,versionedHashVersionKzg=1;class BlobSizeTooLargeError extends BaseError{constructor(e){let{maxSize:t,size:r}=e;super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${r} bytes`],name:"BlobSizeTooLargeError"})}}class EmptyBlobError extends BaseError{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class InvalidVersionedHashSizeError extends BaseError{constructor(e){let{hash:t,size:r}=e;super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${r}`],name:"InvalidVersionedHashSizeError"})}}class InvalidVersionedHashVersionError extends BaseError{constructor(e){let{hash:t,version:r}=e;super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${versionedHashVersionKzg}`,`Received: ${r}`],name:"InvalidVersionedHashVersionError"})}}function toBlobs(e){var t;const r=null!==(t=e.to)&&void 0!==t?t:"string"==typeof e.data?"hex":"bytes",n="string"==typeof e.data?hexToBytes$3(e.data):e.data,i=size$1(n);if(!i)throw new EmptyBlobError;if(i>maxBytesPerTransaction)throw new BlobSizeTooLargeError({maxSize:maxBytesPerTransaction,size:i});const a=[];let o=!0,s=0;for(;o;){const e=createCursor(new Uint8Array(bytesPerBlob));let t=0;for(;t<fieldElementsPerBlob;){const r=n.slice(s,s+(bytesPerFieldElement-1));if(e.pushByte(0),e.pushBytes(r),r.length<31){e.pushByte(128),o=!1;break}t++,s+=31}a.push(e)}return"bytes"===r?a.map((e=>e.bytes)):a.map((e=>bytesToHex$4(e.bytes)))}function toBlobSidecars(e){var t,r,n;const{data:i,kzg:a,to:o}=e,s=null!==(t=e.blobs)&&void 0!==t?t:toBlobs({data:i,to:o}),u=null!==(r=e.commitments)&&void 0!==r?r:blobsToCommitments({blobs:s,kzg:a,to:o}),c=null!==(n=e.proofs)&&void 0!==n?n:blobsToProofs({blobs:s,commitments:u,kzg:a,to:o}),d=[];for(let e=0;e<s.length;e++)d.push({blob:s[e],commitment:u[e],proof:c[e]});return d}function getTransactionType(e){if(e.type)return e.type;if(void 0!==e.authorizationList)return"eip7702";if(void 0!==e.blobs||void 0!==e.blobVersionedHashes||void 0!==e.maxFeePerBlobGas||void 0!==e.sidecars)return"eip4844";if(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas)return"eip1559";if(void 0!==e.gasPrice)return void 0!==e.accessList?"eip2930":"legacy";throw new InvalidSerializableTransactionError({transaction:e})}async function getChainId(e){return hexToNumber$3(await e.request({method:"eth_chainId"},{dedupe:!0}))}const defaultParameters=["blobVersionedHashes","chainId","fees","gas","nonce","type"];async function prepareTransactionRequest(e,t){const{account:r=e.account,blobs:n,chain:i,gas:a,kzg:o,nonce:s,nonceManager:u,parameters:c=defaultParameters,type:d}=t,l=r?parseAccount(r):void 0,p={...t,...l?{from:null==l?void 0:l.address}:{}};let h,f;async function m(){return h||(h=await getAction(e,getBlock,"getBlock")({blockTag:"latest"}),h)}async function y(){if(f)return f;if(i)return i.id;if(void 0!==t.chainId)return t.chainId;const r=await getAction(e,getChainId,"getChainId")({});return f=r,f}if((c.includes("blobVersionedHashes")||c.includes("sidecars"))&&n&&o){const e=blobsToCommitments({blobs:n,kzg:o});if(c.includes("blobVersionedHashes")){const t=commitmentsToVersionedHashes({commitments:e,to:"hex"});p.blobVersionedHashes=t}if(c.includes("sidecars")){const t=toBlobSidecars({blobs:n,commitments:e,proofs:blobsToProofs({blobs:n,commitments:e,kzg:o}),to:"hex"});p.sidecars=t}}if(c.includes("chainId")&&(p.chainId=await y()),c.includes("nonce")&&void 0===s&&l)if(u){const t=await y();p.nonce=await u.consume({address:l.address,chainId:t,client:e})}else p.nonce=await getAction(e,getTransactionCount,"getTransactionCount")({address:l.address,blockTag:"pending"});if((c.includes("fees")||c.includes("type"))&&void 0===d)try{p.type=getTransactionType(p)}catch{const e=await m();p.type="bigint"==typeof(null==e?void 0:e.baseFeePerGas)?"eip1559":"legacy"}if(c.includes("fees"))if("legacy"!==p.type&&"eip2930"!==p.type){if(void 0===p.maxFeePerGas||void 0===p.maxPriorityFeePerGas){const r=await m(),{maxFeePerGas:n,maxPriorityFeePerGas:a}=await internal_estimateFeesPerGas(e,{block:r,chain:i,request:p});if(void 0===t.maxPriorityFeePerGas&&t.maxFeePerGas&&t.maxFeePerGas<a)throw new MaxFeePerGasTooLowError({maxPriorityFeePerGas:a});p.maxPriorityFeePerGas=a,p.maxFeePerGas=n}}else{if(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)throw new Eip1559FeesNotSupportedError;const r=await m(),{gasPrice:n}=await internal_estimateFeesPerGas(e,{block:r,chain:i,request:p,type:"legacy"});p.gasPrice=n}return c.includes("gas")&&void 0===a&&(p.gas=await getAction(e,estimateGas,"estimateGas")({...p,account:l?{address:l.address,type:"json-rpc"}:void 0})),assertRequest(p),delete p.parameters,p}async function getBalance(e,t){let{address:r,blockNumber:n,blockTag:i="latest"}=t;const a=n?numberToHex(n):void 0,o=await e.request({method:"eth_getBalance",params:[r,a||i]});return BigInt(o)}async function estimateGas(e,t){var r;const n=null!==(r=t.account)&&void 0!==r?r:e.account,i=n?parseAccount(n):void 0;try{var a,o,s;const{accessList:u,authorizationList:c,blobs:d,blobVersionedHashes:l,blockNumber:p,blockTag:h,data:f,gas:m,gasPrice:y,maxFeePerBlobGas:g,maxFeePerGas:b,maxPriorityFeePerGas:v,nonce:w,value:_,stateOverride:S,...E}=await prepareTransactionRequest(e,{...t,parameters:"local"===(null==i?void 0:i.type)?void 0:["blobVersionedHashes"]}),A=(p?numberToHex(p):void 0)||h,T=serializeStateOverride(S),I=await(async()=>E.to?E.to:c&&c.length>0?await recoverAuthorizationAddress({authorization:c[0]}).catch((()=>{throw new BaseError("`to` is required. Could not infer from `authorizationList`")})):void 0)();assertRequest(t);const $=null===(a=e.chain)||void 0===a||null===(o=a.formatters)||void 0===o||null===(s=o.transactionRequest)||void 0===s?void 0:s.format,C=($||formatTransactionRequest)({...extract(E,{format:$}),from:null==i?void 0:i.address,accessList:u,authorizationList:c,blobs:d,blobVersionedHashes:l,data:f,gas:m,gasPrice:y,maxFeePerBlobGas:g,maxFeePerGas:b,maxPriorityFeePerGas:v,nonce:w,to:I,value:_});function R(t){const{block:r,request:n,rpcStateOverride:i}=t;return e.request({method:"eth_estimateGas",params:i?[n,null!=r?r:"latest",i]:r?[n,r]:[n]})}let k=BigInt(await R({block:A,request:C,rpcStateOverride:T}));if(c){const x=await getBalance(e,{address:C.from}),N=await Promise.all(c.map((async e=>{const{contractAddress:t}=e,r=await R({block:A,request:{authorizationList:void 0,data:f,from:null==i?void 0:i.address,to:t,value:numberToHex(x)},rpcStateOverride:T}).catch((()=>100000n));return 2n*BigInt(r)})));k+=N.reduce(((e,t)=>e+t),0n)}return k}catch(O){throw getEstimateGasError(O,{...t,account:i,chain:e.chain})}}async function estimateContractGas(e,t){const{abi:r,address:n,args:i,functionName:a,...o}=t,s=encodeFunctionData({abi:r,args:i,functionName:a});try{return await getAction(e,estimateGas,"estimateGas")({data:s,to:n,...o})}catch(e){const t=o.account?parseAccount(o.account):void 0;throw getContractError(e,{abi:r,address:n,args:i,docsPath:"/docs/contract/estimateContractGas",functionName:a,sender:null==t?void 0:t.address})}}function isAddressEqual(e,t){if(!isAddress(e,{strict:!1}))throw new InvalidAddressError({address:e});if(!isAddress(t,{strict:!1}))throw new InvalidAddressError({address:t});return e.toLowerCase()===t.toLowerCase()}const docsPath$2="/docs/contract/decodeEventLog";function decodeEventLog(e){const{abi:t,data:r,strict:n,topics:i}=e,a=null==n||n,[o,...s]=i;if(!o)throw new AbiEventSignatureEmptyTopicsError({docsPath:docsPath$2});const u=1===t.length?t[0]:t.find((e=>"event"===e.type&&o===toEventSelector(formatAbiItem(e))));if(!u||!("name"in u)||"event"!==u.type)throw new AbiEventSignatureNotFoundError(o,{docsPath:docsPath$2});const{name:c,inputs:d}=u,l=null==d?void 0:d.some((e=>!("name"in e&&e.name)));let p=l?[]:{};const h=d.filter((e=>"indexed"in e&&e.indexed));for(let e=0;e<h.length;e++){const t=h[e],r=s[e];if(!r)throw new DecodeLogTopicsMismatch({abiItem:u,param:t});p[l?e:t.name||e]=decodeTopic({param:t,value:r})}const f=d.filter((e=>!("indexed"in e&&e.indexed)));if(f.length>0)if(r&&"0x"!==r)try{const e=decodeAbiParameters(f,r);if(e)if(l)p=[...p,...e];else for(let t=0;t<f.length;t++)p[f[t].name]=e[t]}catch(e){if(a){if(e instanceof AbiDecodingDataSizeTooSmallError||e instanceof PositionOutOfBoundsError)throw new DecodeLogDataMismatch({abiItem:u,data:r,params:f,size:size$1(r)});throw e}}else if(a)throw new DecodeLogDataMismatch({abiItem:u,data:"0x",params:f,size:0});return{eventName:c,args:Object.values(p).length>0?p:void 0}}function decodeTopic(e){let{param:t,value:r}=e;if("string"===t.type||"bytes"===t.type||"tuple"===t.type||t.type.match(/^(.*)\[(\d+)?\]$/))return r;return(decodeAbiParameters([t],r)||[])[0]}function parseEventLogs(e){const{abi:t,args:r,logs:n,strict:i=!0}=e,a=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return n.map((e=>{try{const n=t.find((t=>"event"===t.type&&e.topics[0]===toEventSelector(t)));if(!n)return null;const o=decodeEventLog({...e,abi:[n],strict:i});return a&&!a.includes(o.eventName)?null:includesArgs({args:o.args,inputs:n.inputs,matchArgs:r})?{...o,...e}:null}catch(t){let r,a;if(t instanceof AbiEventSignatureNotFoundError)return null;if(t instanceof DecodeLogDataMismatch||t instanceof DecodeLogTopicsMismatch){var n;if(i)return null;r=t.abiItem.name,a=null===(n=t.abiItem.inputs)||void 0===n?void 0:n.some((e=>!("name"in e&&e.name)))}return{...e,args:a?[]:{},eventName:r}}})).filter(Boolean)}function includesArgs(e){const{args:t,inputs:r,matchArgs:n}=e;if(!n)return!0;if(!t)return!1;function i(e,t,r){try{return"address"===e.type?isAddressEqual(t,r):"string"===e.type||"bytes"===e.type?keccak256(toBytes$4(t))===r:t===r}catch{return!1}}return Array.isArray(t)&&Array.isArray(n)?n.every(((e,n)=>{if(null==e)return!0;const a=r[n];if(!a)return!1;return(Array.isArray(e)?e:[e]).some((e=>i(a,e,t[n])))})):"object"==typeof t&&!Array.isArray(t)&&"object"==typeof n&&!Array.isArray(n)&&Object.entries(n).every((e=>{let[n,a]=e;if(null==a)return!0;const o=r.find((e=>e.name===n));if(!o)return!1;return(Array.isArray(a)?a:[a]).some((e=>i(o,e,t[n])))}))}function formatLog(e){let{args:t,eventName:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...r?{args:t,eventName:r}:{}}}async function getLogs(e){let{address:t,blockHash:r,fromBlock:n,toBlock:i,event:a,events:o,args:s,strict:u}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=null!=u&&u,d=null!=o?o:a?[a]:void 0;let l,p=[];if(d){const e=d.flatMap((e=>encodeEventTopics({abi:[e],eventName:e.name,args:o?void 0:s})));p=[e],a&&(p=p[0])}l=r?await e.request({method:"eth_getLogs",params:[{address:t,topics:p,blockHash:r}]}):await e.request({method:"eth_getLogs",params:[{address:t,topics:p,fromBlock:"bigint"==typeof n?numberToHex(n):n,toBlock:"bigint"==typeof i?numberToHex(i):i}]});const h=l.map((e=>formatLog(e)));return d?parseEventLogs({abi:d,args:s,logs:h,strict:c}):h}async function getContractEvents(e,t){const{abi:r,address:n,args:i,blockHash:a,eventName:o,fromBlock:s,toBlock:u,strict:c}=t,d=o?getAbiItem({abi:r,name:o}):void 0,l=d?void 0:r.filter((e=>"event"===e.type));return getAction(e,getLogs,"getLogs")({address:n,args:i,blockHash:a,event:d,events:l,fromBlock:s,toBlock:u,strict:c})}const docsPath$1="/docs/contract/decodeFunctionResult";function decodeFunctionResult(e){const{abi:t,args:r,functionName:n,data:i}=e;let a=t[0];if(n){const e=getAbiItem({abi:t,args:r,name:n});if(!e)throw new AbiFunctionNotFoundError(n,{docsPath:docsPath$1});a=e}if("function"!==a.type)throw new AbiFunctionNotFoundError(void 0,{docsPath:docsPath$1});if(!a.outputs)throw new AbiFunctionOutputsNotFoundError(a.name,{docsPath:docsPath$1});const o=decodeAbiParameters(a.outputs,i);return o&&o.length>1?o:o&&1===o.length?o[0]:void 0}const multicall3Abi=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],universalResolverErrors=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],universalResolverResolveAbi=[...universalResolverErrors,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],universalResolverReverseAbi=[...universalResolverErrors,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],textResolverAbi=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],addressResolverAbi=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],universalSignatureValidatorAbi=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"}],aggregate3Signature="0x82ad56cb",deploylessCallViaBytecodeBytecode="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",deploylessCallViaFactoryBytecode="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",universalSignatureValidatorByteCode="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class ChainDoesNotSupportContract extends BaseError{constructor(e){let{blockNumber:t,chain:r,contract:n}=e;super(`Chain "${r.name}" does not support contract "${n.name}".`,{metaMessages:["This could be due to any of the following:",...t&&n.blockCreated&&n.blockCreated>t?[`- The contract "${n.name}" was not deployed until block ${n.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${n.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class ChainMismatchError extends BaseError{constructor(e){let{chain:t,currentChainId:r}=e;super(`The current chain of the wallet (id: ${r}) does not match the target chain for the transaction (id: ${t.id}  ${t.name}).`,{metaMessages:[`Current Chain ID:  ${r}`,`Expected Chain ID: ${t.id}  ${t.name}`],name:"ChainMismatchError"})}}class ChainNotFoundError extends BaseError{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join("\n"),{name:"ChainNotFoundError"})}}class ClientChainNotConfiguredError extends BaseError{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class InvalidChainIdError extends BaseError{constructor(e){let{chainId:t}=e;super("number"==typeof t?`Chain ID "${t}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const docsPath="/docs/contract/encodeDeployData";function encodeDeployData(e){const{abi:t,args:r,bytecode:n}=e;if(!r||0===r.length)return n;const i=t.find((e=>"type"in e&&"constructor"===e.type));if(!i)throw new AbiConstructorNotFoundError({docsPath:docsPath});if(!("inputs"in i))throw new AbiConstructorParamsNotFoundError({docsPath:docsPath});if(!i.inputs||0===i.inputs.length)throw new AbiConstructorParamsNotFoundError({docsPath:docsPath});return concatHex([n,encodeAbiParameters(i.inputs,r)])}function getChainContractAddress(e){var t;let{blockNumber:r,chain:n,contract:i}=e;const a=null==n||null===(t=n.contracts)||void 0===t?void 0:t[i];if(!a)throw new ChainDoesNotSupportContract({chain:n,contract:{name:i}});if(r&&a.blockCreated&&a.blockCreated>r)throw new ChainDoesNotSupportContract({blockNumber:r,chain:n,contract:{name:i,blockCreated:a.blockCreated}});return a.address}function getCallError(e,t){let{docsPath:r,...n}=t;const i=(()=>{const t=getNodeError(e,n);return t instanceof UnknownNodeError?e:t})();return new CallExecutionError(i,{docsPath:r,...n})}const schedulerCache=new Map;function createBatchScheduler(e){let{fn:t,id:r,shouldSplitBatch:n,wait:i=0,sort:a}=e;const o=async()=>{const e=u();s();const r=e.map((e=>{let{args:t}=e;return t}));0!==r.length&&t(r).then((t=>{a&&Array.isArray(t)&&t.sort(a);for(let n=0;n<e.length;n++){var r;const{pendingPromise:i}=e[n];null===(r=i.resolve)||void 0===r||r.call(i,[t[n],t])}})).catch((t=>{for(let n=0;n<e.length;n++){var r;const{pendingPromise:i}=e[n];null===(r=i.reject)||void 0===r||r.call(i,t)}}))},s=()=>schedulerCache.delete(r),u=()=>schedulerCache.get(r)||[],c=e=>schedulerCache.set(r,[...u(),e]);return{flush:s,async schedule(e){const t={},r=new Promise(((e,r)=>{t.resolve=e,t.reject=r}));(null==n?void 0:n([...u().map((e=>{let{args:t}=e;return t})),e]))&&o();return u().length>0?(c({args:e,pendingPromise:t}),r):(c({args:e,pendingPromise:t}),setTimeout(o,i),r)}}}async function call$1(e,t){var r;const{account:n=e.account,batch:i=Boolean(null===(r=e.batch)||void 0===r?void 0:r.multicall),blockNumber:a,blockTag:o="latest",accessList:s,blobs:u,code:c,data:d,factory:l,factoryData:p,gas:h,gasPrice:f,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:g,nonce:b,to:v,value:w,stateOverride:_,...S}=t,E=n?parseAccount(n):void 0;if(c&&(l||p))throw new BaseError("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(c&&v)throw new BaseError("Cannot provide both `code` & `to` as parameters.");const A=c&&d,T=l&&p&&v&&d,I=A||T,$=A?toDeploylessCallViaBytecodeData({code:c,data:d}):T?toDeploylessCallViaFactoryData({data:d,factory:l,factoryData:p,to:v}):d;try{var C,R,k;assertRequest(t);const r=(a?numberToHex(a):void 0)||o,n=serializeStateOverride(_),c=null===(C=e.chain)||void 0===C||null===(R=C.formatters)||void 0===R||null===(k=R.transactionRequest)||void 0===k?void 0:k.format,d=(c||formatTransactionRequest)({...extract(S,{format:c}),from:null==E?void 0:E.address,accessList:s,blobs:u,data:$,gas:h,gasPrice:f,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:g,nonce:b,to:I?void 0:v,value:w});if(i&&shouldPerformMulticall({request:d})&&!n)try{return await scheduleMulticall(e,{...d,blockNumber:a,blockTag:o})}catch(e){if(!(e instanceof ClientChainNotConfiguredError||e instanceof ChainDoesNotSupportContract))throw e}const l=await e.request({method:"eth_call",params:n?[d,r,n]:[d,r]});return"0x"===l?{data:void 0}:{data:l}}catch(r){const n=getRevertErrorData(r),{offchainLookup:i,offchainLookupSignature:a}=await Promise.resolve().then((function(){return ccip}));if(!1!==e.ccipRead&&(null==n?void 0:n.slice(0,10))===a&&v)return{data:await i(e,{data:n,to:v})};if(I&&"0x101bb98d"===(null==n?void 0:n.slice(0,10)))throw new CounterfactualDeploymentFailedError({factory:l});throw getCallError(r,{...t,account:E,chain:e.chain})}}function shouldPerformMulticall(e){let{request:t}=e;const{data:r,to:n,...i}=t;return!!r&&(!r.startsWith(aggregate3Signature)&&(!!n&&!(Object.values(i).filter((e=>void 0!==e)).length>0)))}async function scheduleMulticall(e,t){var r;const{batchSize:n=1024,wait:i=0}="object"==typeof(null===(r=e.batch)||void 0===r?void 0:r.multicall)?e.batch.multicall:{},{blockNumber:a,blockTag:o="latest",data:s,multicallAddress:u,to:c}=t;let d=u;if(!d){if(!e.chain)throw new ClientChainNotConfiguredError;d=getChainContractAddress({blockNumber:a,chain:e.chain,contract:"multicall3"})}const l=(a?numberToHex(a):void 0)||o,{schedule:p}=createBatchScheduler({id:`${e.uid}.${l}`,wait:i,shouldSplitBatch(e){const t=e.reduce(((e,t)=>{let{data:r}=t;return e+(r.length-2)}),0);return t>2*n},fn:async t=>{const r=t.map((e=>({allowFailure:!0,callData:e.data,target:e.to}))),n=encodeFunctionData({abi:multicall3Abi,args:[r],functionName:"aggregate3"}),i=await e.request({method:"eth_call",params:[{data:n,to:d},l]});return decodeFunctionResult({abi:multicall3Abi,args:[r],functionName:"aggregate3",data:i||"0x"})}}),[{returnData:h,success:f}]=await p({data:s,to:c});if(!f)throw new RawContractError({data:h});return"0x"===h?{data:void 0}:{data:h}}function toDeploylessCallViaBytecodeData(e){const{code:t,data:r}=e;return encodeDeployData({abi:parseAbi(["constructor(bytes, bytes)"]),bytecode:deploylessCallViaBytecodeBytecode,args:[t,r]})}function toDeploylessCallViaFactoryData(e){const{data:t,factory:r,factoryData:n,to:i}=e;return encodeDeployData({abi:parseAbi(["constructor(address, bytes, address, bytes)"]),bytecode:deploylessCallViaFactoryBytecode,args:[i,t,r,n]})}function getRevertErrorData(e){var t;if(!(e instanceof BaseError))return;const r=e.walk();return"object"==typeof(null==r?void 0:r.data)?null===(t=r.data)||void 0===t?void 0:t.data:r.data}async function readContract(e,t){const{abi:r,address:n,args:i,functionName:a,...o}=t,s=encodeFunctionData({abi:r,args:i,functionName:a});try{const{data:t}=await getAction(e,call$1,"call")({...o,data:s,to:n});return decodeFunctionResult({abi:r,args:i,functionName:a,data:t||"0x"})}catch(e){throw getContractError(e,{abi:r,address:n,args:i,docsPath:"/docs/contract/readContract",functionName:a})}}async function simulateContract(e,t){const{abi:r,address:n,args:i,dataSuffix:a,functionName:o,...s}=t,u=s.account?parseAccount(s.account):e.account,c=encodeFunctionData({abi:r,args:i,functionName:o});try{const{data:d}=await getAction(e,call$1,"call")({batch:!1,data:`${c}${a?a.replace("0x",""):""}`,to:n,...s,account:u}),l=decodeFunctionResult({abi:r,args:i,functionName:o,data:d||"0x"});return{result:l,request:{abi:r.filter((e=>"name"in e&&e.name===t.functionName)),address:n,args:i,dataSuffix:a,functionName:o,...s,account:u}}}catch(e){throw getContractError(e,{abi:r,address:n,args:i,docsPath:"/docs/contract/simulateContract",functionName:o,sender:null==u?void 0:u.address})}}const listenersCache=new Map,cleanupCache=new Map;let callbackCount=0;function observe(e,t,r){const n=++callbackCount,i=()=>listenersCache.get(e)||[],a=()=>{const t=cleanupCache.get(e);1===i().length&&t&&t(),(()=>{const t=i();listenersCache.set(e,t.filter((e=>e.id!==n)))})()},o=i();if(listenersCache.set(e,[...o,{id:n,fns:t}]),o&&o.length>0)return a;const s={};for(const e in t)s[e]=function(){const t=i();if(0!==t.length){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];for(const r of t){var o,s;null===(o=(s=r.fns)[e])||void 0===o||o.call(s,...n)}}};const u=r(s);return"function"==typeof u&&cleanupCache.set(e,u),a}async function wait$1(e){return new Promise((t=>setTimeout(t,e)))}function poll(e,t){let{emitOnBegin:r,initialWaitTime:n,interval:i}=t,a=!0;const o=()=>a=!1;return(async()=>{var t;let s;r&&(s=await e({unpoll:o}));const u=null!==(t=await(null==n?void 0:n(s)))&&void 0!==t?t:i;await wait$1(u);const c=async()=>{a&&(await e({unpoll:o}),await wait$1(i),c())};c()})(),o}const promiseCache$1=new Map,responseCache=new Map;function getCache(e){const t=(e,t)=>({clear:()=>t.delete(e),get:()=>t.get(e),set:r=>t.set(e,r)}),r=t(e,promiseCache$1),n=t(e,responseCache);return{clear:()=>{r.clear(),n.clear()},promise:r,response:n}}async function withCache(e,t){let{cacheKey:r,cacheTime:n=Number.POSITIVE_INFINITY}=t;const i=getCache(r),a=i.response.get();if(a&&n>0){if((new Date).getTime()-a.created.getTime()<n)return a.data}let o=i.promise.get();o||(o=e(),i.promise.set(o));try{const e=await o;return i.response.set({created:new Date,data:e}),e}finally{i.promise.clear()}}const cacheKey=e=>`blockNumber.${e}`;async function getBlockNumber(e){let{cacheTime:t=e.cacheTime}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await withCache((()=>e.request({method:"eth_blockNumber"})),{cacheKey:cacheKey(e.uid),cacheTime:t});return BigInt(r)}async function getFilterChanges(e,t){let{filter:r}=t;const n="strict"in r&&r.strict,i=await r.request({method:"eth_getFilterChanges",params:[r.id]});if("string"==typeof i[0])return i;const a=i.map((e=>formatLog(e)));return"abi"in r&&r.abi?parseEventLogs({abi:r.abi,logs:a,strict:n}):a}async function uninstallFilter(e,t){let{filter:r}=t;return r.request({method:"eth_uninstallFilter",params:[r.id]})}function watchContractEvent(e,t){const{abi:r,address:n,args:i,batch:a=!0,eventName:o,fromBlock:s,onError:u,onLogs:c,poll:d,pollingInterval:l=e.pollingInterval,strict:p}=t;return(void 0!==d?d:"bigint"==typeof s||"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type))?(()=>{const t=null!=p&&p;return observe(stringify$1(["watchContractEvent",n,i,a,e.uid,o,l,t,s]),{onLogs:c,onError:u},(u=>{let c,d;void 0!==s&&(c=s-1n);let p=!1;const h=poll((async()=>{if(p)try{let s;if(d)s=await getAction(e,getFilterChanges,"getFilterChanges")({filter:d});else{const a=await getAction(e,getBlockNumber,"getBlockNumber")({});s=c&&c<a?await getAction(e,getContractEvents,"getContractEvents")({abi:r,address:n,args:i,eventName:o,fromBlock:c+1n,toBlock:a,strict:t}):[],c=a}if(0===s.length)return;if(a)u.onLogs(s);else for(const e of s)u.onLogs([e])}catch(e){var l;d&&e instanceof InvalidInputRpcError&&(p=!1),null===(l=u.onError)||void 0===l||l.call(u,e)}else{try{d=await getAction(e,createContractEventFilter,"createContractEventFilter")({abi:r,address:n,args:i,eventName:o,strict:t,fromBlock:s})}catch{}p=!0}}),{emitOnBegin:!0,interval:l});return async()=>{d&&await getAction(e,uninstallFilter,"uninstallFilter")({filter:d}),h()}}))})():(()=>{const t=null!=p&&p,s=stringify$1(["watchContractEvent",n,i,a,e.uid,o,l,t]);let d=!0,h=()=>d=!1;return observe(s,{onLogs:c,onError:u},(t=>((async()=>{try{const a=(()=>{if("fallback"===e.transport.type){const t=e.transport.transports.find((e=>"webSocket"===e.config.type));return t?t.value:e.transport}return e.transport})(),s=o?encodeEventTopics({abi:r,eventName:o,args:i}):[],{unsubscribe:u}=await a.subscribe({params:["logs",{address:n,topics:s}],onData(e){if(!d)return;const n=e.result;try{const{eventName:e,args:i}=decodeEventLog({abi:r,data:n.data,topics:n.topics,strict:p}),a=formatLog(n,{args:i,eventName:e});t.onLogs([a])}catch(e){let r,a;if(e instanceof DecodeLogDataMismatch||e instanceof DecodeLogTopicsMismatch){var i;if(p)return;r=e.abiItem.name,a=null===(i=e.abiItem.inputs)||void 0===i?void 0:i.some((e=>!("name"in e&&e.name)))}const o=formatLog(n,{args:a?[]:{},eventName:r});t.onLogs([o])}},onError(e){var r;null===(r=t.onError)||void 0===r||r.call(t,e)}});h=u,d||h()}catch(e){null==u||u(e)}})(),()=>h())))})()}class AccountNotFoundError extends BaseError{constructor(){let{docsPath:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join("\n"),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class AccountTypeNotSupportedError extends BaseError{constructor(e){let{docsPath:t,metaMessages:r,type:n}=e;super(`Account type "${n}" is not supported.`,{docsPath:t,metaMessages:r,name:"AccountTypeNotSupportedError"})}}function assertCurrentChain(e){let{chain:t,currentChainId:r}=e;if(!t)throw new ChainNotFoundError;if(r!==t.id)throw new ChainMismatchError({chain:t,currentChainId:r})}function getTransactionError(e,t){let{docsPath:r,...n}=t;const i=(()=>{const t=getNodeError(e,n);return t instanceof UnknownNodeError?e:t})();return new TransactionExecutionError(i,{docsPath:r,...n})}async function sendRawTransaction(e,t){let{serializedTransaction:r}=t;return e.request({method:"eth_sendRawTransaction",params:[r]},{retryCount:0})}async function sendTransaction(e,t){const{account:r=e.account,chain:n=e.chain,accessList:i,authorizationList:a,blobs:o,data:s,gas:u,gasPrice:c,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:p,nonce:h,value:f,...m}=t;if(!r)throw new AccountNotFoundError({docsPath:"/docs/actions/wallet/sendTransaction"});const y=parseAccount(r);try{assertRequest(t);const r=await(async()=>t.to?t.to:a&&a.length>0?await recoverAuthorizationAddress({authorization:a[0]}).catch((()=>{throw new BaseError("`to` is required. Could not infer from `authorizationList`.")})):void 0)();if("json-rpc"===y.type){var g,b,v;let t;null!==n&&(t=await getAction(e,getChainId,"getChainId")({}),assertCurrentChain({currentChainId:t,chain:n}));const w=null===(g=e.chain)||void 0===g||null===(b=g.formatters)||void 0===b||null===(v=b.transactionRequest)||void 0===v?void 0:v.format,_=(w||formatTransactionRequest)({...extract(m,{format:w}),accessList:i,authorizationList:a,blobs:o,chainId:t,data:s,from:y.address,gas:u,gasPrice:c,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:p,nonce:h,to:r,value:f});return await e.request({method:"eth_sendTransaction",params:[_]},{retryCount:0})}if("local"===y.type){var w;const t=await getAction(e,prepareTransactionRequest,"prepareTransactionRequest")({account:y,accessList:i,authorizationList:a,blobs:o,chain:n,data:s,gas:u,gasPrice:c,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:p,nonce:h,nonceManager:y.nonceManager,parameters:[...defaultParameters,"sidecars"],value:f,...m,to:r}),g=null==n||null===(w=n.serializers)||void 0===w?void 0:w.transaction,b=await y.signTransaction(t,{serializer:g});return await getAction(e,sendRawTransaction,"sendRawTransaction")({serializedTransaction:b})}if("smart"===y.type)throw new AccountTypeNotSupportedError({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new AccountTypeNotSupportedError({docsPath:"/docs/actions/wallet/sendTransaction",type:y.type})}catch(e){if(e instanceof AccountTypeNotSupportedError)throw e;throw getTransactionError(e,{...t,account:y,chain:t.chain||void 0})}}async function writeContract(e,t){const{abi:r,account:n=e.account,address:i,args:a,dataSuffix:o,functionName:s,...u}=t;if(!n)throw new AccountNotFoundError({docsPath:"/docs/contract/writeContract"});const c=parseAccount(n),d=encodeFunctionData({abi:r,args:a,functionName:s});try{return await getAction(e,sendTransaction,"sendTransaction")({data:`${d}${o?o.replace("0x",""):""}`,to:i,account:c,...u})}catch(e){throw getContractError(e,{abi:r,address:i,args:a,docsPath:"/docs/contract/writeContract",functionName:s,sender:c.address})}}class Eip712DomainNotFoundError extends BaseError{constructor(e){let{address:t}=e;super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function getEip712Domain(e,t){const{address:r,factory:n,factoryData:i}=t;try{const[t,a,o,s,u,c,d]=await getAction(e,readContract,"readContract")({abi:abi$c,address:r,functionName:"eip712Domain",factory:n,factoryData:i});return{domain:{name:a,version:o,chainId:Number(s),verifyingContract:u,salt:c},extensions:d,fields:t}}catch(e){const t=e;if("ContractFunctionExecutionError"===t.name&&"ContractFunctionZeroDataError"===t.cause.name)throw new Eip712DomainNotFoundError({address:r});throw t}}const abi$c=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];async function addChain(e,t){let{chain:r}=t;const{id:n,name:i,nativeCurrency:a,rpcUrls:o,blockExplorers:s}=r;await e.request({method:"wallet_addEthereumChain",params:[{chainId:numberToHex(n),chainName:i,nativeCurrency:a,rpcUrls:o.default.http,blockExplorerUrls:s?Object.values(s).map((e=>{let{url:t}=e;return t})):void 0}]},{dedupe:!0,retryCount:0})}const size=256;let index=size,buffer$1;function uid(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:11;if(!buffer$1||index+e>2*size){buffer$1="",index=0;for(let e=0;e<size;e++)buffer$1+=(256+256*Math.random()|0).toString(16).substring(1)}return buffer$1.substring(index,index+++e)}function createClient(e){var t;const{batch:r,cacheTime:n=(null!==(t=e.pollingInterval)&&void 0!==t?t:4e3),ccipRead:i,key:a="base",name:o="Base Client",pollingInterval:s=4e3,type:u="base"}=e,c=e.chain,d=e.account?parseAccount(e.account):void 0,{config:l,request:p,value:h}=e.transport({chain:c,pollingInterval:s}),f={account:d,batch:r,cacheTime:n,ccipRead:i,chain:c,key:a,name:o,pollingInterval:s,request:p,transport:{...l,...h},type:u,uid:uid()};return Object.assign(f,{extend:function e(t){return r=>{const n=r(t);for(const e in f)delete n[e];const i={...t,...n};return Object.assign(i,{extend:e(i)})}}(f)})}const promiseCache=new LruMap(8192);function withDedupe(e,t){let{enabled:r=!0,id:n}=t;if(!r||!n)return e();if(promiseCache.get(n))return promiseCache.get(n);const i=e().finally((()=>promiseCache.delete(n)));return promiseCache.set(n,i),i}function withRetry(e){let{delay:t=100,retryCount:r=2,shouldRetry:n=(()=>!0)}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((i,a)=>{const o=async function(){let{count:s=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=await e();i(t)}catch(e){if(s<r&&await n({count:s,error:e}))return(async e=>{let{error:r}=e;const n="function"==typeof t?t({count:s,error:r}):t;n&&await wait$1(n),o({count:s+1})})({error:e});a(e)}};o()}))}function buildRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{dedupe:i=!1,retryDelay:a=150,retryCount:o=3,uid:s}={...t,...n};return withDedupe((()=>withRetry((async()=>{try{return await e(r)}catch(e){const t=e;switch(t.code){case ParseRpcError.code:throw new ParseRpcError(t);case InvalidRequestRpcError.code:throw new InvalidRequestRpcError(t);case MethodNotFoundRpcError.code:throw new MethodNotFoundRpcError(t,{method:r.method});case InvalidParamsRpcError.code:throw new InvalidParamsRpcError(t);case InternalRpcError.code:throw new InternalRpcError(t);case InvalidInputRpcError.code:throw new InvalidInputRpcError(t);case ResourceNotFoundRpcError.code:throw new ResourceNotFoundRpcError(t);case ResourceUnavailableRpcError.code:throw new ResourceUnavailableRpcError(t);case TransactionRejectedRpcError.code:throw new TransactionRejectedRpcError(t);case MethodNotSupportedRpcError.code:throw new MethodNotSupportedRpcError(t,{method:r.method});case LimitExceededRpcError.code:throw new LimitExceededRpcError(t);case JsonRpcVersionUnsupportedError.code:throw new JsonRpcVersionUnsupportedError(t);case UserRejectedRequestError.code:throw new UserRejectedRequestError(t);case UnauthorizedProviderError.code:throw new UnauthorizedProviderError(t);case UnsupportedProviderMethodError.code:throw new UnsupportedProviderMethodError(t);case ProviderDisconnectedError.code:throw new ProviderDisconnectedError(t);case ChainDisconnectedError.code:throw new ChainDisconnectedError(t);case SwitchChainError.code:throw new SwitchChainError(t);case 5e3:throw new UserRejectedRequestError(t);default:if(e instanceof BaseError)throw e;throw new UnknownRpcError(t)}}}),{delay:e=>{let{count:t,error:r}=e;if(r&&r instanceof HttpRequestError){var n;const e=null==r||null===(n=r.headers)||void 0===n?void 0:n.get("Retry-After");if(null!=e&&e.match(/\d/))return 1e3*Number.parseInt(e)}return~~(1<<t)*a},retryCount:o,shouldRetry:e=>{let{error:t}=e;return shouldRetry(t)}})),{enabled:i,id:i?keccak256(stringToHex(`${s}.${stringify$1(r)}`)):void 0})}}function shouldRetry(e){return"code"in e&&"number"==typeof e.code?-1===e.code||(e.code===LimitExceededRpcError.code||e.code===InternalRpcError.code):!(e instanceof HttpRequestError&&e.status)||(403===e.status||(408===e.status||(413===e.status||(429===e.status||(500===e.status||(502===e.status||(503===e.status||504===e.status)))))))}function createTransport(e,t){let{key:r,name:n,request:i,retryCount:a=3,retryDelay:o=150,timeout:s,type:u}=e;return{config:{key:r,name:n,request:i,retryCount:a,retryDelay:o,timeout:s,type:u},request:buildRequest(i,{retryCount:a,retryDelay:o,uid:uid()}),value:t}}function custom$2(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{key:r="custom",name:n="Custom Provider",retryDelay:i}=t;return a=>{var o;let{retryCount:s}=a;return createTransport({key:r,name:n,request:e.request.bind(e),retryCount:null!==(o=t.retryCount)&&void 0!==o?o:s,retryDelay:i,type:"custom"})}}class UrlRequiredError extends BaseError{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function withTimeout(e,t){let{errorInstance:r=new Error("timed out"),timeout:n,signal:i}=t;return new Promise(((t,a)=>{(async()=>{let o;try{const s=new AbortController;n>0&&(o=setTimeout((()=>{i?s.abort():a(r)}),n)),t(await e({signal:(null==s?void 0:s.signal)||null}))}catch(e){"AbortError"===(null==e?void 0:e.name)&&a(r),a(e)}finally{clearTimeout(o)}})()}))}function createIdStore(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const idCache=createIdStore();function getHttpRpcClient(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{async request(r){var n,i,a;const{body:o,onRequest:s=t.onRequest,onResponse:u=t.onResponse,timeout:c=(null!==(n=t.timeout)&&void 0!==n?n:1e4)}=r,d={...null!==(i=t.fetchOptions)&&void 0!==i?i:{},...null!==(a=r.fetchOptions)&&void 0!==a?a:{}},{headers:l,method:p,signal:h}=d;try{var f;const t=await withTimeout((async t=>{var r;let{signal:n}=t;const i={...d,body:Array.isArray(o)?stringify$1(o.map((e=>{var t;return{jsonrpc:"2.0",id:null!==(t=e.id)&&void 0!==t?t:idCache.take(),...e}}))):stringify$1({jsonrpc:"2.0",id:null!==(r=o.id)&&void 0!==r?r:idCache.take(),...o}),headers:{"Content-Type":"application/json",...l},method:p||"POST",signal:h||(c>0?n:null)},a=new Request(e,i);s&&await s(a);return await fetch(e,i)}),{errorInstance:new TimeoutError({body:o,url:e}),timeout:c,signal:!0});let r;if(u&&await u(t),null!==(f=t.headers.get("Content-Type"))&&void 0!==f&&f.startsWith("application/json"))r=await t.json();else{r=await t.text();try{r=JSON.parse(r||"{}")}catch(e){if(t.ok)throw e;r={error:r}}}if(!t.ok)throw new HttpRequestError({body:o,details:stringify$1(r.error)||t.statusText,headers:t.headers,status:t.status,url:e});return r}catch(t){if(t instanceof HttpRequestError)throw t;if(t instanceof TimeoutError)throw t;throw new HttpRequestError({body:o,cause:t,url:e})}}}}function http(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{batch:r,fetchOptions:n,key:i="http",name:a="HTTP JSON-RPC",onFetchRequest:o,onFetchResponse:s,retryDelay:u}=t;return c=>{var d,l;let{chain:p,retryCount:h,timeout:f}=c;const{batchSize:m=1e3,wait:y=0}="object"==typeof r?r:{},g=null!==(d=t.retryCount)&&void 0!==d?d:h,b=null!==(l=null!=f?f:t.timeout)&&void 0!==l?l:1e4,v=e||(null==p?void 0:p.rpcUrls.default.http[0]);if(!v)throw new UrlRequiredError;const w=getHttpRpcClient(v,{fetchOptions:n,onRequest:o,onResponse:s,timeout:b});return createTransport({key:i,name:a,async request(e){let{method:t,params:n}=e;const i={method:t,params:n},{schedule:a}=createBatchScheduler({id:v,wait:y,shouldSplitBatch:e=>e.length>m,fn:e=>w.request({body:e}),sort:(e,t)=>e.id-t.id}),[{error:o,result:s}]=await(async e=>r?a(e):[await w.request({body:e})])(i);if(o)throw new RpcRequestError({body:i,error:o,url:v});return s},retryCount:g,retryDelay:u,timeout:b,type:"http"},{fetchOptions:n,url:v})}}function isNullUniversalResolverError(e,t){var r,n,i,a,o,s;if(!(e instanceof BaseError))return!1;const u=e.walk((e=>e instanceof ContractFunctionRevertedError));return u instanceof ContractFunctionRevertedError&&("ResolverNotFound"===(null===(r=u.data)||void 0===r?void 0:r.errorName)||("ResolverWildcardNotSupported"===(null===(n=u.data)||void 0===n?void 0:n.errorName)||("ResolverNotContract"===(null===(i=u.data)||void 0===i?void 0:i.errorName)||("ResolverError"===(null===(a=u.data)||void 0===a?void 0:a.errorName)||("HttpError"===(null===(o=u.data)||void 0===o?void 0:o.errorName)||(!(null===(s=u.reason)||void 0===s||!s.includes("Wildcard on non-extended resolvers is not supported"))||"reverse"===t&&u.reason===panicReasons[50]))))))}function encodedLabelToLabelhash(e){if(66!==e.length)return null;if(0!==e.indexOf("["))return null;if(65!==e.indexOf("]"))return null;const t=`0x${e.slice(1,65)}`;return isHex(t)?t:null}function namehash(e){let t=new Uint8Array(32).fill(0);if(!e)return bytesToHex$4(t);const r=e.split(".");for(let e=r.length-1;e>=0;e-=1){const n=encodedLabelToLabelhash(r[e]),i=n?toBytes$4(n):keccak256(stringToBytes$2(r[e]),"bytes");t=keccak256(concat([t,i]),"bytes")}return bytesToHex$4(t)}function encodeLabelhash(e){return`[${e.slice(2)}]`}function labelhash(e){const t=new Uint8Array(32).fill(0);return e?encodedLabelToLabelhash(e)||keccak256(stringToBytes$2(e)):bytesToHex$4(t)}function packetToBytes(e){const t=e.replace(/^\.|\.$/gm,"");if(0===t.length)return new Uint8Array(1);const r=new Uint8Array(stringToBytes$2(t).byteLength+2);let n=0;const i=t.split(".");for(let e=0;e<i.length;e++){let t=stringToBytes$2(i[e]);t.byteLength>255&&(t=stringToBytes$2(encodeLabelhash(labelhash(i[e])))),r[n]=t.length,r.set(t,n+1),n+=t.length+1}return r.byteLength!==n+1?r.slice(0,n+1):r}async function getEnsAddress(e,t){let{blockNumber:r,blockTag:n,coinType:i,name:a,gatewayUrls:o,strict:s,universalResolverAddress:u}=t,c=u;if(!c){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");c=getChainContractAddress({blockNumber:r,chain:e.chain,contract:"ensUniversalResolver"})}try{const t=encodeFunctionData({abi:addressResolverAbi,functionName:"addr",...null!=i?{args:[namehash(a),BigInt(i)]}:{args:[namehash(a)]}}),s={address:c,abi:universalResolverResolveAbi,functionName:"resolve",args:[toHex(packetToBytes(a)),t],blockNumber:r,blockTag:n},u=getAction(e,readContract,"readContract"),d=o?await u({...s,args:[...s.args,o]}):await u(s);if("0x"===d[0])return null;const l=decodeFunctionResult({abi:addressResolverAbi,args:null!=i?[namehash(a),BigInt(i)]:void 0,functionName:"addr",data:d[0]});return"0x"===l||"0x00"===trim$1(l)?null:l}catch(e){if(s)throw e;if(isNullUniversalResolverError(e,"resolve"))return null;throw e}}class EnsAvatarInvalidMetadataError extends BaseError{constructor(e){let{data:t}=e;super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class EnsAvatarInvalidNftUriError extends BaseError{constructor(e){let{reason:t}=e;super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class EnsAvatarUriResolutionError extends BaseError{constructor(e){let{uri:t}=e;super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class EnsAvatarUnsupportedNamespaceError extends BaseError{constructor(e){let{namespace:t}=e;super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}function _wrapRegExp$1(){_wrapRegExp$1=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,i){var a=RegExp(e,n);return t.set(a,i||t.get(e)),_setPrototypeOf(a,r.prototype)}function n(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){var i=n[r];if("number"==typeof i)t[r]=e[i];else{for(var a=0;void 0===e[i[a]]&&a+1<i.length;)a++;t[r]=e[i[a]]}return t}),Object.create(null))}return _inherits(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);if(r){r.groups=n(r,this);var i=r.indices;i&&(i.groups=n(i,this))}return r},r.prototype[Symbol.replace]=function(r,i){if("string"==typeof i){var a=t.get(this);return e[Symbol.replace].call(this,r,i.replace(/\$<([^>]+)(>|$)/g,(function(e,t,r){if(""===r)return e;var n=a[t];return Array.isArray(n)?"$"+n.join("$"):"number"==typeof n?"$"+n:""})))}if("function"==typeof i){var o=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(n(e,o)),i.apply(this,e)}))}return e[Symbol.replace].call(this,r,i)},_wrapRegExp$1.apply(this,arguments)}const networkRegex=_wrapRegExp$1(/(https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(\/)?(ipfs\/|ipns\/)?([\w\-.]+)(\/.*)?/,{protocol:1,root:2,subpath:3,target:4,subtarget:5}),ipfsHashRegex=_wrapRegExp$1(/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/([\w\-.]+))?(\/.*)?$/,{target:3,subtarget:4}),base64Regex=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,dataURIRegex=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function isImageUri(e){try{const t=await fetch(e,{method:"HEAD"});if(200===t.status){const e=t.headers.get("content-type");return null==e?void 0:e.startsWith("image/")}return!1}catch(t){return("object"!=typeof t||void 0===t.response)&&(!!globalThis.hasOwnProperty("Image")&&new Promise((t=>{const r=new Image;r.onload=()=>{t(!0)},r.onerror=()=>{t(!1)},r.src=e})))}}function getGateway(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function resolveAvatarUri(e){let{uri:t,gatewayUrls:r}=e;const n=base64Regex.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const i=getGateway(null==r?void 0:r.ipfs,"https://ipfs.io"),a=getGateway(null==r?void 0:r.arweave,"https://arweave.net"),o=t.match(networkRegex),{protocol:s,subpath:u,target:c,subtarget:d=""}=(null==o?void 0:o.groups)||{},l="ipns:/"===s||"ipns/"===u,p="ipfs:/"===s||"ipfs/"===u||ipfsHashRegex.test(t);if(t.startsWith("http")&&!l&&!p){let e=t;return null!=r&&r.arweave&&(e=t.replace(/https:\/\/arweave.net/g,null==r?void 0:r.arweave)),{uri:e,isOnChain:!1,isEncoded:!1}}if((l||p)&&c)return{uri:`${i}/${l?"ipns":"ipfs"}/${c}${d}`,isOnChain:!1,isEncoded:!1};if("ar:/"===s&&c)return{uri:`${a}/${c}${d||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(dataURIRegex,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new EnsAvatarUriResolutionError({uri:t})}function getJsonImage(e){if("object"!=typeof e||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new EnsAvatarInvalidMetadataError({data:e});return e.image||e.image_url||e.image_data}async function getMetadataAvatarUri(e){let{gatewayUrls:t,uri:r}=e;try{const e=await fetch(r).then((e=>e.json()));return await parseAvatarUri({gatewayUrls:t,uri:getJsonImage(e)})}catch{throw new EnsAvatarUriResolutionError({uri:r})}}async function parseAvatarUri(e){let{gatewayUrls:t,uri:r}=e;const{uri:n,isOnChain:i}=resolveAvatarUri({uri:r,gatewayUrls:t});if(i)return n;if(await isImageUri(n))return n;throw new EnsAvatarUriResolutionError({uri:r})}function parseNftUri(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[r,n,i]=t.split("/"),[a,o]=r.split(":"),[s,u]=n.split(":");if(!a||"eip155"!==a.toLowerCase())throw new EnsAvatarInvalidNftUriError({reason:"Only EIP-155 supported"});if(!o)throw new EnsAvatarInvalidNftUriError({reason:"Chain ID not found"});if(!u)throw new EnsAvatarInvalidNftUriError({reason:"Contract address not found"});if(!i)throw new EnsAvatarInvalidNftUriError({reason:"Token ID not found"});if(!s)throw new EnsAvatarInvalidNftUriError({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:s.toLowerCase(),contractAddress:u,tokenID:i}}async function getNftTokenUri(e,t){let{nft:r}=t;if("erc721"===r.namespace)return readContract(e,{address:r.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(r.tokenID)]});if("erc1155"===r.namespace)return readContract(e,{address:r.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(r.tokenID)]});throw new EnsAvatarUnsupportedNamespaceError({namespace:r.namespace})}async function parseAvatarRecord(e,t){let{gatewayUrls:r,record:n}=t;return/eip155:/i.test(n)?parseNftAvatarUri(e,{gatewayUrls:r,record:n}):parseAvatarUri({uri:n,gatewayUrls:r})}async function parseNftAvatarUri(e,t){let{gatewayUrls:r,record:n}=t;const i=parseNftUri(n),a=await getNftTokenUri(e,{nft:i}),{uri:o,isOnChain:s,isEncoded:u}=resolveAvatarUri({uri:a,gatewayUrls:r});if(s&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){const e=u?atob(o.replace("data:application/json;base64,","")):o;return parseAvatarUri({uri:getJsonImage(JSON.parse(e)),gatewayUrls:r})}let c=i.tokenID;return"erc1155"===i.namespace&&(c=c.replace("0x","").padStart(64,"0")),getMetadataAvatarUri({gatewayUrls:r,uri:o.replace(/(?:0x)?{id}/,c)})}async function getEnsText(e,t){let{blockNumber:r,blockTag:n,name:i,key:a,gatewayUrls:o,strict:s,universalResolverAddress:u}=t,c=u;if(!c){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");c=getChainContractAddress({blockNumber:r,chain:e.chain,contract:"ensUniversalResolver"})}try{const t={address:c,abi:universalResolverResolveAbi,functionName:"resolve",args:[toHex(packetToBytes(i)),encodeFunctionData({abi:textResolverAbi,functionName:"text",args:[namehash(i),a]})],blockNumber:r,blockTag:n},s=getAction(e,readContract,"readContract"),u=o?await s({...t,args:[...t.args,o]}):await s(t);if("0x"===u[0])return null;const d=decodeFunctionResult({abi:textResolverAbi,functionName:"text",data:u[0]});return""===d?null:d}catch(e){if(s)throw e;if(isNullUniversalResolverError(e,"resolve"))return null;throw e}}async function getEnsAvatar(e,t){let{blockNumber:r,blockTag:n,assetGatewayUrls:i,name:a,gatewayUrls:o,strict:s,universalResolverAddress:u}=t;const c=await getAction(e,getEnsText,"getEnsText")({blockNumber:r,blockTag:n,key:"avatar",name:a,universalResolverAddress:u,gatewayUrls:o,strict:s});if(!c)return null;try{return await parseAvatarRecord(e,{record:c,gatewayUrls:i})}catch{return null}}async function getEnsName(e,t){let{address:r,blockNumber:n,blockTag:i,gatewayUrls:a,strict:o,universalResolverAddress:s}=t,u=s;if(!u){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");u=getChainContractAddress({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const c=`${r.toLowerCase().substring(2)}.addr.reverse`;try{const t={address:u,abi:universalResolverReverseAbi,functionName:"reverse",args:[toHex(packetToBytes(c))],blockNumber:n,blockTag:i},o=getAction(e,readContract,"readContract"),[s,d]=a?await o({...t,args:[...t.args,a]}):await o(t);return r.toLowerCase()!==d.toLowerCase()?null:s}catch(e){if(o)throw e;if(isNullUniversalResolverError(e,"reverse"))return null;throw e}}async function getEnsResolver(e,t){let{blockNumber:r,blockTag:n,name:i,universalResolverAddress:a}=t,o=a;if(!o){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=getChainContractAddress({blockNumber:r,chain:e.chain,contract:"ensUniversalResolver"})}const[s]=await getAction(e,readContract,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[toHex(packetToBytes(i))],blockNumber:r,blockTag:n});return s}async function createBlockFilter(e){const t=createFilterRequestScope(e,{method:"eth_newBlockFilter"}),r=await e.request({method:"eth_newBlockFilter"});return{id:r,request:t(r),type:"block"}}async function createEventFilter(e){let{address:t,args:r,event:n,events:i,fromBlock:a,strict:o,toBlock:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=null!=i?i:n?[n]:void 0,c=createFilterRequestScope(e,{method:"eth_newFilter"});let d=[];if(u){const e=u.flatMap((e=>encodeEventTopics({abi:[e],eventName:e.name,args:r})));d=[e],n&&(d=d[0])}const l=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof a?numberToHex(a):a,toBlock:"bigint"==typeof s?numberToHex(s):s,...d.length?{topics:d}:{}}]});return{abi:u,args:r,eventName:n?n.name:void 0,fromBlock:a,id:l,request:c(l),strict:Boolean(o),toBlock:s,type:"event"}}async function createPendingTransactionFilter(e){const t=createFilterRequestScope(e,{method:"eth_newPendingTransactionFilter"}),r=await e.request({method:"eth_newPendingTransactionFilter"});return{id:r,request:t(r),type:"transaction"}}async function getBlobBaseFee(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function getBlockTransactionCount(e){let{blockHash:t,blockNumber:r,blockTag:n="latest"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=void 0!==r?numberToHex(r):void 0;let a;return a=t?await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):await e.request({method:"eth_getBlockTransactionCountByNumber",params:[i||n]},{dedupe:Boolean(i)}),hexToNumber$3(a)}async function getCode(e,t){let{address:r,blockNumber:n,blockTag:i="latest"}=t;const a=void 0!==n?numberToHex(n):void 0,o=await e.request({method:"eth_getCode",params:[r,a||i]},{dedupe:Boolean(a)});if("0x"!==o)return o}function formatFeeHistory(e){var t;return{baseFeePerGas:e.baseFeePerGas.map((e=>BigInt(e))),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:null===(t=e.reward)||void 0===t?void 0:t.map((e=>e.map((e=>BigInt(e)))))}}async function getFeeHistory(e,t){let{blockCount:r,blockNumber:n,blockTag:i="latest",rewardPercentiles:a}=t;const o=n?numberToHex(n):void 0;return formatFeeHistory(await e.request({method:"eth_feeHistory",params:[numberToHex(r),o||i,a]},{dedupe:Boolean(o)}))}async function getFilterLogs(e,t){var r;let{filter:n}=t;const i=null!==(r=n.strict)&&void 0!==r&&r,a=(await n.request({method:"eth_getFilterLogs",params:[n.id]})).map((e=>formatLog(e)));return n.abi?parseEventLogs({abi:n.abi,logs:a,strict:i}):a}class OffchainLookupError extends BaseError{constructor(e){var t;let{callbackSelector:r,cause:n,data:i,extraData:a,sender:o,urls:s}=e;super(n.shortMessage||"An error occurred while fetching for an offchain result.",{cause:n,metaMessages:[...n.metaMessages||[],null!==(t=n.metaMessages)&&void 0!==t&&t.length?"":[],"Offchain Gateway Call:",s&&["  Gateway URL(s):",...s.map((e=>`    ${getUrl(e)}`))],`  Sender: ${o}`,`  Data: ${i}`,`  Callback selector: ${r}`,`  Extra data: ${a}`].flat(),name:"OffchainLookupError"})}}class OffchainLookupResponseMalformedError extends BaseError{constructor(e){let{result:t,url:r}=e;super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${getUrl(r)}`,`Response: ${stringify$1(t)}`],name:"OffchainLookupResponseMalformedError"})}}class OffchainLookupSenderMismatchError extends BaseError{constructor(e){let{sender:t,to:r}=e;super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${r}`,`OffchainLookup sender address: ${t}`],name:"OffchainLookupSenderMismatchError"})}}const offchainLookupSignature="0x556f1830",offchainLookupAbiItem={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function offchainLookup(e,t){let{blockNumber:r,blockTag:n,data:i,to:a}=t;const{args:o}=decodeErrorResult({data:i,abi:[offchainLookupAbiItem]}),[s,u,c,d,l]=o,{ccipRead:p}=e,h=p&&"function"==typeof(null==p?void 0:p.request)?p.request:ccipRequest;try{if(!isAddressEqual(a,s))throw new OffchainLookupSenderMismatchError({sender:s,to:a});const t=await h({data:c,sender:s,urls:u}),{data:i}=await call$1(e,{blockNumber:r,blockTag:n,data:concat([d,encodeAbiParameters([{type:"bytes"},{type:"bytes"}],[t,l])]),to:a});return i}catch(e){throw new OffchainLookupError({callbackSelector:d,cause:e,data:i,extraData:l,sender:s,urls:u})}}async function ccipRequest(e){let{data:t,sender:r,urls:n}=e,i=new Error("An unknown error occurred.");for(let e=0;e<n.length;e++){const s=n[e],u=s.includes("{data}")?"GET":"POST",c="POST"===u?{data:t,sender:r}:void 0;try{var a;const e=await fetch(s.replace("{sender}",r).replace("{data}",t),{body:JSON.stringify(c),method:u});let n;if(n=null!==(a=e.headers.get("Content-Type"))&&void 0!==a&&a.startsWith("application/json")?(await e.json()).data:await e.text(),!e.ok){var o;i=new HttpRequestError({body:c,details:null!==(o=n)&&void 0!==o&&o.error?stringify$1(n.error):e.statusText,headers:e.headers,status:e.status,url:s});continue}if(!isHex(n)){i=new OffchainLookupResponseMalformedError({result:n,url:s});continue}return n}catch(e){i=new HttpRequestError({body:c,details:e.message,url:s})}}throw i}var ccip=Object.freeze({__proto__:null,offchainLookupSignature:offchainLookupSignature,offchainLookupAbiItem:offchainLookupAbiItem,offchainLookup:offchainLookup,ccipRequest:ccipRequest});function defineChain(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}const bytesRegex=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,integerRegex=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function hashTypedData(e){const{domain:t={},message:r,primaryType:n}=e,i={EIP712Domain:getTypesForEIP712Domain({domain:t}),...e.types};validateTypedData({domain:t,message:r,primaryType:n,types:i});const a=["0x1901"];return t&&a.push(hashDomain({domain:t,types:i})),"EIP712Domain"!==n&&a.push(hashStruct({data:r,primaryType:n,types:i})),keccak256(concat(a))}function hashDomain(e){let{domain:t,types:r}=e;return hashStruct({data:t,primaryType:"EIP712Domain",types:r})}function hashStruct(e){let{data:t,primaryType:r,types:n}=e;return keccak256(encodeData$1({data:t,primaryType:r,types:n}))}function encodeData$1(e){let{data:t,primaryType:r,types:n}=e;const i=[{type:"bytes32"}],a=[hashType({primaryType:r,types:n})];for(const e of n[r]){const[r,o]=encodeField({types:n,name:e.name,type:e.type,value:t[e.name]});i.push(r),a.push(o)}return encodeAbiParameters(i,a)}function hashType(e){let{primaryType:t,types:r}=e;return keccak256(toHex(encodeType({primaryType:t,types:r})))}function encodeType(e){let{primaryType:t,types:r}=e,n="";const i=findTypeDependencies({primaryType:t,types:r});i.delete(t);const a=[t,...Array.from(i).sort()];for(const e of a)n+=`${e}(${r[e].map((e=>{let{name:t,type:r}=e;return`${r} ${t}`})).join(",")})`;return n}function findTypeDependencies(e){let{primaryType:t,types:r}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;const i=t.match(/^\w*/u),a=null==i?void 0:i[0];if(n.has(a)||void 0===r[a])return n;n.add(a);for(const e of r[a])findTypeDependencies({primaryType:e.type,types:r},n);return n}function encodeField(e){let{types:t,name:r,type:n,value:i}=e;if(void 0!==t[n])return[{type:"bytes32"},keccak256(encodeData$1({data:i,primaryType:n,types:t}))];if("bytes"===n){return i=`0x${(i.length%2?"0":"")+i.slice(2)}`,[{type:"bytes32"},keccak256(i)]}if("string"===n)return[{type:"bytes32"},keccak256(toHex(i))];if(n.lastIndexOf("]")===n.length-1){const e=n.slice(0,n.lastIndexOf("[")),a=i.map((n=>encodeField({name:r,type:e,types:t,value:n})));return[{type:"bytes32"},keccak256(encodeAbiParameters(a.map((e=>{let[t]=e;return t})),a.map((e=>{let[,t]=e;return t}))))]}return[{type:n},i]}function serializeTypedData(e){const{domain:t,message:r,primaryType:n,types:i}=e,a=(e,t)=>{const r={...t};for(const t of e){const{name:e,type:n}=t;"address"===n&&(r[e]=r[e].toLowerCase())}return r},o=i.EIP712Domain&&t?a(i.EIP712Domain,t):{},s=(()=>{if("EIP712Domain"!==n)return a(i[n],r)})();return stringify$1({domain:o,message:s,primaryType:n,types:i})}function validateTypedData(e){const{domain:t,message:r,primaryType:n,types:i}=e,a=(e,t)=>{for(const r of e){const{name:e,type:n}=r,o=t[e],s=n.match(integerRegex);if(s&&("number"==typeof o||"bigint"==typeof o)){const[e,t,r]=s;numberToHex(o,{signed:"int"===t,size:Number.parseInt(r)/8})}if("address"===n&&"string"==typeof o&&!isAddress(o))throw new InvalidAddressError({address:o});const u=n.match(bytesRegex);if(u){const[e,t]=u;if(t&&size$1(o)!==Number.parseInt(t))throw new BytesSizeMismatchError({expectedSize:Number.parseInt(t),givenSize:size$1(o)})}const c=i[n];c&&a(c,o)}};i.EIP712Domain&&t&&a(i.EIP712Domain,t),"EIP712Domain"!==n&&a(i[n],r)}function getTypesForEIP712Domain(e){let{domain:t}=e;return["string"==typeof(null==t?void 0:t.name)&&{name:"name",type:"string"},(null==t?void 0:t.version)&&{name:"version",type:"string"},"number"==typeof(null==t?void 0:t.chainId)&&{name:"chainId",type:"uint256"},(null==t?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(null==t?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function decodeFunctionData(e){const{abi:t,data:r}=e,n=slice(r,0,4),i=t.find((e=>"function"===e.type&&n===toFunctionSelector(formatAbiItem(e))));if(!i)throw new AbiFunctionSignatureNotFoundError(n,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:i.name,args:"inputs"in i&&i.inputs&&i.inputs.length>0?decodeAbiParameters(i.inputs,slice(r,4)):void 0}}const receiptStatuses={"0x0":"reverted","0x1":"success"};function formatTransactionReceipt(e){const t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map((e=>formatLog(e))):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?hexToNumber$3(e.transactionIndex):null,status:e.status?receiptStatuses[e.status]:null,type:e.type?transactionType[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}const presignMessagePrefix="Ethereum Signed Message:\n";function toPrefixedMessage(e){const t="string"==typeof e?stringToHex(e):"string"==typeof e.raw?e.raw:bytesToHex$4(e.raw);return concat([stringToHex(`${presignMessagePrefix}${size$1(t)}`),t])}function hashMessage(e,t){return keccak256(toPrefixedMessage(e),t)}async function recoverTypedDataAddress(e){const{domain:t,message:r,primaryType:n,signature:i,types:a}=e;return recoverAddress({hash:hashTypedData({domain:t,message:r,primaryType:n,types:a}),signature:i})}const erc6492MagicBytes="0x6492649264926492649264926492649264926492649264926492649264926492";function isErc6492Signature(e){return sliceHex(e,-32)===erc6492MagicBytes}function serializeErc6492Signature(e){const{address:t,data:r,signature:n,to:i="hex"}=e,a=concatHex([encodeAbiParameters([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,r,n]),erc6492MagicBytes]);return"hex"===i?a:hexToBytes$3(a)}function assertTransactionEIP7702(e){const{authorizationList:t}=e;if(t)for(const e of t){const{contractAddress:t,chainId:r}=e;if(!isAddress(t))throw new InvalidAddressError({address:t});if(r<=0)throw new InvalidChainIdError({chainId:r})}assertTransactionEIP1559(e)}function assertTransactionEIP4844(e){const{blobVersionedHashes:t}=e;if(t){if(0===t.length)throw new EmptyBlobError;for(const e of t){const t=size$1(e),r=hexToNumber$3(slice(e,0,1));if(32!==t)throw new InvalidVersionedHashSizeError({hash:e,size:t});if(r!==versionedHashVersionKzg)throw new InvalidVersionedHashVersionError({hash:e,version:r})}}assertTransactionEIP1559(e)}function assertTransactionEIP1559(e){const{chainId:t,maxPriorityFeePerGas:r,maxFeePerGas:n,to:i}=e;if(t<=0)throw new InvalidChainIdError({chainId:t});if(i&&!isAddress(i))throw new InvalidAddressError({address:i});if(n&&n>maxUint256)throw new FeeCapTooHighError({maxFeePerGas:n});if(r&&n&&r>n)throw new TipAboveFeeCapError({maxFeePerGas:n,maxPriorityFeePerGas:r})}function assertTransactionEIP2930(e){const{chainId:t,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:i,to:a}=e;if(t<=0)throw new InvalidChainIdError({chainId:t});if(a&&!isAddress(a))throw new InvalidAddressError({address:a});if(r||i)throw new BaseError("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(n&&n>maxUint256)throw new FeeCapTooHighError({maxFeePerGas:n})}function assertTransactionLegacy(e){const{chainId:t,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:i,to:a}=e;if(a&&!isAddress(a))throw new InvalidAddressError({address:a});if(void 0!==t&&t<=0)throw new InvalidChainIdError({chainId:t});if(r||i)throw new BaseError("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(n&&n>maxUint256)throw new FeeCapTooHighError({maxFeePerGas:n})}function serializeAuthorizationList(e){if(!e||0===e.length)return[];const t=[];for(const r of e){const{contractAddress:e,chainId:n,nonce:i,...a}=r;t.push([toHex(n),e,i?toHex(i):"0x",...toYParitySignatureArray({},a)])}return t}function serializeAccessList(e){if(!e||0===e.length)return[];const t=[];for(let r=0;r<e.length;r++){const{address:n,storageKeys:i}=e[r];for(let e=0;e<i.length;e++)if(i[e].length-2!=64)throw new InvalidStorageKeySizeError({storageKey:i[e]});if(!isAddress(n,{strict:!1}))throw new InvalidAddressError({address:n});t.push([n,i])}return t}function serializeTransaction(e,t){const r=getTransactionType(e);return"eip1559"===r?serializeTransactionEIP1559(e,t):"eip2930"===r?serializeTransactionEIP2930(e,t):"eip4844"===r?serializeTransactionEIP4844(e,t):"eip7702"===r?serializeTransactionEIP7702(e,t):serializeTransactionLegacy(e,t)}function serializeTransactionEIP7702(e,t){const{authorizationList:r,chainId:n,gas:i,nonce:a,to:o,value:s,maxFeePerGas:u,maxPriorityFeePerGas:c,accessList:d,data:l}=e;assertTransactionEIP7702(e);const p=serializeAccessList(d),h=serializeAuthorizationList(r);return concatHex(["0x04",toRlp([toHex(n),a?toHex(a):"0x",c?toHex(c):"0x",u?toHex(u):"0x",i?toHex(i):"0x",null!=o?o:"0x",s?toHex(s):"0x",null!=l?l:"0x",p,h,...toYParitySignatureArray(e,t)])])}function serializeTransactionEIP4844(e,t){var r;const{chainId:n,gas:i,nonce:a,to:o,value:s,maxFeePerBlobGas:u,maxFeePerGas:c,maxPriorityFeePerGas:d,accessList:l,data:p}=e;assertTransactionEIP4844(e);let h=e.blobVersionedHashes,f=e.sidecars;if(e.blobs&&(void 0===h||void 0===f)){const t="string"==typeof e.blobs[0]?e.blobs:e.blobs.map((e=>bytesToHex$4(e))),r=e.kzg,n=blobsToCommitments({blobs:t,kzg:r});if(void 0===h&&(h=commitmentsToVersionedHashes({commitments:n})),void 0===f){f=toBlobSidecars({blobs:t,commitments:n,proofs:blobsToProofs({blobs:t,commitments:n,kzg:r})})}}const m=serializeAccessList(l),y=[toHex(n),a?toHex(a):"0x",d?toHex(d):"0x",c?toHex(c):"0x",i?toHex(i):"0x",null!=o?o:"0x",s?toHex(s):"0x",null!=p?p:"0x",m,u?toHex(u):"0x",null!==(r=h)&&void 0!==r?r:[],...toYParitySignatureArray(e,t)],g=[],b=[],v=[];if(f)for(let e=0;e<f.length;e++){const{blob:t,commitment:r,proof:n}=f[e];g.push(t),b.push(r),v.push(n)}return concatHex(["0x03",toRlp(f?[y,g,b,v]:y)])}function serializeTransactionEIP1559(e,t){const{chainId:r,gas:n,nonce:i,to:a,value:o,maxFeePerGas:s,maxPriorityFeePerGas:u,accessList:c,data:d}=e;assertTransactionEIP1559(e);const l=serializeAccessList(c);return concatHex(["0x02",toRlp([toHex(r),i?toHex(i):"0x",u?toHex(u):"0x",s?toHex(s):"0x",n?toHex(n):"0x",null!=a?a:"0x",o?toHex(o):"0x",null!=d?d:"0x",l,...toYParitySignatureArray(e,t)])])}function serializeTransactionEIP2930(e,t){const{chainId:r,gas:n,data:i,nonce:a,to:o,value:s,accessList:u,gasPrice:c}=e;assertTransactionEIP2930(e);const d=serializeAccessList(u);return concatHex(["0x01",toRlp([toHex(r),a?toHex(a):"0x",c?toHex(c):"0x",n?toHex(n):"0x",null!=o?o:"0x",s?toHex(s):"0x",null!=i?i:"0x",d,...toYParitySignatureArray(e,t)])])}function serializeTransactionLegacy(e,t){const{chainId:r=0,gas:n,data:i,nonce:a,to:o,value:s,gasPrice:u}=e;assertTransactionLegacy(e);let c=[a?toHex(a):"0x",u?toHex(u):"0x",n?toHex(n):"0x",null!=o?o:"0x",s?toHex(s):"0x",null!=i?i:"0x"];if(t){const e=(()=>{if(t.v>=35n){return(t.v-35n)/2n>0?t.v:27n+(35n===t.v?0n:1n)}if(r>0)return BigInt(2*r)+BigInt(35n+t.v-27n);const e=27n+(27n===t.v?0n:1n);if(t.v!==e)throw new InvalidLegacyVError({v:t.v});return e})(),n=trim$1(t.r),i=trim$1(t.s);c=[...c,toHex(e),"0x00"===n?"0x":n,"0x00"===i?"0x":i]}else r>0&&(c=[...c,toHex(r),"0x","0x"]);return toRlp(c)}function toYParitySignatureArray(e,t){const r=null!=t?t:e,{v:n,yParity:i}=r;if(void 0===r.r)return[];if(void 0===r.s)return[];if(void 0===n&&void 0===i)return[];const a=trim$1(r.r),o=trim$1(r.s);return["number"==typeof i?i?toHex(1):"0x":0n===n?"0x":1n===n?toHex(1):27n===n?"0x":toHex(1),"0x00"===a?"0x":a,"0x00"===o?"0x":o]}function formatStorageProof(e){return e.map((e=>({...e,value:BigInt(e.value)})))}function formatProof(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?hexToNumber$3(e.nonce):void 0,storageProof:e.storageProof?formatStorageProof(e.storageProof):void 0}}async function getProof(e,t){let{address:r,blockNumber:n,blockTag:i,storageKeys:a}=t;const o=null!=i?i:"latest",s=void 0!==n?numberToHex(n):void 0;return formatProof(await e.request({method:"eth_getProof",params:[r,a,s||o]}))}async function getStorageAt(e,t){let{address:r,blockNumber:n,blockTag:i="latest",slot:a}=t;const o=void 0!==n?numberToHex(n):void 0;return await e.request({method:"eth_getStorageAt",params:[r,a,o||i]})}async function getTransaction(e,t){var r,n,i;let{blockHash:a,blockNumber:o,blockTag:s,hash:u,index:c}=t;const d=s||"latest",l=void 0!==o?numberToHex(o):void 0;let p=null;if(u?p=await e.request({method:"eth_getTransactionByHash",params:[u]},{dedupe:!0}):a?p=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[a,numberToHex(c)]},{dedupe:!0}):(l||d)&&(p=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[l||d,numberToHex(c)]},{dedupe:Boolean(l)})),!p)throw new TransactionNotFoundError({blockHash:a,blockNumber:o,blockTag:d,hash:u,index:c});return((null===(r=e.chain)||void 0===r||null===(n=r.formatters)||void 0===n||null===(i=n.transaction)||void 0===i?void 0:i.format)||formatTransaction)(p)}async function getTransactionConfirmations(e,t){let{hash:r,transactionReceipt:n}=t;const[i,a]=await Promise.all([getAction(e,getBlockNumber,"getBlockNumber")({}),r?getAction(e,getTransaction,"getTransaction")({hash:r}):void 0]),o=(null==n?void 0:n.blockNumber)||(null==a?void 0:a.blockNumber);return o?i-o+1n:0n}async function getTransactionReceipt(e,t){var r,n,i;let{hash:a}=t;const o=await e.request({method:"eth_getTransactionReceipt",params:[a]},{dedupe:!0});if(!o)throw new TransactionReceiptNotFoundError({hash:a});return((null===(r=e.chain)||void 0===r||null===(n=r.formatters)||void 0===n||null===(i=n.transactionReceipt)||void 0===i?void 0:i.format)||formatTransactionReceipt)(o)}async function multicall(e,t){var r;const{allowFailure:n=!0,batchSize:i,blockNumber:a,blockTag:o,multicallAddress:s,stateOverride:u}=t,c=t.contracts,d=null!=i?i:"object"==typeof(null===(r=e.batch)||void 0===r?void 0:r.multicall)&&e.batch.multicall.batchSize||1024;let l=s;if(!l){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");l=getChainContractAddress({blockNumber:a,chain:e.chain,contract:"multicall3"})}const p=[[]];let h=0,f=0;for(let e=0;e<c.length;e++){const{abi:t,address:r,args:i,functionName:a}=c[e];try{const e=encodeFunctionData({abi:t,args:i,functionName:a});f+=(e.length-2)/2,d>0&&f>d&&p[h].length>0&&(h++,f=(e.length-2)/2,p[h]=[]),p[h]=[...p[h],{allowFailure:!0,callData:e,target:r}]}catch(e){const o=getContractError(e,{abi:t,address:r,args:i,docsPath:"/docs/contract/multicall",functionName:a});if(!n)throw o;p[h]=[...p[h],{allowFailure:!0,callData:"0x",target:r}]}}const m=await Promise.allSettled(p.map((t=>getAction(e,readContract,"readContract")({abi:multicall3Abi,address:l,args:[t],blockNumber:a,blockTag:o,functionName:"aggregate3",stateOverride:u})))),y=[];for(let e=0;e<m.length;e++){const t=m[e];if("rejected"===t.status){if(!n)throw t.reason;for(let r=0;r<p[e].length;r++)y.push({status:"failure",error:t.reason,result:void 0});continue}const r=t.value;for(let t=0;t<r.length;t++){const{returnData:i,success:a}=r[t],{callData:o}=p[e][t],{abi:s,address:u,functionName:d,args:l}=c[y.length];try{if("0x"===o)throw new AbiDecodingZeroDataError;if(!a)throw new RawContractError({data:i});const e=decodeFunctionResult({abi:s,args:l,data:i,functionName:d});y.push(n?{result:e,status:"success"}:e)}catch(e){const t=getContractError(e,{abi:s,address:u,args:l,docsPath:"/docs/contract/multicall",functionName:d});if(!n)throw t;y.push({error:t,result:void 0,status:"failure"})}}}if(y.length!==c.length)throw new BaseError("multicall results mismatch");return y}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$c=BigInt(0),_1n$e=BigInt(1),_2n$b=BigInt(2);function isBytes$2(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function abytes$2(e){if(!isBytes$2(e))throw new Error("Uint8Array expected")}function abool$1(e,t){if("boolean"!=typeof t)throw new Error(`${e} must be valid boolean, got "${t}".`)}const hexes$3=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function bytesToHex$3(e){abytes$2(e);let t="";for(let r=0;r<e.length;r++)t+=hexes$3[e[r]];return t}function numberToHexUnpadded$2(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function hexToNumber$2(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const asciis$1={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function asciiToBase16$1(e){return e>=asciis$1._0&&e<=asciis$1._9?e-asciis$1._0:e>=asciis$1._A&&e<=asciis$1._F?e-(asciis$1._A-10):e>=asciis$1._a&&e<=asciis$1._f?e-(asciis$1._a-10):void 0}function hexToBytes$2(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=asciiToBase16$1(e.charCodeAt(i)),a=asciiToBase16$1(e.charCodeAt(i+1));if(void 0===r||void 0===a){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+a}return n}function bytesToNumberBE$1(e){return hexToNumber$2(bytesToHex$3(e))}function bytesToNumberLE$1(e){return abytes$2(e),hexToNumber$2(bytesToHex$3(Uint8Array.from(e).reverse()))}function numberToBytesBE$1(e,t){return hexToBytes$2(e.toString(16).padStart(2*t,"0"))}function numberToBytesLE$1(e,t){return numberToBytesBE$1(e,t).reverse()}function numberToVarBytesBE$1(e){return hexToBytes$2(numberToHexUnpadded$2(e))}function ensureBytes$3(e,t,r){let n;if("string"==typeof t)try{n=hexToBytes$2(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else{if(!isBytes$2(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function concatBytes$4(){let e=0;for(let t=0;t<arguments.length;t++){const r=t<0||arguments.length<=t?void 0:arguments[t];abytes$2(r),e+=r.length}const t=new Uint8Array(e);for(let e=0,r=0;e<arguments.length;e++){const n=e<0||arguments.length<=e?void 0:arguments[e];t.set(n,r),r+=n.length}return t}function equalBytes$1(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}function utf8ToBytes$4(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}const isPosBig$1=e=>"bigint"==typeof e&&_0n$c<=e;function inRange$2(e,t,r){return isPosBig$1(e)&&isPosBig$1(t)&&isPosBig$1(r)&&t<=e&&e<r}function aInRange$1(e,t,r,n){if(!inRange$2(t,r,n))throw new Error(`expected valid ${e}: ${r} <= n < ${n}, got ${typeof t} ${t}`)}function bitLen$1(e){let t;for(t=0;e>_0n$c;e>>=_1n$e,t+=1);return t}function bitGet$1(e,t){return e>>BigInt(t)&_1n$e}function bitSet$1(e,t,r){return e|(r?_1n$e:_0n$c)<<BigInt(t)}const bitMask$1=e=>(_2n$b<<BigInt(e-1))-_1n$e,u8n$1=e=>new Uint8Array(e),u8fr$1=e=>Uint8Array.from(e);function createHmacDrbg$1(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=u8n$1(e),i=u8n$1(e),a=0;const o=()=>{n.fill(1),i.fill(0),a=0},s=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return r(i,n,...t)},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u8n$1();i=s(u8fr$1([0]),e),n=s(),0!==e.length&&(i=s(u8fr$1([1]),e),n=s())},c=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=s();const t=n.slice();r.push(t),e+=n.length}return concatBytes$4(...r)};return(e,t)=>{let r;for(o(),u(e);!(r=t(c()));)u();return o(),r}}const validatorFns$1={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||isBytes$2(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function validateObject$1(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=(t,r,n)=>{const i=validatorFns$1[r];if("function"!=typeof i)throw new Error(`Invalid validator "${r}", expected function`);const a=e[t];if(!(n&&void 0===a||i(a,e)))throw new Error(`Invalid param ${String(t)}=${a} (${typeof a}), expected ${r}`)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}const notImplemented$1=()=>{throw new Error("not implemented")};function memoized$1(e){const t=new WeakMap;return function(r){const n=t.get(r);if(void 0!==n)return n;for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];const s=e(r,...a);return t.set(r,s),s}}var ut$1=Object.freeze({__proto__:null,isBytes:isBytes$2,abytes:abytes$2,abool:abool$1,bytesToHex:bytesToHex$3,numberToHexUnpadded:numberToHexUnpadded$2,hexToNumber:hexToNumber$2,hexToBytes:hexToBytes$2,bytesToNumberBE:bytesToNumberBE$1,bytesToNumberLE:bytesToNumberLE$1,numberToBytesBE:numberToBytesBE$1,numberToBytesLE:numberToBytesLE$1,numberToVarBytesBE:numberToVarBytesBE$1,ensureBytes:ensureBytes$3,concatBytes:concatBytes$4,equalBytes:equalBytes$1,utf8ToBytes:utf8ToBytes$4,inRange:inRange$2,aInRange:aInRange$1,bitLen:bitLen$1,bitGet:bitGet$1,bitSet:bitSet$1,bitMask:bitMask$1,createHmacDrbg:createHmacDrbg$1,validateObject:validateObject$1,notImplemented:notImplemented$1,memoized:memoized$1});function isBytesEqual(e,t){return equalBytes$1(isHex(e)?toBytes$4(e):e,isHex(t)?toBytes$4(t):t)}class HMAC$1 extends Hash$5{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,hash$2(e);const r=toBytes$3(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return exists$4(this),this.iHash.update(e),this}digestInto(e){exists$4(this),bytes$2(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:a,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac$1=(e,t,r)=>new HMAC$1(e,t).update(r).digest();hmac$1.create=(e,t)=>new HMAC$1(e,t)
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */;const _0n$b=BigInt(0),_1n$d=BigInt(1),_2n$a=BigInt(2),_3n$4=BigInt(3),_4n$2=BigInt(4),_5n$2=BigInt(5),_8n$4=BigInt(8);function mod$2(e,t){const r=e%t;return r>=_0n$b?r:t+r}function pow$1(e,t,r){if(r<=_0n$b||t<_0n$b)throw new Error("Expected power/modulo > 0");if(r===_1n$d)return _0n$b;let n=_1n$d;for(;t>_0n$b;)t&_1n$d&&(n=n*e%r),e=e*e%r,t>>=_1n$d;return n}function pow2$2(e,t,r){let n=e;for(;t-- >_0n$b;)n*=n,n%=r;return n}function invert$2(e,t){if(e===_0n$b||t<=_0n$b)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=mod$2(e,t),n=t,i=_0n$b,a=_1n$d;for(;r!==_0n$b;){const e=n%r,t=i-a*(n/r);n=r,r=e,i=a,a=t}if(n!==_1n$d)throw new Error("invert: does not exist");return mod$2(i,t)}function tonelliShanks$1(e){const t=(e-_1n$d)/_2n$a;let r,n,i;for(r=e-_1n$d,n=0;r%_2n$a===_0n$b;r/=_2n$a,n++);for(i=_2n$a;i<e&&pow$1(i,t,e)!==e-_1n$d;i++);if(1===n){const t=(e+_1n$d)/_4n$2;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const a=(r+_1n$d)/_2n$a;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let s=n,u=e.pow(e.mul(e.ONE,i),r),c=e.pow(o,a),d=e.pow(o,r);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<s&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(u,_1n$d<<BigInt(s-t-1));u=e.sqr(r),c=e.mul(c,r),d=e.mul(d,u),s=t}return c}}function FpSqrt$1(e){if(e%_4n$2===_3n$4){const t=(e+_1n$d)/_4n$2;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%_8n$4===_5n$2){const t=(e-_5n$2)/_8n$4;return function(e,r){const n=e.mul(r,_2n$a),i=e.pow(n,t),a=e.mul(r,i),o=e.mul(e.mul(a,_2n$a),i),s=e.mul(a,e.sub(o,e.ONE));if(!e.eql(e.sqr(s),r))throw new Error("Cannot find square root");return s}}return tonelliShanks$1(e)}BigInt(9),BigInt(16);const FIELD_FIELDS$1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField$1(e){const t=FIELD_FIELDS$1.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return validateObject$1(e,t)}function FpPow$1(e,t,r){if(r<_0n$b)throw new Error("Expected power > 0");if(r===_0n$b)return e.ONE;if(r===_1n$d)return t;let n=e.ONE,i=t;for(;r>_0n$b;)r&_1n$d&&(n=e.mul(n,i)),i=e.sqr(i),r>>=_1n$d;return n}function FpInvertBatch$1(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}function nLength$1(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Field$1(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=_0n$b)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:a}=nLength$1(e,t);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=FpSqrt$1(e),s=Object.freeze({ORDER:e,BITS:i,BYTES:a,MASK:bitMask$1(i),ZERO:_0n$b,ONE:_1n$d,create:t=>mod$2(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return _0n$b<=t&&t<e},is0:e=>e===_0n$b,isOdd:e=>(e&_1n$d)===_1n$d,neg:t=>mod$2(-t,e),eql:(e,t)=>e===t,sqr:t=>mod$2(t*t,e),add:(t,r)=>mod$2(t+r,e),sub:(t,r)=>mod$2(t-r,e),mul:(t,r)=>mod$2(t*r,e),pow:(e,t)=>FpPow$1(s,e,t),div:(t,r)=>mod$2(t*invert$2(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>invert$2(t,e),sqrt:n.sqrt||(e=>o(s,e)),invertBatch:e=>FpInvertBatch$1(s,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?numberToBytesLE$1(e,a):numberToBytesBE$1(e,a),fromBytes:e=>{if(e.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${e.length}`);return r?bytesToNumberLE$1(e):bytesToNumberBE$1(e)}});return Object.freeze(s)}function getFieldBytesLength$1(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function getMinHashLength$1(e){const t=getFieldBytesLength$1(e);return t+Math.ceil(t/2)}function mapHashToField$1(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.length,i=getFieldBytesLength$1(t),a=getMinHashLength$1(t);if(n<16||n<a||n>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${n}`);const o=mod$2(r?bytesToNumberBE$1(e):bytesToNumberLE$1(e),t-_1n$d)+_1n$d;return r?numberToBytesLE$1(o,i):numberToBytesBE$1(o,i)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$a=BigInt(0),_1n$c=BigInt(1),pointPrecomputes$2=new WeakMap,pointWindowSizes$1=new WeakMap;function wNAF$1(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},n=e=>{if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error(`Wrong window size=${e}, should be [1..${t}]`)},i=e=>{n(e);return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}};return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>_0n$a;)r&_1n$c&&(n=n.add(i)),i=i.double(),r>>=_1n$c;return n},precomputeWindow(e,t){const{windows:r,windowSize:n}=i(t),a=[];let o=e,s=o;for(let e=0;e<r;e++){s=o,a.push(s);for(let e=1;e<n;e++)s=s.add(o),a.push(s);o=s.double()}return a},wNAF(t,n,a){const{windows:o,windowSize:s}=i(t);let u=e.ZERO,c=e.BASE;const d=BigInt(2**t-1),l=2**t,p=BigInt(t);for(let e=0;e<o;e++){const t=e*s;let i=Number(a&d);a>>=p,i>s&&(i-=l,a+=_1n$c);const o=t,h=t+Math.abs(i)-1,f=e%2!=0,m=i<0;0===i?c=c.add(r(f,n[o])):u=u.add(r(m,n[h]))}return{p:u,f:c}},wNAFCached(e,t,r){const n=pointWindowSizes$1.get(e)||1;let i=pointPrecomputes$2.get(e);return i||(i=this.precomputeWindow(e,n),1!==n&&pointPrecomputes$2.set(e,r(i))),this.wNAF(n,i,t)},setWindowSize(e,t){n(t),pointWindowSizes$1.set(e,t),pointPrecomputes$2.delete(e)}}}function pippenger$1(e,t,r,n){if(!Array.isArray(r)||!Array.isArray(n)||n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");n.forEach(((e,r)=>{if(!t.isValid(e))throw new Error(`wrong scalar at index ${r}`)})),r.forEach(((t,r)=>{if(!(t instanceof e))throw new Error(`wrong point at index ${r}`)}));const i=bitLen$1(BigInt(r.length)),a=i>12?i-3:i>4?i-2:i?2:1,o=(1<<a)-1,s=new Array(o+1).fill(e.ZERO),u=Math.floor((t.BITS-1)/a)*a;let c=e.ZERO;for(let t=u;t>=0;t-=a){s.fill(e.ZERO);for(let e=0;e<n.length;e++){const i=n[e],a=Number(i>>BigInt(t)&BigInt(o));s[a]=s[a].add(r[e])}let i=e.ZERO;for(let t=s.length-1,r=e.ZERO;t>0;t--)r=r.add(s[t]),i=i.add(r);if(c=c.add(i),0!==t)for(let e=0;e<a;e++)c=c.double()}return c}function validateBasic$1(e){return validateField$1(e.Fp),validateObject$1(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength$1(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validateSigVerOpts$1(e){void 0!==e.lowS&&abool$1("lowS",e.lowS),void 0!==e.prehash&&abool$1("prehash",e.prehash)}function validatePointOpts$1(e){const t=validateBasic$1(e);validateObject$1(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:b2n$1,hexToBytes:h2b$1}=ut$1,DER$1={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_tlv:{encode:(e,t)=>{const{Err:r}=DER$1;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=numberToHexUnpadded$2(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const a=n>127?numberToHexUnpadded$2(i.length/2|128):"";return`${numberToHexUnpadded$2(e)}${a}${i}${t}`},decode(e,t){const{Err:r}=DER$1;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++];let a=0;if(!!(128&i)){const e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const o=t.subarray(n,n+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(const e of o)a=a<<8|e;if(n+=e,a<128)throw new r("tlv.decode(long): not minimal encoding")}else a=i;const o=t.subarray(n,n+a);if(o.length!==a)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(n+a)}}},_int:{encode(e){const{Err:t}=DER$1;if(e<_0n$9)throw new t("integer: negative integers are not allowed");let r=numberToHexUnpadded$2(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected assertion");return r},decode(e){const{Err:t}=DER$1;if(128&e[0])throw new t("Invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("Invalid signature integer: unnecessary leading zero");return b2n$1(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=DER$1,i="string"==typeof e?h2b$1(e):e;abytes$2(i);const{v:a,l:o}=n.decode(48,i);if(o.length)throw new t("Invalid signature: left bytes after parsing");const{v:s,l:u}=n.decode(2,a),{v:c,l:d}=n.decode(2,u);if(d.length)throw new t("Invalid signature: left bytes after parsing");return{r:r.decode(s),s:r.decode(c)}},hexFromSig(e){const{_tlv:t,_int:r}=DER$1,n=`${t.encode(2,r.encode(e.r))}${t.encode(2,r.encode(e.s))}`;return t.encode(48,n)}},_0n$9=BigInt(0),_1n$b=BigInt(1),_2n$9=BigInt(2),_3n$3=BigInt(3),_4n$1=BigInt(4);function weierstrassPoints$1(e){const t=validatePointOpts$1(e),{Fp:r}=t,n=Field$1(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{const i=t.toAffine();return concatBytes$4(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),a=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){const{a:n,b:i}=t,a=r.sqr(e),o=r.mul(a,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:a}=t;if(r&&"bigint"!=typeof e){if(isBytes$2(e)&&(e=bytesToHex$3(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*n,"0")}let o;try{o="bigint"==typeof e?e:bytesToNumberBE$1(ensureBytes$3("private key",e,n))}catch(t){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return i&&(o=mod$2(o,a)),aInRange$1("private key",o,_1n$b,a),o}function u(e){if(!(e instanceof l))throw new Error("ProjectivePoint expected")}const c=memoized$1(((e,t)=>{const{px:n,py:i,pz:a}=e;if(r.eql(a,r.ONE))return{x:n,y:i};const o=e.is0();null==t&&(t=o?r.ONE:r.inv(a));const s=r.mul(n,t),u=r.mul(i,t),c=r.mul(a,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:s,y:u}})),d=memoized$1((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const a=r.sqr(i),s=o(n);if(!r.eql(a,s))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class l{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof l)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?l.ZERO:new l(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(l.fromAffine)}static fromHex(e){const t=l.fromAffine(a(ensureBytes$3("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return l.BASE.multiply(s(e))}static msm(e,t){return pippenger$1(l,n,e,t)}_setWindowSize(e){h.setWindowSize(this,e)}assertValidity(){d(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:n,pz:i}=this,{px:a,py:o,pz:s}=e,c=r.eql(r.mul(t,s),r.mul(a,i)),d=r.eql(r.mul(n,s),r.mul(o,i));return c&&d}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,_3n$3),{px:a,py:o,pz:s}=this;let u=r.ZERO,c=r.ZERO,d=r.ZERO,p=r.mul(a,a),h=r.mul(o,o),f=r.mul(s,s),m=r.mul(a,o);return m=r.add(m,m),d=r.mul(a,s),d=r.add(d,d),u=r.mul(e,d),c=r.mul(i,f),c=r.add(u,c),u=r.sub(h,c),c=r.add(h,c),c=r.mul(u,c),u=r.mul(m,u),d=r.mul(i,d),f=r.mul(e,f),m=r.sub(p,f),m=r.mul(e,m),m=r.add(m,d),d=r.add(p,p),p=r.add(d,p),p=r.add(p,f),p=r.mul(p,m),c=r.add(c,p),f=r.mul(o,s),f=r.add(f,f),p=r.mul(f,m),u=r.sub(u,p),d=r.mul(f,h),d=r.add(d,d),d=r.add(d,d),new l(u,c,d)}add(e){u(e);const{px:n,py:i,pz:a}=this,{px:o,py:s,pz:c}=e;let d=r.ZERO,p=r.ZERO,h=r.ZERO;const f=t.a,m=r.mul(t.b,_3n$3);let y=r.mul(n,o),g=r.mul(i,s),b=r.mul(a,c),v=r.add(n,i),w=r.add(o,s);v=r.mul(v,w),w=r.add(y,g),v=r.sub(v,w),w=r.add(n,a);let _=r.add(o,c);return w=r.mul(w,_),_=r.add(y,b),w=r.sub(w,_),_=r.add(i,a),d=r.add(s,c),_=r.mul(_,d),d=r.add(g,b),_=r.sub(_,d),h=r.mul(f,w),d=r.mul(m,b),h=r.add(d,h),d=r.sub(g,h),h=r.add(g,h),p=r.mul(d,h),g=r.add(y,y),g=r.add(g,y),b=r.mul(f,b),w=r.mul(m,w),g=r.add(g,b),b=r.sub(y,b),b=r.mul(f,b),w=r.add(w,b),y=r.mul(g,w),p=r.add(p,y),y=r.mul(_,w),d=r.mul(v,d),d=r.sub(d,y),y=r.mul(v,g),h=r.mul(_,h),h=r.add(h,y),new l(d,p,h)}subtract(e){return this.add(e.negate())}is0(){return this.equals(l.ZERO)}wNAF(e){return h.wNAFCached(this,e,l.normalizeZ)}multiplyUnsafe(e){aInRange$1("scalar",e,_0n$9,t.n);const n=l.ZERO;if(e===_0n$9)return n;if(e===_1n$b)return this;const{endo:i}=t;if(!i)return h.unsafeLadder(this,e);let{k1neg:a,k1:o,k2neg:s,k2:u}=i.splitScalar(e),c=n,d=n,p=this;for(;o>_0n$9||u>_0n$9;)o&_1n$b&&(c=c.add(p)),u&_1n$b&&(d=d.add(p)),p=p.double(),o>>=_1n$b,u>>=_1n$b;return a&&(c=c.negate()),s&&(d=d.negate()),d=new l(r.mul(d.px,i.beta),d.py,d.pz),c.add(d)}multiply(e){const{endo:n,n:i}=t;let a,o;if(aInRange$1("scalar",e,_1n$b,i),n){const{k1neg:t,k1:i,k2neg:s,k2:u}=n.splitScalar(e);let{p:c,f:d}=this.wNAF(i),{p:p,f:f}=this.wNAF(u);c=h.constTimeNegate(t,c),p=h.constTimeNegate(s,p),p=new l(r.mul(p.px,n.beta),p.py,p.pz),a=c.add(p),o=d.add(f)}else{const{p:t,f:r}=this.wNAF(e);a=t,o=r}return l.normalizeZ([a,o])[0]}multiplyAndAddUnsafe(e,t,r){const n=l.BASE,i=(e,t)=>t!==_0n$9&&t!==_1n$b&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),a=i(this,t).add(i(e,r));return a.is0()?void 0:a}toAffine(e){return c(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===_1n$b)return!0;if(r)return r(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===_1n$b?this:r?r(l,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return abool$1("isCompressed",e),this.assertValidity(),i(l,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return abool$1("isCompressed",e),bytesToHex$3(this.toRawBytes(e))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);const p=t.nBitLength,h=wNAF$1(l,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:s,weierstrassEquation:o,isWithinCurveOrder:function(e){return inRange$2(e,_1n$b,t.n)}}}function validateOpts$2(e){const t=validateBasic$1(e);return validateObject$1(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function weierstrass$1(e){const t=validateOpts$2(e),{Fp:r,n:n}=t,i=r.BYTES+1,a=2*r.BYTES+1;function o(e){return mod$2(e,n)}function s(e){return invert$2(e,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:d,isWithinCurveOrder:l}=weierstrassPoints$1({...t,toBytes(e,t,n){const i=t.toAffine(),a=r.toBytes(i.x),o=concatBytes$4;return abool$1("isCompressed",n),n?o(Uint8Array.from([t.hasEvenY()?2:3]),a):o(Uint8Array.from([4]),a,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],o=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===a&&4===n){return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${a} uncompressed bytes`)}{const e=bytesToNumberBE$1(o);if(!inRange$2(e,_1n$b,r.ORDER))throw new Error("Point is not on curve");const t=d(e);let i;try{i=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return 1==(1&n)!==((i&_1n$b)===_1n$b)&&(i=r.neg(i)),{x:e,y:i}}}}),p=e=>bytesToHex$3(numberToBytesBE$1(e,t.nByteLength));function h(e){return e>n>>_1n$b}const f=(e,t,r)=>bytesToNumberBE$1(e.slice(t,r));class m{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=ensureBytes$3("compactSignature",e,2*r),new m(f(e,0,r),f(e,r,2*r))}static fromDER(e){const{r:t,s:r}=DER$1.toSig(ensureBytes$3("DER",e));return new m(t,r)}assertValidity(){aInRange$1("r",this.r,_1n$b,n),aInRange$1("s",this.s,_1n$b,n)}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:a}=this,c=v(ensureBytes$3("msgHash",e));if(null==a||![0,1,2,3].includes(a))throw new Error("recovery id invalid");const d=2===a||3===a?n+t.n:n;if(d>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=0==(1&a)?"02":"03",h=u.fromHex(l+p(d)),f=s(d),m=o(-c*f),y=o(i*f),g=u.BASE.multiplyAndAddUnsafe(h,m,y);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes$2(this.toDERHex())}toDERHex(){return DER$1.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes$2(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const y={isValidPrivateKey(e){try{return c(e),!0}catch(e){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const e=getMinHashLength$1(t.n);return mapHashToField$1(t.randomBytes(e),t.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function g(e){const t=isBytes$2(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===a:r?n===2*i||n===2*a:e instanceof u}const b=t.bits2int||function(e){const r=bytesToNumberBE$1(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},v=t.bits2int_modN||function(e){return o(b(e))},w=bitMask$1(t.nBitLength);function _(e){return aInRange$1(`num < 2^${t.nBitLength}`,e,_0n$9,w),numberToBytesBE$1(e,t.nByteLength)}function S(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:a,randomBytes:d}=t;let{lowS:p,prehash:f,extraEntropy:y}=i;null==p&&(p=!0),e=ensureBytes$3("msgHash",e),validateSigVerOpts$1(i),f&&(e=ensureBytes$3("prehashed msgHash",a(e)));const g=v(e),w=c(n),S=[_(w),_(g)];if(null!=y&&!1!==y){const e=!0===y?d(r.BYTES):y;S.push(ensureBytes$3("extraEntropy",e))}const A=concatBytes$4(...S),T=g;return{seed:A,k2sig:function(e){const t=b(e);if(!l(t))return;const r=s(t),n=u.BASE.multiply(t).toAffine(),i=o(n.x);if(i===_0n$9)return;const a=o(r*o(T+i*w));if(a===_0n$9)return;let c=(n.x===i?0:2)|Number(n.y&_1n$b),d=a;return p&&h(a)&&(d=function(e){return h(e)?o(-e):e}(a),c^=1),new m(i,d,c)}}}const E={lowS:t.lowS,prehash:!1},A={lowS:t.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return u.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(g(e))throw new Error("first arg must be private key");if(!g(t))throw new Error("second arg must be public key");return u.fromHex(t).multiply(c(e)).toRawBytes(r)},sign:function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;const{seed:i,k2sig:a}=S(e,r,n),o=t;return createHmacDrbg$1(o.hash.outputLen,o.nByteLength,o.hmac)(i,a)},verify:function(e,r,n){var i;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;const c=e;if(r=ensureBytes$3("msgHash",r),n=ensureBytes$3("publicKey",n),"strict"in a)throw new Error("options.strict was renamed to lowS");validateSigVerOpts$1(a);const{lowS:d,prehash:l}=a;let p,h;try{if("string"==typeof c||isBytes$2(c))try{p=m.fromDER(c)}catch(e){if(!(e instanceof DER$1.Err))throw e;p=m.fromCompact(c)}else{if("object"!=typeof c||"bigint"!=typeof c.r||"bigint"!=typeof c.s)throw new Error("PARSE");{const{r:e,s:t}=c;p=new m(e,t)}}h=u.fromHex(n)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(d&&p.hasHighS())return!1;l&&(r=t.hash(r));const{r:f,s:y}=p,g=v(r),b=s(y),w=o(g*b),_=o(f*b),S=null===(i=u.BASE.multiplyAndAddUnsafe(h,w,_))||void 0===i?void 0:i.toAffine();return!!S&&o(S.x)===f},ProjectivePoint:u,Signature:m,utils:y}}function SWUFpSqrtRatio(e,t){const r=e.ORDER;let n=_0n$9;for(let e=r-_1n$b;e%_2n$9===_0n$9;e/=_2n$9)n+=_1n$b;const i=n,a=_2n$9<<i-_1n$b-_1n$b,o=a*_2n$9,s=(r-_1n$b)/o,u=(s-_1n$b)/_2n$9,c=o-_1n$b,d=a,l=e.pow(t,s),p=e.pow(t,(s+_1n$b)/_2n$9);let h=(t,r)=>{let n=l,a=e.pow(r,c),o=e.sqr(a);o=e.mul(o,r);let s=e.mul(t,o);s=e.pow(s,u),s=e.mul(s,a),a=e.mul(s,r),o=e.mul(s,t);let h=e.mul(o,a);s=e.pow(h,d);let f=e.eql(s,e.ONE);a=e.mul(o,p),s=e.mul(h,n),o=e.cmov(a,o,f),h=e.cmov(s,h,f);for(let t=i;t>_1n$b;t--){let r=t-_2n$9;r=_2n$9<<r-_1n$b;let i=e.pow(h,r);const s=e.eql(i,e.ONE);a=e.mul(o,n),n=e.mul(n,n),i=e.mul(h,n),o=e.cmov(a,o,s),h=e.cmov(i,h,s)}return{isValid:f,value:o}};if(e.ORDER%_4n$1===_3n$3){const r=(e.ORDER-_3n$3)/_4n$1,n=e.sqrt(e.neg(t));h=(t,i)=>{let a=e.sqr(i);const o=e.mul(t,i);a=e.mul(a,o);let s=e.pow(a,r);s=e.mul(s,o);const u=e.mul(s,n),c=e.mul(e.sqr(s),i),d=e.eql(c,t);return{isValid:d,value:e.cmov(u,s,d)}}}return h}function mapToCurveSimpleSWU(e,t){if(validateField$1(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=SWUFpSqrtRatio(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,a,o,s,u,c,d,l;i=e.sqr(n),i=e.mul(i,t.Z),a=e.sqr(i),a=e.add(a,i),o=e.add(a,e.ONE),o=e.mul(o,t.B),s=e.cmov(t.Z,e.neg(a),!e.eql(a,e.ZERO)),s=e.mul(s,t.A),a=e.sqr(o),c=e.sqr(s),u=e.mul(c,t.A),a=e.add(a,u),a=e.mul(a,o),c=e.mul(c,s),u=e.mul(c,t.B),a=e.add(a,u),d=e.mul(i,o);const{isValid:p,value:h}=r(a,c);l=e.mul(i,n),l=e.mul(l,h),d=e.cmov(d,o,p),l=e.cmov(l,h,p);const f=e.isOdd(n)===e.isOdd(l);return l=e.cmov(e.neg(l),l,f),d=e.div(d,s),{x:d,y:l}}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash$1(e){return{hash:e,hmac:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return hmac$1(e,t,concatBytes$6(...n))},randomBytes:randomBytes$2}}function createCurve$1(e,t){const r=t=>weierstrass$1({...e,...getHash$1(t)});return Object.freeze({...r(t),create:r})}const os2ip=bytesToNumberBE$1;function i2osp(e,t){if(anum(e),anum(t),e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function strxor(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function anum(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function expand_message_xmd(e,t,r,n){abytes$2(e),abytes$2(t),anum(r),t.length>255&&(t=n(concatBytes$4(utf8ToBytes$4("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:a}=n,o=Math.ceil(r/i);if(r>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const s=concatBytes$4(t,i2osp(t.length,1)),u=i2osp(0,a),c=i2osp(r,2),d=new Array(o),l=n(concatBytes$4(u,e,c,i2osp(0,1),s));d[0]=n(concatBytes$4(l,i2osp(1,1),s));for(let e=1;e<=o;e++){const t=[strxor(l,d[e-1]),i2osp(e+1,1),s];d[e]=n(concatBytes$4(...t))}return concatBytes$4(...d).slice(0,r)}function expand_message_xof(e,t,r,n,i){if(abytes$2(e),abytes$2(t),anum(r),t.length>255){const e=Math.ceil(2*n/8);t=i.create({dkLen:e}).update(utf8ToBytes$4("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(i2osp(r,2)).update(t).update(i2osp(t.length,1)).digest()}function hash_to_field(e,t,r){validateObject$1(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:a,hash:o,expand:s,DST:u}=r;abytes$2(e),anum(t);const c="string"==typeof u?utf8ToBytes$4(u):u,d=n.toString(2).length,l=Math.ceil((d+i)/8),p=t*a*l;let h;if("xmd"===s)h=expand_message_xmd(e,c,p,o);else if("xof"===s)h=expand_message_xof(e,c,p,i,o);else{if("_internal_pass"!==s)throw new Error('expand must be "xmd" or "xof"');h=e}const f=new Array(t);for(let e=0;e<t;e++){const t=new Array(a);for(let r=0;r<a;r++){const i=l*(r+e*a),o=h.subarray(i,i+l);t[r]=mod$2(os2ip(o),n)}f[e]=t}return f}function isogenyMap(e,t){const r=t.map((e=>Array.from(e).reverse()));return(t,n)=>{const[i,a,o,s]=r.map((r=>r.reduce(((r,n)=>e.add(e.mul(r,t),n)))));return t=e.div(i,a),n=e.mul(n,e.div(o,s)),{x:t,y:n}}}function createHasher(e,t,r){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const a=hash_to_field(n,2,{...r,DST:r.DST,...i}),o=e.fromAffine(t(a[0])),s=e.fromAffine(t(a[1])),u=o.add(s).clearCofactor();return u.assertValidity(),u},encodeToCurve(n,i){const a=hash_to_field(n,1,{...r,DST:r.encodeDST,...i}),o=e.fromAffine(t(a[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const e of r)if("bigint"!=typeof e)throw new Error(`mapToCurve: expected array of bigints, got ${e} in array`);const n=e.fromAffine(t(r)).clearCofactor();return n.assertValidity(),n}}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P$1=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N$1=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n$a=BigInt(1),_2n$8=BigInt(2),divNearest$2=(e,t)=>(e+t/_2n$8)/t;function sqrtMod$2(e){const t=secp256k1P$1,r=BigInt(3),n=BigInt(6),i=BigInt(11),a=BigInt(22),o=BigInt(23),s=BigInt(44),u=BigInt(88),c=e*e*e%t,d=c*c*e%t,l=pow2$2(d,r,t)*d%t,p=pow2$2(l,r,t)*d%t,h=pow2$2(p,_2n$8,t)*c%t,f=pow2$2(h,i,t)*h%t,m=pow2$2(f,a,t)*f%t,y=pow2$2(m,s,t)*m%t,g=pow2$2(y,u,t)*y%t,b=pow2$2(g,s,t)*m%t,v=pow2$2(b,r,t)*d%t,w=pow2$2(v,o,t)*f%t,_=pow2$2(w,n,t)*c%t,S=pow2$2(_,_2n$8,t);if(!Fp$1.eql(Fp$1.sqr(S),e))throw new Error("Cannot find square root");return S}const Fp$1=Field$1(secp256k1P$1,void 0,void 0,{sqrt:sqrtMod$2}),secp256k1$1=createCurve$1({a:BigInt(0),b:BigInt(7),Fp:Fp$1,n:secp256k1N$1,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=secp256k1N$1,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-_1n$a*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=r,o=BigInt("0x100000000000000000000000000000000"),s=divNearest$2(a*e,t),u=divNearest$2(-n*e,t);let c=mod$2(e-s*r-u*i,t),d=mod$2(-s*n-u*a,t);const l=c>o,p=d>o;if(l&&(c=t-c),p&&(d=t-d),c>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:c,k2neg:p,k2:d}}}},sha256$5),_0n$8=BigInt(0),TAGGED_HASH_PREFIXES$1={};function taggedHash(e){let t=TAGGED_HASH_PREFIXES$1[e];if(void 0===t){const r=sha256$5(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=concatBytes$4(r,r),TAGGED_HASH_PREFIXES$1[e]=t}for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return sha256$5(concatBytes$4(t,...n))}const pointToBytes=e=>e.toRawBytes(!0).slice(1),numTo32b$1=e=>numberToBytesBE$1(e,32),modP=e=>mod$2(e,secp256k1P$1),modN=e=>mod$2(e,secp256k1N$1),Point$1=secp256k1$1.ProjectivePoint,GmulAdd=(e,t,r)=>Point$1.BASE.multiplyAndAddUnsafe(e,t,r);function schnorrGetExtPubKey(e){let t=secp256k1$1.utils.normPrivateKeyToScalar(e),r=Point$1.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:modN(-t),bytes:pointToBytes(r)}}function lift_x(e){aInRange$1("x",e,_1n$a,secp256k1P$1);const t=modP(e*e);let r=sqrtMod$2(modP(t*e+BigInt(7)));r%_2n$8!==_0n$8&&(r=modP(-r));const n=new Point$1(e,r,_1n$a);return n.assertValidity(),n}const num=bytesToNumberBE$1;function challenge(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return modN(num(taggedHash("BIP0340/challenge",...t)))}function schnorrGetPublicKey(e){return schnorrGetExtPubKey(e).bytes}function schnorrSign(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:randomBytes$2(32);const n=ensureBytes$3("message",e),{bytes:i,scalar:a}=schnorrGetExtPubKey(t),o=ensureBytes$3("auxRand",r,32),s=numTo32b$1(a^num(taggedHash("BIP0340/aux",o))),u=taggedHash("BIP0340/nonce",s,i,n),c=modN(num(u));if(c===_0n$8)throw new Error("sign failed: k is zero");const{bytes:d,scalar:l}=schnorrGetExtPubKey(c),p=challenge(d,i,n),h=new Uint8Array(64);if(h.set(d,0),h.set(numTo32b$1(modN(l+p*a)),32),!schnorrVerify(h,n,i))throw new Error("sign: Invalid signature produced");return h}function schnorrVerify(e,t,r){const n=ensureBytes$3("signature",e,64),i=ensureBytes$3("message",t),a=ensureBytes$3("publicKey",r,32);try{const e=lift_x(num(a)),t=num(n.subarray(0,32));if(!inRange$2(t,_1n$a,secp256k1P$1))return!1;const r=num(n.subarray(32,64));if(!inRange$2(r,_1n$a,secp256k1N$1))return!1;const o=challenge(numTo32b$1(t),pointToBytes(e),i),s=GmulAdd(e,r,modN(-o));return!(!s||!s.hasEvenY()||s.toAffine().x!==t)}catch(e){return!1}}const schnorr=(()=>({getPublicKey:schnorrGetPublicKey,sign:schnorrSign,verify:schnorrVerify,utils:{randomPrivateKey:secp256k1$1.utils.randomPrivateKey,lift_x:lift_x,pointToBytes:pointToBytes,numberToBytesBE:numberToBytesBE$1,bytesToNumberBE:bytesToNumberBE$1,taggedHash:taggedHash,mod:mod$2}}))(),isoMap=(()=>isogenyMap(Fp$1,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))))(),mapSWU=(()=>mapToCurveSimpleSWU(Fp$1,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Fp$1.create(BigInt("-11"))}))(),htf=(()=>createHasher(secp256k1$1.ProjectivePoint,(e=>{const{x:t,y:r}=mapSWU(Fp$1.create(e[0]));return isoMap(t,r)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Fp$1.ORDER,m:1,k:128,expand:"xmd",hash:sha256$5}))(),hashToCurve=(()=>htf.hashToCurve)(),encodeToCurve=(()=>htf.encodeToCurve)();var secp256k1$2=Object.freeze({__proto__:null,secp256k1:secp256k1$1,schnorr:schnorr,hashToCurve:hashToCurve,encodeToCurve:encodeToCurve});function serializeSignature(e){let{r:t,s:r,to:n="hex",v:i,yParity:a}=e;const o=(()=>{if(0===a||1===a)return a;if(i&&(27n===i||28n===i||i>=35n))return i%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),s=`0x${new secp256k1$1.Signature(hexToBigInt(t),hexToBigInt(r)).toCompactHex()}${0===o?"1b":"1c"}`;return"hex"===n?s:hexToBytes$3(s)}async function verifyHash(e,t){const{address:r,factory:n,factoryData:i,hash:a,signature:o,...s}=t,u=isHex(o)?o:"object"==typeof o&&"r"in o&&"s"in o?serializeSignature(o):bytesToHex$4(o),c=await(async()=>n||i?isErc6492Signature(u)?u:serializeErc6492Signature({address:n,data:i,signature:u}):u)();try{const{data:t}=await getAction(e,call$1,"call")({data:encodeDeployData({abi:universalSignatureValidatorAbi,args:[r,a,c],bytecode:universalSignatureValidatorByteCode}),...s});return isBytesEqual(null!=t?t:"0x0","0x1")}catch(e){try{if(isAddressEqual(getAddress(r),await recoverAddress({hash:a,signature:o})))return!0}catch{}if(e instanceof CallExecutionError)return!1;throw e}}async function verifyMessage(e,t){let{address:r,message:n,factory:i,factoryData:a,signature:o,...s}=t;return verifyHash(e,{address:r,factory:i,factoryData:a,hash:hashMessage(n),signature:o,...s})}async function verifyTypedData(e,t){const{address:r,factory:n,factoryData:i,signature:a,message:o,primaryType:s,types:u,domain:c,...d}=t;return verifyHash(e,{address:r,factory:n,factoryData:i,hash:hashTypedData({message:o,primaryType:s,types:u,domain:c}),signature:a,...d})}function watchBlockNumber(e,t){let{emitOnBegin:r=!1,emitMissed:n=!1,onBlockNumber:i,onError:a,poll:o,pollingInterval:s=e.pollingInterval}=t;let u;return(void 0!==o?o:"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type))?observe(stringify$1(["watchBlockNumber",e.uid,r,n,s]),{onBlockNumber:i,onError:a},(t=>poll((async()=>{try{const r=await getAction(e,getBlockNumber,"getBlockNumber")({cacheTime:0});if(u){if(r===u)return;if(r-u>1&&n)for(let e=u+1n;e<r;e++)t.onBlockNumber(e,u),u=e}(!u||r>u)&&(t.onBlockNumber(r,u),u=r)}catch(e){var r;null===(r=t.onError)||void 0===r||r.call(t,e)}}),{emitOnBegin:r,interval:s}))):observe(stringify$1(["watchBlockNumber",e.uid,r,n]),{onBlockNumber:i,onError:a},(t=>{let r=!0,n=()=>r=!1;return(async()=>{try{const i=(()=>{if("fallback"===e.transport.type){const t=e.transport.transports.find((e=>"webSocket"===e.config.type));return t?t.value:e.transport}return e.transport})(),{unsubscribe:a}=await i.subscribe({params:["newHeads"],onData(e){var n;if(!r)return;const i=hexToBigInt(null===(n=e.result)||void 0===n?void 0:n.number);t.onBlockNumber(i,u),u=i},onError(e){var r;null===(r=t.onError)||void 0===r||r.call(t,e)}});n=a,r||n()}catch(e){null==a||a(e)}})(),()=>n()}))}async function waitForTransactionReceipt(e,t){let{confirmations:r=1,hash:n,onReplaced:i,pollingInterval:a=e.pollingInterval,retryCount:o=6,retryDelay:s=(e=>{let{count:t}=e;return 200*~~(1<<t)}),timeout:u=18e4}=t;const c=stringify$1(["waitForTransactionReceipt",e.uid,n]);let d,l,p,h=!1;return new Promise(((t,f)=>{u&&setTimeout((()=>f(new WaitForTransactionReceiptTimeoutError({hash:n}))),u);const m=observe(c,{onReplaced:i,resolve:t,reject:f},(t=>{const i=getAction(e,watchBlockNumber,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:a,async onBlockNumber(a){const u=e=>{i(),e(),m()};let c=a;if(!h)try{if(p){if(r>1&&(!p.blockNumber||c-p.blockNumber+1n<r))return;return void u((()=>t.resolve(p)))}if(d||(h=!0,await withRetry((async()=>{d=await getAction(e,getTransaction,"getTransaction")({hash:n}),d.blockNumber&&(c=d.blockNumber)}),{delay:s,retryCount:o}),h=!1),p=await getAction(e,getTransactionReceipt,"getTransactionReceipt")({hash:n}),r>1&&(!p.blockNumber||c-p.blockNumber+1n<r))return;u((()=>t.resolve(p)))}catch(n){if(n instanceof TransactionNotFoundError||n instanceof TransactionReceiptNotFoundError){if(!d)return void(h=!1);try{l=d,h=!0;const n=await withRetry((()=>getAction(e,getBlock,"getBlock")({blockNumber:c,includeTransactions:!0})),{delay:s,retryCount:o,shouldRetry:e=>{let{error:t}=e;return t instanceof BlockNotFoundError}});h=!1;const i=n.transactions.find((e=>{let{from:t,nonce:r}=e;return t===l.from&&r===l.nonce}));if(!i)return;if(p=await getAction(e,getTransactionReceipt,"getTransactionReceipt")({hash:i.hash}),r>1&&(!p.blockNumber||c-p.blockNumber+1n<r))return;let a="replaced";i.to===l.to&&i.value===l.value?a="repriced":i.from===i.to&&0n===i.value&&(a="cancelled"),u((()=>{var e;null===(e=t.onReplaced)||void 0===e||e.call(t,{reason:a,replacedTransaction:l,transaction:i,transactionReceipt:p}),t.resolve(p)}))}catch(e){u((()=>t.reject(e)))}}else u((()=>t.reject(n)))}}})}))}))}function watchBlocks(e,t){let{blockTag:r="latest",emitMissed:n=!1,emitOnBegin:i=!1,onBlock:a,onError:o,includeTransactions:s,poll:u,pollingInterval:c=e.pollingInterval}=t;const d=void 0!==u?u:"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type),l=null!=s&&s;let p;return d?observe(stringify$1(["watchBlocks",e.uid,r,n,i,l,c]),{onBlock:a,onError:o},(t=>poll((async()=>{try{var i,a;const s=await getAction(e,getBlock,"getBlock")({blockTag:r,includeTransactions:l});if(s.number&&null!==(i=p)&&void 0!==i&&i.number){if(s.number===p.number)return;if(s.number-p.number>1&&n)for(let r=(null===(o=p)||void 0===o?void 0:o.number)+1n;r<s.number;r++){var o;const n=await getAction(e,getBlock,"getBlock")({blockNumber:r,includeTransactions:l});t.onBlock(n,p),p=n}}(null===(a=p)||void 0===a||!a.number||"pending"===r&&(null==s||!s.number)||s.number&&s.number>p.number)&&(t.onBlock(s,p),p=s)}catch(e){var s;null===(s=t.onError)||void 0===s||s.call(t,e)}}),{emitOnBegin:i,interval:c}))):(()=>{let t=!0,n=!0,s=()=>t=!1;return(async()=>{try{i&&getAction(e,getBlock,"getBlock")({blockTag:r,includeTransactions:l}).then((e=>{t&&n&&(a(e,void 0),n=!1)}));const u=(()=>{if("fallback"===e.transport.type){const t=e.transport.transports.find((e=>"webSocket"===e.config.type));return t?t.value:e.transport}return e.transport})(),{unsubscribe:c}=await u.subscribe({params:["newHeads"],onData(r){var i,o,s;if(!t)return;const u=((null===(i=e.chain)||void 0===i||null===(o=i.formatters)||void 0===o||null===(s=o.block)||void 0===s?void 0:s.format)||formatBlock)(r.result);a(u,p),n=!1,p=u},onError(e){null==o||o(e)}});s=c,t||s()}catch(e){null==o||o(e)}})(),()=>s()})()}function watchEvent(e,t){let{address:r,args:n,batch:i=!0,event:a,events:o,fromBlock:s,onError:u,onLogs:c,poll:d,pollingInterval:l=e.pollingInterval,strict:p}=t;const h=void 0!==d?d:"bigint"==typeof s||"webSocket"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type),f=null!=p&&p;return h?observe(stringify$1(["watchEvent",r,n,i,e.uid,a,l,s]),{onLogs:c,onError:u},(t=>{let u,c;void 0!==s&&(u=s-1n);let d=!1;const p=poll((async()=>{if(d)try{let s;if(c)s=await getAction(e,getFilterChanges,"getFilterChanges")({filter:c});else{const t=await getAction(e,getBlockNumber,"getBlockNumber")({});s=u&&u!==t?await getAction(e,getLogs,"getLogs")({address:r,args:n,event:a,events:o,fromBlock:u+1n,toBlock:t}):[],u=t}if(0===s.length)return;if(i)t.onLogs(s);else for(const e of s)t.onLogs([e])}catch(e){var l;c&&e instanceof InvalidInputRpcError&&(d=!1),null===(l=t.onError)||void 0===l||l.call(t,e)}else{try{c=await getAction(e,createEventFilter,"createEventFilter")({address:r,args:n,event:a,events:o,strict:f,fromBlock:s})}catch{}d=!0}}),{emitOnBegin:!0,interval:l});return async()=>{c&&await getAction(e,uninstallFilter,"uninstallFilter")({filter:c}),p()}})):(()=>{let t=!0,i=()=>t=!1;return(async()=>{try{const s=(()=>{if("fallback"===e.transport.type){const t=e.transport.transports.find((e=>"webSocket"===e.config.type));return t?t.value:e.transport}return e.transport})(),d=null!=o?o:a?[a]:void 0;let l=[];if(d){const e=d.flatMap((e=>encodeEventTopics({abi:[e],eventName:e.name,args:n})));l=[e],a&&(l=l[0])}const{unsubscribe:h}=await s.subscribe({params:["logs",{address:r,topics:l}],onData(e){if(!t)return;const r=e.result;try{const{eventName:e,args:t}=decodeEventLog({abi:null!=d?d:[],data:r.data,topics:r.topics,strict:f}),n=formatLog(r,{args:t,eventName:e});c([n])}catch(e){let t,i;if(e instanceof DecodeLogDataMismatch||e instanceof DecodeLogTopicsMismatch){var n;if(p)return;t=e.abiItem.name,i=null===(n=e.abiItem.inputs)||void 0===n?void 0:n.some((e=>!("name"in e&&e.name)))}const a=formatLog(r,{args:i?[]:{},eventName:t});c([a])}},onError(e){null==u||u(e)}});i=h,t||i()}catch(e){null==u||u(e)}})(),()=>i()})()}function watchPendingTransactions(e,t){let{batch:r=!0,onError:n,onTransactions:i,poll:a,pollingInterval:o=e.pollingInterval}=t;return(void 0!==a?a:"webSocket"!==e.transport.type)?observe(stringify$1(["watchPendingTransactions",e.uid,r,o]),{onTransactions:i,onError:n},(t=>{let n;const i=poll((async()=>{try{if(!n)try{return void(n=await getAction(e,createPendingTransactionFilter,"createPendingTransactionFilter")({}))}catch(e){throw i(),e}const a=await getAction(e,getFilterChanges,"getFilterChanges")({filter:n});if(0===a.length)return;if(r)t.onTransactions(a);else for(const e of a)t.onTransactions([e])}catch(e){var a;null===(a=t.onError)||void 0===a||a.call(t,e)}}),{emitOnBegin:!0,interval:o});return async()=>{n&&await getAction(e,uninstallFilter,"uninstallFilter")({filter:n}),i()}})):(()=>{let t=!0,r=()=>t=!1;return(async()=>{try{const{unsubscribe:a}=await e.transport.subscribe({params:["newPendingTransactions"],onData(e){if(!t)return;const r=e.result;i([r])},onError(e){null==n||n(e)}});r=a,t||r()}catch(e){null==n||n(e)}})(),()=>r()})()}function _wrapRegExp(){_wrapRegExp=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,i){var a=RegExp(e,n);return t.set(a,i||t.get(e)),_setPrototypeOf(a,r.prototype)}function n(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){var i=n[r];if("number"==typeof i)t[r]=e[i];else{for(var a=0;void 0===e[i[a]]&&a+1<i.length;)a++;t[r]=e[i[a]]}return t}),Object.create(null))}return _inherits(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);if(r){r.groups=n(r,this);var i=r.indices;i&&(i.groups=n(i,this))}return r},r.prototype[Symbol.replace]=function(r,i){if("string"==typeof i){var a=t.get(this);return e[Symbol.replace].call(this,r,i.replace(/\$<([^>]+)(>|$)/g,(function(e,t,r){if(""===r)return e;var n=a[t];return Array.isArray(n)?"$"+n.join("$"):"number"==typeof n?"$"+n:""})))}if("function"==typeof i){var o=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(n(e,o)),i.apply(this,e)}))}return e[Symbol.replace].call(this,r,i)},_wrapRegExp.apply(this,arguments)}function parseSiweMessage(e){var t,r,n,i,a;const{scheme:o,statement:s,...u}=null!==(t=null===(r=e.match(prefixRegex))||void 0===r?void 0:r.groups)&&void 0!==t?t:{},{chainId:c,expirationTime:d,issuedAt:l,notBefore:p,requestId:h,...f}=null!==(n=null===(i=e.match(suffixRegex))||void 0===i?void 0:i.groups)&&void 0!==n?n:{},m=null===(a=e.split("Resources:")[1])||void 0===a?void 0:a.split("\n- ").slice(1);return{...u,...f,...c?{chainId:Number(c)}:{},...d?{expirationTime:new Date(d)}:{},...l?{issuedAt:new Date(l)}:{},...p?{notBefore:new Date(p)}:{},...h?{requestId:h}:{},...m?{resources:m}:{},...o?{scheme:o}:{},...s?{statement:s}:{}}}const prefixRegex=_wrapRegExp(/^(?:([a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?([a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(0x[a-fA-F0-9]{40})\n\n(?:(.*)\n\n)?/,{scheme:1,domain:2,address:3,statement:4}),suffixRegex=_wrapRegExp(/(?:URI: (.+))\n(?:Version: (.+))\n(?:Chain ID: (\d+))\n(?:Nonce: ([a-zA-Z0-9]+))\n(?:Issued At: (.+))(?:\nExpiration Time: (.+))?(?:\nNot Before: (.+))?(?:\nRequest ID: (.+))?/,{uri:1,version:2,chainId:3,nonce:4,issuedAt:5,expirationTime:6,notBefore:7,requestId:8});function validateSiweMessage(e){const{address:t,domain:r,message:n,nonce:i,scheme:a,time:o=new Date}=e;if(r&&n.domain!==r)return!1;if(i&&n.nonce!==i)return!1;if(a&&n.scheme!==a)return!1;if(n.expirationTime&&o>=n.expirationTime)return!1;if(n.notBefore&&o<n.notBefore)return!1;try{if(!n.address)return!1;if(t&&!isAddressEqual(n.address,t))return!1}catch{return!1}return!0}async function verifySiweMessage(e,t){const{address:r,domain:n,message:i,nonce:a,scheme:o,signature:s,time:u=new Date,...c}=t,d=parseSiweMessage(i);if(!d.address)return!1;if(!validateSiweMessage({address:r,domain:n,message:d,nonce:a,scheme:o,time:u}))return!1;const l=hashMessage(i);return verifyHash(e,{address:d.address,hash:l,signature:s,...c})}function publicActions(e){return{call:t=>call$1(e,t),createBlockFilter:()=>createBlockFilter(e),createContractEventFilter:t=>createContractEventFilter(e,t),createEventFilter:t=>createEventFilter(e,t),createPendingTransactionFilter:()=>createPendingTransactionFilter(e),estimateContractGas:t=>estimateContractGas(e,t),estimateGas:t=>estimateGas(e,t),getBalance:t=>getBalance(e,t),getBlobBaseFee:()=>getBlobBaseFee(e),getBlock:t=>getBlock(e,t),getBlockNumber:t=>getBlockNumber(e,t),getBlockTransactionCount:t=>getBlockTransactionCount(e,t),getBytecode:t=>getCode(e,t),getChainId:()=>getChainId(e),getCode:t=>getCode(e,t),getContractEvents:t=>getContractEvents(e,t),getEip712Domain:t=>getEip712Domain(e,t),getEnsAddress:t=>getEnsAddress(e,t),getEnsAvatar:t=>getEnsAvatar(e,t),getEnsName:t=>getEnsName(e,t),getEnsResolver:t=>getEnsResolver(e,t),getEnsText:t=>getEnsText(e,t),getFeeHistory:t=>getFeeHistory(e,t),estimateFeesPerGas:t=>estimateFeesPerGas(e,t),getFilterChanges:t=>getFilterChanges(e,t),getFilterLogs:t=>getFilterLogs(e,t),getGasPrice:()=>getGasPrice(e),getLogs:t=>getLogs(e,t),getProof:t=>getProof(e,t),estimateMaxPriorityFeePerGas:t=>estimateMaxPriorityFeePerGas(e,t),getStorageAt:t=>getStorageAt(e,t),getTransaction:t=>getTransaction(e,t),getTransactionConfirmations:t=>getTransactionConfirmations(e,t),getTransactionCount:t=>getTransactionCount(e,t),getTransactionReceipt:t=>getTransactionReceipt(e,t),multicall:t=>multicall(e,t),prepareTransactionRequest:t=>prepareTransactionRequest(e,t),readContract:t=>readContract(e,t),sendRawTransaction:t=>sendRawTransaction(e,t),simulateContract:t=>simulateContract(e,t),verifyMessage:t=>verifyMessage(e,t),verifySiweMessage:t=>verifySiweMessage(e,t),verifyTypedData:t=>verifyTypedData(e,t),uninstallFilter:t=>uninstallFilter(e,t),waitForTransactionReceipt:t=>waitForTransactionReceipt(e,t),watchBlocks:t=>watchBlocks(e,t),watchBlockNumber:t=>watchBlockNumber(e,t),watchContractEvent:t=>watchContractEvent(e,t),watchEvent:t=>watchEvent(e,t),watchPendingTransactions:t=>watchPendingTransactions(e,t)}}function createPublicClient(e){const{key:t="public",name:r="Public Client"}=e;return createClient({...e,key:t,name:r,type:"publicClient"}).extend(publicActions)}function deployContract(e,t){const{abi:r,args:n,bytecode:i,...a}=t;return sendTransaction(e,{...a,data:encodeDeployData({abi:r,args:n,bytecode:i})})}async function getAddresses(e){var t;if("local"===(null===(t=e.account)||void 0===t?void 0:t.type))return[e.account.address];return(await e.request({method:"eth_accounts"},{dedupe:!0})).map((e=>checksumAddress(e)))}async function getPermissions(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function requestAddresses(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map((e=>getAddress(e)))}async function requestPermissions(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function signMessage$1(e,t){let{account:r=e.account,message:n}=t;if(!r)throw new AccountNotFoundError({docsPath:"/docs/actions/wallet/signMessage"});const i=parseAccount(r);if(i.signMessage)return i.signMessage({message:n});const a="string"==typeof n?stringToHex(n):n.raw instanceof Uint8Array?toHex(n.raw):n.raw;return e.request({method:"personal_sign",params:[a,i.address]},{retryCount:0})}async function signTransaction$1(e,t){var r,n,i,a;const{account:o=e.account,chain:s=e.chain,...u}=t;if(!o)throw new AccountNotFoundError({docsPath:"/docs/actions/wallet/signTransaction"});const c=parseAccount(o);assertRequest({account:c,...t});const d=await getAction(e,getChainId,"getChainId")({});null!==s&&assertCurrentChain({currentChainId:d,chain:s});const l=(null==s?void 0:s.formatters)||(null===(r=e.chain)||void 0===r?void 0:r.formatters),p=(null==l||null===(n=l.transactionRequest)||void 0===n?void 0:n.format)||formatTransactionRequest;return c.signTransaction?c.signTransaction({...u,chainId:d},{serializer:null===(i=e.chain)||void 0===i||null===(a=i.serializers)||void 0===a?void 0:a.transaction}):await e.request({method:"eth_signTransaction",params:[{...p(u),chainId:numberToHex(d),from:c.address}]},{retryCount:0})}async function signTypedData$1(e,t){const{account:r=e.account,domain:n,message:i,primaryType:a}=t;if(!r)throw new AccountNotFoundError({docsPath:"/docs/actions/wallet/signTypedData"});const o=parseAccount(r),s={EIP712Domain:getTypesForEIP712Domain({domain:n}),...t.types};if(validateTypedData({domain:n,message:i,primaryType:a,types:s}),o.signTypedData)return o.signTypedData({domain:n,message:i,primaryType:a,types:s});const u=serializeTypedData({domain:n,message:i,primaryType:a,types:s});return e.request({method:"eth_signTypedData_v4",params:[o.address,u]},{retryCount:0})}async function switchChain(e,t){let{id:r}=t;await e.request({method:"wallet_switchEthereumChain",params:[{chainId:numberToHex(r)}]},{retryCount:0})}async function watchAsset(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}function walletActions(e){return{addChain:t=>addChain(e,t),deployContract:t=>deployContract(e,t),getAddresses:()=>getAddresses(e),getChainId:()=>getChainId(e),getPermissions:()=>getPermissions(e),prepareTransactionRequest:t=>prepareTransactionRequest(e,t),requestAddresses:()=>requestAddresses(e),requestPermissions:t=>requestPermissions(e,t),sendRawTransaction:t=>sendRawTransaction(e,t),sendTransaction:t=>sendTransaction(e,t),signMessage:t=>signMessage$1(e,t),signTransaction:t=>signTransaction$1(e,t),signTypedData:t=>signTypedData$1(e,t),switchChain:t=>switchChain(e,t),watchAsset:t=>watchAsset(e,t),writeContract:t=>writeContract(e,t)}}function createWalletClient(e){const{key:t="wallet",name:r="Wallet Client",transport:n}=e;return createClient({...e,key:t,name:r,transport:n,type:"walletClient"}).extend(walletActions)}function parseSignature(e){const{r:t,s:r}=secp256k1$1.Signature.fromCompact(e.slice(2,130)),n=Number(`0x${e.slice(130)}`),[i,a]=(()=>{if(0===n||1===n)return[void 0,n];if(27===n)return[BigInt(n),0];if(28===n)return[BigInt(n),1];throw new Error("Invalid yParityOrV value")})();return void 0!==i?{r:numberToHex(t,{size:32}),s:numberToHex(r,{size:32}),v:i,yParity:a}:{r:numberToHex(t,{size:32}),s:numberToHex(r,{size:32}),yParity:a}}const mainnet=defineChain({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://cloudflare-eth.com"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function _defineProperty$3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const BASE_PATH$1="/v1".replace(/\/+$/,"");class Configuration$1{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_defineProperty$3(this,"configuration",void 0),this.configuration=e}set config(e){this.configuration=e}get basePath(){return null!=this.configuration.basePath?this.configuration.basePath:BASE_PATH$1}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||querystring$1}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){const e=this.configuration.apiKey;if(e)return"function"==typeof e?e:()=>e}get accessToken(){const e=this.configuration.accessToken;if(e)return"function"==typeof e?e:async()=>e}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}}const DefaultConfig$1=new Configuration$1;class BaseAPI$1{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultConfig$1;_defineProperty$3(this,"configuration",void 0),_defineProperty$3(this,"middleware",void 0),_defineProperty$3(this,"fetchApi",(async(e,t)=>{let r,n={url:e,init:t};for(const e of this.middleware)e.pre&&(n=await e.pre({fetch:this.fetchApi,...n})||n);try{r=await(this.configuration.fetchApi||fetch)(n.url,n.init)}catch(e){for(const t of this.middleware)t.onError&&(r=await t.onError({fetch:this.fetchApi,url:n.url,init:n.init,error:e,response:r?r.clone():void 0})||r);if(void 0===r)throw e instanceof Error?new FetchError$1(e,"The request failed and the interceptors did not return an alternative response"):e}for(const e of this.middleware)e.post&&(r=await e.post({fetch:this.fetchApi,url:n.url,init:n.init,response:r.clone()})||r);return r})),this.configuration=e,this.middleware=e.middleware}withMiddleware(){const e=this.clone();return e.middleware=e.middleware.concat(...arguments),e}withPreMiddleware(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t.map((e=>({pre:e})));return this.withMiddleware(...n)}withPostMiddleware(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t.map((e=>({post:e})));return this.withMiddleware(...n)}async request(e,t){const{url:r,init:n}=await this.createFetchParams(e,t),i=await this.fetchApi(r,n);if(i&&i.status>=200&&i.status<300)return i;throw new ResponseError$1(i,"Response returned an error code")}async createFetchParams(e,t){let r=this.configuration.basePath+e.path;void 0!==e.query&&0!==Object.keys(e.query).length&&(r+="?"+this.configuration.queryParamsStringify(e.query));const n=Object.assign({},this.configuration.headers,e.headers);Object.keys(n).forEach((e=>void 0===n[e]?delete n[e]:{}));const i="function"==typeof t?t:async()=>t,a={method:e.method,headers:n,body:e.body,credentials:this.configuration.credentials},o={...a,...await i({init:a,context:e})};return{url:r,init:{...o,body:isFormData$2(o.body)||o.body instanceof URLSearchParams||isBlob$2(o.body)||isString$2(o.body)?o.body:JSON.stringify(o.body)}}}clone(){const e=new(0,this.constructor)(this.configuration);return e.middleware=this.middleware.slice(),e}}function isBlob$2(e){return"undefined"!=typeof Blob&&e instanceof Blob}function isFormData$2(e){return"undefined"!=typeof FormData&&e instanceof FormData}function isString$2(e){return"string"==typeof e}class ResponseError$1 extends Error{constructor(e,t){super(t),_defineProperty$3(this,"response",void 0),_defineProperty$3(this,"name","ResponseError"),this.response=e}}class FetchError$1 extends Error{constructor(e,t){super(t,{cause:e}),_defineProperty$3(this,"name","FetchError")}}class RequiredError$1 extends Error{constructor(e,t){super(t),_defineProperty$3(this,"field",void 0),_defineProperty$3(this,"name","RequiredError"),this.field=e}}const COLLECTION_FORMATS$1={csv:",",ssv:" ",tsv:"\t",pipes:"|"};function exists$3(e,t){const r=e[t];return null!=r}function querystring$1(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(e).sort().map((r=>querystringSingleKey$1(r,e[r],t))).filter((e=>e.length>0)).join("&")}function querystringSingleKey$1(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const n=r+(r.length?`[${e}]`:e);if(t instanceof Array){const e=t.map((e=>encodeURIComponent(String(e)))).join(`&${encodeURIComponent(n)}=`);return`${encodeURIComponent(n)}=${e}`}if(t instanceof Set){return querystringSingleKey$1(e,Array.from(t),r)}return t instanceof Date?`${encodeURIComponent(n)}=${encodeURIComponent(t.toISOString())}`:t instanceof Object?querystring$1(t,n):`${encodeURIComponent(n)}=${encodeURIComponent(String(t))}`}function mapValues(e,t){return Object.keys(e).reduce(((r,n)=>({...r,[n]:t(e[n])})),{})}class JSONApiResponse$1{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;_defineProperty$3(this,"raw",void 0),_defineProperty$3(this,"transformer",void 0),this.raw=e,this.transformer=t}async value(){return this.transformer(await this.raw.json())}}class VoidApiResponse{constructor(e){_defineProperty$3(this,"raw",void 0),this.raw=e}async value(){}}class BlobApiResponse{constructor(e){_defineProperty$3(this,"raw",void 0),this.raw=e}async value(){return await this.raw.blob()}}function AccessFromJSON$1(e){return AccessFromJSONTyped$1(e)}function AccessFromJSONTyped$1(e,t){return null==e?e:{stream:e.stream,download:e.download}}function ExtendedPaymentSplitFromJSON(e){return ExtendedPaymentSplitFromJSONTyped(e)}function ExtendedPaymentSplitFromJSONTyped(e,t){return null==e?e:{userId:exists$3(e,"user_id")?e.user_id:void 0,percentage:e.percentage,ethWallet:exists$3(e,"eth_wallet")?e.eth_wallet:void 0,payoutWallet:e.payout_wallet,amount:e.amount}}function ExtendedUsdcGateFromJSON(e){return ExtendedUsdcGateFromJSONTyped(e)}function ExtendedUsdcGateFromJSONTyped(e,t){return null==e?e:{price:e.price,splits:e.splits.map(ExtendedPaymentSplitFromJSON)}}function instanceOfExtendedPurchaseGate(e){let t=!0;return t=t&&"usdcPurchase"in e&&void 0!==e.usdcPurchase,t}function ExtendedPurchaseGateFromJSONTyped(e,t){return null==e?e:{usdcPurchase:ExtendedUsdcGateFromJSON(e.usdc_purchase)}}function FollowGateFromJSONTyped$1(e,t){return null==e?e:{followUserId:e.follow_user_id}}function NftCollectionFromJSON$1(e){return NftCollectionFromJSONTyped$1(e)}function NftCollectionFromJSONTyped$1(e,t){return null==e?e:{chain:e.chain,standard:exists$3(e,"standard")?e.standard:void 0,address:e.address,name:e.name,imageUrl:exists$3(e,"imageUrl")?e.imageUrl:void 0,externalLink:exists$3(e,"externalLink")?e.externalLink:void 0}}function NftGateFromJSONTyped$1(e,t){return null==e?e:{nftCollection:NftCollectionFromJSON$1(e.nft_collection)}}function TipGateFromJSONTyped$1(e,t){return null==e?e:{tipUserId:e.tip_user_id}}function ExtendedTokenGateFromJSON$1(e){return ExtendedTokenGateFromJSONTyped$1(e)}function ExtendedTokenGateFromJSONTyped$1(e,t){return null==e?e:{tokenMint:e.token_mint,tokenAmount:e.token_amount}}function TokenGateFromJSONTyped$1(e,t){return null==e?e:{tokenGate:ExtendedTokenGateFromJSON$1(e.token_gate)}}function ExtendedAccessGateFromJSON(e){return ExtendedAccessGateFromJSONTyped(e)}function ExtendedAccessGateFromJSONTyped(e,t){return null==e?e:{...ExtendedPurchaseGateFromJSONTyped(e),...FollowGateFromJSONTyped$1(e),...NftGateFromJSONTyped$1(e),...TipGateFromJSONTyped$1(e),...TokenGateFromJSONTyped$1(e)}}function TrackAccessInfoFromJSON(e){return TrackAccessInfoFromJSONTyped(e)}function TrackAccessInfoFromJSONTyped(e,t){return null==e?e:{access:exists$3(e,"access")?AccessFromJSON$1(e.access):void 0,userId:e.user_id,blocknumber:e.blocknumber,isStreamGated:exists$3(e,"is_stream_gated")?e.is_stream_gated:void 0,streamConditions:exists$3(e,"stream_conditions")?ExtendedAccessGateFromJSON(e.stream_conditions):void 0,isDownloadGated:exists$3(e,"is_download_gated")?e.is_download_gated:void 0,downloadConditions:exists$3(e,"download_conditions")?ExtendedAccessGateFromJSON(e.download_conditions):void 0}}function AccessInfoResponseFromJSON(e){return AccessInfoResponseFromJSONTyped(e)}function AccessInfoResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?TrackAccessInfoFromJSON(e.data):void 0}}function ActivityFromJSON(e){return ActivityFromJSONTyped(e,!1)}function ActivityFromJSONTyped(e,t){if(null==e)return e;if(!t){if("collection_activity"===e._class)return CollectionActivityFromJSONTyped(e,!0);if("track_activity"===e._class)return TrackActivityFromJSONTyped(e,!0)}return{timestamp:e.timestamp,itemType:e.item_type,item:e.item,_class:e.class}}function AlbumBacklinkFromJSON$1(e){return AlbumBacklinkFromJSONTyped$1(e)}function AlbumBacklinkFromJSONTyped$1(e,t){return null==e?e:{playlistId:e.playlist_id,playlistName:e.playlist_name,permalink:e.permalink}}function PlaylistAddedTimestampFromJSON$1(e){return PlaylistAddedTimestampFromJSONTyped$1(e)}function PlaylistAddedTimestampFromJSONTyped$1(e,t){return null==e?e:{metadataTimestamp:e.metadata_timestamp,timestamp:e.timestamp,trackId:e.track_id}}function PlaylistArtworkFromJSON$1(e){return PlaylistArtworkFromJSONTyped$1(e)}function PlaylistArtworkFromJSONTyped$1(e,t){return null==e?e:{_150x150:exists$3(e,"150x150")?e["150x150"]:void 0,_480x480:exists$3(e,"480x480")?e["480x480"]:void 0,_1000x1000:exists$3(e,"1000x1000")?e["1000x1000"]:void 0}}function CoverPhotoFromJSON$1(e){return CoverPhotoFromJSONTyped$1(e)}function CoverPhotoFromJSONTyped$1(e,t){return null==e?e:{_640x:exists$3(e,"640x")?e["640x"]:void 0,_2000x:exists$3(e,"2000x")?e["2000x"]:void 0}}function ProfilePictureFromJSON$1(e){return ProfilePictureFromJSONTyped$1(e)}function ProfilePictureFromJSONTyped$1(e,t){return null==e?e:{_150x150:exists$3(e,"150x150")?e["150x150"]:void 0,_480x480:exists$3(e,"480x480")?e["480x480"]:void 0,_1000x1000:exists$3(e,"1000x1000")?e["1000x1000"]:void 0}}function instanceOfUser(e){let t=!0;return t=t&&"albumCount"in e&&void 0!==e.albumCount,t=t&&"followeeCount"in e&&void 0!==e.followeeCount,t=t&&"followerCount"in e&&void 0!==e.followerCount,t=t&&"handle"in e&&void 0!==e.handle,t=t&&"id"in e&&void 0!==e.id,t=t&&"isVerified"in e&&void 0!==e.isVerified,t=t&&"verifiedWithTwitter"in e&&void 0!==e.verifiedWithTwitter,t=t&&"verifiedWithInstagram"in e&&void 0!==e.verifiedWithInstagram,t=t&&"verifiedWithTiktok"in e&&void 0!==e.verifiedWithTiktok,t=t&&"name"in e&&void 0!==e.name,t=t&&"playlistCount"in e&&void 0!==e.playlistCount,t=t&&"repostCount"in e&&void 0!==e.repostCount,t=t&&"trackCount"in e&&void 0!==e.trackCount,t=t&&"isDeactivated"in e&&void 0!==e.isDeactivated,t=t&&"isAvailable"in e&&void 0!==e.isAvailable,t=t&&"ercWallet"in e&&void 0!==e.ercWallet,t=t&&"splWallet"in e&&void 0!==e.splWallet,t=t&&"splUsdcWallet"in e&&void 0!==e.splUsdcWallet,t=t&&"supporterCount"in e&&void 0!==e.supporterCount,t=t&&"supportingCount"in e&&void 0!==e.supportingCount,t=t&&"totalAudioBalance"in e&&void 0!==e.totalAudioBalance,t=t&&"wallet"in e&&void 0!==e.wallet,t}function UserFromJSON(e){return UserFromJSONTyped(e)}function UserFromJSONTyped(e,t){return null==e?e:{albumCount:e.album_count,artistPickTrackId:exists$3(e,"artist_pick_track_id")?e.artist_pick_track_id:void 0,bio:exists$3(e,"bio")?e.bio:void 0,coverPhoto:exists$3(e,"cover_photo")?CoverPhotoFromJSON$1(e.cover_photo):void 0,followeeCount:e.followee_count,followerCount:e.follower_count,handle:e.handle,id:e.id,isVerified:e.is_verified,twitterHandle:exists$3(e,"twitter_handle")?e.twitter_handle:void 0,instagramHandle:exists$3(e,"instagram_handle")?e.instagram_handle:void 0,tiktokHandle:exists$3(e,"tiktok_handle")?e.tiktok_handle:void 0,verifiedWithTwitter:e.verified_with_twitter,verifiedWithInstagram:e.verified_with_instagram,verifiedWithTiktok:e.verified_with_tiktok,website:exists$3(e,"website")?e.website:void 0,donation:exists$3(e,"donation")?e.donation:void 0,location:exists$3(e,"location")?e.location:void 0,name:e.name,playlistCount:e.playlist_count,profilePicture:exists$3(e,"profile_picture")?ProfilePictureFromJSON$1(e.profile_picture):void 0,repostCount:e.repost_count,trackCount:e.track_count,isDeactivated:e.is_deactivated,isAvailable:e.is_available,ercWallet:e.erc_wallet,splWallet:e.spl_wallet,splUsdcWallet:e.spl_usdc_wallet,splUsdcPayoutWallet:exists$3(e,"spl_usdc_payout_wallet")?e.spl_usdc_payout_wallet:void 0,supporterCount:e.supporter_count,supportingCount:e.supporting_count,totalAudioBalance:e.total_audio_balance,wallet:e.wallet}}function instanceOfPlaylist(e){let t=!0;return t=t&&"permalink"in e&&void 0!==e.permalink,t=t&&"id"in e&&void 0!==e.id,t=t&&"isAlbum"in e&&void 0!==e.isAlbum,t=t&&"isImageAutogenerated"in e&&void 0!==e.isImageAutogenerated,t=t&&"playlistName"in e&&void 0!==e.playlistName,t=t&&"playlistContents"in e&&void 0!==e.playlistContents,t=t&&"repostCount"in e&&void 0!==e.repostCount,t=t&&"favoriteCount"in e&&void 0!==e.favoriteCount,t=t&&"totalPlayCount"in e&&void 0!==e.totalPlayCount,t=t&&"user"in e&&void 0!==e.user,t=t&&"access"in e&&void 0!==e.access,t=t&&"trackCount"in e&&void 0!==e.trackCount,t}function PlaylistFromJSON(e){return PlaylistFromJSONTyped(e)}function PlaylistFromJSONTyped(e,t){return null==e?e:{artwork:exists$3(e,"artwork")?PlaylistArtworkFromJSON$1(e.artwork):void 0,description:exists$3(e,"description")?e.description:void 0,permalink:e.permalink,id:e.id,isAlbum:e.is_album,isImageAutogenerated:e.is_image_autogenerated,playlistName:e.playlist_name,playlistContents:e.playlist_contents.map(PlaylistAddedTimestampFromJSON$1),repostCount:e.repost_count,favoriteCount:e.favorite_count,totalPlayCount:e.total_play_count,user:UserFromJSON(e.user),ddexApp:exists$3(e,"ddex_app")?e.ddex_app:void 0,access:AccessFromJSON$1(e.access),upc:exists$3(e,"upc")?e.upc:void 0,trackCount:e.track_count}}function AlbumsResponseFromJSON(e){return AlbumsResponseFromJSONTyped(e)}function AlbumsResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(PlaylistFromJSON):void 0}}function AuthorizedAppFromJSON(e){return AuthorizedAppFromJSONTyped(e)}function AuthorizedAppFromJSONTyped(e,t){return null==e?e:{address:e.address,name:e.name,description:exists$3(e,"description")?e.description:void 0,imageUrl:exists$3(e,"image_url")?e.image_url:void 0,grantorUserId:e.grantor_user_id,grantCreatedAt:e.grant_created_at,grantUpdatedAt:e.grant_updated_at}}function AuthorizedAppsFromJSON(e){return AuthorizedAppsFromJSONTyped(e)}function AuthorizedAppsFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(AuthorizedAppFromJSON):void 0}}function BestSellingItemFromJSON$1(e){return BestSellingItemFromJSONTyped$1(e)}function BestSellingItemFromJSONTyped$1(e,t){return null==e?e:{contentId:e.content_id,contentType:exists$3(e,"content_type")?e.content_type:void 0,title:e.title,ownerId:e.owner_id}}function BestSellingResponseFromJSON(e){return BestSellingResponseFromJSONTyped(e)}function BestSellingResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(BestSellingItemFromJSON$1):void 0}}function BlobInfoFromJSON(e){return BlobInfoFromJSONTyped(e)}function BlobInfoFromJSONTyped(e,t){return null==e?e:{size:e.size,contentType:e.content_type}}function ChallengeResponseFromJSON(e){return ChallengeResponseFromJSONTyped(e)}function ChallengeResponseFromJSONTyped(e,t){return null==e?e:{challengeId:e.challenge_id,userId:e.user_id,specifier:exists$3(e,"specifier")?e.specifier:void 0,isComplete:e.is_complete,isActive:e.is_active,isDisbursed:e.is_disbursed,currentStepCount:exists$3(e,"current_step_count")?e.current_step_count:void 0,maxSteps:exists$3(e,"max_steps")?e.max_steps:void 0,challengeType:e.challenge_type,amount:e.amount,disbursedAmount:e.disbursed_amount,cooldownDays:exists$3(e,"cooldown_days")?e.cooldown_days:void 0,metadata:e.metadata}}function ClaimRewardsRequestToJSON(e){if(void 0!==e)return null===e?null:{challengeId:e.challengeId,specifier:e.specifier,userId:e.userId}}function ClaimRewardsResponseDataInnerFromJSON(e){return ClaimRewardsResponseDataInnerFromJSONTyped(e)}function ClaimRewardsResponseDataInnerFromJSONTyped(e,t){return null==e?e:{challengeId:e.challengeId,specifier:e.specifier,amount:exists$3(e,"amount")?e.amount:void 0,signatures:exists$3(e,"signatures")?e.signatures:void 0,error:exists$3(e,"error")?e.error:void 0}}function ClaimRewardsResponseFromJSON(e){return ClaimRewardsResponseFromJSONTyped(e)}function ClaimRewardsResponseFromJSONTyped(e,t){return null==e?e:{data:e.data.map(ClaimRewardsResponseDataInnerFromJSON)}}function CoinDynamicBondingCurveFromJSON(e){return CoinDynamicBondingCurveFromJSONTyped(e)}function CoinDynamicBondingCurveFromJSONTyped(e,t){return null==e?e:{address:e.address,price:e.price,priceUSD:e.priceUSD,curveProgress:e.curveProgress,isMigrated:exists$3(e,"isMigrated")?e.isMigrated:void 0,creatorQuoteFee:e.creatorQuoteFee,totalTradingQuoteFee:e.totalTradingQuoteFee}}function CoinExtensionsFromJSON(e){return CoinExtensionsFromJSONTyped(e)}function CoinExtensionsFromJSONTyped(e,t){return null==e?e:{coingeckoId:exists$3(e,"coingeckoId")?e.coingeckoId:void 0,description:exists$3(e,"description")?e.description:void 0,twitter:exists$3(e,"twitter")?e.twitter:void 0,website:exists$3(e,"website")?e.website:void 0,discord:exists$3(e,"discord")?e.discord:void 0}}function CoinFromJSON(e){return CoinFromJSONTyped(e)}function CoinFromJSONTyped(e,t){return null==e?e:{name:e.name,ticker:exists$3(e,"ticker")?e.ticker:void 0,mint:e.mint,decimals:e.decimals,ownerId:e.owner_id,logoUri:exists$3(e,"logo_uri")?e.logo_uri:void 0,description:exists$3(e,"description")?e.description:void 0,website:exists$3(e,"website")?e.website:void 0,link1:exists$3(e,"link_1")?e.link_1:void 0,link2:exists$3(e,"link_2")?e.link_2:void 0,link3:exists$3(e,"link_3")?e.link_3:void 0,link4:exists$3(e,"link_4")?e.link_4:void 0,hasDiscord:e.has_discord,createdAt:e.created_at,address:exists$3(e,"address")?e.address:void 0,symbol:exists$3(e,"symbol")?e.symbol:void 0,marketCap:e.marketCap,fdv:e.fdv,extensions:exists$3(e,"extensions")?CoinExtensionsFromJSON(e.extensions):void 0,liquidity:e.liquidity,lastTradeUnixTime:e.lastTradeUnixTime,lastTradeHumanTime:e.lastTradeHumanTime,price:e.price,history24hPrice:e.history24hPrice,priceChange24hPercent:e.priceChange24hPercent,uniqueWallet24h:e.uniqueWallet24h,uniqueWalletHistory24h:e.uniqueWalletHistory24h,uniqueWallet24hChangePercent:e.uniqueWallet24hChangePercent,totalSupply:e.totalSupply,circulatingSupply:e.circulatingSupply,holder:e.holder,trade24h:e.trade24h,tradeHistory24h:e.tradeHistory24h,trade24hChangePercent:e.trade24hChangePercent,sell24h:e.sell24h,sellHistory24h:e.sellHistory24h,sell24hChangePercent:e.sell24hChangePercent,buy24h:e.buy24h,buyHistory24h:e.buyHistory24h,buy24hChangePercent:e.buy24hChangePercent,v24h:e.v24h,v24hUSD:e.v24hUSD,vHistory24h:e.vHistory24h,vHistory24hUSD:exists$3(e,"vHistory24hUSD")?e.vHistory24hUSD:void 0,v24hChangePercent:exists$3(e,"v24hChangePercent")?e.v24hChangePercent:void 0,vBuy24h:exists$3(e,"vBuy24h")?e.vBuy24h:void 0,vBuy24hUSD:exists$3(e,"vBuy24hUSD")?e.vBuy24hUSD:void 0,vBuyHistory24h:exists$3(e,"vBuyHistory24h")?e.vBuyHistory24h:void 0,vBuyHistory24hUSD:exists$3(e,"vBuyHistory24hUSD")?e.vBuyHistory24hUSD:void 0,vBuy24hChangePercent:exists$3(e,"vBuy24hChangePercent")?e.vBuy24hChangePercent:void 0,vSell24h:exists$3(e,"vSell24h")?e.vSell24h:void 0,vSell24hUSD:exists$3(e,"vSell24hUSD")?e.vSell24hUSD:void 0,vSellHistory24h:exists$3(e,"vSellHistory24h")?e.vSellHistory24h:void 0,vSellHistory24hUSD:exists$3(e,"vSellHistory24hUSD")?e.vSellHistory24hUSD:void 0,vSell24hChangePercent:exists$3(e,"vSell24hChangePercent")?e.vSell24hChangePercent:void 0,numberMarkets:exists$3(e,"numberMarkets")?e.numberMarkets:void 0,dynamicBondingCurve:CoinDynamicBondingCurveFromJSON(e.dynamicBondingCurve)}}function CoinInsightsFromJSON(e){return CoinInsightsFromJSONTyped(e)}function CoinInsightsFromJSONTyped(e,t){return null==e?e:{address:exists$3(e,"address")?e.address:void 0,decimals:exists$3(e,"decimals")?e.decimals:void 0,symbol:exists$3(e,"symbol")?e.symbol:void 0,name:exists$3(e,"name")?e.name:void 0,marketCap:e.marketCap,fdv:e.fdv,extensions:exists$3(e,"extensions")?CoinExtensionsFromJSON(e.extensions):void 0,liquidity:e.liquidity,lastTradeUnixTime:e.lastTradeUnixTime,lastTradeHumanTime:e.lastTradeHumanTime,price:e.price,history24hPrice:e.history24hPrice,priceChange24hPercent:e.priceChange24hPercent,uniqueWallet24h:e.uniqueWallet24h,uniqueWalletHistory24h:e.uniqueWalletHistory24h,uniqueWallet24hChangePercent:e.uniqueWallet24hChangePercent,totalSupply:e.totalSupply,circulatingSupply:e.circulatingSupply,holder:e.holder,trade24h:e.trade24h,tradeHistory24h:e.tradeHistory24h,trade24hChangePercent:e.trade24hChangePercent,sell24h:e.sell24h,sellHistory24h:e.sellHistory24h,sell24hChangePercent:e.sell24hChangePercent,buy24h:e.buy24h,buyHistory24h:e.buyHistory24h,buy24hChangePercent:e.buy24hChangePercent,v24h:e.v24h,v24hUSD:e.v24hUSD,vHistory24h:e.vHistory24h,vHistory24hUSD:exists$3(e,"vHistory24hUSD")?e.vHistory24hUSD:void 0,v24hChangePercent:exists$3(e,"v24hChangePercent")?e.v24hChangePercent:void 0,vBuy24h:exists$3(e,"vBuy24h")?e.vBuy24h:void 0,vBuy24hUSD:exists$3(e,"vBuy24hUSD")?e.vBuy24hUSD:void 0,vBuyHistory24h:exists$3(e,"vBuyHistory24h")?e.vBuyHistory24h:void 0,vBuyHistory24hUSD:exists$3(e,"vBuyHistory24hUSD")?e.vBuyHistory24hUSD:void 0,vBuy24hChangePercent:exists$3(e,"vBuy24hChangePercent")?e.vBuy24hChangePercent:void 0,vSell24h:exists$3(e,"vSell24h")?e.vSell24h:void 0,vSell24hUSD:exists$3(e,"vSell24hUSD")?e.vSell24hUSD:void 0,vSellHistory24h:exists$3(e,"vSellHistory24h")?e.vSellHistory24h:void 0,vSellHistory24hUSD:exists$3(e,"vSellHistory24hUSD")?e.vSellHistory24hUSD:void 0,vSell24hChangePercent:exists$3(e,"vSell24hChangePercent")?e.vSell24hChangePercent:void 0,numberMarkets:exists$3(e,"numberMarkets")?e.numberMarkets:void 0,dynamicBondingCurve:CoinDynamicBondingCurveFromJSON(e.dynamicBondingCurve)}}function CoinInsightsResponseFromJSON(e){return CoinInsightsResponseFromJSONTyped(e)}function CoinInsightsResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?CoinInsightsFromJSON(e.data):void 0}}function CoinMemberFromJSON(e){return CoinMemberFromJSONTyped(e)}function CoinMemberFromJSONTyped(e,t){return null==e?e:{balance:e.balance,userId:e.user_id}}function CoinMembersResponseFromJSON(e){return CoinMembersResponseFromJSONTyped(e)}function CoinMembersResponseFromJSONTyped(e,t){return null==e?e:{data:e.data.map(CoinMemberFromJSON)}}function CoinResponseFromJSON(e){return CoinResponseFromJSONTyped(e)}function CoinResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?CoinFromJSON(e.data):void 0}}function CoinsResponseFromJSON(e){return CoinsResponseFromJSONTyped(e)}function CoinsResponseFromJSONTyped(e,t){return null==e?e:{data:e.data.map(CoinFromJSON)}}function CollectiblesFromJSON(e){return CollectiblesFromJSONTyped(e)}function CollectiblesFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data:void 0}}function CollectiblesResponseFromJSON(e){return CollectiblesResponseFromJSONTyped(e)}function CollectiblesResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?CollectiblesFromJSON(e.data):void 0}}function CollectionActivityFromJSONTyped(e,t){return null==e?e:{...ActivityFromJSONTyped(e,t),timestamp:exists$3(e,"timestamp")?e.timestamp:void 0,itemType:e.item_type,item:PlaylistFromJSON(e.item)}}function CommentMentionFromJSON$1(e){return CommentMentionFromJSONTyped$1(e)}function CommentMentionFromJSONTyped$1(e,t){return null==e?e:{userId:e.user_id,handle:e.handle}}function ReplyCommentFromJSON$1(e){return ReplyCommentFromJSONTyped$1(e)}function ReplyCommentFromJSONTyped$1(e,t){return null==e?e:{id:e.id,entityId:e.entity_id,entityType:e.entity_type,userId:e.user_id,message:e.message,mentions:exists$3(e,"mentions")?e.mentions.map(CommentMentionFromJSON$1):void 0,trackTimestampS:exists$3(e,"track_timestamp_s")?e.track_timestamp_s:void 0,reactCount:e.react_count,isEdited:e.is_edited,isCurrentUserReacted:exists$3(e,"is_current_user_reacted")?e.is_current_user_reacted:void 0,isArtistReacted:exists$3(e,"is_artist_reacted")?e.is_artist_reacted:void 0,createdAt:e.created_at,updatedAt:exists$3(e,"updated_at")?e.updated_at:void 0,parentCommentId:exists$3(e,"parent_comment_id")?e.parent_comment_id:void 0}}function CommentFromJSON$1(e){return CommentFromJSONTyped$1(e)}function CommentFromJSONTyped$1(e,t){return null==e?e:{id:e.id,entityId:e.entity_id,entityType:e.entity_type,userId:exists$3(e,"user_id")?e.user_id:void 0,message:e.message,mentions:exists$3(e,"mentions")?e.mentions.map(CommentMentionFromJSON$1):void 0,trackTimestampS:exists$3(e,"track_timestamp_s")?e.track_timestamp_s:void 0,reactCount:e.react_count,replyCount:e.reply_count,isEdited:e.is_edited,isCurrentUserReacted:exists$3(e,"is_current_user_reacted")?e.is_current_user_reacted:void 0,isArtistReacted:exists$3(e,"is_artist_reacted")?e.is_artist_reacted:void 0,isTombstone:exists$3(e,"is_tombstone")?e.is_tombstone:void 0,isMuted:exists$3(e,"is_muted")?e.is_muted:void 0,createdAt:e.created_at,updatedAt:exists$3(e,"updated_at")?e.updated_at:void 0,replies:exists$3(e,"replies")?e.replies.map(ReplyCommentFromJSON$1):void 0,parentCommentId:exists$3(e,"parent_comment_id")?e.parent_comment_id:void 0}}function CommentNotificationSettingFromJSON(e){return CommentNotificationSettingFromJSONTyped(e)}function CommentNotificationSettingFromJSONTyped(e,t){return null==e?e:{isMuted:e.is_muted}}function CommentRepliesResponseFromJSON$1(e){return CommentRepliesResponseFromJSONTyped$1(e)}function CommentRepliesResponseFromJSONTyped$1(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(ReplyCommentFromJSON$1):void 0}}function CommentResponseFromJSON$1(e){return CommentResponseFromJSONTyped$1(e)}function CommentResponseFromJSONTyped$1(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(CommentFromJSON$1):void 0}}function ConnectedWalletsFromJSON(e){return ConnectedWalletsFromJSONTyped(e)}function ConnectedWalletsFromJSONTyped(e,t){return null==e?e:{ercWallets:e.erc_wallets,splWallets:e.spl_wallets}}function ConnectedWalletsResponseFromJSON(e){return ConnectedWalletsResponseFromJSONTyped(e)}function ConnectedWalletsResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?ConnectedWalletsFromJSON(e.data):void 0}}function CreateCoinRequestToJSON(e){if(void 0!==e)return null===e?null:{mint:e.mint,ticker:e.ticker,decimals:e.decimals,name:e.name,logo_uri:e.logoUri,description:e.description}}function CreateCoinResponseDataFromJSON(e){return CreateCoinResponseDataFromJSONTyped(e)}function CreateCoinResponseDataFromJSONTyped(e,t){return null==e?e:{mint:e.mint,ticker:e.ticker,userId:e.user_id,decimals:e.decimals,name:e.name,logoUri:exists$3(e,"logo_uri")?e.logo_uri:void 0,createdAt:new Date(e.created_at)}}function CreateCoinResponseFromJSON(e){return CreateCoinResponseFromJSONTyped(e)}function CreateCoinResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?CreateCoinResponseDataFromJSON(e.data):void 0}}function DashboardWalletUserFromJSON(e){return DashboardWalletUserFromJSONTyped(e)}function DashboardWalletUserFromJSONTyped(e,t){return null==e?e:{wallet:e.wallet,user:UserFromJSON(e.user)}}function DashboardWalletUsersResponseFromJSON(e){return DashboardWalletUsersResponseFromJSONTyped(e)}function DashboardWalletUsersResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(DashboardWalletUserFromJSON):void 0}}function DecodedUserTokenFromJSON(e){return DecodedUserTokenFromJSONTyped(e)}function DecodedUserTokenFromJSONTyped(e,t){return null==e?e:{apiKey:e.apiKey,userId:e.userId,email:e.email,name:e.name,handle:e.handle,verified:e.verified,profilePicture:exists$3(e,"profilePicture")?ProfilePictureFromJSON$1(e.profilePicture):void 0,sub:e.sub,iat:e.iat}}function DeveloperAppFromJSON(e){return DeveloperAppFromJSONTyped(e)}function DeveloperAppFromJSONTyped(e,t){return null==e?e:{address:e.address,userId:e.user_id,name:e.name,description:exists$3(e,"description")?e.description:void 0,imageUrl:exists$3(e,"image_url")?e.image_url:void 0}}function DeveloperAppResponseFromJSON(e){return DeveloperAppResponseFromJSONTyped(e)}function DeveloperAppResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?DeveloperAppFromJSON(e.data):void 0}}function DeveloperAppsFromJSON(e){return DeveloperAppsFromJSONTyped(e)}function DeveloperAppsFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(DeveloperAppFromJSON):void 0}}function EmailAccessFromJSON(e){return EmailAccessFromJSONTyped(e)}function EmailAccessFromJSONTyped(e,t){return null==e?e:{id:e.id,emailOwnerUserId:e.email_owner_user_id,receivingUserId:e.receiving_user_id,grantorUserId:e.grantor_user_id,encryptedKey:e.encrypted_key,isInitial:e.is_initial,createdAt:e.created_at,updatedAt:e.updated_at}}function EmailAccessResponseFromJSON(e){return EmailAccessResponseFromJSONTyped(e)}function EmailAccessResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?EmailAccessFromJSON(e.data):void 0}}const EventEventTypeEnum={RemixContest:"remix_contest",LiveEvent:"live_event",NewRelease:"new_release"},EventEntityTypeEnum={Track:"track",Collection:"collection",User:"user"};function EventFromJSON(e){return EventFromJSONTyped(e)}function EventFromJSONTyped(e,t){return null==e?e:{eventId:e.event_id,eventType:e.event_type,userId:e.user_id,entityType:exists$3(e,"entity_type")?e.entity_type:void 0,entityId:exists$3(e,"entity_id")?e.entity_id:void 0,endDate:exists$3(e,"end_date")?e.end_date:void 0,isDeleted:exists$3(e,"is_deleted")?e.is_deleted:void 0,createdAt:e.created_at,updatedAt:e.updated_at,eventData:e.event_data}}function EventsResponseFromJSON(e){return EventsResponseFromJSONTyped(e)}function EventsResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(EventFromJSON):void 0}}function FavoriteFromJSON$1(e){return FavoriteFromJSONTyped$1(e)}function FavoriteFromJSONTyped$1(e,t){return null==e?e:{favoriteItemId:e.favorite_item_id,favoriteType:e.favorite_type,userId:e.user_id,createdAt:e.created_at}}function FavoritesResponseFromJSON(e){return FavoritesResponseFromJSONTyped(e)}function FavoritesResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(FavoriteFromJSON$1):void 0}}function FollowersResponseFromJSON(e){return FollowersResponseFromJSONTyped(e)}function FollowersResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(UserFromJSON):void 0}}function FollowingResponseFromJSON$1(e){return FollowingResponseFromJSONTyped$1(e)}function FollowingResponseFromJSONTyped$1(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(UserFromJSON):void 0}}function GetChallengesFromJSON(e){return GetChallengesFromJSONTyped(e)}function GetChallengesFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(ChallengeResponseFromJSON):void 0}}function SupportingFromJSON(e){return SupportingFromJSONTyped(e)}function SupportingFromJSONTyped(e,t){return null==e?e:{rank:e.rank,amount:e.amount,receiver:UserFromJSON(e.receiver)}}function GetSupportedUsersFromJSON(e){return GetSupportedUsersFromJSONTyped(e)}function GetSupportedUsersFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(SupportingFromJSON):void 0}}function SupporterFromJSON(e){return SupporterFromJSONTyped(e)}function SupporterFromJSONTyped(e,t){return null==e?e:{rank:e.rank,amount:e.amount,sender:UserFromJSON(e.sender)}}function GetSupportersFromJSON(e){return GetSupportersFromJSONTyped(e)}function GetSupportersFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(SupporterFromJSON):void 0}}function TipFromJSON(e){return TipFromJSONTyped(e)}function TipFromJSONTyped(e,t){return null==e?e:{amount:e.amount,sender:exists$3(e,"sender")?UserFromJSON(e.sender):void 0,receiver:exists$3(e,"receiver")?UserFromJSON(e.receiver):void 0,createdAt:e.created_at}}function GetTipsResponseFromJSON$1(e){return GetTipsResponseFromJSONTyped$1(e)}function GetTipsResponseFromJSONTyped$1(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(TipFromJSON):void 0}}function TrackElementFromJSON(e){return TrackElementFromJSONTyped(e)}function TrackElementFromJSONTyped(e,t){return null==e?e:{parentTrackId:e.parent_track_id}}function RemixParentFromJSON(e){return RemixParentFromJSONTyped(e)}function RemixParentFromJSONTyped(e,t){return null==e?e:{tracks:exists$3(e,"tracks")?e.tracks.map(TrackElementFromJSON):void 0}}function TrackArtworkFromJSON(e){return TrackArtworkFromJSONTyped(e)}function TrackArtworkFromJSONTyped(e,t){return null==e?e:{_150x150:exists$3(e,"150x150")?e["150x150"]:void 0,_480x480:exists$3(e,"480x480")?e["480x480"]:void 0,_1000x1000:exists$3(e,"1000x1000")?e["1000x1000"]:void 0}}function instanceOfTrack(e){let t=!0;return t=t&&"artwork"in e&&void 0!==e.artwork,t=t&&"genre"in e&&void 0!==e.genre,t=t&&"id"in e&&void 0!==e.id,t=t&&"isOriginalAvailable"in e&&void 0!==e.isOriginalAvailable,t=t&&"repostCount"in e&&void 0!==e.repostCount,t=t&&"favoriteCount"in e&&void 0!==e.favoriteCount,t=t&&"commentCount"in e&&void 0!==e.commentCount,t=t&&"title"in e&&void 0!==e.title,t=t&&"user"in e&&void 0!==e.user,t=t&&"duration"in e&&void 0!==e.duration,t=t&&"isDownloadable"in e&&void 0!==e.isDownloadable,t=t&&"playCount"in e&&void 0!==e.playCount,t=t&&"permalink"in e&&void 0!==e.permalink,t}function TrackFromJSON(e){return TrackFromJSONTyped(e)}function TrackFromJSONTyped(e,t){return null==e?e:{artwork:TrackArtworkFromJSON(e.artwork),description:exists$3(e,"description")?e.description:void 0,genre:e.genre,id:e.id,trackCid:exists$3(e,"track_cid")?e.track_cid:void 0,previewCid:exists$3(e,"preview_cid")?e.preview_cid:void 0,origFileCid:exists$3(e,"orig_file_cid")?e.orig_file_cid:void 0,origFilename:exists$3(e,"orig_filename")?e.orig_filename:void 0,isOriginalAvailable:e.is_original_available,mood:exists$3(e,"mood")?e.mood:void 0,releaseDate:exists$3(e,"release_date")?e.release_date:void 0,isrc:exists$3(e,"isrc")?e.isrc:void 0,remixOf:exists$3(e,"remix_of")?RemixParentFromJSON(e.remix_of):void 0,repostCount:e.repost_count,favoriteCount:e.favorite_count,commentCount:e.comment_count,tags:exists$3(e,"tags")?e.tags:void 0,title:e.title,user:UserFromJSON(e.user),duration:e.duration,isDownloadable:e.is_downloadable,playCount:e.play_count,permalink:e.permalink,isStreamable:exists$3(e,"is_streamable")?e.is_streamable:void 0,ddexApp:exists$3(e,"ddex_app")?e.ddex_app:void 0,playlistsContainingTrack:exists$3(e,"playlists_containing_track")?e.playlists_containing_track:void 0,pinnedCommentId:exists$3(e,"pinned_comment_id")?e.pinned_comment_id:void 0,albumBacklink:exists$3(e,"album_backlink")?AlbumBacklinkFromJSON$1(e.album_backlink):void 0}}function TrackActivityFromJSON(e){return TrackActivityFromJSONTyped(e,!1)}function TrackActivityFromJSONTyped(e,t){return null==e?e:{...ActivityFromJSONTyped(e,t),itemType:e.item_type,item:TrackFromJSON(e.item)}}function HistoryResponseFromJSON(e){return HistoryResponseFromJSONTyped(e)}function HistoryResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(TrackActivityFromJSON):void 0}}function ListenCountFromJSON(e){return ListenCountFromJSONTyped(e)}function ListenCountFromJSONTyped(e,t){return null==e?e:{trackId:exists$3(e,"trackId")?e.trackId:void 0,date:exists$3(e,"date")?e.date:void 0,listens:exists$3(e,"listens")?e.listens:void 0}}function MonthlyAggregatePlayFromJSON(e){return MonthlyAggregatePlayFromJSONTyped(e)}function MonthlyAggregatePlayFromJSONTyped(e,t){return null==e?e:{totalListens:exists$3(e,"totalListens")?e.totalListens:void 0,trackIds:exists$3(e,"trackIds")?e.trackIds:void 0,listenCounts:exists$3(e,"listenCounts")?e.listenCounts.map(ListenCountFromJSON):void 0}}function MutualFollowersResponseFromJSON(e){return MutualFollowersResponseFromJSONTyped(e)}function MutualFollowersResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(UserFromJSON):void 0}}function PlaylistResponseFromJSON(e){return PlaylistResponseFromJSONTyped(e)}function PlaylistResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(PlaylistFromJSON):void 0}}function PlaylistSearchResultFromJSON(e){return PlaylistSearchResultFromJSONTyped(e)}function PlaylistSearchResultFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(PlaylistFromJSON):void 0}}function PlaylistTracksResponseFromJSON(e){return PlaylistTracksResponseFromJSONTyped(e)}function PlaylistTracksResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(TrackFromJSON):void 0}}function PlaylistsResponseFromJSON(e){return PlaylistsResponseFromJSONTyped(e)}function PlaylistsResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(PlaylistFromJSON):void 0}}function PurchasersResponseFromJSON(e){return PurchasersResponseFromJSONTyped(e)}function PurchasersResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(UserFromJSON):void 0}}function RelatedArtistResponseFromJSON(e){return RelatedArtistResponseFromJSONTyped(e)}function RelatedArtistResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(UserFromJSON):void 0}}function RemixedTrackAggregateFromJSON(e){return RemixedTrackAggregateFromJSONTyped(e)}function RemixedTrackAggregateFromJSONTyped(e,t){return null==e?e:{trackId:e.track_id,title:e.title,remixCount:e.remix_count}}function RemixersResponseFromJSON(e){return RemixersResponseFromJSONTyped(e)}function RemixersResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(UserFromJSON):void 0}}function RepostsFromJSON(e){return RepostsFromJSONTyped(e)}function RepostsFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(ActivityFromJSON):void 0}}function SaleJsonFromJSON(e){return SaleJsonFromJSONTyped(e)}function SaleJsonFromJSONTyped(e,t){return null==e?e:{title:exists$3(e,"title")?e.title:void 0,link:exists$3(e,"link")?e.link:void 0,purchasedBy:exists$3(e,"purchased_by")?e.purchased_by:void 0,buyerUserId:exists$3(e,"buyer_user_id")?e.buyer_user_id:void 0,date:exists$3(e,"date")?e.date:void 0,salePrice:exists$3(e,"sale_price")?e.sale_price:void 0,networkFee:exists$3(e,"network_fee")?e.network_fee:void 0,payExtra:exists$3(e,"pay_extra")?e.pay_extra:void 0,total:exists$3(e,"total")?e.total:void 0,country:exists$3(e,"country")?e.country:void 0,encryptedEmail:exists$3(e,"encrypted_email")?e.encrypted_email:void 0,encryptedKey:exists$3(e,"encrypted_key")?e.encrypted_key:void 0,isInitial:exists$3(e,"is_initial")?e.is_initial:void 0,pubkeyBase64:exists$3(e,"pubkey_base64")?e.pubkey_base64:void 0}}function SalesAggregateFromJSON(e){return SalesAggregateFromJSONTyped(e)}function SalesAggregateFromJSONTyped(e,t){return null==e?e:{contentType:e.content_type,contentId:e.content_id,purchaseCount:e.purchase_count}}function SalesAggregateResponseFromJSON(e){return SalesAggregateResponseFromJSONTyped(e)}function SalesAggregateResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(SalesAggregateFromJSON):void 0}}function SalesJsonContentFromJSON(e){return SalesJsonContentFromJSONTyped(e)}function SalesJsonContentFromJSONTyped(e,t){return null==e?e:{sales:exists$3(e,"sales")?e.sales.map(SaleJsonFromJSON):void 0}}function SalesJsonResponseFromJSON(e){return SalesJsonResponseFromJSONTyped(e)}function SalesJsonResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?SalesJsonContentFromJSON(e.data):void 0}}function StemFromJSON(e){return StemFromJSONTyped(e)}function StemFromJSONTyped(e,t){return null==e?e:{id:e.id,parentId:e.parent_id,category:e.category,cid:e.cid,userId:e.user_id,blocknumber:e.blocknumber,origFilename:e.orig_filename}}function StemsResponseFromJSON$1(e){return StemsResponseFromJSONTyped$1(e)}function StemsResponseFromJSONTyped$1(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(StemFromJSON):void 0}}function StreamUrlResponseFromJSON(e){return StreamUrlResponseFromJSONTyped(e)}function StreamUrlResponseFromJSONTyped(e,t){return null==e?e:{data:e.data}}function SubscribersResponseFromJSON(e){return SubscribersResponseFromJSONTyped(e)}function SubscribersResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(UserFromJSON):void 0}}function TagsResponseFromJSON(e){return TagsResponseFromJSONTyped(e)}function TagsResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data:void 0}}function TopListenerFromJSON(e){return TopListenerFromJSONTyped(e)}function TopListenerFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(TopListenerFromJSON):void 0}}function TrackCommentCountResponseFromJSON(e){return TrackCommentCountResponseFromJSONTyped(e)}function TrackCommentCountResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data:void 0}}function TrackCommentNotificationResponseFromJSON(e){return TrackCommentNotificationResponseFromJSONTyped(e)}function TrackCommentNotificationResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?CommentNotificationSettingFromJSON(e.data):void 0}}function TrackCommentsResponseFromJSON(e){return TrackCommentsResponseFromJSONTyped(e)}function TrackCommentsResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(CommentFromJSON$1):void 0}}function TrackInspectFromJSON(e){return TrackInspectFromJSONTyped(e)}function TrackInspectFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?BlobInfoFromJSON(e.data):void 0}}function TrackInspectListFromJSON(e){return TrackInspectListFromJSONTyped(e)}function TrackInspectListFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(BlobInfoFromJSON):void 0}}function TrackResponseFromJSON(e){return TrackResponseFromJSONTyped(e)}function TrackResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?TrackFromJSON(e.data):void 0}}function TrackSearchFromJSON(e){return TrackSearchFromJSONTyped(e)}function TrackSearchFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(TrackFromJSON):void 0}}function TracksResponseFromJSON(e){return TracksResponseFromJSONTyped(e)}function TracksResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(TrackFromJSON):void 0}}function TrendingPlaylistsResponseFromJSON(e){return TrendingPlaylistsResponseFromJSONTyped(e)}function TrendingPlaylistsResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(PlaylistFromJSON):void 0}}function UnclaimedIdResponseFromJSON(e){return UnclaimedIdResponseFromJSONTyped(e)}function UnclaimedIdResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data:void 0}}function UndisbursedChallengeFromJSON(e){return UndisbursedChallengeFromJSONTyped(e)}function UndisbursedChallengeFromJSONTyped(e,t){return null==e?e:{challengeId:e.challenge_id,userId:e.user_id,specifier:e.specifier,amount:e.amount,completedBlocknumber:e.completed_blocknumber,handle:e.handle,wallet:e.wallet,createdAt:e.created_at,completedAt:e.completed_at,cooldownDays:exists$3(e,"cooldown_days")?e.cooldown_days:void 0}}function UndisbursedChallengesFromJSON(e){return UndisbursedChallengesFromJSONTyped(e)}function UndisbursedChallengesFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(UndisbursedChallengeFromJSON):void 0}}function UpdateCoinRequestToJSON(e){if(void 0!==e)return null===e?null:{description:e.description,link_1:e.link1,link_2:e.link2,link_3:e.link3,link_4:e.link4}}function UpdateCoinResponseFromJSON(e){return UpdateCoinResponseFromJSONTyped(e)}function UpdateCoinResponseFromJSONTyped(e,t){return null==e?e:{success:exists$3(e,"success")?e.success:void 0}}function UserCoinFromJSON(e){return UserCoinFromJSONTyped(e)}function UserCoinFromJSONTyped(e,t){return null==e?e:{mint:e.mint,ticker:e.ticker,decimals:e.decimals,ownerId:e.owner_id,hasDiscord:e.has_discord,balance:e.balance,balanceUsd:e.balance_usd}}function UserCoinAccountFromJSON(e){return UserCoinAccountFromJSONTyped(e)}function UserCoinAccountFromJSONTyped(e,t){return null==e?e:{account:e.account,owner:e.owner,balance:e.balance,balanceUsd:e.balance_usd,isInAppWallet:e.is_in_app_wallet}}function UserCoinWithAccountsFromJSON(e){return UserCoinWithAccountsFromJSONTyped(e)}function UserCoinWithAccountsFromJSONTyped(e,t){return null==e?e:{mint:e.mint,ticker:e.ticker,decimals:e.decimals,balance:e.balance,balanceUsd:e.balance_usd,accounts:e.accounts.map(UserCoinAccountFromJSON)}}function UserCoinResponseFromJSON(e){return UserCoinResponseFromJSONTyped(e)}function UserCoinResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?UserCoinWithAccountsFromJSON(e.data):void 0}}function UserCoinsResponseFromJSON(e){return UserCoinsResponseFromJSONTyped(e)}function UserCoinsResponseFromJSONTyped(e,t){return null==e?e:{data:e.data.map(UserCoinFromJSON)}}function UserCommentsResponseFromJSON(e){return UserCommentsResponseFromJSONTyped(e)}function UserCommentsResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(CommentFromJSON$1):void 0}}function UserIdAddressFromJSON(e){return UserIdAddressFromJSONTyped(e)}function UserIdAddressFromJSONTyped(e,t){return null==e?e:{userId:e.user_id,address:e.address}}function UserIdsAddressesResponseFromJSON(e){return UserIdsAddressesResponseFromJSONTyped(e)}function UserIdsAddressesResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(UserIdAddressFromJSON):void 0}}function UserResponseFromJSON(e){return UserResponseFromJSONTyped(e)}function UserResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?UserFromJSON(e.data):void 0}}function UserSearchFromJSON(e){return UserSearchFromJSONTyped(e)}function UserSearchFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(UserFromJSON):void 0}}function UserTrackListenCountsResponseFromJSON(e){return UserTrackListenCountsResponseFromJSONTyped(e)}function UserTrackListenCountsResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?mapValues(e.data,MonthlyAggregatePlayFromJSON):void 0}}function UserTracksRemixedResponseFromJSON(e){return UserTracksRemixedResponseFromJSONTyped(e)}function UserTracksRemixedResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(RemixedTrackAggregateFromJSON):void 0}}function UsersResponseFromJSON(e){return UsersResponseFromJSONTyped(e)}function UsersResponseFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?e.data.map(UserFromJSON):void 0}}function VerifyTokenFromJSON(e){return VerifyTokenFromJSONTyped(e)}function VerifyTokenFromJSONTyped(e,t){return null==e?e:{data:exists$3(e,"data")?DecodedUserTokenFromJSON(e.data):void 0}}class ChallengesApi extends BaseAPI$1{async getUndisbursedChallengesRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.completedBlocknumber&&(r.completed_blocknumber=e.completedBlocknumber),void 0!==e.challengeId&&(r.challenge_id=e.challengeId);const n=await this.request({path:"/challenges/undisbursed",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>UndisbursedChallengesFromJSON(e)))}async getUndisbursedChallenges(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getUndisbursedChallengesRaw(e,t);return await r.value()}async getUndisbursedChallengesForUserRaw(e,t){if(null===e.userId||void 0===e.userId)throw new RequiredError$1("userId","Required parameter params.userId was null or undefined when calling getUndisbursedChallengesForUser.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.completedBlocknumber&&(r.completed_blocknumber=e.completedBlocknumber),void 0!==e.challengeId&&(r.challenge_id=e.challengeId);const n=await this.request({path:"/challenges/undisbursed/{user_id}".replace("{user_id}",encodeURIComponent(String(e.userId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>UndisbursedChallengesFromJSON(e)))}async getUndisbursedChallengesForUser(e,t){const r=await this.getUndisbursedChallengesForUserRaw(e,t);return await r.value()}}class CoinsApi extends BaseAPI$1{async createCoinRaw(e,t){if(null===e.userId||void 0===e.userId)throw new RequiredError$1("userId","Required parameter params.userId was null or undefined when calling createCoin.");if(null===e.createCoinRequest||void 0===e.createCoinRequest)throw new RequiredError$1("createCoinRequest","Required parameter params.createCoinRequest was null or undefined when calling createCoin.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n={"Content-Type":"application/json"},i=await this.request({path:"/coins",method:"POST",headers:n,query:r,body:CreateCoinRequestToJSON(e.createCoinRequest)},t);return new JSONApiResponse$1(i,(e=>CreateCoinResponseFromJSON(e)))}async createCoin(e,t){const r=await this.createCoinRaw(e,t);return await r.value()}async getCoinRaw(e,t){if(null===e.mint||void 0===e.mint)throw new RequiredError$1("mint","Required parameter params.mint was null or undefined when calling getCoin.");const r=await this.request({path:"/coins/{mint}".replace("{mint}",encodeURIComponent(String(e.mint))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>CoinResponseFromJSON(e)))}async getCoin(e,t){const r=await this.getCoinRaw(e,t);return await r.value()}async getCoinByTickerRaw(e,t){if(null===e.ticker||void 0===e.ticker)throw new RequiredError$1("ticker","Required parameter params.ticker was null or undefined when calling getCoinByTicker.");const r=await this.request({path:"/coins/ticker/{ticker}".replace("{ticker}",encodeURIComponent(String(e.ticker))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>CoinResponseFromJSON(e)))}async getCoinByTicker(e,t){const r=await this.getCoinByTickerRaw(e,t);return await r.value()}async getCoinInsightsRaw(e,t){if(null===e.mint||void 0===e.mint)throw new RequiredError$1("mint","Required parameter params.mint was null or undefined when calling getCoinInsights.");const r=await this.request({path:"/coins/{mint}/insights".replace("{mint}",encodeURIComponent(String(e.mint))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>CoinInsightsResponseFromJSON(e)))}async getCoinInsights(e,t){const r=await this.getCoinInsightsRaw(e,t);return await r.value()}async getCoinMembersRaw(e,t){if(null===e.mint||void 0===e.mint)throw new RequiredError$1("mint","Required parameter params.mint was null or undefined when calling getCoinMembers.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection);const n=await this.request({path:"/coins/{mint}/members".replace("{mint}",encodeURIComponent(String(e.mint))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>CoinMembersResponseFromJSON(e)))}async getCoinMembers(e,t){const r=await this.getCoinMembersRaw(e,t);return await r.value()}async getCoinsRaw(e,t){const r={};e.mint&&(r.mint=e.mint),e.ownerId&&(r.owner_id=e.ownerId),e.ticker&&(r.ticker=e.ticker),void 0!==e.query&&(r.query=e.query),void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection);const n=await this.request({path:"/coins",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>CoinsResponseFromJSON(e)))}async getCoins(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getCoinsRaw(e,t);return await r.value()}async updateCoinRaw(e,t){if(null===e.mint||void 0===e.mint)throw new RequiredError$1("mint","Required parameter params.mint was null or undefined when calling updateCoin.");if(null===e.userId||void 0===e.userId)throw new RequiredError$1("userId","Required parameter params.userId was null or undefined when calling updateCoin.");if(null===e.updateCoinRequest||void 0===e.updateCoinRequest)throw new RequiredError$1("updateCoinRequest","Required parameter params.updateCoinRequest was null or undefined when calling updateCoin.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n={"Content-Type":"application/json"},i=await this.request({path:"/coins/{mint}".replace("{mint}",encodeURIComponent(String(e.mint))),method:"POST",headers:n,query:r,body:UpdateCoinRequestToJSON(e.updateCoinRequest)},t);return new JSONApiResponse$1(i,(e=>UpdateCoinResponseFromJSON(e)))}async updateCoin(e,t){const r=await this.updateCoinRaw(e,t);return await r.value()}}class CommentsApi$2 extends BaseAPI$1{async getCommentRaw(e,t){if(null===e.commentId||void 0===e.commentId)throw new RequiredError$1("commentId","Required parameter params.commentId was null or undefined when calling getComment.");const r=await this.request({path:"/comments/{comment_id}".replace("{comment_id}",encodeURIComponent(String(e.commentId))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>CommentResponseFromJSON$1(e)))}async getComment(e,t){const r=await this.getCommentRaw(e,t);return await r.value()}async getCommentRepliesRaw(e,t){if(null===e.commentId||void 0===e.commentId)throw new RequiredError$1("commentId","Required parameter params.commentId was null or undefined when calling getCommentReplies.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/comments/{comment_id}/replies".replace("{comment_id}",encodeURIComponent(String(e.commentId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>CommentRepliesResponseFromJSON$1(e)))}async getCommentReplies(e,t){const r=await this.getCommentRepliesRaw(e,t);return await r.value()}async getUnclaimedCommentIDRaw(e){const t=await this.request({path:"/comments/unclaimed_id",method:"GET",headers:{},query:{}},e);return new JSONApiResponse$1(t,(e=>UnclaimedIdResponseFromJSON(e)))}async getUnclaimedCommentID(e){const t=await this.getUnclaimedCommentIDRaw(e);return await t.value()}}class DashboardWalletUsersApi$1 extends BaseAPI$1{async bulkGetDashboardWalletUsersRaw(e,t){if(null===e.wallets||void 0===e.wallets)throw new RequiredError$1("wallets","Required parameter params.wallets was null or undefined when calling bulkGetDashboardWalletUsers.");const r={};e.wallets&&(r.wallets=e.wallets.join(COLLECTION_FORMATS$1.csv));const n=await this.request({path:"/dashboard_wallet_users",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>DashboardWalletUsersResponseFromJSON(e)))}async bulkGetDashboardWalletUsers(e,t){const r=await this.bulkGetDashboardWalletUsersRaw(e,t);return await r.value()}}class DeveloperAppsApi$1 extends BaseAPI$1{async getDeveloperAppRaw(e,t){if(null===e.address||void 0===e.address)throw new RequiredError$1("address","Required parameter params.address was null or undefined when calling getDeveloperApp.");const r=await this.request({path:"/developer_apps/{address}".replace("{address}",encodeURIComponent(String(e.address))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>DeveloperAppResponseFromJSON(e)))}async getDeveloperApp(e,t){const r=await this.getDeveloperAppRaw(e,t);return await r.value()}}class EventsApi$1 extends BaseAPI$1{async getAllEventsRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.eventType&&(r.event_type=e.eventType);const n=await this.request({path:"/events/all",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>EventsResponseFromJSON(e)))}async getAllEvents(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getAllEventsRaw(e,t);return await r.value()}async getBulkEventsRaw(e,t){const r={};void 0!==e.userId&&(r.user_id=e.userId),e.id&&(r.id=e.id),void 0!==e.eventType&&(r.event_type=e.eventType);const n=await this.request({path:"/events",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>EventsResponseFromJSON(e)))}async getBulkEvents(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getBulkEventsRaw(e,t);return await r.value()}async getEntityEventsRaw(e,t){if(null===e.entityId||void 0===e.entityId)throw new RequiredError$1("entityId","Required parameter params.entityId was null or undefined when calling getEntityEvents.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),e.entityId&&(r.entity_id=e.entityId),void 0!==e.entityType&&(r.entity_type=e.entityType),void 0!==e.filterDeleted&&(r.filter_deleted=e.filterDeleted);const n=await this.request({path:"/events/entity",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>EventsResponseFromJSON(e)))}async getEntityEvents(e,t){const r=await this.getEntityEventsRaw(e,t);return await r.value()}async getUnclaimedEventIDRaw(e){const t=await this.request({path:"/events/unclaimed_id",method:"GET",headers:{},query:{}},e);return new JSONApiResponse$1(t,(e=>UnclaimedIdResponseFromJSON(e)))}async getUnclaimedEventID(e){const t=await this.getUnclaimedEventIDRaw(e);return await t.value()}}class ExploreApi$1 extends BaseAPI$1{async getBestSellingRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.type&&(r.type=e.type);const n=await this.request({path:"/explore/best-selling",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>BestSellingResponseFromJSON(e)))}async getBestSelling(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getBestSellingRaw(e,t);return await r.value()}}class PlaylistsApi$2 extends BaseAPI$1{async getBulkPlaylistsRaw(e,t){const r={};void 0!==e.userId&&(r.user_id=e.userId),e.id&&(r.id=e.id),e.upc&&(r.upc=e.upc);const n=await this.request({path:"/playlists",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>PlaylistResponseFromJSON(e)))}async getBulkPlaylists(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getBulkPlaylistsRaw(e,t);return await r.value()}async getPlaylistRaw(e,t){if(null===e.playlistId||void 0===e.playlistId)throw new RequiredError$1("playlistId","Required parameter params.playlistId was null or undefined when calling getPlaylist.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/playlists/{playlist_id}".replace("{playlist_id}",encodeURIComponent(String(e.playlistId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>PlaylistResponseFromJSON(e)))}async getPlaylist(e,t){const r=await this.getPlaylistRaw(e,t);return await r.value()}async getPlaylistAccessInfoRaw(e,t){if(null===e.playlistId||void 0===e.playlistId)throw new RequiredError$1("playlistId","Required parameter params.playlistId was null or undefined when calling getPlaylistAccessInfo.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/playlists/{playlist_id}/access-info".replace("{playlist_id}",encodeURIComponent(String(e.playlistId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>AccessInfoResponseFromJSON(e)))}async getPlaylistAccessInfo(e,t){const r=await this.getPlaylistAccessInfoRaw(e,t);return await r.value()}async getPlaylistByHandleAndSlugRaw(e,t){if(null===e.handle||void 0===e.handle)throw new RequiredError$1("handle","Required parameter params.handle was null or undefined when calling getPlaylistByHandleAndSlug.");if(null===e.slug||void 0===e.slug)throw new RequiredError$1("slug","Required parameter params.slug was null or undefined when calling getPlaylistByHandleAndSlug.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/playlists/by_permalink/{handle}/{slug}".replace("{handle}",encodeURIComponent(String(e.handle))).replace("{slug}",encodeURIComponent(String(e.slug))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>PlaylistResponseFromJSON(e)))}async getPlaylistByHandleAndSlug(e,t){const r=await this.getPlaylistByHandleAndSlugRaw(e,t);return await r.value()}async getPlaylistTracksRaw(e,t){if(null===e.playlistId||void 0===e.playlistId)throw new RequiredError$1("playlistId","Required parameter params.playlistId was null or undefined when calling getPlaylistTracks.");const r=await this.request({path:"/playlists/{playlist_id}/tracks".replace("{playlist_id}",encodeURIComponent(String(e.playlistId))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>PlaylistTracksResponseFromJSON(e)))}async getPlaylistTracks(e,t){const r=await this.getPlaylistTracksRaw(e,t);return await r.value()}async getTrendingPlaylistsRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.time&&(r.time=e.time),void 0!==e.type&&(r.type=e.type),void 0!==e.omitTracks&&(r.omit_tracks=e.omitTracks);const n=await this.request({path:"/playlists/trending",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TrendingPlaylistsResponseFromJSON(e)))}async getTrendingPlaylists(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getTrendingPlaylistsRaw(e,t);return await r.value()}async searchPlaylistsRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.query&&(r.query=e.query),e.genre&&(r.genre=e.genre),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),e.mood&&(r.mood=e.mood),void 0!==e.includePurchaseable&&(r.includePurchaseable=e.includePurchaseable),void 0!==e.hasDownloads&&(r.has_downloads=e.hasDownloads);const n=await this.request({path:"/playlists/search",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>PlaylistSearchResultFromJSON(e)))}async searchPlaylists(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.searchPlaylistsRaw(e,t);return await r.value()}}class RewardsApi extends BaseAPI$1{async claimRewardsRaw(e,t){if(null===e.claimRewardsRequest||void 0===e.claimRewardsRequest)throw new RequiredError$1("claimRewardsRequest","Required parameter params.claimRewardsRequest was null or undefined when calling claimRewards.");const r={"Content-Type":"application/json"},n=await this.request({path:"/rewards/claim",method:"POST",headers:r,query:{},body:ClaimRewardsRequestToJSON(e.claimRewardsRequest)},t);return new JSONApiResponse$1(n,(e=>ClaimRewardsResponseFromJSON(e)))}async claimRewards(e,t){const r=await this.claimRewardsRaw(e,t);return await r.value()}}class TipsApi$1 extends BaseAPI$1{async getTipsRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.receiverMinFollowers&&(r.receiver_min_followers=e.receiverMinFollowers),void 0!==e.receiverIsVerified&&(r.receiver_is_verified=e.receiverIsVerified),void 0!==e.currentUserFollows&&(r.current_user_follows=e.currentUserFollows),void 0!==e.uniqueBy&&(r.unique_by=e.uniqueBy),void 0!==e.minSlot&&(r.min_slot=e.minSlot),void 0!==e.maxSlot&&(r.max_slot=e.maxSlot),e.txSignatures&&(r.tx_signatures=e.txSignatures.join(COLLECTION_FORMATS$1.csv));const n=await this.request({path:"/tips",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>GetTipsResponseFromJSON$1(e)))}async getTips(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getTipsRaw(e,t);return await r.value()}}class TracksApi$2 extends BaseAPI$1{async downloadTrackRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError$1("trackId","Required parameter params.trackId was null or undefined when calling downloadTrack.");const r={};void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.userSignature&&(r.user_signature=e.userSignature),void 0!==e.userData&&(r.user_data=e.userData),void 0!==e.nftAccessSignature&&(r.nft_access_signature=e.nftAccessSignature),void 0!==e.filename&&(r.filename=e.filename);const n=await this.request({path:"/tracks/{track_id}/download".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:r},t);return new VoidApiResponse(n)}async downloadTrack(e,t){await this.downloadTrackRaw(e,t)}async getBulkTracksRaw(e,t){const r={};e.permalink&&(r.permalink=e.permalink),e.id&&(r.id=e.id),e.isrc&&(r.isrc=e.isrc);const n=await this.request({path:"/tracks",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TracksResponseFromJSON(e)))}async getBulkTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getBulkTracksRaw(e,t);return await r.value()}async getFeelingLuckyTracksRaw(e,t){const r={};void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.minFollowers&&(r.min_followers=e.minFollowers);const n=await this.request({path:"/tracks/feeling-lucky",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TracksResponseFromJSON(e)))}async getFeelingLuckyTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getFeelingLuckyTracksRaw(e,t);return await r.value()}async getMostSharedTracksRaw(e,t){const r={};void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.offset&&(r.offset=e.offset),void 0!==e.timeRange&&(r.time_range=e.timeRange);const n=await this.request({path:"/tracks/most-shared",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TracksResponseFromJSON(e)))}async getMostSharedTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getMostSharedTracksRaw(e,t);return await r.value()}async getRecentPremiumTracksRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/tracks/recent-premium",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TracksResponseFromJSON(e)))}async getRecentPremiumTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getRecentPremiumTracksRaw(e,t);return await r.value()}async getTrackRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError$1("trackId","Required parameter params.trackId was null or undefined when calling getTrack.");const r=await this.request({path:"/tracks/{track_id}".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>TrackResponseFromJSON(e)))}async getTrack(e,t){const r=await this.getTrackRaw(e,t);return await r.value()}async getTrackAccessInfoRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError$1("trackId","Required parameter params.trackId was null or undefined when calling getTrackAccessInfo.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/tracks/{track_id}/access-info".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>AccessInfoResponseFromJSON(e)))}async getTrackAccessInfo(e,t){const r=await this.getTrackAccessInfoRaw(e,t);return await r.value()}async getTrackCommentCountRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError$1("trackId","Required parameter params.trackId was null or undefined when calling getTrackCommentCount.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/tracks/{track_id}/comment_count".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TrackCommentCountResponseFromJSON(e)))}async getTrackCommentCount(e,t){const r=await this.getTrackCommentCountRaw(e,t);return await r.value()}async getTrackCommentNotificationSettingRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError$1("trackId","Required parameter params.trackId was null or undefined when calling getTrackCommentNotificationSetting.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/tracks/{track_id}/comment_notification_setting".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TrackCommentNotificationResponseFromJSON(e)))}async getTrackCommentNotificationSetting(e,t){const r=await this.getTrackCommentNotificationSettingRaw(e,t);return await r.value()}async getTrackCommentsRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError$1("trackId","Required parameter params.trackId was null or undefined when calling getTrackComments.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod);const n=await this.request({path:"/tracks/{track_id}/comments".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TrackCommentsResponseFromJSON(e)))}async getTrackComments(e,t){const r=await this.getTrackCommentsRaw(e,t);return await r.value()}async getTrackStemsRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError$1("trackId","Required parameter params.trackId was null or undefined when calling getTrackStems.");const r=await this.request({path:"/tracks/{track_id}/stems".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>StemsResponseFromJSON$1(e)))}async getTrackStems(e,t){const r=await this.getTrackStemsRaw(e,t);return await r.value()}async getTrackTopListenersRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError$1("trackId","Required parameter params.trackId was null or undefined when calling getTrackTopListeners.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/tracks/{track_id}/top_listeners".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TopListenerFromJSON(e)))}async getTrackTopListeners(e,t){const r=await this.getTrackTopListenersRaw(e,t);return await r.value()}async getTracksWithRecentCommentsRaw(e,t){const r={};void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.offset&&(r.offset=e.offset);const n=await this.request({path:"/tracks/recent-comments",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TracksResponseFromJSON(e)))}async getTracksWithRecentComments(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getTracksWithRecentCommentsRaw(e,t);return await r.value()}async getTrendingTracksRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.genre&&(r.genre=e.genre),void 0!==e.time&&(r.time=e.time);const n=await this.request({path:"/tracks/trending",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TracksResponseFromJSON(e)))}async getTrendingTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getTrendingTracksRaw(e,t);return await r.value()}async getUndergroundTrendingTracksRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit);const n=await this.request({path:"/tracks/trending/underground",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TracksResponseFromJSON(e)))}async getUndergroundTrendingTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getUndergroundTrendingTracksRaw(e,t);return await r.value()}async inspectTrackRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError$1("trackId","Required parameter params.trackId was null or undefined when calling inspectTrack.");const r={};void 0!==e.original&&(r.original=e.original);const n=await this.request({path:"/tracks/{track_id}/inspect".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TrackInspectFromJSON(e)))}async inspectTrack(e,t){const r=await this.inspectTrackRaw(e,t);return await r.value()}async inspectTracksRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling inspectTracks.");const r={};e.id&&(r.id=e.id),void 0!==e.original&&(r.original=e.original);const n=await this.request({path:"/tracks/inspect",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TrackInspectListFromJSON(e)))}async inspectTracks(e,t){const r=await this.inspectTracksRaw(e,t);return await r.value()}async searchTracksRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.query&&(r.query=e.query),e.genre&&(r.genre=e.genre),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),e.mood&&(r.mood=e.mood),void 0!==e.onlyDownloadable&&(r.only_downloadable=e.onlyDownloadable),void 0!==e.includePurchaseable&&(r.includePurchaseable=e.includePurchaseable),void 0!==e.isPurchaseable&&(r.is_purchaseable=e.isPurchaseable),void 0!==e.hasDownloads&&(r.has_downloads=e.hasDownloads),e.key&&(r.key=e.key),void 0!==e.bpmMin&&(r.bpm_min=e.bpmMin),void 0!==e.bpmMax&&(r.bpm_max=e.bpmMax);const n=await this.request({path:"/tracks/search",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TrackSearchFromJSON(e)))}async searchTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.searchTracksRaw(e,t);return await r.value()}async streamTrackRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError$1("trackId","Required parameter params.trackId was null or undefined when calling streamTrack.");const r={};void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.preview&&(r.preview=e.preview),void 0!==e.userSignature&&(r.user_signature=e.userSignature),void 0!==e.userData&&(r.user_data=e.userData),void 0!==e.nftAccessSignature&&(r.nft_access_signature=e.nftAccessSignature),void 0!==e.skipPlayCount&&(r.skip_play_count=e.skipPlayCount),void 0!==e.apiKey&&(r.api_key=e.apiKey),void 0!==e.skipCheck&&(r.skip_check=e.skipCheck),void 0!==e.noRedirect&&(r.no_redirect=e.noRedirect);const n=await this.request({path:"/tracks/{track_id}/stream".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>StreamUrlResponseFromJSON(e)))}async streamTrack(e,t){const r=await this.streamTrackRaw(e,t);return await r.value()}}class UsersApi$2 extends BaseAPI$1{async downloadPurchasesAsCSVRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling downloadPurchasesAsCSV.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/purchases/download".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new VoidApiResponse(i)}async downloadPurchasesAsCSV(e,t){await this.downloadPurchasesAsCSVRaw(e,t)}async downloadSalesAsCSVRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling downloadSalesAsCSV.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/sales/download".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new VoidApiResponse(i)}async downloadSalesAsCSV(e,t){await this.downloadSalesAsCSVRaw(e,t)}async downloadSalesAsJSONRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling downloadSalesAsJSON.");const r={};void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.granteeUserId&&(r.grantee_user_id=e.granteeUserId);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/sales/download/json".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse$1(i,(e=>SalesJsonResponseFromJSON(e)))}async downloadSalesAsJSON(e,t){const r=await this.downloadSalesAsJSONRaw(e,t);return await r.value()}async downloadUSDCWithdrawalsAsCSVRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling downloadUSDCWithdrawalsAsCSV.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/withdrawals/download".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new VoidApiResponse(i)}async downloadUSDCWithdrawalsAsCSV(e,t){await this.downloadUSDCWithdrawalsAsCSVRaw(e,t)}async getAIAttributedTracksByUserHandleRaw(e,t){if(null===e.handle||void 0===e.handle)throw new RequiredError$1("handle","Required parameter params.handle was null or undefined when calling getAIAttributedTracksByUserHandle.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.sort&&(r.sort=e.sort),void 0!==e.query&&(r.query=e.query),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection),void 0!==e.filterTracks&&(r.filter_tracks=e.filterTracks);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/handle/{handle}/tracks/ai_attributed".replace("{handle}",encodeURIComponent(String(e.handle))),method:"GET",headers:n,query:r},t);return new JSONApiResponse$1(i,(e=>TracksResponseFromJSON(e)))}async getAIAttributedTracksByUserHandle(e,t){const r=await this.getAIAttributedTracksByUserHandleRaw(e,t);return await r.value()}async getAlbumsByUserRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getAlbumsByUser.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.query&&(r.query=e.query);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/albums".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse$1(i,(e=>AlbumsResponseFromJSON(e)))}async getAlbumsByUser(e,t){const r=await this.getAlbumsByUserRaw(e,t);return await r.value()}async getAuthorizedAppsRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getAuthorizedApps.");const r=await this.request({path:"/users/{id}/authorized_apps".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>AuthorizedAppsFromJSON(e)))}async getAuthorizedApps(e,t){const r=await this.getAuthorizedAppsRaw(e,t);return await r.value()}async getBulkUsersRaw(e,t){const r={};void 0!==e.userId&&(r.user_id=e.userId),e.id&&(r.id=e.id);const n=await this.request({path:"/users",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>UsersResponseFromJSON(e)))}async getBulkUsers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getBulkUsersRaw(e,t);return await r.value()}async getConnectedWalletsRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getConnectedWallets.");const r=await this.request({path:"/users/{id}/connected_wallets".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>ConnectedWalletsResponseFromJSON(e)))}async getConnectedWallets(e,t){const r=await this.getConnectedWalletsRaw(e,t);return await r.value()}async getDeveloperAppsRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getDeveloperApps.");const r=await this.request({path:"/users/{id}/developer_apps".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>DeveloperAppsFromJSON(e)))}async getDeveloperApps(e,t){const r=await this.getDeveloperAppsRaw(e,t);return await r.value()}async getFavoritesRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getFavorites.");const r=await this.request({path:"/users/{id}/favorites".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>FavoritesResponseFromJSON(e)))}async getFavorites(e,t){const r=await this.getFavoritesRaw(e,t);return await r.value()}async getFollowersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getFollowers.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/followers".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>FollowersResponseFromJSON(e)))}async getFollowers(e,t){const r=await this.getFollowersRaw(e,t);return await r.value()}async getFollowingRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getFollowing.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/following".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>FollowingResponseFromJSON$1(e)))}async getFollowing(e,t){const r=await this.getFollowingRaw(e,t);return await r.value()}async getMutedUsersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getMutedUsers.");const r={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(r["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(r["Encoded-Data-Signature"]=String(e.encodedDataSignature));const n=await this.request({path:"/users/{id}/muted".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:r,query:{}},t);return new JSONApiResponse$1(n,(e=>UsersResponseFromJSON(e)))}async getMutedUsers(e,t){const r=await this.getMutedUsersRaw(e,t);return await r.value()}async getMutualFollowersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getMutualFollowers.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/mutuals".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>MutualFollowersResponseFromJSON(e)))}async getMutualFollowers(e,t){const r=await this.getMutualFollowersRaw(e,t);return await r.value()}async getPlaylistsByUserRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getPlaylistsByUser.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.query&&(r.query=e.query);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/playlists".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse$1(i,(e=>PlaylistsResponseFromJSON(e)))}async getPlaylistsByUser(e,t){const r=await this.getPlaylistsByUserRaw(e,t);return await r.value()}async getPurchasersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getPurchasers.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.contentType&&(r.content_type=e.contentType),void 0!==e.contentId&&(r.content_id=e.contentId);const n=await this.request({path:"/users/{id}/purchasers".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>PurchasersResponseFromJSON(e)))}async getPurchasers(e,t){const r=await this.getPurchasersRaw(e,t);return await r.value()}async getRelatedUsersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getRelatedUsers.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.filterFollowed&&(r.filter_followed=e.filterFollowed);const n=await this.request({path:"/users/{id}/related".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>RelatedArtistResponseFromJSON(e)))}async getRelatedUsers(e,t){const r=await this.getRelatedUsersRaw(e,t);return await r.value()}async getRemixersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getRemixers.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.trackId&&(r.track_id=e.trackId);const n=await this.request({path:"/users/{id}/remixers".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>RemixersResponseFromJSON(e)))}async getRemixers(e,t){const r=await this.getRemixersRaw(e,t);return await r.value()}async getRepostsRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getReposts.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/reposts".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>RepostsFromJSON(e)))}async getReposts(e,t){const r=await this.getRepostsRaw(e,t);return await r.value()}async getSalesAggregateRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getSalesAggregate.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/sales/aggregate".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse$1(i,(e=>SalesAggregateResponseFromJSON(e)))}async getSalesAggregate(e,t){const r=await this.getSalesAggregateRaw(e,t);return await r.value()}async getSubscribersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getSubscribers.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/subscribers".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>SubscribersResponseFromJSON(e)))}async getSubscribers(e,t){const r=await this.getSubscribersRaw(e,t);return await r.value()}async getSupportedUsersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getSupportedUsers.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit);const n=await this.request({path:"/users/{id}/supporting".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>GetSupportedUsersFromJSON(e)))}async getSupportedUsers(e,t){const r=await this.getSupportedUsersRaw(e,t);return await r.value()}async getSupportersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getSupporters.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit);const n=await this.request({path:"/users/{id}/supporters".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>GetSupportersFromJSON(e)))}async getSupporters(e,t){const r=await this.getSupportersRaw(e,t);return await r.value()}async getTopTrackTagsRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getTopTrackTags.");const r={};void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/tags".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TagsResponseFromJSON(e)))}async getTopTrackTags(e,t){const r=await this.getTopTrackTagsRaw(e,t);return await r.value()}async getTracksByUserRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getTracksByUser.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.sort&&(r.sort=e.sort),void 0!==e.query&&(r.query=e.query),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection),void 0!==e.filterTracks&&(r.filter_tracks=e.filterTracks);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/tracks".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse$1(i,(e=>TracksResponseFromJSON(e)))}async getTracksByUser(e,t){const r=await this.getTracksByUserRaw(e,t);return await r.value()}async getUserRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getUser.");const r=await this.request({path:"/users/{id}".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>UserResponseFromJSON(e)))}async getUser(e,t){const r=await this.getUserRaw(e,t);return await r.value()}async getUserByHandleRaw(e,t){if(null===e.handle||void 0===e.handle)throw new RequiredError$1("handle","Required parameter params.handle was null or undefined when calling getUserByHandle.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/handle/{handle}".replace("{handle}",encodeURIComponent(String(e.handle))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>UserResponseFromJSON(e)))}async getUserByHandle(e,t){const r=await this.getUserByHandleRaw(e,t);return await r.value()}async getUserChallengesRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getUserChallenges.");const r={};void 0!==e.showHistorical&&(r.show_historical=e.showHistorical);const n=await this.request({path:"/users/{id}/challenges".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>GetChallengesFromJSON(e)))}async getUserChallenges(e,t){const r=await this.getUserChallengesRaw(e,t);return await r.value()}async getUserCoinRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getUserCoin.");if(null===e.mint||void 0===e.mint)throw new RequiredError$1("mint","Required parameter params.mint was null or undefined when calling getUserCoin.");const r=await this.request({path:"/users/{id}/coins/{mint}".replace("{id}",encodeURIComponent(String(e.id))).replace("{mint}",encodeURIComponent(String(e.mint))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>UserCoinResponseFromJSON(e)))}async getUserCoin(e,t){const r=await this.getUserCoinRaw(e,t);return await r.value()}async getUserCoinsRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getUserCoins.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit);const n=await this.request({path:"/users/{id}/coins".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>UserCoinsResponseFromJSON(e)))}async getUserCoins(e,t){const r=await this.getUserCoinsRaw(e,t);return await r.value()}async getUserCollectiblesRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getUserCollectibles.");const r=await this.request({path:"/users/{id}/collectibles".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>CollectiblesResponseFromJSON(e)))}async getUserCollectibles(e,t){const r=await this.getUserCollectiblesRaw(e,t);return await r.value()}async getUserCommentsRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getUserComments.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/comments".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>UserCommentsResponseFromJSON(e)))}async getUserComments(e,t){const r=await this.getUserCommentsRaw(e,t);return await r.value()}async getUserEmailKeyRaw(e,t){if(null===e.receivingUserId||void 0===e.receivingUserId)throw new RequiredError$1("receivingUserId","Required parameter params.receivingUserId was null or undefined when calling getUserEmailKey.");if(null===e.grantorUserId||void 0===e.grantorUserId)throw new RequiredError$1("grantorUserId","Required parameter params.grantorUserId was null or undefined when calling getUserEmailKey.");const r=await this.request({path:"/users/{receiving_user_id}/emails/{grantor_user_id}/key".replace("{receiving_user_id}",encodeURIComponent(String(e.receivingUserId))).replace("{grantor_user_id}",encodeURIComponent(String(e.grantorUserId))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse$1(r,(e=>EmailAccessResponseFromJSON(e)))}async getUserEmailKey(e,t){const r=await this.getUserEmailKeyRaw(e,t);return await r.value()}async getUserIDsByAddressesRaw(e,t){if(null===e.address||void 0===e.address)throw new RequiredError$1("address","Required parameter params.address was null or undefined when calling getUserIDsByAddresses.");const r={};e.address&&(r.address=e.address);const n=await this.request({path:"/users/address",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>UserIdsAddressesResponseFromJSON(e)))}async getUserIDsByAddresses(e,t){const r=await this.getUserIDsByAddressesRaw(e,t);return await r.value()}async getUserMonthlyTrackListensRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getUserMonthlyTrackListens.");if(null===e.startTime||void 0===e.startTime)throw new RequiredError$1("startTime","Required parameter params.startTime was null or undefined when calling getUserMonthlyTrackListens.");if(null===e.endTime||void 0===e.endTime)throw new RequiredError$1("endTime","Required parameter params.endTime was null or undefined when calling getUserMonthlyTrackListens.");const r={};void 0!==e.startTime&&(r.start_time=e.startTime),void 0!==e.endTime&&(r.end_time=e.endTime);const n=await this.request({path:"/users/{id}/listen_counts_monthly".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>UserTrackListenCountsResponseFromJSON(e)))}async getUserMonthlyTrackListens(e,t){const r=await this.getUserMonthlyTrackListensRaw(e,t);return await r.value()}async getUserRecommendedTracksRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getUserRecommendedTracks.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.timeRange&&(r.time_range=e.timeRange);const n=await this.request({path:"/users/{id}/recommended-tracks".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>TracksResponseFromJSON(e)))}async getUserRecommendedTracks(e,t){const r=await this.getUserRecommendedTracksRaw(e,t);return await r.value()}async getUserTracksRemixedRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getUserTracksRemixed.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/tracks/remixed".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>UserTracksRemixedResponseFromJSON(e)))}async getUserTracksRemixed(e,t){const r=await this.getUserTracksRemixedRaw(e,t);return await r.value()}async getUsersTrackHistoryRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling getUsersTrackHistory.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.query&&(r.query=e.query),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection),void 0!==e.userId&&(r.user_id=e.userId);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/history/tracks".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse$1(i,(e=>HistoryResponseFromJSON(e)))}async getUsersTrackHistory(e,t){const r=await this.getUsersTrackHistoryRaw(e,t);return await r.value()}async searchUsersRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.query&&(r.query=e.query),e.genre&&(r.genre=e.genre),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.isVerified&&(r.is_verified=e.isVerified);const n=await this.request({path:"/users/search",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>UserSearchFromJSON(e)))}async searchUsers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.searchUsersRaw(e,t);return await r.value()}async verifyIDTokenRaw(e,t){if(null===e.token||void 0===e.token)throw new RequiredError$1("token","Required parameter params.token was null or undefined when calling verifyIDToken.");const r={};void 0!==e.token&&(r.token=e.token);const n=await this.request({path:"/users/verify_token",method:"GET",headers:{},query:r},t);return new JSONApiResponse$1(n,(e=>VerifyTokenFromJSON(e)))}async verifyIDToken(e,t){const r=await this.verifyIDTokenRaw(e,t);return await r.value()}}class ResolveApi extends BaseAPI$1{async resolveRaw(e){if(null===e.url||void 0===e.url)throw new RequiredError$1("url","Required parameter params.url was null or undefined when calling resolve.");const t={};void 0!==e.url&&(t.url=e.url);const r=await this.request({path:"/resolve",method:"GET",headers:{},query:t});return new JSONApiResponse$1(r,(e=>{var t;const n=null!==(t=null==e?void 0:e.data)&&void 0!==t?t:{};if(instanceOfTrack(TrackFromJSONTyped(n)))return TrackResponseFromJSON(e);if(Array.isArray(n)&&n.length>0&&instanceOfPlaylist(PlaylistFromJSONTyped(n[0])))return PlaylistResponseFromJSON(e);if(instanceOfUser(UserFromJSONTyped(n)))return UserResponseFromJSON(e);throw new ResponseError$1(r,"Invalid response type")}))}async resolve(e){return await(await this.resolveRaw(e)).value()}static instanceOfTrackResponse(e){return!!e.data&&instanceOfTrack(e.data)}static instanceOfPlaylistResponse(e){return!!e.data&&Array.isArray(e.data)&&!!e.data[0]&&instanceOfPlaylist(e.data[0])}static instanceOfUserResponse(e){return!!e.data&&instanceOfUser(e.data)}}const parseFixedDecimalString=(e,t)=>{var r;let[n,i]=e.split(".");return i=null!==(r=i)&&void 0!==r?r:"",void 0!==t&&(i=i.padEnd(t,"0").substring(0,t)),{value:BigInt(`${n}${i}`),decimalPlaces:null!=t?t:i.length}},getDefaultFormatOptions=e=>({useGrouping:!0,minimumFractionDigits:0,maximumFractionDigits:e.decimalPlaces,roundingMode:"trunc",trailingZeroDisplay:"auto"});class FixedDecimal{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(_defineProperty$3(this,"value",void 0),_defineProperty$3(this,"decimalPlaces",void 0),_defineProperty$3(this,"_defaultFormatOptions",void 0),typeof e){case"number":{if(!Number.isFinite(e))throw new Error("Number must be finite");if(e.toString()===e.toExponential())throw new Error("Number must not be in scientific notation");const r=parseFixedDecimalString(e.toString(),t);this.value=r.value,this.decimalPlaces=r.decimalPlaces;break}case"string":{const r=parseFixedDecimalString(e,t);this.value=r.value,this.decimalPlaces=r.decimalPlaces;break}case"object":if(e instanceof FixedDecimal){const r=parseFixedDecimalString(e.toString(),t);this.value=r.value,this.decimalPlaces=r.decimalPlaces}else{if(!("value"in e))throw new Error("Invalid object type for FixedDecimal constructor");this.value=e.value,this.decimalPlaces=e.decimalPlaces}break;default:this.value=e,this.decimalPlaces=null!=t?t:0}this._defaultFormatOptions={...getDefaultFormatOptions(this),...r}}ceil(e){const t=this.decimalPlaces-(null!=e?e:0);return this._ceil(t)}_ceil(e){if(e<0)throw new RangeError("Digits must be non-negative");const t=BigInt(10**e),r=this.value%t>0?BigInt(1):BigInt(0);return new FixedDecimal({value:(this.value/t+r)*t,decimalPlaces:this.decimalPlaces})}floor(e){const t=this.decimalPlaces-(null!=e?e:0);return this._floor(t)}_floor(e){if(e<0)throw new RangeError("Digits must be non-negative");const t=BigInt(10**e);return this.value<0&&this.value%t!==BigInt(0)?new FixedDecimal({value:this.value/t*t-t,decimalPlaces:this.decimalPlaces}):new FixedDecimal({value:this.value/t*t,decimalPlaces:this.decimalPlaces})}trunc(e){const t=this.decimalPlaces-(null!=e?e:0);return this._trunc(t)}_trunc(e){if(e<0)throw new RangeError("Digits must be non-negative");const t=BigInt(10**e);return new FixedDecimal({value:this.value/t*t,decimalPlaces:this.decimalPlaces})}round(e){const t=this.decimalPlaces-(null!=e?e:0);return this._round(t)}_round(e){if(e<0)throw new RangeError("Digits must be non-negative");const t=this.value>0?BigInt(1):BigInt(-1),r=BigInt(10**(e-1));let n=this.value/r;return n+=t*BigInt(5),n/=BigInt(10),new FixedDecimal({value:n*r*BigInt(10),decimalPlaces:this.decimalPlaces})}expand(e){const t=this.decimalPlaces-(null!=e?e:0);return this._expand(t)}_expand(e){if(e<0)throw new RangeError("Digits must be non-negative");const t=BigInt(10**e);if(this.value%t===BigInt(0))return this;const r=this.value>0?BigInt(1):BigInt(-1);return new FixedDecimal({value:this.value/t*t+t*r,decimalPlaces:this.decimalPlaces})}toPrecision(e){const t=this.value<0?1:0,r=this.value.toString().length-e-t,n=this.decimalPlaces>0,i=!n&&r<0,a=n||i?1:0;return`${this._trunc(Math.max(r,0)).toString()}${i?".":""}`.padEnd(e+a+t,"0")}toFixed(e){const t=null!=e?e:0;if(t<0)throw new RangeError("decimalPlaces must be non-negative");const r=t>this.decimalPlaces?this:this.round(t),[n,i]=r.toString().split("."),a=(null!=i?i:"").padEnd(t+1,"0").substring(0,t);return t>0?`${n}.${a}`:n}toString(){const e=this.value.toString().replace("-","").padStart(this.decimalPlaces+1,"0");return`${this.value<0?"-":""}${this.decimalPlaces>0?`${e.substring(0,e.length-this.decimalPlaces)}.${e.substring(e.length-this.decimalPlaces)}`:e}`}toLocaleString(e,t){var r;const n={...this._defaultFormatOptions,...t};let i="";switch(n.roundingMode){case"ceil":i=this.ceil(n.maximumFractionDigits).toString();break;case"floor":i=this.floor(n.maximumFractionDigits).toString();break;case"trunc":i=this.trunc(n.maximumFractionDigits).toString();break;case"halfExpand":i=this.round(n.maximumFractionDigits).toString();break;case"expand":i=this.expand(n.maximumFractionDigits).toString()}let[a,o]=i.split(".");o=(null!==(r=o)&&void 0!==r?r:"").replace(/0+$/,""),void 0!==n.minimumFractionDigits&&("stripIfInteger"===n.trailingZeroDisplay&&BigInt(o)===BigInt(0)||(o=o.padEnd(n.minimumFractionDigits,"0")));const s=BigInt(a.replace("-",""));a=s.toLocaleString(e,{...n,minimumFractionDigits:0,maximumFractionDigits:0});const u=Number(0).toLocaleString(e,{minimumFractionDigits:1,maximumFractionDigits:1})[1];return(this.value<0?"-":"")+(o.length>0?`${a}${u}${o}`:a)}toShorthand(){if(this.value===BigInt(0))return"0";const e=this.value>0?BigInt(1):BigInt(-1),t=BigInt(10**this.decimalPlaces),r=this.value/t;if(r*e>=1e4)return r/BigInt(1e3)+"K";if(this.value%t===BigInt(0))return r.toString();{const e=this.value.toString().padStart(this.decimalPlaces,"0"),t=e.length-this.decimalPlaces,n=e.substring(t,t+2);return"00"===n?r.toString():`${r}.${n}`}}}const createTokenConstructor=(e,t)=>r=>new FixedDecimal(r,e,t),wAUDIO=createTokenConstructor(8),USDC=createTokenConstructor(6,{style:"currency",currency:"USD",currencyDisplay:"narrowSymbol",minimumFractionDigits:2,maximumFractionDigits:2});class ParseRequestError extends Error{constructor(e,t){super(`'${e}' => ${t.message}`),_defineProperty$3(this,"method",void 0),_defineProperty$3(this,"innerError",void 0),_defineProperty$3(this,"name","ParseRequestError"),this.method=e,this.innerError=t}}const parseParams=(e,t)=>async r=>{const n=await t.safeParseAsync(r);if(!n.success)throw new ParseRequestError(e,n.error);return n.data},prepareSplits=async e=>{let{splits:t,extraAmount:r,claimableTokensClient:n,logger:i}=e;const a=t.filter((e=>!!e.userId)),o=a.length,s=t.filter((e=>!e.userId));i.debug(`Splitting the extra ${r} between ${o} user(s)...`);let u=a.map(((e,t)=>{const n=r/BigInt(o-t);return r=USDC(r-n).value,{...e,amount:BigInt(e.amount)+n}}));return u=u.concat(s.map((e=>({...e,amount:BigInt(e.amount)})))),r>0&&i.debug("Calculated splits after extra amount:",u),u=await Promise.all(u.map((async e=>{if(!e.payoutWallet&&e.ethWallet){i.debug("Deriving user bank for user...",{userId:e.userId});const{userBank:t,didExist:r}=await n.getOrCreateUserBank({ethWallet:e.ethWallet,mint:"USDC"});r||i.debug("Created user bank",{userId:e.userId,userBank:t.toBase58()}),e.payoutWallet=t.toBase58()}return e}))),u.map((e=>({wallet:e.payoutWallet,amount:e.amount})))};var commonjsGlobal$1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getAugmentedNamespace(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}var lodash={exports:{}},module,exports;module=lodash,exports=lodash.exports,function(){var e,t="Expected a function",r="__lodash_hash_undefined__",n="__lodash_placeholder__",i=16,a=32,o=64,s=128,u=256,c=1/0,d=9007199254740991,l=NaN,p=4294967295,h=[["ary",s],["bind",1],["bindKey",2],["curry",8],["curryRight",i],["flip",512],["partial",a],["partialRight",o],["rearg",u]],f="[object Arguments]",m="[object Array]",y="[object Boolean]",g="[object Date]",b="[object Error]",v="[object Function]",w="[object GeneratorFunction]",_="[object Map]",S="[object Number]",E="[object Object]",A="[object Promise]",T="[object RegExp]",I="[object Set]",$="[object String]",C="[object Symbol]",R="[object WeakMap]",k="[object ArrayBuffer]",x="[object DataView]",N="[object Float32Array]",O="[object Float64Array]",P="[object Int8Array]",F="[object Int16Array]",B="[object Int32Array]",D="[object Uint8Array]",M="[object Uint8ClampedArray]",L="[object Uint16Array]",U="[object Uint32Array]",z=/\b__p \+= '';/g,J=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,j=/[&<>"']/g,K=RegExp(q.source),G=RegExp(j.source),W=/<%-([\s\S]+?)%>/g,V=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ee=/[\\^$.*+?()[\]{}|]/g,te=RegExp(ee.source),re=/^\s+/,ne=/\s/,ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ae=/\{\n\/\* \[wrapped with (.+)\] \*/,oe=/,? & /,se=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ue=/[()=,{}\[\]\/\s]/,ce=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,le=/\w*$/,pe=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,fe=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,ge=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,ve=/['\n\r\u2028\u2029\\]/g,we="\\ud800-\\udfff",_e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Se="\\u2700-\\u27bf",Ee="a-z\\xdf-\\xf6\\xf8-\\xff",Ae="A-Z\\xc0-\\xd6\\xd8-\\xde",Te="\\ufe0e\\ufe0f",Ie="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$e="[']",Ce="["+we+"]",Re="["+Ie+"]",ke="["+_e+"]",xe="\\d+",Ne="["+Se+"]",Oe="["+Ee+"]",Pe="[^"+we+Ie+xe+Se+Ee+Ae+"]",Fe="\\ud83c[\\udffb-\\udfff]",Be="[^"+we+"]",De="(?:\\ud83c[\\udde6-\\uddff]){2}",Me="[\\ud800-\\udbff][\\udc00-\\udfff]",Le="["+Ae+"]",Ue="\\u200d",ze="(?:"+Oe+"|"+Pe+")",Je="(?:"+Le+"|"+Pe+")",He="(?:['](?:d|ll|m|re|s|t|ve))?",qe="(?:['](?:D|LL|M|RE|S|T|VE))?",je="(?:"+ke+"|"+Fe+")?",Ke="["+Te+"]?",Ge=Ke+je+"(?:"+Ue+"(?:"+[Be,De,Me].join("|")+")"+Ke+je+")*",We="(?:"+[Ne,De,Me].join("|")+")"+Ge,Ve="(?:"+[Be+ke+"?",ke,De,Me,Ce].join("|")+")",Ze=RegExp($e,"g"),Ye=RegExp(ke,"g"),Xe=RegExp(Fe+"(?="+Fe+")|"+Ve+Ge,"g"),Qe=RegExp([Le+"?"+Oe+"+"+He+"(?="+[Re,Le,"$"].join("|")+")",Je+"+"+qe+"(?="+[Re,Le+ze,"$"].join("|")+")",Le+"?"+ze+"+"+He,Le+"+"+qe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xe,We].join("|"),"g"),et=RegExp("["+Ue+we+_e+Te+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nt=-1,it={};it[N]=it[O]=it[P]=it[F]=it[B]=it[D]=it[M]=it[L]=it[U]=!0,it[f]=it[m]=it[k]=it[y]=it[x]=it[g]=it[b]=it[v]=it[_]=it[S]=it[E]=it[T]=it[I]=it[$]=it[R]=!1;var at={};at[f]=at[m]=at[k]=at[x]=at[y]=at[g]=at[N]=at[O]=at[P]=at[F]=at[B]=at[_]=at[S]=at[E]=at[T]=at[I]=at[$]=at[C]=at[D]=at[M]=at[L]=at[U]=!0,at[b]=at[v]=at[R]=!1;var ot={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},st=parseFloat,ut=parseInt,ct="object"==typeof commonjsGlobal$1&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1,dt="object"==typeof self&&self&&self.Object===Object&&self,lt=ct||dt||Function("return this")(),pt=exports&&!exports.nodeType&&exports,ht=pt&&module&&!module.nodeType&&module,ft=ht&&ht.exports===pt,mt=ft&&ct.process,yt=function(){try{var e=ht&&ht.require&&ht.require("util").types;return e||mt&&mt.binding&&mt.binding("util")}catch(e){}}(),gt=yt&&yt.isArrayBuffer,bt=yt&&yt.isDate,vt=yt&&yt.isMap,wt=yt&&yt.isRegExp,_t=yt&&yt.isSet,St=yt&&yt.isTypedArray;function Et(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function At(e,t,r,n){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(n,o,r(o),e)}return n}function Tt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function It(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function $t(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Ct(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}function Rt(e,t){return!(null==e||!e.length)&&Lt(e,t,0)>-1}function kt(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function xt(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Nt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Ot(e,t,r,n){var i=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}function Pt(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function Ft(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Bt=Ht("length");function Dt(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function Mt(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function Lt(e,t,r){return t==t?function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):Mt(e,zt,r)}function Ut(e,t,r,n){for(var i=r-1,a=e.length;++i<a;)if(n(e[i],t))return i;return-1}function zt(e){return e!=e}function Jt(e,t){var r=null==e?0:e.length;return r?Kt(e,t)/r:l}function Ht(t){return function(r){return null==r?e:r[t]}}function qt(t){return function(r){return null==t?e:t[r]}}function jt(e,t,r,n,i){return i(e,(function(e,i,a){r=n?(n=!1,e):t(r,e,i,a)})),r}function Kt(t,r){for(var n,i=-1,a=t.length;++i<a;){var o=r(t[i]);o!==e&&(n=n===e?o:n+o)}return n}function Gt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Wt(e){return e?e.slice(0,lr(e)+1).replace(re,""):e}function Vt(e){return function(t){return e(t)}}function Zt(e,t){return xt(t,(function(t){return e[t]}))}function Yt(e,t){return e.has(t)}function Xt(e,t){for(var r=-1,n=e.length;++r<n&&Lt(t,e[r],0)>-1;);return r}function Qt(e,t){for(var r=e.length;r--&&Lt(t,e[r],0)>-1;);return r}var er=qt({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),tr=qt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function rr(e){return"\\"+ot[e]}function nr(e){return et.test(e)}function ir(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function ar(e,t){return function(r){return e(t(r))}}function or(e,t){for(var r=-1,i=e.length,a=0,o=[];++r<i;){var s=e[r];s!==t&&s!==n||(e[r]=n,o[a++]=r)}return o}function sr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function ur(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}function cr(e){return nr(e)?function(e){for(var t=Xe.lastIndex=0;Xe.test(e);)++t;return t}(e):Bt(e)}function dr(e){return nr(e)?function(e){return e.match(Xe)||[]}(e):function(e){return e.split("")}(e)}function lr(e){for(var t=e.length;t--&&ne.test(e.charAt(t)););return t}var pr=qt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hr=function ne(we){var _e=(we=null==we?lt:hr.defaults(lt.Object(),we,hr.pick(lt,rt))).Array,Se=we.Date,Ee=we.Error,Ae=we.Function,Te=we.Math,Ie=we.Object,$e=we.RegExp,Ce=we.String,Re=we.TypeError,ke=_e.prototype,xe=Ae.prototype,Ne=Ie.prototype,Oe=we["__core-js_shared__"],Pe=xe.toString,Fe=Ne.hasOwnProperty,Be=0,De=function(){var e=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Me=Ne.toString,Le=Pe.call(Ie),Ue=lt._,ze=$e("^"+Pe.call(Fe).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Je=ft?we.Buffer:e,He=we.Symbol,qe=we.Uint8Array,je=Je?Je.allocUnsafe:e,Ke=ar(Ie.getPrototypeOf,Ie),Ge=Ie.create,We=Ne.propertyIsEnumerable,Ve=ke.splice,Xe=He?He.isConcatSpreadable:e,et=He?He.iterator:e,ot=He?He.toStringTag:e,ct=function(){try{var e=la(Ie,"defineProperty");return e({},"",{}),e}catch(e){}}(),dt=we.clearTimeout!==lt.clearTimeout&&we.clearTimeout,pt=Se&&Se.now!==lt.Date.now&&Se.now,ht=we.setTimeout!==lt.setTimeout&&we.setTimeout,mt=Te.ceil,yt=Te.floor,Bt=Ie.getOwnPropertySymbols,qt=Je?Je.isBuffer:e,fr=we.isFinite,mr=ke.join,yr=ar(Ie.keys,Ie),gr=Te.max,br=Te.min,vr=Se.now,wr=we.parseInt,_r=Te.random,Sr=ke.reverse,Er=la(we,"DataView"),Ar=la(we,"Map"),Tr=la(we,"Promise"),Ir=la(we,"Set"),$r=la(we,"WeakMap"),Cr=la(Ie,"create"),Rr=$r&&new $r,kr={},xr=Da(Er),Nr=Da(Ar),Or=Da(Tr),Pr=Da(Ir),Fr=Da($r),Br=He?He.prototype:e,Dr=Br?Br.valueOf:e,Mr=Br?Br.toString:e;function Lr(e){if(ts(e)&&!qo(e)&&!(e instanceof Hr)){if(e instanceof Jr)return e;if(Fe.call(e,"__wrapped__"))return Ma(e)}return new Jr(e)}var Ur=function(){function t(){}return function(r){if(!es(r))return{};if(Ge)return Ge(r);t.prototype=r;var n=new t;return t.prototype=e,n}}();function zr(){}function Jr(t,r){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=e}function Hr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function qr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function jr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Kr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Gr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Kr;++t<r;)this.add(e[t])}function Wr(e){var t=this.__data__=new jr(e);this.size=t.size}function Vr(e,t){var r=qo(e),n=!r&&Ho(e),i=!r&&!n&&Wo(e),a=!r&&!n&&!i&&cs(e),o=r||n||i||a,s=o?Gt(e.length,Ce):[],u=s.length;for(var c in e)!t&&!Fe.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ba(c,u))||s.push(c);return s}function Zr(t){var r=t.length;return r?t[Wn(0,r-1)]:e}function Yr(e,t){return Pa(Ri(e),sn(t,0,e.length))}function Xr(e){return Pa(Ri(e))}function Qr(t,r,n){(n!==e&&!Uo(t[r],n)||n===e&&!(r in t))&&an(t,r,n)}function en(t,r,n){var i=t[r];Fe.call(t,r)&&Uo(i,n)&&(n!==e||r in t)||an(t,r,n)}function tn(e,t){for(var r=e.length;r--;)if(Uo(e[r][0],t))return r;return-1}function rn(e,t,r,n){return pn(e,(function(e,i,a){t(n,e,r(e),a)})),n}function nn(e,t){return e&&ki(t,xs(t),e)}function an(e,t,r){"__proto__"==t&&ct?ct(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function on(t,r){for(var n=-1,i=r.length,a=_e(i),o=null==t;++n<i;)a[n]=o?e:Is(t,r[n]);return a}function sn(t,r,n){return t==t&&(n!==e&&(t=t<=n?t:n),r!==e&&(t=t>=r?t:r)),t}function un(t,r,n,i,a,o){var s,u=1&r,c=2&r,d=4&r;if(n&&(s=a?n(t,i,a,o):n(t)),s!==e)return s;if(!es(t))return t;var l=qo(t);if(l){if(s=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Fe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(t),!u)return Ri(t,s)}else{var p=fa(t),h=p==v||p==w;if(Wo(t))return Ei(t,u);if(p==E||p==f||h&&!a){if(s=c||h?{}:ya(t),!u)return c?function(e,t){return ki(e,ha(e),t)}(t,function(e,t){return e&&ki(t,Ns(t),e)}(s,t)):function(e,t){return ki(e,pa(e),t)}(t,nn(s,t))}else{if(!at[p])return a?t:{};s=function(e,t,r){var n,i=e.constructor;switch(t){case k:return Ai(e);case y:case g:return new i(+e);case x:return function(e,t){var r=t?Ai(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case N:case O:case P:case F:case B:case D:case M:case L:case U:return Ti(e,r);case _:return new i;case S:case $:return new i(e);case T:return function(e){var t=new e.constructor(e.source,le.exec(e));return t.lastIndex=e.lastIndex,t}(e);case I:return new i;case C:return n=e,Dr?Ie(Dr.call(n)):{}}}(t,p,u)}}o||(o=new Wr);var m=o.get(t);if(m)return m;o.set(t,s),os(t)?t.forEach((function(e){s.add(un(e,r,n,e,t,o))})):rs(t)&&t.forEach((function(e,i){s.set(i,un(e,r,n,i,t,o))}));var b=l?e:(d?c?ia:na:c?Ns:xs)(t);return Tt(b||t,(function(e,i){b&&(e=t[i=e]),en(s,i,un(e,r,n,i,t,o))})),s}function cn(t,r,n){var i=n.length;if(null==t)return!i;for(t=Ie(t);i--;){var a=n[i],o=r[a],s=t[a];if(s===e&&!(a in t)||!o(s))return!1}return!0}function dn(r,n,i){if("function"!=typeof r)throw new Re(t);return ka((function(){r.apply(e,i)}),n)}function ln(e,t,r,n){var i=-1,a=Rt,o=!0,s=e.length,u=[],c=t.length;if(!s)return u;r&&(t=xt(t,Vt(r))),n?(a=kt,o=!1):t.length>=200&&(a=Yt,o=!1,t=new Gr(t));e:for(;++i<s;){var d=e[i],l=null==r?d:r(d);if(d=n||0!==d?d:0,o&&l==l){for(var p=c;p--;)if(t[p]===l)continue e;u.push(d)}else a(t,l,n)||u.push(d)}return u}Lr.templateSettings={escape:W,evaluate:V,interpolate:Z,variable:"",imports:{_:Lr}},Lr.prototype=zr.prototype,Lr.prototype.constructor=Lr,Jr.prototype=Ur(zr.prototype),Jr.prototype.constructor=Jr,Hr.prototype=Ur(zr.prototype),Hr.prototype.constructor=Hr,qr.prototype.clear=function(){this.__data__=Cr?Cr(null):{},this.size=0},qr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},qr.prototype.get=function(t){var n=this.__data__;if(Cr){var i=n[t];return i===r?e:i}return Fe.call(n,t)?n[t]:e},qr.prototype.has=function(t){var r=this.__data__;return Cr?r[t]!==e:Fe.call(r,t)},qr.prototype.set=function(t,n){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Cr&&n===e?r:n,this},jr.prototype.clear=function(){this.__data__=[],this.size=0},jr.prototype.delete=function(e){var t=this.__data__,r=tn(t,e);return!(r<0||(r==t.length-1?t.pop():Ve.call(t,r,1),--this.size,0))},jr.prototype.get=function(t){var r=this.__data__,n=tn(r,t);return n<0?e:r[n][1]},jr.prototype.has=function(e){return tn(this.__data__,e)>-1},jr.prototype.set=function(e,t){var r=this.__data__,n=tn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Kr.prototype.clear=function(){this.size=0,this.__data__={hash:new qr,map:new(Ar||jr),string:new qr}},Kr.prototype.delete=function(e){var t=ca(this,e).delete(e);return this.size-=t?1:0,t},Kr.prototype.get=function(e){return ca(this,e).get(e)},Kr.prototype.has=function(e){return ca(this,e).has(e)},Kr.prototype.set=function(e,t){var r=ca(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Gr.prototype.add=Gr.prototype.push=function(e){return this.__data__.set(e,r),this},Gr.prototype.has=function(e){return this.__data__.has(e)},Wr.prototype.clear=function(){this.__data__=new jr,this.size=0},Wr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Wr.prototype.get=function(e){return this.__data__.get(e)},Wr.prototype.has=function(e){return this.__data__.has(e)},Wr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof jr){var n=r.__data__;if(!Ar||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Kr(n)}return r.set(e,t),this.size=r.size,this};var pn=Oi(wn),hn=Oi(_n,!0);function fn(e,t){var r=!0;return pn(e,(function(e,n,i){return r=!!t(e,n,i)})),r}function mn(t,r,n){for(var i=-1,a=t.length;++i<a;){var o=t[i],s=r(o);if(null!=s&&(u===e?s==s&&!us(s):n(s,u)))var u=s,c=o}return c}function yn(e,t){var r=[];return pn(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function gn(e,t,r,n,i){var a=-1,o=e.length;for(r||(r=ga),i||(i=[]);++a<o;){var s=e[a];t>0&&r(s)?t>1?gn(s,t-1,r,n,i):Nt(i,s):n||(i[i.length]=s)}return i}var bn=Pi(),vn=Pi(!0);function wn(e,t){return e&&bn(e,t,xs)}function _n(e,t){return e&&vn(e,t,xs)}function Sn(e,t){return Ct(t,(function(t){return Yo(e[t])}))}function En(t,r){for(var n=0,i=(r=vi(r,t)).length;null!=t&&n<i;)t=t[Ba(r[n++])];return n&&n==i?t:e}function An(e,t,r){var n=t(e);return qo(e)?n:Nt(n,r(e))}function Tn(t){return null==t?t===e?"[object Undefined]":"[object Null]":ot&&ot in Ie(t)?function(t){var r=Fe.call(t,ot),n=t[ot];try{t[ot]=e;var i=!0}catch(e){}var a=Me.call(t);return i&&(r?t[ot]=n:delete t[ot]),a}(t):function(e){return Me.call(e)}(t)}function In(e,t){return e>t}function $n(e,t){return null!=e&&Fe.call(e,t)}function Cn(e,t){return null!=e&&t in Ie(e)}function Rn(t,r,n){for(var i=n?kt:Rt,a=t[0].length,o=t.length,s=o,u=_e(o),c=1/0,d=[];s--;){var l=t[s];s&&r&&(l=xt(l,Vt(r))),c=br(l.length,c),u[s]=!n&&(r||a>=120&&l.length>=120)?new Gr(s&&l):e}l=t[0];var p=-1,h=u[0];e:for(;++p<a&&d.length<c;){var f=l[p],m=r?r(f):f;if(f=n||0!==f?f:0,!(h?Yt(h,m):i(d,m,n))){for(s=o;--s;){var y=u[s];if(!(y?Yt(y,m):i(t[s],m,n)))continue e}h&&h.push(m),d.push(f)}}return d}function kn(t,r,n){var i=null==(t=$a(t,r=vi(r,t)))?t:t[Ba(Va(r))];return null==i?e:Et(i,t,n)}function xn(e){return ts(e)&&Tn(e)==f}function Nn(t,r,n,i,a){return t===r||(null==t||null==r||!ts(t)&&!ts(r)?t!=t&&r!=r:function(t,r,n,i,a,o){var s=qo(t),u=qo(r),c=s?m:fa(t),d=u?m:fa(r),l=(c=c==f?E:c)==E,p=(d=d==f?E:d)==E,h=c==d;if(h&&Wo(t)){if(!Wo(r))return!1;s=!0,l=!1}if(h&&!l)return o||(o=new Wr),s||cs(t)?ta(t,r,n,i,a,o):function(e,t,r,n,i,a,o){switch(r){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case k:return!(e.byteLength!=t.byteLength||!a(new qe(e),new qe(t)));case y:case g:case S:return Uo(+e,+t);case b:return e.name==t.name&&e.message==t.message;case T:case $:return e==t+"";case _:var s=ir;case I:var u=1&n;if(s||(s=sr),e.size!=t.size&&!u)return!1;var c=o.get(e);if(c)return c==t;n|=2,o.set(e,t);var d=ta(s(e),s(t),n,i,a,o);return o.delete(e),d;case C:if(Dr)return Dr.call(e)==Dr.call(t)}return!1}(t,r,c,n,i,a,o);if(!(1&n)){var v=l&&Fe.call(t,"__wrapped__"),w=p&&Fe.call(r,"__wrapped__");if(v||w){var A=v?t.value():t,R=w?r.value():r;return o||(o=new Wr),a(A,R,n,i,o)}}return!!h&&(o||(o=new Wr),function(t,r,n,i,a,o){var s=1&n,u=na(t),c=u.length,d=na(r),l=d.length;if(c!=l&&!s)return!1;for(var p=c;p--;){var h=u[p];if(!(s?h in r:Fe.call(r,h)))return!1}var f=o.get(t),m=o.get(r);if(f&&m)return f==r&&m==t;var y=!0;o.set(t,r),o.set(r,t);for(var g=s;++p<c;){var b=t[h=u[p]],v=r[h];if(i)var w=s?i(v,b,h,r,t,o):i(b,v,h,t,r,o);if(!(w===e?b===v||a(b,v,n,i,o):w)){y=!1;break}g||(g="constructor"==h)}if(y&&!g){var _=t.constructor,S=r.constructor;_==S||!("constructor"in t)||!("constructor"in r)||"function"==typeof _&&_ instanceof _&&"function"==typeof S&&S instanceof S||(y=!1)}return o.delete(t),o.delete(r),y}(t,r,n,i,a,o))}(t,r,n,i,Nn,a))}function On(t,r,n,i){var a=n.length,o=a,s=!i;if(null==t)return!o;for(t=Ie(t);a--;){var u=n[a];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++a<o;){var c=(u=n[a])[0],d=t[c],l=u[1];if(s&&u[2]){if(d===e&&!(c in t))return!1}else{var p=new Wr;if(i)var h=i(d,l,c,t,r,p);if(!(h===e?Nn(l,d,3,i,p):h))return!1}}return!0}function Pn(e){return!(!es(e)||(t=e,De&&De in t))&&(Yo(e)?ze:fe).test(Da(e));var t}function Fn(e){return"function"==typeof e?e:null==e?nu:"object"==typeof e?qo(e)?zn(e[0],e[1]):Un(e):pu(e)}function Bn(e){if(!Ea(e))return yr(e);var t=[];for(var r in Ie(e))Fe.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Dn(e){if(!es(e))return function(e){var t=[];if(null!=e)for(var r in Ie(e))t.push(r);return t}(e);var t=Ea(e),r=[];for(var n in e)("constructor"!=n||!t&&Fe.call(e,n))&&r.push(n);return r}function Mn(e,t){return e<t}function Ln(e,t){var r=-1,n=Ko(e)?_e(e.length):[];return pn(e,(function(e,i,a){n[++r]=t(e,i,a)})),n}function Un(e){var t=da(e);return 1==t.length&&t[0][2]?Ta(t[0][0],t[0][1]):function(r){return r===e||On(r,e,t)}}function zn(t,r){return wa(t)&&Aa(r)?Ta(Ba(t),r):function(n){var i=Is(n,t);return i===e&&i===r?$s(n,t):Nn(r,i,3)}}function Jn(t,r,n,i,a){t!==r&&bn(r,(function(o,s){if(a||(a=new Wr),es(o))!function(t,r,n,i,a,o,s){var u=Ca(t,n),c=Ca(r,n),d=s.get(c);if(d)Qr(t,n,d);else{var l=o?o(u,c,n+"",t,r,s):e,p=l===e;if(p){var h=qo(c),f=!h&&Wo(c),m=!h&&!f&&cs(c);l=c,h||f||m?qo(u)?l=u:Go(u)?l=Ri(u):f?(p=!1,l=Ei(c,!0)):m?(p=!1,l=Ti(c,!0)):l=[]:is(c)||Ho(c)?(l=u,Ho(u)?l=gs(u):es(u)&&!Yo(u)||(l=ya(c))):p=!1}p&&(s.set(c,l),a(l,c,i,o,s),s.delete(c)),Qr(t,n,l)}}(t,r,s,n,Jn,i,a);else{var u=i?i(Ca(t,s),o,s+"",t,r,a):e;u===e&&(u=o),Qr(t,s,u)}}),Ns)}function Hn(t,r){var n=t.length;if(n)return ba(r+=r<0?n:0,n)?t[r]:e}function qn(e,t,r){t=t.length?xt(t,(function(e){return qo(e)?function(t){return En(t,1===e.length?e[0]:e)}:e})):[nu];var n=-1;t=xt(t,Vt(ua()));var i=Ln(e,(function(e,r,i){var a=xt(t,(function(t){return t(e)}));return{criteria:a,index:++n,value:e}}));return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(i,(function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,o=i.length,s=r.length;++n<o;){var u=Ii(i[n],a[n]);if(u)return n>=s?u:u*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function jn(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=En(e,o);r(s,o)&&Qn(a,vi(o,e),s)}return a}function Kn(e,t,r,n){var i=n?Ut:Lt,a=-1,o=t.length,s=e;for(e===t&&(t=Ri(t)),r&&(s=xt(e,Vt(r)));++a<o;)for(var u=0,c=t[a],d=r?r(c):c;(u=i(s,d,u,n))>-1;)s!==e&&Ve.call(s,u,1),Ve.call(e,u,1);return e}function Gn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==a){var a=i;ba(i)?Ve.call(e,i,1):li(e,i)}}return e}function Wn(e,t){return e+yt(_r()*(t-e+1))}function Vn(e,t){var r="";if(!e||t<1||t>d)return r;do{t%2&&(r+=e),(t=yt(t/2))&&(e+=e)}while(t);return r}function Zn(e,t){return xa(Ia(e,t,nu),e+"")}function Yn(e){return Zr(Us(e))}function Xn(e,t){var r=Us(e);return Pa(r,sn(t,0,r.length))}function Qn(t,r,n,i){if(!es(t))return t;for(var a=-1,o=(r=vi(r,t)).length,s=o-1,u=t;null!=u&&++a<o;){var c=Ba(r[a]),d=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(a!=s){var l=u[c];(d=i?i(l,c,u):e)===e&&(d=es(l)?l:ba(r[a+1])?[]:{})}en(u,c,d),u=u[c]}return t}var ei=Rr?function(e,t){return Rr.set(e,t),e}:nu,ti=ct?function(e,t){return ct(e,"toString",{configurable:!0,enumerable:!1,value:eu(t),writable:!0})}:nu;function ri(e){return Pa(Us(e))}function ni(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=_e(i);++n<i;)a[n]=e[n+t];return a}function ii(e,t){var r;return pn(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}function ai(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var a=n+i>>>1,o=e[a];null!==o&&!us(o)&&(r?o<=t:o<t)?n=a+1:i=a}return i}return oi(e,t,nu,r)}function oi(t,r,n,i){var a=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(r=n(r))!=r,u=null===r,c=us(r),d=r===e;a<o;){var l=yt((a+o)/2),p=n(t[l]),h=p!==e,f=null===p,m=p==p,y=us(p);if(s)var g=i||m;else g=d?m&&(i||h):u?m&&h&&(i||!f):c?m&&h&&!f&&(i||!y):!f&&!y&&(i?p<=r:p<r);g?a=l+1:o=l}return br(o,4294967294)}function si(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r],s=t?t(o):o;if(!r||!Uo(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function ui(e){return"number"==typeof e?e:us(e)?l:+e}function ci(e){if("string"==typeof e)return e;if(qo(e))return xt(e,ci)+"";if(us(e))return Mr?Mr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function di(e,t,r){var n=-1,i=Rt,a=e.length,o=!0,s=[],u=s;if(r)o=!1,i=kt;else if(a>=200){var c=t?null:Vi(e);if(c)return sr(c);o=!1,i=Yt,u=new Gr}else u=t?[]:s;e:for(;++n<a;){var d=e[n],l=t?t(d):d;if(d=r||0!==d?d:0,o&&l==l){for(var p=u.length;p--;)if(u[p]===l)continue e;t&&u.push(l),s.push(d)}else i(u,l,r)||(u!==s&&u.push(l),s.push(d))}return s}function li(e,t){return null==(e=$a(e,t=vi(t,e)))||delete e[Ba(Va(t))]}function pi(e,t,r,n){return Qn(e,t,r(En(e,t)),n)}function hi(e,t,r,n){for(var i=e.length,a=n?i:-1;(n?a--:++a<i)&&t(e[a],a,e););return r?ni(e,n?0:a,n?a+1:i):ni(e,n?a+1:0,n?i:a)}function fi(e,t){var r=e;return r instanceof Hr&&(r=r.value()),Ot(t,(function(e,t){return t.func.apply(t.thisArg,Nt([e],t.args))}),r)}function mi(e,t,r){var n=e.length;if(n<2)return n?di(e[0]):[];for(var i=-1,a=_e(n);++i<n;)for(var o=e[i],s=-1;++s<n;)s!=i&&(a[i]=ln(a[i]||o,e[s],t,r));return di(gn(a,1),t,r)}function yi(t,r,n){for(var i=-1,a=t.length,o=r.length,s={};++i<a;){var u=i<o?r[i]:e;n(s,t[i],u)}return s}function gi(e){return Go(e)?e:[]}function bi(e){return"function"==typeof e?e:nu}function vi(e,t){return qo(e)?e:wa(e,t)?[e]:Fa(bs(e))}var wi=Zn;function _i(t,r,n){var i=t.length;return n=n===e?i:n,!r&&n>=i?t:ni(t,r,n)}var Si=dt||function(e){return lt.clearTimeout(e)};function Ei(e,t){if(t)return e.slice();var r=e.length,n=je?je(r):new e.constructor(r);return e.copy(n),n}function Ai(e){var t=new e.constructor(e.byteLength);return new qe(t).set(new qe(e)),t}function Ti(e,t){var r=t?Ai(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Ii(t,r){if(t!==r){var n=t!==e,i=null===t,a=t==t,o=us(t),s=r!==e,u=null===r,c=r==r,d=us(r);if(!u&&!d&&!o&&t>r||o&&s&&c&&!u&&!d||i&&s&&c||!n&&c||!a)return 1;if(!i&&!o&&!d&&t<r||d&&n&&a&&!i&&!o||u&&n&&a||!s&&a||!c)return-1}return 0}function $i(e,t,r,n){for(var i=-1,a=e.length,o=r.length,s=-1,u=t.length,c=gr(a-o,0),d=_e(u+c),l=!n;++s<u;)d[s]=t[s];for(;++i<o;)(l||i<a)&&(d[r[i]]=e[i]);for(;c--;)d[s++]=e[i++];return d}function Ci(e,t,r,n){for(var i=-1,a=e.length,o=-1,s=r.length,u=-1,c=t.length,d=gr(a-s,0),l=_e(d+c),p=!n;++i<d;)l[i]=e[i];for(var h=i;++u<c;)l[h+u]=t[u];for(;++o<s;)(p||i<a)&&(l[h+r[o]]=e[i++]);return l}function Ri(e,t){var r=-1,n=e.length;for(t||(t=_e(n));++r<n;)t[r]=e[r];return t}function ki(t,r,n,i){var a=!n;n||(n={});for(var o=-1,s=r.length;++o<s;){var u=r[o],c=i?i(n[u],t[u],u,n,t):e;c===e&&(c=t[u]),a?an(n,u,c):en(n,u,c)}return n}function xi(e,t){return function(r,n){var i=qo(r)?At:rn,a=t?t():{};return i(r,e,ua(n,2),a)}}function Ni(t){return Zn((function(r,n){var i=-1,a=n.length,o=a>1?n[a-1]:e,s=a>2?n[2]:e;for(o=t.length>3&&"function"==typeof o?(a--,o):e,s&&va(n[0],n[1],s)&&(o=a<3?e:o,a=1),r=Ie(r);++i<a;){var u=n[i];u&&t(r,u,i,o)}return r}))}function Oi(e,t){return function(r,n){if(null==r)return r;if(!Ko(r))return e(r,n);for(var i=r.length,a=t?i:-1,o=Ie(r);(t?a--:++a<i)&&!1!==n(o[a],a,o););return r}}function Pi(e){return function(t,r,n){for(var i=-1,a=Ie(t),o=n(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===r(a[u],u,a))break}return t}}function Fi(t){return function(r){var n=nr(r=bs(r))?dr(r):e,i=n?n[0]:r.charAt(0),a=n?_i(n,1).join(""):r.slice(1);return i[t]()+a}}function Bi(e){return function(t){return Ot(Ys(Hs(t).replace(Ze,"")),e,"")}}function Di(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Ur(e.prototype),n=e.apply(r,t);return es(n)?n:r}}function Mi(t){return function(r,n,i){var a=Ie(r);if(!Ko(r)){var o=ua(n,3);r=xs(r),n=function(e){return o(a[e],e,a)}}var s=t(r,n,i);return s>-1?a[o?r[s]:s]:e}}function Li(r){return ra((function(n){var i=n.length,a=i,o=Jr.prototype.thru;for(r&&n.reverse();a--;){var s=n[a];if("function"!=typeof s)throw new Re(t);if(o&&!u&&"wrapper"==oa(s))var u=new Jr([],!0)}for(a=u?a:i;++a<i;){var c=oa(s=n[a]),d="wrapper"==c?aa(s):e;u=d&&_a(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?u[oa(d[0])].apply(u,d[3]):1==s.length&&_a(s)?u[c]():u.thru(s)}return function(){var e=arguments,t=e[0];if(u&&1==e.length&&qo(t))return u.plant(t).value();for(var r=0,a=i?n[r].apply(this,e):t;++r<i;)a=n[r].call(this,a);return a}}))}function Ui(t,r,n,i,a,o,u,c,d,l){var p=r&s,h=1&r,f=2&r,m=24&r,y=512&r,g=f?e:Di(t);return function s(){for(var b=arguments.length,v=_e(b),w=b;w--;)v[w]=arguments[w];if(m)var _=sa(s),S=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(v,_);if(i&&(v=$i(v,i,a,m)),o&&(v=Ci(v,o,u,m)),b-=S,m&&b<l){var E=or(v,_);return Gi(t,r,Ui,s.placeholder,n,v,E,c,d,l-b)}var A=h?n:this,T=f?A[t]:t;return b=v.length,c?v=function(t,r){for(var n=t.length,i=br(r.length,n),a=Ri(t);i--;){var o=r[i];t[i]=ba(o,n)?a[o]:e}return t}(v,c):y&&b>1&&v.reverse(),p&&d<b&&(v.length=d),this&&this!==lt&&this instanceof s&&(T=g||Di(T)),T.apply(A,v)}}function zi(e,t){return function(r,n){return function(e,t,r,n){return wn(e,(function(e,i,a){t(n,r(e),i,a)})),n}(r,e,t(n),{})}}function Ji(t,r){return function(n,i){var a;if(n===e&&i===e)return r;if(n!==e&&(a=n),i!==e){if(a===e)return i;"string"==typeof n||"string"==typeof i?(n=ci(n),i=ci(i)):(n=ui(n),i=ui(i)),a=t(n,i)}return a}}function Hi(e){return ra((function(t){return t=xt(t,Vt(ua())),Zn((function(r){var n=this;return e(t,(function(e){return Et(e,n,r)}))}))}))}function qi(t,r){var n=(r=r===e?" ":ci(r)).length;if(n<2)return n?Vn(r,t):r;var i=Vn(r,mt(t/cr(r)));return nr(r)?_i(dr(i),0,t).join(""):i.slice(0,t)}function ji(t){return function(r,n,i){return i&&"number"!=typeof i&&va(r,n,i)&&(n=i=e),r=hs(r),n===e?(n=r,r=0):n=hs(n),function(e,t,r,n){for(var i=-1,a=gr(mt((t-e)/(r||1)),0),o=_e(a);a--;)o[n?a:++i]=e,e+=r;return o}(r,n,i=i===e?r<n?1:-1:hs(i),t)}}function Ki(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=ys(t),r=ys(r)),e(t,r)}}function Gi(t,r,n,i,s,u,c,d,l,p){var h=8&r;r|=h?a:o,4&(r&=~(h?o:a))||(r&=-4);var f=[t,r,s,h?u:e,h?c:e,h?e:u,h?e:c,d,l,p],m=n.apply(e,f);return _a(t)&&Ra(m,f),m.placeholder=i,Na(m,t,r)}function Wi(e){var t=Te[e];return function(e,r){if(e=ys(e),(r=null==r?0:br(fs(r),292))&&fr(e)){var n=(bs(e)+"e").split("e");return+((n=(bs(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Vi=Ir&&1/sr(new Ir([,-0]))[1]==c?function(e){return new Ir(e)}:uu;function Zi(e){return function(t){var r=fa(t);return r==_?ir(t):r==I?ur(t):function(e,t){return xt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Yi(r,c,d,l,p,h,f,m){var y=2&c;if(!y&&"function"!=typeof r)throw new Re(t);var g=l?l.length:0;if(g||(c&=-97,l=p=e),f=f===e?f:gr(fs(f),0),m=m===e?m:fs(m),g-=p?p.length:0,c&o){var b=l,v=p;l=p=e}var w=y?e:aa(r),_=[r,c,d,l,p,b,v,h,f,m];if(w&&function(e,t){var r=e[1],i=t[1],a=r|i,o=a<131,c=i==s&&8==r||i==s&&r==u&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==r;if(!o&&!c)return e;1&i&&(e[2]=t[2],a|=1&r?0:4);var d=t[3];if(d){var l=e[3];e[3]=l?$i(l,d,t[4]):d,e[4]=l?or(e[3],n):t[4]}(d=t[5])&&(l=e[5],e[5]=l?Ci(l,d,t[6]):d,e[6]=l?or(e[5],n):t[6]),(d=t[7])&&(e[7]=d),i&s&&(e[8]=null==e[8]?t[8]:br(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a}(_,w),r=_[0],c=_[1],d=_[2],l=_[3],p=_[4],!(m=_[9]=_[9]===e?y?0:r.length:gr(_[9]-g,0))&&24&c&&(c&=-25),c&&1!=c)S=8==c||c==i?function(t,r,n){var i=Di(t);return function a(){for(var o=arguments.length,s=_e(o),u=o,c=sa(a);u--;)s[u]=arguments[u];var d=o<3&&s[0]!==c&&s[o-1]!==c?[]:or(s,c);return(o-=d.length)<n?Gi(t,r,Ui,a.placeholder,e,s,d,e,e,n-o):Et(this&&this!==lt&&this instanceof a?i:t,this,s)}}(r,c,m):c!=a&&33!=c||p.length?Ui.apply(e,_):function(e,t,r,n){var i=1&t,a=Di(e);return function t(){for(var o=-1,s=arguments.length,u=-1,c=n.length,d=_e(c+s),l=this&&this!==lt&&this instanceof t?a:e;++u<c;)d[u]=n[u];for(;s--;)d[u++]=arguments[++o];return Et(l,i?r:this,d)}}(r,c,d,l);else var S=function(e,t,r){var n=1&t,i=Di(e);return function t(){return(this&&this!==lt&&this instanceof t?i:e).apply(n?r:this,arguments)}}(r,c,d);return Na((w?ei:Ra)(S,_),r,c)}function Xi(t,r,n,i){return t===e||Uo(t,Ne[n])&&!Fe.call(i,n)?r:t}function Qi(t,r,n,i,a,o){return es(t)&&es(r)&&(o.set(r,t),Jn(t,r,e,Qi,o),o.delete(r)),t}function ea(t){return is(t)?e:t}function ta(t,r,n,i,a,o){var s=1&n,u=t.length,c=r.length;if(u!=c&&!(s&&c>u))return!1;var d=o.get(t),l=o.get(r);if(d&&l)return d==r&&l==t;var p=-1,h=!0,f=2&n?new Gr:e;for(o.set(t,r),o.set(r,t);++p<u;){var m=t[p],y=r[p];if(i)var g=s?i(y,m,p,r,t,o):i(m,y,p,t,r,o);if(g!==e){if(g)continue;h=!1;break}if(f){if(!Ft(r,(function(e,t){if(!Yt(f,t)&&(m===e||a(m,e,n,i,o)))return f.push(t)}))){h=!1;break}}else if(m!==y&&!a(m,y,n,i,o)){h=!1;break}}return o.delete(t),o.delete(r),h}function ra(t){return xa(Ia(t,e,qa),t+"")}function na(e){return An(e,xs,pa)}function ia(e){return An(e,Ns,ha)}var aa=Rr?function(e){return Rr.get(e)}:uu;function oa(e){for(var t=e.name+"",r=kr[t],n=Fe.call(kr,t)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==e)return i.name}return t}function sa(e){return(Fe.call(Lr,"placeholder")?Lr:e).placeholder}function ua(){var e=Lr.iteratee||iu;return e=e===iu?Fn:e,arguments.length?e(arguments[0],arguments[1]):e}function ca(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function da(e){for(var t=xs(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Aa(i)]}return t}function la(t,r){var n=function(t,r){return null==t?e:t[r]}(t,r);return Pn(n)?n:e}var pa=Bt?function(e){return null==e?[]:(e=Ie(e),Ct(Bt(e),(function(t){return We.call(e,t)})))}:mu,ha=Bt?function(e){for(var t=[];e;)Nt(t,pa(e)),e=Ke(e);return t}:mu,fa=Tn;function ma(e,t,r){for(var n=-1,i=(t=vi(t,e)).length,a=!1;++n<i;){var o=Ba(t[n]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&Qo(i)&&ba(o,i)&&(qo(e)||Ho(e))}function ya(e){return"function"!=typeof e.constructor||Ea(e)?{}:Ur(Ke(e))}function ga(e){return qo(e)||Ho(e)||!!(Xe&&e&&e[Xe])}function ba(e,t){var r=typeof e;return!!(t=null==t?d:t)&&("number"==r||"symbol"!=r&&ye.test(e))&&e>-1&&e%1==0&&e<t}function va(e,t,r){if(!es(r))return!1;var n=typeof t;return!!("number"==n?Ko(r)&&ba(t,r.length):"string"==n&&t in r)&&Uo(r[t],e)}function wa(e,t){if(qo(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!us(e))||X.test(e)||!Y.test(e)||null!=t&&e in Ie(t)}function _a(e){var t=oa(e),r=Lr[t];if("function"!=typeof r||!(t in Hr.prototype))return!1;if(e===r)return!0;var n=aa(r);return!!n&&e===n[0]}(Er&&fa(new Er(new ArrayBuffer(1)))!=x||Ar&&fa(new Ar)!=_||Tr&&fa(Tr.resolve())!=A||Ir&&fa(new Ir)!=I||$r&&fa(new $r)!=R)&&(fa=function(t){var r=Tn(t),n=r==E?t.constructor:e,i=n?Da(n):"";if(i)switch(i){case xr:return x;case Nr:return _;case Or:return A;case Pr:return I;case Fr:return R}return r});var Sa=Oe?Yo:yu;function Ea(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ne)}function Aa(e){return e==e&&!es(e)}function Ta(t,r){return function(n){return null!=n&&n[t]===r&&(r!==e||t in Ie(n))}}function Ia(t,r,n){return r=gr(r===e?t.length-1:r,0),function(){for(var e=arguments,i=-1,a=gr(e.length-r,0),o=_e(a);++i<a;)o[i]=e[r+i];i=-1;for(var s=_e(r+1);++i<r;)s[i]=e[i];return s[r]=n(o),Et(t,this,s)}}function $a(e,t){return t.length<2?e:En(e,ni(t,0,-1))}function Ca(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ra=Oa(ei),ka=ht||function(e,t){return lt.setTimeout(e,t)},xa=Oa(ti);function Na(e,t,r){var n=t+"";return xa(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ie,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Tt(h,(function(r){var n="_."+r[0];t&r[1]&&!Rt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(ae);return t?t[1].split(oe):[]}(n),r)))}function Oa(t){var r=0,n=0;return function(){var i=vr(),a=16-(i-n);if(n=i,a>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(e,arguments)}}function Pa(t,r){var n=-1,i=t.length,a=i-1;for(r=r===e?i:r;++n<r;){var o=Wn(n,a),s=t[o];t[o]=t[n],t[n]=s}return t.length=r,t}var Fa=function(e){var t=Po(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Q,(function(e,r,n,i){t.push(n?i.replace(ce,"$1"):r||e)})),t}));function Ba(e){if("string"==typeof e||us(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Da(e){if(null!=e){try{return Pe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ma(e){if(e instanceof Hr)return e.clone();var t=new Jr(e.__wrapped__,e.__chain__);return t.__actions__=Ri(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var La=Zn((function(e,t){return Go(e)?ln(e,gn(t,1,Go,!0)):[]})),Ua=Zn((function(t,r){var n=Va(r);return Go(n)&&(n=e),Go(t)?ln(t,gn(r,1,Go,!0),ua(n,2)):[]})),za=Zn((function(t,r){var n=Va(r);return Go(n)&&(n=e),Go(t)?ln(t,gn(r,1,Go,!0),e,n):[]}));function Ja(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:fs(r);return i<0&&(i=gr(n+i,0)),Mt(e,ua(t,3),i)}function Ha(t,r,n){var i=null==t?0:t.length;if(!i)return-1;var a=i-1;return n!==e&&(a=fs(n),a=n<0?gr(i+a,0):br(a,i-1)),Mt(t,ua(r,3),a,!0)}function qa(e){return null!=e&&e.length?gn(e,1):[]}function ja(t){return t&&t.length?t[0]:e}var Ka=Zn((function(e){var t=xt(e,gi);return t.length&&t[0]===e[0]?Rn(t):[]})),Ga=Zn((function(t){var r=Va(t),n=xt(t,gi);return r===Va(n)?r=e:n.pop(),n.length&&n[0]===t[0]?Rn(n,ua(r,2)):[]})),Wa=Zn((function(t){var r=Va(t),n=xt(t,gi);return(r="function"==typeof r?r:e)&&n.pop(),n.length&&n[0]===t[0]?Rn(n,e,r):[]}));function Va(t){var r=null==t?0:t.length;return r?t[r-1]:e}var Za=Zn(Ya);function Ya(e,t){return e&&e.length&&t&&t.length?Kn(e,t):e}var Xa=ra((function(e,t){var r=null==e?0:e.length,n=on(e,t);return Gn(e,xt(t,(function(e){return ba(e,r)?+e:e})).sort(Ii)),n}));function Qa(e){return null==e?e:Sr.call(e)}var eo=Zn((function(e){return di(gn(e,1,Go,!0))})),to=Zn((function(t){var r=Va(t);return Go(r)&&(r=e),di(gn(t,1,Go,!0),ua(r,2))})),ro=Zn((function(t){var r=Va(t);return r="function"==typeof r?r:e,di(gn(t,1,Go,!0),e,r)}));function no(e){if(!e||!e.length)return[];var t=0;return e=Ct(e,(function(e){if(Go(e))return t=gr(e.length,t),!0})),Gt(t,(function(t){return xt(e,Ht(t))}))}function io(t,r){if(!t||!t.length)return[];var n=no(t);return null==r?n:xt(n,(function(t){return Et(r,e,t)}))}var ao=Zn((function(e,t){return Go(e)?ln(e,t):[]})),oo=Zn((function(e){return mi(Ct(e,Go))})),so=Zn((function(t){var r=Va(t);return Go(r)&&(r=e),mi(Ct(t,Go),ua(r,2))})),uo=Zn((function(t){var r=Va(t);return r="function"==typeof r?r:e,mi(Ct(t,Go),e,r)})),co=Zn(no),lo=Zn((function(t){var r=t.length,n=r>1?t[r-1]:e;return n="function"==typeof n?(t.pop(),n):e,io(t,n)}));function po(e){var t=Lr(e);return t.__chain__=!0,t}function ho(e,t){return t(e)}var fo=ra((function(t){var r=t.length,n=r?t[0]:0,i=this.__wrapped__,a=function(e){return on(e,t)};return!(r>1||this.__actions__.length)&&i instanceof Hr&&ba(n)?((i=i.slice(n,+n+(r?1:0))).__actions__.push({func:ho,args:[a],thisArg:e}),new Jr(i,this.__chain__).thru((function(t){return r&&!t.length&&t.push(e),t}))):this.thru(a)})),mo=xi((function(e,t,r){Fe.call(e,r)?++e[r]:an(e,r,1)})),yo=Mi(Ja),go=Mi(Ha);function bo(e,t){return(qo(e)?Tt:pn)(e,ua(t,3))}function vo(e,t){return(qo(e)?It:hn)(e,ua(t,3))}var wo=xi((function(e,t,r){Fe.call(e,r)?e[r].push(t):an(e,r,[t])})),_o=Zn((function(e,t,r){var n=-1,i="function"==typeof t,a=Ko(e)?_e(e.length):[];return pn(e,(function(e){a[++n]=i?Et(t,e,r):kn(e,t,r)})),a})),So=xi((function(e,t,r){an(e,r,t)}));function Eo(e,t){return(qo(e)?xt:Ln)(e,ua(t,3))}var Ao=xi((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),To=Zn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&va(e,t[0],t[1])?t=[]:r>2&&va(t[0],t[1],t[2])&&(t=[t[0]]),qn(e,gn(t,1),[])})),Io=pt||function(){return lt.Date.now()};function $o(t,r,n){return r=n?e:r,r=t&&null==r?t.length:r,Yi(t,s,e,e,e,e,r)}function Co(r,n){var i;if("function"!=typeof n)throw new Re(t);return r=fs(r),function(){return--r>0&&(i=n.apply(this,arguments)),r<=1&&(n=e),i}}var Ro=Zn((function(e,t,r){var n=1;if(r.length){var i=or(r,sa(Ro));n|=a}return Yi(e,n,t,r,i)})),ko=Zn((function(e,t,r){var n=3;if(r.length){var i=or(r,sa(ko));n|=a}return Yi(t,n,e,r,i)}));function xo(r,n,i){var a,o,s,u,c,d,l=0,p=!1,h=!1,f=!0;if("function"!=typeof r)throw new Re(t);function m(t){var n=a,i=o;return a=o=e,l=t,u=r.apply(i,n)}function y(t){var r=t-d;return d===e||r>=n||r<0||h&&t-l>=s}function g(){var e=Io();if(y(e))return b(e);c=ka(g,function(e){var t=n-(e-d);return h?br(t,s-(e-l)):t}(e))}function b(t){return c=e,f&&a?m(t):(a=o=e,u)}function v(){var t=Io(),r=y(t);if(a=arguments,o=this,d=t,r){if(c===e)return function(e){return l=e,c=ka(g,n),p?m(e):u}(d);if(h)return Si(c),c=ka(g,n),m(d)}return c===e&&(c=ka(g,n)),u}return n=ys(n)||0,es(i)&&(p=!!i.leading,s=(h="maxWait"in i)?gr(ys(i.maxWait)||0,n):s,f="trailing"in i?!!i.trailing:f),v.cancel=function(){c!==e&&Si(c),l=0,a=d=o=c=e},v.flush=function(){return c===e?u:b(Io())},v}var No=Zn((function(e,t){return dn(e,1,t)})),Oo=Zn((function(e,t,r){return dn(e,ys(t)||0,r)}));function Po(e,r){if("function"!=typeof e||null!=r&&"function"!=typeof r)throw new Re(t);var n=function(){var t=arguments,i=r?r.apply(this,t):t[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,t);return n.cache=a.set(i,o)||a,o};return n.cache=new(Po.Cache||Kr),n}function Fo(e){if("function"!=typeof e)throw new Re(t);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Po.Cache=Kr;var Bo=wi((function(e,t){var r=(t=1==t.length&&qo(t[0])?xt(t[0],Vt(ua())):xt(gn(t,1),Vt(ua()))).length;return Zn((function(n){for(var i=-1,a=br(n.length,r);++i<a;)n[i]=t[i].call(this,n[i]);return Et(e,this,n)}))})),Do=Zn((function(t,r){var n=or(r,sa(Do));return Yi(t,a,e,r,n)})),Mo=Zn((function(t,r){var n=or(r,sa(Mo));return Yi(t,o,e,r,n)})),Lo=ra((function(t,r){return Yi(t,u,e,e,e,r)}));function Uo(e,t){return e===t||e!=e&&t!=t}var zo=Ki(In),Jo=Ki((function(e,t){return e>=t})),Ho=xn(function(){return arguments}())?xn:function(e){return ts(e)&&Fe.call(e,"callee")&&!We.call(e,"callee")},qo=_e.isArray,jo=gt?Vt(gt):function(e){return ts(e)&&Tn(e)==k};function Ko(e){return null!=e&&Qo(e.length)&&!Yo(e)}function Go(e){return ts(e)&&Ko(e)}var Wo=qt||yu,Vo=bt?Vt(bt):function(e){return ts(e)&&Tn(e)==g};function Zo(e){if(!ts(e))return!1;var t=Tn(e);return t==b||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!is(e)}function Yo(e){if(!es(e))return!1;var t=Tn(e);return t==v||t==w||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Xo(e){return"number"==typeof e&&e==fs(e)}function Qo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function es(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ts(e){return null!=e&&"object"==typeof e}var rs=vt?Vt(vt):function(e){return ts(e)&&fa(e)==_};function ns(e){return"number"==typeof e||ts(e)&&Tn(e)==S}function is(e){if(!ts(e)||Tn(e)!=E)return!1;var t=Ke(e);if(null===t)return!0;var r=Fe.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Pe.call(r)==Le}var as=wt?Vt(wt):function(e){return ts(e)&&Tn(e)==T},os=_t?Vt(_t):function(e){return ts(e)&&fa(e)==I};function ss(e){return"string"==typeof e||!qo(e)&&ts(e)&&Tn(e)==$}function us(e){return"symbol"==typeof e||ts(e)&&Tn(e)==C}var cs=St?Vt(St):function(e){return ts(e)&&Qo(e.length)&&!!it[Tn(e)]},ds=Ki(Mn),ls=Ki((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(Ko(e))return ss(e)?dr(e):Ri(e);if(et&&e[et])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[et]());var t=fa(e);return(t==_?ir:t==I?sr:Us)(e)}function hs(e){return e?(e=ys(e))===c||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function fs(e){var t=hs(e),r=t%1;return t==t?r?t-r:t:0}function ms(e){return e?sn(fs(e),0,p):0}function ys(e){if("number"==typeof e)return e;if(us(e))return l;if(es(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=es(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Wt(e);var r=he.test(e);return r||me.test(e)?ut(e.slice(2),r?2:8):pe.test(e)?l:+e}function gs(e){return ki(e,Ns(e))}function bs(e){return null==e?"":ci(e)}var vs=Ni((function(e,t){if(Ea(t)||Ko(t))ki(t,xs(t),e);else for(var r in t)Fe.call(t,r)&&en(e,r,t[r])})),ws=Ni((function(e,t){ki(t,Ns(t),e)})),_s=Ni((function(e,t,r,n){ki(t,Ns(t),e,n)})),Ss=Ni((function(e,t,r,n){ki(t,xs(t),e,n)})),Es=ra(on),As=Zn((function(t,r){t=Ie(t);var n=-1,i=r.length,a=i>2?r[2]:e;for(a&&va(r[0],r[1],a)&&(i=1);++n<i;)for(var o=r[n],s=Ns(o),u=-1,c=s.length;++u<c;){var d=s[u],l=t[d];(l===e||Uo(l,Ne[d])&&!Fe.call(t,d))&&(t[d]=o[d])}return t})),Ts=Zn((function(t){return t.push(e,Qi),Et(Ps,e,t)}));function Is(t,r,n){var i=null==t?e:En(t,r);return i===e?n:i}function $s(e,t){return null!=e&&ma(e,t,Cn)}var Cs=zi((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Me.call(t)),e[t]=r}),eu(nu)),Rs=zi((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Me.call(t)),Fe.call(e,t)?e[t].push(r):e[t]=[r]}),ua),ks=Zn(kn);function xs(e){return Ko(e)?Vr(e):Bn(e)}function Ns(e){return Ko(e)?Vr(e,!0):Dn(e)}var Os=Ni((function(e,t,r){Jn(e,t,r)})),Ps=Ni((function(e,t,r,n){Jn(e,t,r,n)})),Fs=ra((function(e,t){var r={};if(null==e)return r;var n=!1;t=xt(t,(function(t){return t=vi(t,e),n||(n=t.length>1),t})),ki(e,ia(e),r),n&&(r=un(r,7,ea));for(var i=t.length;i--;)li(r,t[i]);return r})),Bs=ra((function(e,t){return null==e?{}:function(e,t){return jn(e,t,(function(t,r){return $s(e,r)}))}(e,t)}));function Ds(e,t){if(null==e)return{};var r=xt(ia(e),(function(e){return[e]}));return t=ua(t),jn(e,r,(function(e,r){return t(e,r[0])}))}var Ms=Zi(xs),Ls=Zi(Ns);function Us(e){return null==e?[]:Zt(e,xs(e))}var zs=Bi((function(e,t,r){return t=t.toLowerCase(),e+(r?Js(t):t)}));function Js(e){return Zs(bs(e).toLowerCase())}function Hs(e){return(e=bs(e))&&e.replace(ge,er).replace(Ye,"")}var qs=Bi((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),js=Bi((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Ks=Fi("toLowerCase"),Gs=Bi((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),Ws=Bi((function(e,t,r){return e+(r?" ":"")+Zs(t)})),Vs=Bi((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Zs=Fi("toUpperCase");function Ys(t,r,n){return t=bs(t),(r=n?e:r)===e?function(e){return tt.test(e)}(t)?function(e){return e.match(Qe)||[]}(t):function(e){return e.match(se)||[]}(t):t.match(r)||[]}var Xs=Zn((function(t,r){try{return Et(t,e,r)}catch(e){return Zo(e)?e:new Ee(e)}})),Qs=ra((function(e,t){return Tt(t,(function(t){t=Ba(t),an(e,t,Ro(e[t],e))})),e}));function eu(e){return function(){return e}}var tu=Li(),ru=Li(!0);function nu(e){return e}function iu(e){return Fn("function"==typeof e?e:un(e,1))}var au=Zn((function(e,t){return function(r){return kn(r,e,t)}})),ou=Zn((function(e,t){return function(r){return kn(e,r,t)}}));function su(e,t,r){var n=xs(t),i=Sn(t,n);null!=r||es(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=Sn(t,xs(t)));var a=!(es(r)&&"chain"in r&&!r.chain),o=Yo(e);return Tt(i,(function(r){var n=t[r];e[r]=n,o&&(e.prototype[r]=function(){var t=this.__chain__;if(a||t){var r=e(this.__wrapped__);return(r.__actions__=Ri(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Nt([this.value()],arguments))})})),e}function uu(){}var cu=Hi(xt),du=Hi($t),lu=Hi(Ft);function pu(e){return wa(e)?Ht(Ba(e)):function(e){return function(t){return En(t,e)}}(e)}var hu=ji(),fu=ji(!0);function mu(){return[]}function yu(){return!1}var gu,bu=Ji((function(e,t){return e+t}),0),vu=Wi("ceil"),wu=Ji((function(e,t){return e/t}),1),_u=Wi("floor"),Su=Ji((function(e,t){return e*t}),1),Eu=Wi("round"),Au=Ji((function(e,t){return e-t}),0);return Lr.after=function(e,r){if("function"!=typeof r)throw new Re(t);return e=fs(e),function(){if(--e<1)return r.apply(this,arguments)}},Lr.ary=$o,Lr.assign=vs,Lr.assignIn=ws,Lr.assignInWith=_s,Lr.assignWith=Ss,Lr.at=Es,Lr.before=Co,Lr.bind=Ro,Lr.bindAll=Qs,Lr.bindKey=ko,Lr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return qo(e)?e:[e]},Lr.chain=po,Lr.chunk=function(t,r,n){r=(n?va(t,r,n):r===e)?1:gr(fs(r),0);var i=null==t?0:t.length;if(!i||r<1)return[];for(var a=0,o=0,s=_e(mt(i/r));a<i;)s[o++]=ni(t,a,a+=r);return s},Lr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var a=e[t];a&&(i[n++]=a)}return i},Lr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=_e(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Nt(qo(r)?Ri(r):[r],gn(t,1))},Lr.cond=function(e){var r=null==e?0:e.length,n=ua();return e=r?xt(e,(function(e){if("function"!=typeof e[1])throw new Re(t);return[n(e[0]),e[1]]})):[],Zn((function(t){for(var n=-1;++n<r;){var i=e[n];if(Et(i[0],this,t))return Et(i[1],this,t)}}))},Lr.conforms=function(e){return function(e){var t=xs(e);return function(r){return cn(r,e,t)}}(un(e,1))},Lr.constant=eu,Lr.countBy=mo,Lr.create=function(e,t){var r=Ur(e);return null==t?r:nn(r,t)},Lr.curry=function t(r,n,i){var a=Yi(r,8,e,e,e,e,e,n=i?e:n);return a.placeholder=t.placeholder,a},Lr.curryRight=function t(r,n,a){var o=Yi(r,i,e,e,e,e,e,n=a?e:n);return o.placeholder=t.placeholder,o},Lr.debounce=xo,Lr.defaults=As,Lr.defaultsDeep=Ts,Lr.defer=No,Lr.delay=Oo,Lr.difference=La,Lr.differenceBy=Ua,Lr.differenceWith=za,Lr.drop=function(t,r,n){var i=null==t?0:t.length;return i?ni(t,(r=n||r===e?1:fs(r))<0?0:r,i):[]},Lr.dropRight=function(t,r,n){var i=null==t?0:t.length;return i?ni(t,0,(r=i-(r=n||r===e?1:fs(r)))<0?0:r):[]},Lr.dropRightWhile=function(e,t){return e&&e.length?hi(e,ua(t,3),!0,!0):[]},Lr.dropWhile=function(e,t){return e&&e.length?hi(e,ua(t,3),!0):[]},Lr.fill=function(t,r,n,i){var a=null==t?0:t.length;return a?(n&&"number"!=typeof n&&va(t,r,n)&&(n=0,i=a),function(t,r,n,i){var a=t.length;for((n=fs(n))<0&&(n=-n>a?0:a+n),(i=i===e||i>a?a:fs(i))<0&&(i+=a),i=n>i?0:ms(i);n<i;)t[n++]=r;return t}(t,r,n,i)):[]},Lr.filter=function(e,t){return(qo(e)?Ct:yn)(e,ua(t,3))},Lr.flatMap=function(e,t){return gn(Eo(e,t),1)},Lr.flatMapDeep=function(e,t){return gn(Eo(e,t),c)},Lr.flatMapDepth=function(t,r,n){return n=n===e?1:fs(n),gn(Eo(t,r),n)},Lr.flatten=qa,Lr.flattenDeep=function(e){return null!=e&&e.length?gn(e,c):[]},Lr.flattenDepth=function(t,r){return null!=t&&t.length?gn(t,r=r===e?1:fs(r)):[]},Lr.flip=function(e){return Yi(e,512)},Lr.flow=tu,Lr.flowRight=ru,Lr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},Lr.functions=function(e){return null==e?[]:Sn(e,xs(e))},Lr.functionsIn=function(e){return null==e?[]:Sn(e,Ns(e))},Lr.groupBy=wo,Lr.initial=function(e){return null!=e&&e.length?ni(e,0,-1):[]},Lr.intersection=Ka,Lr.intersectionBy=Ga,Lr.intersectionWith=Wa,Lr.invert=Cs,Lr.invertBy=Rs,Lr.invokeMap=_o,Lr.iteratee=iu,Lr.keyBy=So,Lr.keys=xs,Lr.keysIn=Ns,Lr.map=Eo,Lr.mapKeys=function(e,t){var r={};return t=ua(t,3),wn(e,(function(e,n,i){an(r,t(e,n,i),e)})),r},Lr.mapValues=function(e,t){var r={};return t=ua(t,3),wn(e,(function(e,n,i){an(r,n,t(e,n,i))})),r},Lr.matches=function(e){return Un(un(e,1))},Lr.matchesProperty=function(e,t){return zn(e,un(t,1))},Lr.memoize=Po,Lr.merge=Os,Lr.mergeWith=Ps,Lr.method=au,Lr.methodOf=ou,Lr.mixin=su,Lr.negate=Fo,Lr.nthArg=function(e){return e=fs(e),Zn((function(t){return Hn(t,e)}))},Lr.omit=Fs,Lr.omitBy=function(e,t){return Ds(e,Fo(ua(t)))},Lr.once=function(e){return Co(2,e)},Lr.orderBy=function(t,r,n,i){return null==t?[]:(qo(r)||(r=null==r?[]:[r]),qo(n=i?e:n)||(n=null==n?[]:[n]),qn(t,r,n))},Lr.over=cu,Lr.overArgs=Bo,Lr.overEvery=du,Lr.overSome=lu,Lr.partial=Do,Lr.partialRight=Mo,Lr.partition=Ao,Lr.pick=Bs,Lr.pickBy=Ds,Lr.property=pu,Lr.propertyOf=function(t){return function(r){return null==t?e:En(t,r)}},Lr.pull=Za,Lr.pullAll=Ya,Lr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Kn(e,t,ua(r,2)):e},Lr.pullAllWith=function(t,r,n){return t&&t.length&&r&&r.length?Kn(t,r,e,n):t},Lr.pullAt=Xa,Lr.range=hu,Lr.rangeRight=fu,Lr.rearg=Lo,Lr.reject=function(e,t){return(qo(e)?Ct:yn)(e,Fo(ua(t,3)))},Lr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],a=e.length;for(t=ua(t,3);++n<a;){var o=e[n];t(o,n,e)&&(r.push(o),i.push(n))}return Gn(e,i),r},Lr.rest=function(r,n){if("function"!=typeof r)throw new Re(t);return Zn(r,n=n===e?n:fs(n))},Lr.reverse=Qa,Lr.sampleSize=function(t,r,n){return r=(n?va(t,r,n):r===e)?1:fs(r),(qo(t)?Yr:Xn)(t,r)},Lr.set=function(e,t,r){return null==e?e:Qn(e,t,r)},Lr.setWith=function(t,r,n,i){return i="function"==typeof i?i:e,null==t?t:Qn(t,r,n,i)},Lr.shuffle=function(e){return(qo(e)?Xr:ri)(e)},Lr.slice=function(t,r,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&va(t,r,n)?(r=0,n=i):(r=null==r?0:fs(r),n=n===e?i:fs(n)),ni(t,r,n)):[]},Lr.sortBy=To,Lr.sortedUniq=function(e){return e&&e.length?si(e):[]},Lr.sortedUniqBy=function(e,t){return e&&e.length?si(e,ua(t,2)):[]},Lr.split=function(t,r,n){return n&&"number"!=typeof n&&va(t,r,n)&&(r=n=e),(n=n===e?p:n>>>0)?(t=bs(t))&&("string"==typeof r||null!=r&&!as(r))&&!(r=ci(r))&&nr(t)?_i(dr(t),0,n):t.split(r,n):[]},Lr.spread=function(e,r){if("function"!=typeof e)throw new Re(t);return r=null==r?0:gr(fs(r),0),Zn((function(t){var n=t[r],i=_i(t,0,r);return n&&Nt(i,n),Et(e,this,i)}))},Lr.tail=function(e){var t=null==e?0:e.length;return t?ni(e,1,t):[]},Lr.take=function(t,r,n){return t&&t.length?ni(t,0,(r=n||r===e?1:fs(r))<0?0:r):[]},Lr.takeRight=function(t,r,n){var i=null==t?0:t.length;return i?ni(t,(r=i-(r=n||r===e?1:fs(r)))<0?0:r,i):[]},Lr.takeRightWhile=function(e,t){return e&&e.length?hi(e,ua(t,3),!1,!0):[]},Lr.takeWhile=function(e,t){return e&&e.length?hi(e,ua(t,3)):[]},Lr.tap=function(e,t){return t(e),e},Lr.throttle=function(e,r,n){var i=!0,a=!0;if("function"!=typeof e)throw new Re(t);return es(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),xo(e,r,{leading:i,maxWait:r,trailing:a})},Lr.thru=ho,Lr.toArray=ps,Lr.toPairs=Ms,Lr.toPairsIn=Ls,Lr.toPath=function(e){return qo(e)?xt(e,Ba):us(e)?[e]:Ri(Fa(bs(e)))},Lr.toPlainObject=gs,Lr.transform=function(e,t,r){var n=qo(e),i=n||Wo(e)||cs(e);if(t=ua(t,4),null==r){var a=e&&e.constructor;r=i?n?new a:[]:es(e)&&Yo(a)?Ur(Ke(e)):{}}return(i?Tt:wn)(e,(function(e,n,i){return t(r,e,n,i)})),r},Lr.unary=function(e){return $o(e,1)},Lr.union=eo,Lr.unionBy=to,Lr.unionWith=ro,Lr.uniq=function(e){return e&&e.length?di(e):[]},Lr.uniqBy=function(e,t){return e&&e.length?di(e,ua(t,2)):[]},Lr.uniqWith=function(t,r){return r="function"==typeof r?r:e,t&&t.length?di(t,e,r):[]},Lr.unset=function(e,t){return null==e||li(e,t)},Lr.unzip=no,Lr.unzipWith=io,Lr.update=function(e,t,r){return null==e?e:pi(e,t,bi(r))},Lr.updateWith=function(t,r,n,i){return i="function"==typeof i?i:e,null==t?t:pi(t,r,bi(n),i)},Lr.values=Us,Lr.valuesIn=function(e){return null==e?[]:Zt(e,Ns(e))},Lr.without=ao,Lr.words=Ys,Lr.wrap=function(e,t){return Do(bi(t),e)},Lr.xor=oo,Lr.xorBy=so,Lr.xorWith=uo,Lr.zip=co,Lr.zipObject=function(e,t){return yi(e||[],t||[],en)},Lr.zipObjectDeep=function(e,t){return yi(e||[],t||[],Qn)},Lr.zipWith=lo,Lr.entries=Ms,Lr.entriesIn=Ls,Lr.extend=ws,Lr.extendWith=_s,su(Lr,Lr),Lr.add=bu,Lr.attempt=Xs,Lr.camelCase=zs,Lr.capitalize=Js,Lr.ceil=vu,Lr.clamp=function(t,r,n){return n===e&&(n=r,r=e),n!==e&&(n=(n=ys(n))==n?n:0),r!==e&&(r=(r=ys(r))==r?r:0),sn(ys(t),r,n)},Lr.clone=function(e){return un(e,4)},Lr.cloneDeep=function(e){return un(e,5)},Lr.cloneDeepWith=function(t,r){return un(t,5,r="function"==typeof r?r:e)},Lr.cloneWith=function(t,r){return un(t,4,r="function"==typeof r?r:e)},Lr.conformsTo=function(e,t){return null==t||cn(e,t,xs(t))},Lr.deburr=Hs,Lr.defaultTo=function(e,t){return null==e||e!=e?t:e},Lr.divide=wu,Lr.endsWith=function(t,r,n){t=bs(t),r=ci(r);var i=t.length,a=n=n===e?i:sn(fs(n),0,i);return(n-=r.length)>=0&&t.slice(n,a)==r},Lr.eq=Uo,Lr.escape=function(e){return(e=bs(e))&&G.test(e)?e.replace(j,tr):e},Lr.escapeRegExp=function(e){return(e=bs(e))&&te.test(e)?e.replace(ee,"\\$&"):e},Lr.every=function(t,r,n){var i=qo(t)?$t:fn;return n&&va(t,r,n)&&(r=e),i(t,ua(r,3))},Lr.find=yo,Lr.findIndex=Ja,Lr.findKey=function(e,t){return Dt(e,ua(t,3),wn)},Lr.findLast=go,Lr.findLastIndex=Ha,Lr.findLastKey=function(e,t){return Dt(e,ua(t,3),_n)},Lr.floor=_u,Lr.forEach=bo,Lr.forEachRight=vo,Lr.forIn=function(e,t){return null==e?e:bn(e,ua(t,3),Ns)},Lr.forInRight=function(e,t){return null==e?e:vn(e,ua(t,3),Ns)},Lr.forOwn=function(e,t){return e&&wn(e,ua(t,3))},Lr.forOwnRight=function(e,t){return e&&_n(e,ua(t,3))},Lr.get=Is,Lr.gt=zo,Lr.gte=Jo,Lr.has=function(e,t){return null!=e&&ma(e,t,$n)},Lr.hasIn=$s,Lr.head=ja,Lr.identity=nu,Lr.includes=function(e,t,r,n){e=Ko(e)?e:Us(e),r=r&&!n?fs(r):0;var i=e.length;return r<0&&(r=gr(i+r,0)),ss(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&Lt(e,t,r)>-1},Lr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:fs(r);return i<0&&(i=gr(n+i,0)),Lt(e,t,i)},Lr.inRange=function(t,r,n){return r=hs(r),n===e?(n=r,r=0):n=hs(n),function(e,t,r){return e>=br(t,r)&&e<gr(t,r)}(t=ys(t),r,n)},Lr.invoke=ks,Lr.isArguments=Ho,Lr.isArray=qo,Lr.isArrayBuffer=jo,Lr.isArrayLike=Ko,Lr.isArrayLikeObject=Go,Lr.isBoolean=function(e){return!0===e||!1===e||ts(e)&&Tn(e)==y},Lr.isBuffer=Wo,Lr.isDate=Vo,Lr.isElement=function(e){return ts(e)&&1===e.nodeType&&!is(e)},Lr.isEmpty=function(e){if(null==e)return!0;if(Ko(e)&&(qo(e)||"string"==typeof e||"function"==typeof e.splice||Wo(e)||cs(e)||Ho(e)))return!e.length;var t=fa(e);if(t==_||t==I)return!e.size;if(Ea(e))return!Bn(e).length;for(var r in e)if(Fe.call(e,r))return!1;return!0},Lr.isEqual=function(e,t){return Nn(e,t)},Lr.isEqualWith=function(t,r,n){var i=(n="function"==typeof n?n:e)?n(t,r):e;return i===e?Nn(t,r,e,n):!!i},Lr.isError=Zo,Lr.isFinite=function(e){return"number"==typeof e&&fr(e)},Lr.isFunction=Yo,Lr.isInteger=Xo,Lr.isLength=Qo,Lr.isMap=rs,Lr.isMatch=function(e,t){return e===t||On(e,t,da(t))},Lr.isMatchWith=function(t,r,n){return n="function"==typeof n?n:e,On(t,r,da(r),n)},Lr.isNaN=function(e){return ns(e)&&e!=+e},Lr.isNative=function(e){if(Sa(e))throw new Ee("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pn(e)},Lr.isNil=function(e){return null==e},Lr.isNull=function(e){return null===e},Lr.isNumber=ns,Lr.isObject=es,Lr.isObjectLike=ts,Lr.isPlainObject=is,Lr.isRegExp=as,Lr.isSafeInteger=function(e){return Xo(e)&&e>=-9007199254740991&&e<=d},Lr.isSet=os,Lr.isString=ss,Lr.isSymbol=us,Lr.isTypedArray=cs,Lr.isUndefined=function(t){return t===e},Lr.isWeakMap=function(e){return ts(e)&&fa(e)==R},Lr.isWeakSet=function(e){return ts(e)&&"[object WeakSet]"==Tn(e)},Lr.join=function(e,t){return null==e?"":mr.call(e,t)},Lr.kebabCase=qs,Lr.last=Va,Lr.lastIndexOf=function(t,r,n){var i=null==t?0:t.length;if(!i)return-1;var a=i;return n!==e&&(a=(a=fs(n))<0?gr(i+a,0):br(a,i-1)),r==r?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(t,r,a):Mt(t,zt,a,!0)},Lr.lowerCase=js,Lr.lowerFirst=Ks,Lr.lt=ds,Lr.lte=ls,Lr.max=function(t){return t&&t.length?mn(t,nu,In):e},Lr.maxBy=function(t,r){return t&&t.length?mn(t,ua(r,2),In):e},Lr.mean=function(e){return Jt(e,nu)},Lr.meanBy=function(e,t){return Jt(e,ua(t,2))},Lr.min=function(t){return t&&t.length?mn(t,nu,Mn):e},Lr.minBy=function(t,r){return t&&t.length?mn(t,ua(r,2),Mn):e},Lr.stubArray=mu,Lr.stubFalse=yu,Lr.stubObject=function(){return{}},Lr.stubString=function(){return""},Lr.stubTrue=function(){return!0},Lr.multiply=Su,Lr.nth=function(t,r){return t&&t.length?Hn(t,fs(r)):e},Lr.noConflict=function(){return lt._===this&&(lt._=Ue),this},Lr.noop=uu,Lr.now=Io,Lr.pad=function(e,t,r){e=bs(e);var n=(t=fs(t))?cr(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return qi(yt(i),r)+e+qi(mt(i),r)},Lr.padEnd=function(e,t,r){e=bs(e);var n=(t=fs(t))?cr(e):0;return t&&n<t?e+qi(t-n,r):e},Lr.padStart=function(e,t,r){e=bs(e);var n=(t=fs(t))?cr(e):0;return t&&n<t?qi(t-n,r)+e:e},Lr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),wr(bs(e).replace(re,""),t||0)},Lr.random=function(t,r,n){if(n&&"boolean"!=typeof n&&va(t,r,n)&&(r=n=e),n===e&&("boolean"==typeof r?(n=r,r=e):"boolean"==typeof t&&(n=t,t=e)),t===e&&r===e?(t=0,r=1):(t=hs(t),r===e?(r=t,t=0):r=hs(r)),t>r){var i=t;t=r,r=i}if(n||t%1||r%1){var a=_r();return br(t+a*(r-t+st("1e-"+((a+"").length-1))),r)}return Wn(t,r)},Lr.reduce=function(e,t,r){var n=qo(e)?Ot:jt,i=arguments.length<3;return n(e,ua(t,4),r,i,pn)},Lr.reduceRight=function(e,t,r){var n=qo(e)?Pt:jt,i=arguments.length<3;return n(e,ua(t,4),r,i,hn)},Lr.repeat=function(t,r,n){return r=(n?va(t,r,n):r===e)?1:fs(r),Vn(bs(t),r)},Lr.replace=function(){var e=arguments,t=bs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Lr.result=function(t,r,n){var i=-1,a=(r=vi(r,t)).length;for(a||(a=1,t=e);++i<a;){var o=null==t?e:t[Ba(r[i])];o===e&&(i=a,o=n),t=Yo(o)?o.call(t):o}return t},Lr.round=Eu,Lr.runInContext=ne,Lr.sample=function(e){return(qo(e)?Zr:Yn)(e)},Lr.size=function(e){if(null==e)return 0;if(Ko(e))return ss(e)?cr(e):e.length;var t=fa(e);return t==_||t==I?e.size:Bn(e).length},Lr.snakeCase=Gs,Lr.some=function(t,r,n){var i=qo(t)?Ft:ii;return n&&va(t,r,n)&&(r=e),i(t,ua(r,3))},Lr.sortedIndex=function(e,t){return ai(e,t)},Lr.sortedIndexBy=function(e,t,r){return oi(e,t,ua(r,2))},Lr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ai(e,t);if(n<r&&Uo(e[n],t))return n}return-1},Lr.sortedLastIndex=function(e,t){return ai(e,t,!0)},Lr.sortedLastIndexBy=function(e,t,r){return oi(e,t,ua(r,2),!0)},Lr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=ai(e,t,!0)-1;if(Uo(e[r],t))return r}return-1},Lr.startCase=Ws,Lr.startsWith=function(e,t,r){return e=bs(e),r=null==r?0:sn(fs(r),0,e.length),t=ci(t),e.slice(r,r+t.length)==t},Lr.subtract=Au,Lr.sum=function(e){return e&&e.length?Kt(e,nu):0},Lr.sumBy=function(e,t){return e&&e.length?Kt(e,ua(t,2)):0},Lr.template=function(t,r,n){var i=Lr.templateSettings;n&&va(t,r,n)&&(r=e),t=bs(t),r=_s({},r,i,Xi);var a,o,s=_s({},r.imports,i.imports,Xi),u=xs(s),c=Zt(s,u),d=0,l=r.interpolate||be,p="__p += '",h=$e((r.escape||be).source+"|"+l.source+"|"+(l===Z?de:be).source+"|"+(r.evaluate||be).source+"|$","g"),f="//# sourceURL="+(Fe.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nt+"]")+"\n";t.replace(h,(function(e,r,n,i,s,u){return n||(n=i),p+=t.slice(d,u).replace(ve,rr),r&&(a=!0,p+="' +\n__e("+r+") +\n'"),s&&(o=!0,p+="';\n"+s+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),d=u+e.length,e})),p+="';\n";var m=Fe.call(r,"variable")&&r.variable;if(m){if(ue.test(m))throw new Ee("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(o?p.replace(z,""):p).replace(J,"$1").replace(H,"$1;"),p="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=Xs((function(){return Ae(u,f+"return "+p).apply(e,c)}));if(y.source=p,Zo(y))throw y;return y},Lr.times=function(e,t){if((e=fs(e))<1||e>d)return[];var r=p,n=br(e,p);t=ua(t),e-=p;for(var i=Gt(n,t);++r<e;)t(r);return i},Lr.toFinite=hs,Lr.toInteger=fs,Lr.toLength=ms,Lr.toLower=function(e){return bs(e).toLowerCase()},Lr.toNumber=ys,Lr.toSafeInteger=function(e){return e?sn(fs(e),-9007199254740991,d):0===e?e:0},Lr.toString=bs,Lr.toUpper=function(e){return bs(e).toUpperCase()},Lr.trim=function(t,r,n){if((t=bs(t))&&(n||r===e))return Wt(t);if(!t||!(r=ci(r)))return t;var i=dr(t),a=dr(r);return _i(i,Xt(i,a),Qt(i,a)+1).join("")},Lr.trimEnd=function(t,r,n){if((t=bs(t))&&(n||r===e))return t.slice(0,lr(t)+1);if(!t||!(r=ci(r)))return t;var i=dr(t);return _i(i,0,Qt(i,dr(r))+1).join("")},Lr.trimStart=function(t,r,n){if((t=bs(t))&&(n||r===e))return t.replace(re,"");if(!t||!(r=ci(r)))return t;var i=dr(t);return _i(i,Xt(i,dr(r))).join("")},Lr.truncate=function(t,r){var n=30,i="...";if(es(r)){var a="separator"in r?r.separator:a;n="length"in r?fs(r.length):n,i="omission"in r?ci(r.omission):i}var o=(t=bs(t)).length;if(nr(t)){var s=dr(t);o=s.length}if(n>=o)return t;var u=n-cr(i);if(u<1)return i;var c=s?_i(s,0,u).join(""):t.slice(0,u);if(a===e)return c+i;if(s&&(u+=c.length-u),as(a)){if(t.slice(u).search(a)){var d,l=c;for(a.global||(a=$e(a.source,bs(le.exec(a))+"g")),a.lastIndex=0;d=a.exec(l);)var p=d.index;c=c.slice(0,p===e?u:p)}}else if(t.indexOf(ci(a),u)!=u){var h=c.lastIndexOf(a);h>-1&&(c=c.slice(0,h))}return c+i},Lr.unescape=function(e){return(e=bs(e))&&K.test(e)?e.replace(q,pr):e},Lr.uniqueId=function(e){var t=++Be;return bs(e)+t},Lr.upperCase=Vs,Lr.upperFirst=Zs,Lr.each=bo,Lr.eachRight=vo,Lr.first=ja,su(Lr,(gu={},wn(Lr,(function(e,t){Fe.call(Lr.prototype,t)||(gu[t]=e)})),gu),{chain:!1}),Lr.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Lr[e].placeholder=Lr})),Tt(["drop","take"],(function(t,r){Hr.prototype[t]=function(n){n=n===e?1:gr(fs(n),0);var i=this.__filtered__&&!r?new Hr(this):this.clone();return i.__filtered__?i.__takeCount__=br(n,i.__takeCount__):i.__views__.push({size:br(n,p),type:t+(i.__dir__<0?"Right":"")}),i},Hr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Tt(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Hr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ua(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),Tt(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Hr.prototype[e]=function(){return this[r](1).value()[0]}})),Tt(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Hr.prototype[e]=function(){return this.__filtered__?new Hr(this):this[r](1)}})),Hr.prototype.compact=function(){return this.filter(nu)},Hr.prototype.find=function(e){return this.filter(e).head()},Hr.prototype.findLast=function(e){return this.reverse().find(e)},Hr.prototype.invokeMap=Zn((function(e,t){return"function"==typeof e?new Hr(this):this.map((function(r){return kn(r,e,t)}))})),Hr.prototype.reject=function(e){return this.filter(Fo(ua(e)))},Hr.prototype.slice=function(t,r){t=fs(t);var n=this;return n.__filtered__&&(t>0||r<0)?new Hr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),r!==e&&(n=(r=fs(r))<0?n.dropRight(-r):n.take(r-t)),n)},Hr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hr.prototype.toArray=function(){return this.take(p)},wn(Hr.prototype,(function(t,r){var n=/^(?:filter|find|map|reject)|While$/.test(r),i=/^(?:head|last)$/.test(r),a=Lr[i?"take"+("last"==r?"Right":""):r],o=i||/^find/.test(r);a&&(Lr.prototype[r]=function(){var r=this.__wrapped__,s=i?[1]:arguments,u=r instanceof Hr,c=s[0],d=u||qo(r),l=function(e){var t=a.apply(Lr,Nt([e],s));return i&&p?t[0]:t};d&&n&&"function"==typeof c&&1!=c.length&&(u=d=!1);var p=this.__chain__,h=!!this.__actions__.length,f=o&&!p,m=u&&!h;if(!o&&d){r=m?r:new Hr(this);var y=t.apply(r,s);return y.__actions__.push({func:ho,args:[l],thisArg:e}),new Jr(y,p)}return f&&m?t.apply(this,s):(y=this.thru(l),f?i?y.value()[0]:y.value():y)})})),Tt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ke[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Lr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(qo(i)?i:[],e)}return this[r]((function(r){return t.apply(qo(r)?r:[],e)}))}})),wn(Hr.prototype,(function(e,t){var r=Lr[t];if(r){var n=r.name+"";Fe.call(kr,n)||(kr[n]=[]),kr[n].push({name:t,func:r})}})),kr[Ui(e,2).name]=[{name:"wrapper",func:e}],Hr.prototype.clone=function(){var e=new Hr(this.__wrapped__);return e.__actions__=Ri(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ri(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ri(this.__views__),e},Hr.prototype.reverse=function(){if(this.__filtered__){var e=new Hr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=qo(e),n=t<0,i=r?e.length:0,a=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var a=r[n],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=br(t,e+o);break;case"takeRight":e=gr(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,c=n?s:o-1,d=this.__iteratees__,l=d.length,p=0,h=br(u,this.__takeCount__);if(!r||!n&&i==u&&h==u)return fi(e,this.__actions__);var f=[];e:for(;u--&&p<h;){for(var m=-1,y=e[c+=t];++m<l;){var g=d[m],b=g.iteratee,v=g.type,w=b(y);if(2==v)y=w;else if(!w){if(1==v)continue e;break e}}f[p++]=y}return f},Lr.prototype.at=fo,Lr.prototype.chain=function(){return po(this)},Lr.prototype.commit=function(){return new Jr(this.value(),this.__chain__)},Lr.prototype.next=function(){this.__values__===e&&(this.__values__=ps(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?e:this.__values__[this.__index__++]}},Lr.prototype.plant=function(t){for(var r,n=this;n instanceof zr;){var i=Ma(n);i.__index__=0,i.__values__=e,r?a.__wrapped__=i:r=i;var a=i;n=n.__wrapped__}return a.__wrapped__=t,r},Lr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Hr){var r=t;return this.__actions__.length&&(r=new Hr(this)),(r=r.reverse()).__actions__.push({func:ho,args:[Qa],thisArg:e}),new Jr(r,this.__chain__)}return this.thru(Qa)},Lr.prototype.toJSON=Lr.prototype.valueOf=Lr.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},Lr.prototype.first=Lr.prototype.head,et&&(Lr.prototype[et]=function(){return this}),Lr}();ht?((ht.exports=hr)._=hr,pt._=hr):lt._=hr}.call(commonjsGlobal$1);var mapObj={exports:{}};const isObject$c=e=>"object"==typeof e&&null!==e,mapObjectSkip=Symbol("skip"),isObjectCustom=e=>isObject$c(e)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof Date),mapObject=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new WeakMap;if(r={deep:!1,target:{},...r},n.has(e))return n.get(e);n.set(e,r.target);const{target:i}=r;delete r.target;const a=e=>e.map((e=>isObjectCustom(e)?mapObject(e,t,r,n):e));if(Array.isArray(e))return a(e);for(const[o,s]of Object.entries(e)){const u=t(o,s,e);if(u===mapObjectSkip)continue;let[c,d,{shouldRecurse:l=!0}={}]=u;"__proto__"!==c&&(r.deep&&l&&isObjectCustom(d)&&(d=Array.isArray(d)?a(d):mapObject(d,t,r,n)),i[c]=d)}return i};mapObj.exports=(e,t,r)=>{if(!isObject$c(e))throw new TypeError(`Expected an object, got \`${e}\` (${typeof e})`);return mapObject(e,t,r)},mapObj.exports.mapObjectSkip=mapObjectSkip;var __assign$3=function(){return __assign$3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$3.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var __assign$2=function(){return __assign$2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$2.apply(this,arguments)};function lowerCase$1(e){return e.toLowerCase()}"function"==typeof SuppressedError&&SuppressedError;var DEFAULT_SPLIT_REGEXP$1=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],DEFAULT_STRIP_REGEXP$1=/[^A-Z0-9]+/gi;function noCase$1(e,t){void 0===t&&(t={});for(var r=t.splitRegexp,n=void 0===r?DEFAULT_SPLIT_REGEXP$1:r,i=t.stripRegexp,a=void 0===i?DEFAULT_STRIP_REGEXP$1:i,o=t.transform,s=void 0===o?lowerCase$1:o,u=t.delimiter,c=void 0===u?" ":u,d=replace$1(replace$1(e,n,"$1\0$2"),a,"\0"),l=0,p=d.length;"\0"===d.charAt(l);)l++;for(;"\0"===d.charAt(p-1);)p--;return d.slice(l,p).split("\0").map(s).join(c)}function replace$1(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce((function(e,t){return e.replace(t,r)}),e)}function dotCase$1(e,t){return void 0===t&&(t={}),noCase$1(e,__assign$2({delimiter:"."},t))}function snakeCase$2(e,t){return void 0===t&&(t={}),dotCase$1(e,__assign$3({delimiter:"_"},t))}var dist_es2015=Object.freeze({__proto__:null,snakeCase:snakeCase$2}),require$$1$1=getAugmentedNamespace(dist_es2015);const map=mapObj.exports,{snakeCase:snakeCase$1}=require$$1$1;var snakecaseKeys=function(e,t){return t=Object.assign({deep:!0,exclude:[],parsingOptions:{}},t),map(e,(function(e,r){return[matches(t.exclude,e)?e:snakeCase$1(e,t.parsingOptions),r]}),t)},Action,EntityType,BlockConfirmation;function matches(e,t){return e.some((function(e){return"string"==typeof e?e===t:e.test(t)}))}!function(e){e.CREATE="Create",e.UPDATE="Update",e.DELETE="Delete",e.VERIFY="Verify",e.FOLLOW="Follow",e.UNFOLLOW="Unfollow",e.SAVE="Save",e.SHARE="Share",e.UNSAVE="Unsave",e.REPOST="Repost",e.UNREPOST="Unrepost",e.SUBSCRIBE="Subscribe",e.UNSUBSCRIBE="Unsubscribe",e.VIEW="View",e.VIEW_PLAYLIST="ViewPlaylist",e.APPROVE="Approve",e.REJECT="Reject",e.DOWNLOAD="Download",e.REACT="React",e.UNREACT="Unreact",e.REPORT="Report",e.PIN="Pin",e.UNPIN="Unpin",e.MUTE="Mute",e.UNMUTE="Unmute",e.ADD_EMAIL="AddEmail",e.GRANT_ACCESS="GrantAccess"}(Action||(Action={})),function(e){e.PLAYLIST="Playlist",e.TRACK="Track",e.USER="User",e.USER_REPLICA_SET="UserReplicaSet",e.NOTIFICATION="Notification",e.DEVELOPER_APP="DeveloperApp",e.GRANT="Grant",e.DASHBOARD_WALLET_USER="DashboardWalletUser",e.TIP="Tip",e.COMMENT="Comment",e.ENCRYPTED_EMAIL="EncryptedEmail",e.EMAIL_ACCESS="EmailAccess",e.ASSOCIATED_WALLET="AssociatedWallet",e.COLLECTIBLES="Collectibles",e.EVENT="Event"}(EntityType||(EntityType={})),function(e){e.CONFIRMED="CONFIRMED",e.DENIED="DENIED",e.UNKNOWN="UNKNOWN"}(BlockConfirmation||(BlockConfirmation={}));const keepUnique=e=>[...new Set(e)],withoutChars=(e,t)=>e.filter((e=>!t.includes(e))),onlyChars=(e,t)=>e.filter((e=>t.includes(e))),isIntegerNumber=e=>"bigint"==typeof e||!Number.isNaN(Number(e))&&Math.floor(Number(e))===e,isPositiveAndFinite=e=>"bigint"==typeof e||e>=0&&Number.isSafeInteger(e);function shuffle(e,t){if(0===t.length)return e;let r;const n=[...e];for(let e=n.length-1,i=0,a=0;e>0;e--,i++){i%=t.length,a+=r=t[i].codePointAt(0);const o=(r+i+a)%e,s=n[e],u=n[o];n[o]=s,n[e]=u}return n}const toAlphabet=(e,t)=>{const r=[];let n=e;if("bigint"==typeof n){const e=BigInt(t.length);do{r.unshift(t[Number(n%e)]),n/=e}while(n>BigInt(0))}else do{r.unshift(t[n%t.length]),n=Math.floor(n/t.length)}while(n>0);return r},fromAlphabet=(e,t)=>e.reduce(((r,n)=>{const i=t.indexOf(n);if(-1===i)throw new Error(`The provided ID (${e.join("")}) is invalid, as it contains characters that do not exist in the alphabet (${t.join("")})`);if("bigint"==typeof r)return r*BigInt(t.length)+BigInt(i);const a=r*t.length+i;if(Number.isSafeInteger(a))return a;if("function"==typeof BigInt)return BigInt(r)*BigInt(t.length)+BigInt(i);throw new Error("Unable to decode the provided string, due to lack of support for BigInt numbers in the current environment")}),0),safeToParseNumberRegExp=/^\+?\d+$/,safeParseInt10=e=>safeToParseNumberRegExp.test(e)?Number.parseInt(e,10):Number.NaN,splitAtIntervalAndMap=(e,t,r)=>Array.from({length:Math.ceil(e.length/t)},((n,i)=>r(e.slice(i*t,(i+1)*t)))),makeAnyOfCharsRegExp=e=>new RegExp(e.map((e=>escapeRegExp(e))).sort(((e,t)=>t.length-e.length)).join("|")),makeAtLeastSomeCharRegExp=e=>new RegExp(`^[${e.map((e=>escapeRegExp(e))).sort(((e,t)=>t.length-e.length)).join("")}]+$`),escapeRegExp=e=>e.replace(/[\s#$()*+,.?[\\\]^{|}-]/g,"\\$&"),MIN_ALPHABET_LENGTH=16,SEPARATOR_DIV=3.5,GUARD_DIV=12,HEXADECIMAL=16,SPLIT_AT_EVERY_NTH=12,MODULO_PART=100;class Hashids{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"cfhistuCFHISTU";if(this.minLength=t,"number"!=typeof t)throw new TypeError(`Hashids: Provided 'minLength' has to be a number (is ${typeof t})`);if("string"!=typeof e)throw new TypeError(`Hashids: Provided 'salt' has to be a string (is ${typeof e})`);if("string"!=typeof r)throw new TypeError(`Hashids: Provided alphabet has to be a string (is ${typeof r})`);const i=Array.from(e),a=Array.from(r),o=Array.from(n);this.salt=i;const s=keepUnique(a);if(s.length<MIN_ALPHABET_LENGTH)throw new Error(`Hashids: alphabet must contain at least ${MIN_ALPHABET_LENGTH} unique characters, provided: ${s.join("")}`);this.alphabet=withoutChars(s,o);const u=onlyChars(o,s);let c,d;this.seps=shuffle(u,i),(0===this.seps.length||this.alphabet.length/this.seps.length>SEPARATOR_DIV)&&(c=Math.ceil(this.alphabet.length/SEPARATOR_DIV),c>this.seps.length&&(d=c-this.seps.length,this.seps.push(...this.alphabet.slice(0,d)),this.alphabet=this.alphabet.slice(d))),this.alphabet=shuffle(this.alphabet,i);const l=Math.ceil(this.alphabet.length/GUARD_DIV);this.alphabet.length<3?(this.guards=this.seps.slice(0,l),this.seps=this.seps.slice(l)):(this.guards=this.alphabet.slice(0,l),this.alphabet=this.alphabet.slice(l)),this.guardsRegExp=makeAnyOfCharsRegExp(this.guards),this.sepsRegExp=makeAnyOfCharsRegExp(this.seps),this.allowedCharsRegExp=makeAtLeastSomeCharRegExp([...this.alphabet,...this.guards,...this.seps])}encode(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=Array.isArray(e)?e:[...null!=e?[e]:[],...r];return 0===i.length?"":(i.every(isIntegerNumber)||(i=i.map((e=>"bigint"==typeof e||"number"==typeof e?e:safeParseInt10(String(e))))),i.every(isPositiveAndFinite)?this._encode(i).join(""):"")}decode(e){return e&&"string"==typeof e&&0!==e.length?this._decode(e):[]}encodeHex(e){let t=e;switch(typeof t){case"bigint":t=t.toString(HEXADECIMAL);break;case"string":if(!/^[\dA-Fa-f]+$/.test(t))return"";break;default:throw new Error(`Hashids: The provided value is neither a string, nor a BigInt (got: ${typeof t})`)}const r=splitAtIntervalAndMap(t,SPLIT_AT_EVERY_NTH,(e=>Number.parseInt(`1${e}`,16)));return this.encode(r)}decodeHex(e){return this.decode(e).map((e=>e.toString(HEXADECIMAL).slice(1))).join("")}isValidId(e){return this.allowedCharsRegExp.test(e)}_encode(e){let{alphabet:t}=this;const r=e.reduce(((e,t,r)=>e+("bigint"==typeof t?Number(t%BigInt(r+MODULO_PART)):t%(r+MODULO_PART))),0);let n=[t[r%t.length]];const i=[...n],{seps:a}=this,{guards:o}=this;if(e.forEach(((r,o)=>{const s=i.concat(this.salt,t);t=shuffle(t,s);const u=toAlphabet(r,t);if(n.push(...u),o+1<e.length){const e=u[0].codePointAt(0)+o,t="bigint"==typeof r?Number(r%BigInt(e)):r%e;n.push(a[t%a.length])}})),n.length<this.minLength){const e=(r+n[0].codePointAt(0))%o.length;if(n.unshift(o[e]),n.length<this.minLength){const e=(r+n[2].codePointAt(0))%o.length;n.push(o[e])}}const s=Math.floor(t.length/2);for(;n.length<this.minLength;){t=shuffle(t,t),n.unshift(...t.slice(s)),n.push(...t.slice(0,s));const e=n.length-this.minLength;if(e>0){const t=e/2;n=n.slice(t,t+this.minLength)}}return n}_decode(e){if(!this.isValidId(e))throw new Error(`The provided ID (${e}) is invalid, as it contains characters that do not exist in the alphabet (${this.guards.join("")}${this.seps.join("")}${this.alphabet.join("")})`);const t=e.split(this.guardsRegExp),r=t[3===t.length||2===t.length?1:0];if(0===r.length)return[];const n=r[Symbol.iterator]().next().value,i=r.slice(n.length).split(this.sepsRegExp);let a=this.alphabet;const o=[];for(const e of i){const t=shuffle(a,[n,...this.salt,...a].slice(0,a.length));o.push(fromAlphabet(Array.from(e),t)),a=t}return this._encode(o).join("")!==e?[]:o}}const HASH_SALT="azowernasdfoia",MIN_LENGTH=5,hashids=new Hashids(HASH_SALT,MIN_LENGTH),decodeHashId=e=>{try{const t=hashids.decode(e);if(!t.length)return null;const r=Number(t[0]);return isNaN(r)?null:r}catch(e){return null}},encodeHashId=e=>{try{if(null===e)return null;return hashids.encode(e)}catch(e){return null}};var retry$2={};function RetryOperation(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var retry_operation=RetryOperation;RetryOperation.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},RetryOperation.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},RetryOperation.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),r=this._timeouts.shift()}var n=this,i=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),r);return this._options.unref&&i.unref(),!0},RetryOperation.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},RetryOperation.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},RetryOperation.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},RetryOperation.prototype.start=RetryOperation.prototype.try,RetryOperation.prototype.errors=function(){return this._errors},RetryOperation.prototype.attempts=function(){return this._attempts},RetryOperation.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],a=i.message,o=(e[a]||0)+1;e[a]=o,o>=r&&(t=i,r=o)}return t},function(e){var t=retry_operation;e.operation=function(r){var n=e.timeouts(r);return new t(n,{forever:r&&r.forever,unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},e.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<t.retries;i++)n.push(this.createTimeout(i,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(i,t)),n.sort((function(e,t){return e-t})),n},e.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*t.minTimeout*Math.pow(t.factor,e));return n=Math.min(n,t.maxTimeout)},e.wrap=function(t,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var i in n=[],t)"function"==typeof t[i]&&n.push(i);for(var a=0;a<n.length;a++){var o=n[a],s=t[o];t[o]=function(n){var i=e.operation(r),a=Array.prototype.slice.call(arguments,1),o=a.pop();a.push((function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),o.apply(this,arguments))})),i.attempt((function(){n.apply(t,a)}))}.bind(t,s),t[o].options=r}}}(retry$2);var retry$1=retry$2,retrier=retry$1;function retry(e,t){return new Promise((function(r,n){var i=t||{};"randomize"in i||(i.randomize=!0);var a=retrier.operation(i);function o(e){n(e||new Error("Aborted"))}function s(e,t){e.bail?o(e):a.retry(e)?i.onRetry&&i.onRetry(e,t):n(a.mainError())}a.attempt((function(t){var n;try{n=e(o,t)}catch(e){return void s(e,t)}Promise.resolve(n).then(r).catch((function(e){s(e,t)}))}))}))}var lib$5=retry;const retry3=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{};return await lib$5(e,{minTimeout:500,maxTimeout:4e3,factor:3,retries:3,onRetry:t})};class TrackUploadHelper extends BaseAPI$1{async generateId(e){const t=await this.request({path:`/${e}s/unclaimed_id`,method:"GET",headers:{},query:{noCache:Math.floor(1e3*Math.random()).toString()}}),{data:r}=await t.json(),n=decodeHashId(r);if(null===n)throw new Error(`Could not generate ${e} id`);return n}transformTrackUploadMetadata(e,t){var r;const n={...e,ownerId:t},i=n.isStreamGated,a="usdc_purchase"in(null!==(r=n.streamConditions)&&void 0!==r?r:{}),o=n.isUnlisted;return i&&!a&&n.fieldVisibility&&(n.fieldVisibility.remixes=!1),o||(n.fieldVisibility={...n.fieldVisibility,genre:!0,mood:!0,tags:!0,share:!0,playCount:!0}),n}populateTrackMetadataWithUploadResponse(e,t,r){var n,i;return{...e,trackSegments:[],trackCid:t.results[320],previewCid:void 0!==e.previewStartSeconds&&null!==e.previewStartSeconds?t.results[`320_preview|${e.previewStartSeconds}`]:e.previewCid,origFileCid:t.orig_file_cid,origFilename:t.orig_filename||e.origFilename,audioUploadId:t.id,coverArtSizes:null==r?void 0:r.id,duration:parseInt(t.probe.format.duration,10),bpm:null!==(n=t.audio_analysis_results)&&void 0!==n&&n.bpm?t.audio_analysis_results.bpm:e.bpm,musicalKey:null!==(i=t.audio_analysis_results)&&void 0!==i&&i.key?t.audio_analysis_results.key:e.musicalKey,audioAnalysisErrorCount:t.audio_analysis_error_count||0}}extractMediorumUploadOptions(e){const t={};return void 0!==e.previewStartSeconds&&null!==e.previewStartSeconds&&(t.previewStartSeconds=e.previewStartSeconds.toString()),e.placementHosts&&(t.placement_hosts=e.placementHosts),t}}var util$1,objectUtil;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(util$1||(util$1={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(objectUtil||(objectUtil={}));const ZodParsedType=util$1.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=e=>{switch(typeof e){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(e)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(e)?ZodParsedType.array:null===e?ZodParsedType.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?ZodParsedType.promise:"undefined"!=typeof Map&&e instanceof Map?ZodParsedType.map:"undefined"!=typeof Set&&e instanceof Set?ZodParsedType.set:"undefined"!=typeof Date&&e instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util$1.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){const r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,util$1.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}ZodError.create=e=>new ZodError(e);const errorMap=(e,t)=>{let r;switch(e.code){case ZodIssueCode.invalid_type:r=e.received===ZodParsedType.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,util$1.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${util$1.joinValues(e.keys,", ")}`;break;case ZodIssueCode.invalid_union:r="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${util$1.joinValues(e.options)}`;break;case ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${util$1.joinValues(e.options)}, received '${e.received}'`;break;case ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case ZodIssueCode.invalid_date:r="Invalid date";break;case ZodIssueCode.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:util$1.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case ZodIssueCode.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case ZodIssueCode.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case ZodIssueCode.custom:r="Invalid input";break;case ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case ZodIssueCode.not_finite:r="Number must be finite";break;default:r=t.defaultError,util$1.assertNever(e)}return{message:r}};let overrideErrorMap=errorMap;function setErrorMap(e){overrideErrorMap=e}function getErrorMap(){return overrideErrorMap}const makeIssue=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,a=[...r,...i.path||[]],o={...i,path:a};let s="";const u=n.filter((e=>!!e)).slice().reverse();for(const e of u)s=e(o,{data:t,defaultError:s}).message;return{...i,path:a,message:i.message||s}},EMPTY_PATH=[];function addIssueToContext(e,t){const r=makeIssue({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,getErrorMap(),errorMap].filter((e=>!!e))});e.common.issues.push(r)}class ParseStatus{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return INVALID;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t)r.push({key:await e.key,value:await e.value});return ParseStatus.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:i}=n;if("aborted"===t.status)return INVALID;if("aborted"===i.status)return INVALID;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),(void 0!==i.value||n.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=e=>({status:"dirty",value:e}),OK=e=>({status:"valid",value:e}),isAborted=e=>"aborted"===e.status,isDirty=e=>"dirty"===e.status,isValid=e=>"valid"===e.status,isAsync=e=>"undefined"!=typeof Promise&&e instanceof Promise;var errorUtil;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(errorUtil||(errorUtil={}));class ParseInputLazyPath{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(e,t)=>{if(isValid(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ZodError(e.common.issues);return this._error=t,this._error}}};function processCreateParams(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=n?n:t.defaultError}:{message:null!=r?r:t.defaultError},description:i}}class ZodType{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(isAsync(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},i=this._parseSync({data:e,path:n.path,parent:n});return handleResult(n,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(isAsync(n)?n:Promise.resolve(n));return handleResult(r,i)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,n)=>{const i=e(t),a=()=>n.addIssue({code:ZodIssueCode.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(a(),!1))):!!i||(a(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1)))}_refinement(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:t,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:t,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[a-z][a-z0-9]*$/,ulidRegex=/[0-9A-HJKMNP-TV-Z]{26}/,uuidRegex=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,emailRegex=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,emojiRegex=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,ipv4Regex=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,datetimeRegex=e=>e.precision?e.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):0===e.precision?e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function isValidIP(e,t){return!("v4"!==t&&t||!ipv4Regex.test(e))||!("v6"!==t&&t||!ipv6Regex.test(e))}class ZodString extends ZodType{constructor(){super(...arguments),this._regex=(e,t,r)=>this.refinement((t=>e.test(t)),{validation:t,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(r)}),this.nonempty=e=>this.min(1,errorUtil.errToObj(e)),this.trim=()=>new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==ZodParsedType.string){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:t.parsedType}),INVALID}const t=new ParseStatus;let r;for(const n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("max"===n.kind)e.data.length>n.value&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("length"===n.kind){const i=e.data.length>n.value,a=e.data.length<n.value;(i||a)&&(r=this._getOrReturnCtx(e,r),i?addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):a&&addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),t.dirty())}else if("email"===n.kind)emailRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"email",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty());else if("emoji"===n.kind)emojiRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"emoji",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty());else if("uuid"===n.kind)uuidRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"uuid",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty());else if("cuid"===n.kind)cuidRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"cuid",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty());else if("cuid2"===n.kind)cuid2Regex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty());else if("ulid"===n.kind)ulidRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"ulid",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty());else if("url"===n.kind)try{new URL(e.data)}catch(i){r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"url",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty()}else if("regex"===n.kind){n.regex.lastIndex=0;n.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"regex",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty())}else if("trim"===n.kind)e.data=e.data.trim();else if("includes"===n.kind)e.data.includes(n.value,n.position)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),t.dirty());else if("toLowerCase"===n.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===n.kind)e.data=e.data.toUpperCase();else if("startsWith"===n.kind)e.data.startsWith(n.value)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.invalid_string,validation:{startsWith:n.value},message:n.message}),t.dirty());else if("endsWith"===n.kind)e.data.endsWith(n.value)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.invalid_string,validation:{endsWith:n.value},message:n.message}),t.dirty());else if("datetime"===n.kind){datetimeRegex(n).test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.invalid_string,validation:"datetime",message:n.message}),t.dirty())}else"ip"===n.kind?isValidIP(e.data,n.version)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"ip",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty()):util$1.assertNever(n);return{status:t.value,value:e.data}}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...errorUtil.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...errorUtil.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...errorUtil.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...errorUtil.errToObj(t)})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function floatSafeRemainder(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}ZodString.create=e=>{var t;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...processCreateParams(e)})};class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==ZodParsedType.number){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:t.parsedType}),INVALID}let t;const r=new ParseStatus;for(const n of this._def.checks)if("int"===n.kind)util$1.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty());else if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else"multipleOf"===n.kind?0!==floatSafeRemainder(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.not_finite,message:n.message}),r.dirty()):util$1.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,errorUtil.toString(t))}setLimit(e,t,r,n){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:errorUtil.toString(n)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&util$1.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ZodNumber.create=e=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...processCreateParams(e)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==ZodParsedType.bigint){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:t.parsedType}),INVALID}let t;const r=new ParseStatus;for(const n of this._def.checks)if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):util$1.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,errorUtil.toString(t))}setLimit(e,t,r,n){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:errorUtil.toString(n)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ZodBigInt.create=e=>{var t;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...processCreateParams(e)})};class ZodBoolean extends ZodType{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==ZodParsedType.boolean){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:t.parsedType}),INVALID}return OK(e.data)}}ZodBoolean.create=e=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...processCreateParams(e)});class ZodDate extends ZodType{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==ZodParsedType.date){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:t.parsedType}),INVALID}if(isNaN(e.data.getTime())){return addIssueToContext(this._getOrReturnCtx(e),{code:ZodIssueCode.invalid_date}),INVALID}const t=new ParseStatus;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):util$1.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:errorUtil.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ZodDate.create=e=>new ZodDate({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(e)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.symbol){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:t.parsedType}),INVALID}return OK(e.data)}}ZodSymbol.create=e=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(e)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:t.parsedType}),INVALID}return OK(e.data)}}ZodUndefined.create=e=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(e)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.null){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:t.parsedType}),INVALID}return OK(e.data)}}ZodNull.create=e=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(e)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=e=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(e)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=e=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(e)});class ZodNever extends ZodType{_parse(e){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:t.parsedType}),INVALID}}ZodNever.create=e=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(e)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:t.parsedType}),INVALID}return OK(e.data)}}ZodVoid.create=e=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(e)});class ZodArray extends ZodType{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==ZodParsedType.array)return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:t.parsedType}),INVALID;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(addIssueToContext(t,{code:e?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(addIssueToContext(t,{code:ZodIssueCode.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(addIssueToContext(t,{code:ZodIssueCode.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>n.type._parseAsync(new ParseInputLazyPath(t,e,t.path,r))))).then((e=>ParseStatus.mergeArray(r,e)));const i=[...t.data].map(((e,r)=>n.type._parseSync(new ParseInputLazyPath(t,e,t.path,r))));return ParseStatus.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new ZodArray({...this._def,minLength:{value:e,message:errorUtil.toString(t)}})}max(e,t){return new ZodArray({...this._def,maxLength:{value:e,message:errorUtil.toString(t)}})}length(e,t){return new ZodArray({...this._def,exactLength:{value:e,message:errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}function deepPartialify(e){if(e instanceof ZodObject){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=ZodOptional.create(deepPartialify(n))}return new ZodObject({...e._def,shape:()=>t})}return e instanceof ZodArray?new ZodArray({...e._def,type:deepPartialify(e.element)}):e instanceof ZodOptional?ZodOptional.create(deepPartialify(e.unwrap())):e instanceof ZodNullable?ZodNullable.create(deepPartialify(e.unwrap())):e instanceof ZodTuple?ZodTuple.create(e.items.map((e=>deepPartialify(e)))):e}ZodArray.create=(e,t)=>new ZodArray({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(t)});class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=util$1.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==ZodParsedType.object){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:t.parsedType}),INVALID}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof ZodNever&&"strip"===this._def.unknownKeys))for(const e in r.data)i.includes(e)||a.push(e);const o=[];for(const e of i){const t=n[e],i=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new ParseInputLazyPath(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof ZodNever){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of a)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)a.length>0&&(addIssueToContext(r,{code:ZodIssueCode.unrecognized_keys,keys:a}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of a){const n=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new ParseInputLazyPath(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of o){const r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>ParseStatus.mergeObjectSync(t,e))):ParseStatus.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,a,o;const s=null!==(a=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==a?a:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=errorUtil.errToObj(e).message)&&void 0!==o?o:s}:{message:s}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const t={};return util$1.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new ZodObject({...this._def,shape:()=>t})}omit(e){const t={};return util$1.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new ZodObject({...this._def,shape:()=>t})}deepPartial(){return deepPartialify(this)}partial(e){const t={};return util$1.objectKeys(this.shape).forEach((r=>{const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()})),new ZodObject({...this._def,shape:()=>t})}required(e){const t={};return util$1.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof ZodOptional;)e=e._def.innerType;t[r]=e}})),new ZodObject({...this._def,shape:()=>t})}keyof(){return createZodEnum(util$1.objectKeys(this.shape))}}ZodObject.create=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)}),ZodObject.strictCreate=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)}),ZodObject.lazycreate=(e,t)=>new ZodObject({shape:e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)});class ZodUnion extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new ZodError(e.ctx.common.issues)));return addIssueToContext(t,{code:ZodIssueCode.invalid_union,unionErrors:r}),INVALID}));{let e;const n=[];for(const i of r){const r={...t,common:{...t.common,issues:[]},parent:null},a=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=n.map((e=>new ZodError(e)));return addIssueToContext(t,{code:ZodIssueCode.invalid_union,unionErrors:i}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(e,t)=>new ZodUnion({options:e,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(t)});const getDiscriminator=e=>e instanceof ZodLazy?getDiscriminator(e.schema):e instanceof ZodEffects?getDiscriminator(e.innerType()):e instanceof ZodLiteral?[e.value]:e instanceof ZodEnum?e.options:e instanceof ZodNativeEnum?Object.keys(e.enum):e instanceof ZodDefault?getDiscriminator(e._def.innerType):e instanceof ZodUndefined?[void 0]:e instanceof ZodNull?[null]:null;class ZodDiscriminatedUnion extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ZodParsedType.object)return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:t.parsedType}),INVALID;const r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(addIssueToContext(t,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const r of t){const t=getDiscriminator(r.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(n.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...processCreateParams(r)})}}function mergeValues(e,t){const r=getParsedType(e),n=getParsedType(t);if(e===t)return{valid:!0,data:e};if(r===ZodParsedType.object&&n===ZodParsedType.object){const r=util$1.objectKeys(t),n=util$1.objectKeys(e).filter((e=>-1!==r.indexOf(e))),i={...e,...t};for(const r of n){const n=mergeValues(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(r===ZodParsedType.array&&n===ZodParsedType.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const i=mergeValues(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===ZodParsedType.date&&n===ZodParsedType.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(isAborted(e)||isAborted(n))return INVALID;const i=mergeValues(e.value,n.value);return i.valid?((isDirty(e)||isDirty(n))&&t.dirty(),{status:t.value,value:i.data}):(addIssueToContext(r,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>n(e,t))):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ZodIntersection.create=(e,t,r)=>new ZodIntersection({left:e,right:t,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(r)});class ZodTuple extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.array)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:r.parsedType}),INVALID;if(r.data.length<this._def.items.length)return addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&r.data.length>this._def.items.length&&(addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new ParseInputLazyPath(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(n).then((e=>ParseStatus.mergeArray(t,e))):ParseStatus.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:e,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(t)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.object)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:r.parsedType}),INVALID;const n=[],i=this._def.keyType,a=this._def.valueType;for(const e in r.data)n.push({key:i._parse(new ParseInputLazyPath(r,e,r.path,e)),value:a._parse(new ParseInputLazyPath(r,r.data[e],r.path,e))});return r.common.async?ParseStatus.mergeObjectAsync(t,n):ParseStatus.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new ZodRecord(t instanceof ZodType?{keyType:e,valueType:t,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(r)}:{keyType:ZodString.create(),valueType:e,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(t)})}}class ZodMap extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.map)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:r.parsedType}),INVALID;const n=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map((([e,t],a)=>({key:n._parse(new ParseInputLazyPath(r,e,r.path,[a,"key"])),value:i._parse(new ParseInputLazyPath(r,t,r.path,[a,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of a){const n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return INVALID;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of a){const n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return INVALID;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}ZodMap.create=(e,t,r)=>new ZodMap({valueType:t,keyType:e,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(r)});class ZodSet extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.set)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:r.parsedType}),INVALID;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function a(e){const r=new Set;for(const n of e){if("aborted"===n.status)return INVALID;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const o=[...r.data.values()].map(((e,t)=>i._parse(new ParseInputLazyPath(r,e,r.path,t))));return r.common.async?Promise.all(o).then((e=>a(e))):a(o)}min(e,t){return new ZodSet({...this._def,minSize:{value:e,message:errorUtil.toString(t)}})}max(e,t){return new ZodSet({...this._def,maxSize:{value:e,message:errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ZodSet.create=(e,t)=>new ZodSet({valueType:e,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(t)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ZodParsedType.function)return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:t.parsedType}),INVALID;function r(e,r){return makeIssue({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,getErrorMap(),errorMap].filter((e=>!!e)),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:r}})}function n(e,r){return makeIssue({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,getErrorMap(),errorMap].filter((e=>!!e)),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:r}})}const i={errorMap:t.common.contextualErrorMap},a=t.data;return this._def.returns instanceof ZodPromise?OK((async(...e)=>{const t=new ZodError([]),o=await this._def.args.parseAsync(e,i).catch((n=>{throw t.addIssue(r(e,n)),t})),s=await a(...o);return await this._def.returns._def.type.parseAsync(s,i).catch((e=>{throw t.addIssue(n(s,e)),t}))})):OK(((...e)=>{const t=this._def.args.safeParse(e,i);if(!t.success)throw new ZodError([r(e,t.error)]);const o=a(...t.data),s=this._def.returns.safeParse(o,i);if(!s.success)throw new ZodError([n(o,s.error)]);return s.data}))}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ZodFunction({...this._def,args:ZodTuple.create(e).rest(ZodUnknown.create())})}returns(e){return new ZodFunction({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ZodFunction({args:e||ZodTuple.create([]).rest(ZodUnknown.create()),returns:t||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(r)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ZodLazy.create=(e,t)=>new ZodLazy({getter:e,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(t)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{received:t.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}function createZodEnum(e,t){return new ZodEnum({values:e,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(t)})}ZodLiteral.create=(e,t)=>new ZodLiteral({value:e,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(t)});class ZodEnum extends ZodType{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return addIssueToContext(t,{expected:util$1.joinValues(r),received:t.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return addIssueToContext(t,{received:t.data,code:ZodIssueCode.invalid_enum_value,options:r}),INVALID}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return ZodEnum.create(e)}exclude(e){return ZodEnum.create(this.options.filter((t=>!e.includes(t))))}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(e){const t=util$1.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ZodParsedType.string&&r.parsedType!==ZodParsedType.number){const e=util$1.objectValues(t);return addIssueToContext(r,{expected:util$1.joinValues(e),received:r.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(-1===t.indexOf(e.data)){const e=util$1.objectValues(t);return addIssueToContext(r,{received:r.data,code:ZodIssueCode.invalid_enum_value,options:e}),INVALID}return OK(e.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(e,t)=>new ZodNativeEnum({values:e,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(t)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ZodParsedType.promise&&!1===t.common.async)return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:t.parsedType}),INVALID;const r=t.parsedType===ZodParsedType.promise?t.data:Promise.resolve(t.data);return OK(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}ZodPromise.create=(e,t)=>new ZodPromise({type:e,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(t)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null;if("preprocess"===n.type){const e=n.transform(r.data);return r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}const i={addIssue:e=>{addIssueToContext(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?INVALID:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?INVALID:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!isValid(e))return e;const a=n.transform(e.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>isValid(e)?Promise.resolve(n.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}util$1.assertNever(n)}}ZodEffects.create=(e,t,r)=>new ZodEffects({schema:e,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:t,...processCreateParams(r)}),ZodEffects.createWithPreprocess=(e,t,r)=>new ZodEffects({schema:t,effect:{type:"preprocess",transform:e},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(r)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(e,t)=>new ZodOptional({innerType:e,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(t)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(e,t)=>new ZodNullable({innerType:e,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(t)});class ZodDefault extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ZodDefault.create=(e,t)=>new ZodDefault({innerType:e,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...processCreateParams(t)});class ZodCatch extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return isAsync(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ZodError(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(e,t)=>new ZodCatch({innerType:e,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...processCreateParams(t)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.nan){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:t.parsedType}),INVALID}return{status:"valid",value:e.data}}}ZodNaN.create=e=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(e)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?INVALID:"dirty"===e.status?(t.dirty(),DIRTY(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new ZodPipeline({in:e,out:t,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}const custom$1=(e,t={},r)=>e?ZodAny.create().superRefine(((n,i)=>{var a,o;if(!e(n)){const e="function"==typeof t?t(n):"string"==typeof t?{message:t}:t,s=null===(o=null!==(a=e.fatal)&&void 0!==a?a:r)||void 0===o||o,u="string"==typeof e?{message:e}:e;i.addIssue({code:"custom",...u,fatal:s})}})):ZodAny.create(),late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline"}(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(e,t={message:`Input not instance of ${e.name}`})=>custom$1((t=>t instanceof e),t),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce$3={string:e=>ZodString.create({...e,coerce:!0}),number:e=>ZodNumber.create({...e,coerce:!0}),boolean:e=>ZodBoolean.create({...e,coerce:!0}),bigint:e=>ZodBigInt.create({...e,coerce:!0}),date:e=>ZodDate.create({...e,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap:setErrorMap,getErrorMap:getErrorMap,makeIssue:makeIssue,EMPTY_PATH:EMPTY_PATH,addIssueToContext:addIssueToContext,ParseStatus:ParseStatus,INVALID:INVALID,DIRTY:DIRTY,OK:OK,isAborted:isAborted,isDirty:isDirty,isValid:isValid,isAsync:isAsync,get util(){return util$1},get objectUtil(){return objectUtil},ZodParsedType:ZodParsedType,getParsedType:getParsedType,ZodType:ZodType,ZodString:ZodString,ZodNumber:ZodNumber,ZodBigInt:ZodBigInt,ZodBoolean:ZodBoolean,ZodDate:ZodDate,ZodSymbol:ZodSymbol,ZodUndefined:ZodUndefined,ZodNull:ZodNull,ZodAny:ZodAny,ZodUnknown:ZodUnknown,ZodNever:ZodNever,ZodVoid:ZodVoid,ZodArray:ZodArray,ZodObject:ZodObject,ZodUnion:ZodUnion,ZodDiscriminatedUnion:ZodDiscriminatedUnion,ZodIntersection:ZodIntersection,ZodTuple:ZodTuple,ZodRecord:ZodRecord,ZodMap:ZodMap,ZodSet:ZodSet,ZodFunction:ZodFunction,ZodLazy:ZodLazy,ZodLiteral:ZodLiteral,ZodEnum:ZodEnum,ZodNativeEnum:ZodNativeEnum,ZodPromise:ZodPromise,ZodEffects:ZodEffects,ZodTransformer:ZodEffects,ZodOptional:ZodOptional,ZodNullable:ZodNullable,ZodDefault:ZodDefault,ZodCatch:ZodCatch,ZodNaN:ZodNaN,BRAND:BRAND,ZodBranded:ZodBranded,ZodPipeline:ZodPipeline,custom:custom$1,Schema:ZodType,ZodSchema:ZodType,late:late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce:coerce$3,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean:oboolean,onumber:onumber,optional:optionalType,ostring:ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER:NEVER,ZodIssueCode:ZodIssueCode,quotelessJson:quotelessJson,ZodError:ZodError});const DDEXResourceContributor=z.object({name:z.string(),roles:z.array(z.string()),sequence_number:z.optional(z.number())}).strict(),DDEXCopyright=z.object({year:z.string(),text:z.string()}).strict(),DDEXRightsController=z.object({name:z.string(),roles:z.array(z.string()),rights_share_unknown:z.optional(z.string())}).strict();var lib$4={},FsPromise={},_polyfillNode_fs={},_polyfillNode_fs$1=Object.freeze({__proto__:null,default:_polyfillNode_fs}),require$$0$1=getAugmentedNamespace(_polyfillNode_fs$1);Object.defineProperty(FsPromise,"__esModule",{value:!0}),FsPromise.readFile=FsPromise.writeFileSync=FsPromise.writeFile=FsPromise.read=FsPromise.open=FsPromise.close=FsPromise.stat=FsPromise.createReadStream=FsPromise.pathExists=void 0;const fs$1=require$$0$1;async function stat(e){return new Promise(((t,r)=>{fs$1.stat(e,((e,n)=>{e?r(e):t(n)}))}))}async function close(e){return new Promise(((t,r)=>{fs$1.close(e,(e=>{e?r(e):t()}))}))}async function open(e,t){return new Promise(((r,n)=>{fs$1.open(e,t,((e,t)=>{e?n(e):r(t)}))}))}async function read$1(e,t,r,n,i){return new Promise(((a,o)=>{fs$1.read(e,t,r,n,i,((e,t,r)=>{e?o(e):a({bytesRead:t,buffer:r})}))}))}async function writeFile(e,t){return new Promise(((r,n)=>{fs$1.writeFile(e,t,(e=>{e?n(e):r()}))}))}function writeFileSync(e,t){fs$1.writeFileSync(e,t)}async function readFile(e){return new Promise(((t,r)=>{fs$1.readFile(e,((e,n)=>{e?r(e):t(n)}))}))}FsPromise.pathExists=fs$1.existsSync,FsPromise.createReadStream=fs$1.createReadStream,FsPromise.stat=stat,FsPromise.close=close,FsPromise.open=open,FsPromise.read=read$1,FsPromise.writeFile=writeFile,FsPromise.writeFileSync=writeFileSync,FsPromise.readFile=readFile;var core$2={},ReadStreamTokenizer$1={},AbstractTokenizer$1={},lib$3={},EndOfFileStream={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EndOfStreamError=e.defaultMessages=void 0,e.defaultMessages="End-Of-Stream";class t extends Error{constructor(){super(e.defaultMessages)}}e.EndOfStreamError=t}(EndOfFileStream);var StreamReader={},Deferred$1={};Object.defineProperty(Deferred$1,"__esModule",{value:!0}),Deferred$1.Deferred=void 0;class Deferred{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise(((e,t)=>{this.reject=t,this.resolve=e}))}}Deferred$1.Deferred=Deferred,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StreamReader=e.EndOfStreamError=void 0;const t=EndOfFileStream,r=Deferred$1;var n=EndOfFileStream;Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return n.EndOfStreamError}});e.StreamReader=class{constructor(e){if(this.s=e,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!e.read||!e.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",(()=>this.reject(new t.EndOfStreamError))),this.s.once("error",(e=>this.reject(e))),this.s.once("close",(()=>this.reject(new Error("Stream closed"))))}async peek(e,t,r){const n=await this.read(e,t,r);return this.peekQueue.push(e.subarray(t,t+n)),n}async read(e,r,n){if(0===n)return 0;if(0===this.peekQueue.length&&this.endOfStream)throw new t.EndOfStreamError;let i=n,a=0;for(;this.peekQueue.length>0&&i>0;){const t=this.peekQueue.pop();if(!t)throw new Error("peekData should be defined");const n=Math.min(t.length,i);e.set(t.subarray(0,n),r+a),a+=n,i-=n,n<t.length&&this.peekQueue.push(t.subarray(n))}for(;i>0&&!this.endOfStream;){const t=Math.min(i,1048576),n=await this.readFromStream(e,r+a,t);if(a+=n,n<t)break;i-=n}return a}async readFromStream(e,t,n){const i=this.s.read(n);if(i)return e.set(i,t),i.length;{const i={buffer:e,offset:t,length:n,deferred:new r.Deferred};return this.deferred=i.deferred,this.s.once("readable",(()=>{this.readDeferred(i)})),i.deferred.promise}}readDeferred(e){const t=this.s.read(e.length);t?(e.buffer.set(t,e.offset),e.deferred.resolve(t.length),this.deferred=null):this.s.once("readable",(()=>{this.readDeferred(e)}))}reject(e){this.endOfStream=!0,this.deferred&&(this.deferred.reject(e),this.deferred=null)}}}(StreamReader),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StreamReader=e.EndOfStreamError=void 0;var t=EndOfFileStream;Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return t.EndOfStreamError}});var r=StreamReader;Object.defineProperty(e,"StreamReader",{enumerable:!0,get:function(){return r.StreamReader}})}(lib$3),Object.defineProperty(AbstractTokenizer$1,"__esModule",{value:!0}),AbstractTokenizer$1.AbstractTokenizer=void 0;const peek_readable_1$3=lib$3;class AbstractTokenizer{constructor(e){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=e||{}}async readToken(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.position;const r=Buffer.alloc(e.len);if(await this.readBuffer(r,{position:t})<e.len)throw new peek_readable_1$3.EndOfStreamError;return e.get(r,0)}async peekToken(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.position;const r=Buffer.alloc(e.len);if(await this.peekBuffer(r,{position:t})<e.len)throw new peek_readable_1$3.EndOfStreamError;return e.get(r,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new peek_readable_1$3.EndOfStreamError;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new peek_readable_1$3.EndOfStreamError;return e.get(this.numBuffer,0)}async ignore(e){if(void 0!==this.fileInfo.size){const t=this.fileInfo.size-this.position;if(e>t)return this.position+=t,t}return this.position+=e,e}async close(){}normalizeOptions(e,t){if(t&&void 0!==t.position&&t.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return t?{mayBeLess:!0===t.mayBeLess,offset:t.offset?t.offset:0,length:t.length?t.length:e.length-(t.offset?t.offset:0),position:t.position?t.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}}AbstractTokenizer$1.AbstractTokenizer=AbstractTokenizer,Object.defineProperty(ReadStreamTokenizer$1,"__esModule",{value:!0}),ReadStreamTokenizer$1.ReadStreamTokenizer=void 0;const AbstractTokenizer_1$2=AbstractTokenizer$1,peek_readable_1$2=lib$3,maxBufferSize=256e3;class ReadStreamTokenizer extends AbstractTokenizer_1$2.AbstractTokenizer{constructor(e,t){super(t),this.streamReader=new peek_readable_1$2.StreamReader(e)}async getFileInfo(){return this.fileInfo}async readBuffer(e,t){const r=this.normalizeOptions(e,t),n=r.position-this.position;if(n>0)return await this.ignore(n),this.readBuffer(e,t);if(n<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(0===r.length)return 0;const i=await this.streamReader.read(e,r.offset,r.length);if(this.position+=i,(!t||!t.mayBeLess)&&i<r.length)throw new peek_readable_1$2.EndOfStreamError;return i}async peekBuffer(e,t){const r=this.normalizeOptions(e,t);let n=0;if(r.position){const t=r.position-this.position;if(t>0){const i=new Uint8Array(r.length+t);return n=await this.peekBuffer(i,{mayBeLess:r.mayBeLess}),e.set(i.subarray(t),r.offset),n-t}if(t<0)throw new Error("Cannot peek from a negative offset in a stream")}if(r.length>0){try{n=await this.streamReader.peek(e,r.offset,r.length)}catch(e){if(t&&t.mayBeLess&&e instanceof peek_readable_1$2.EndOfStreamError)return 0;throw e}if(!r.mayBeLess&&n<r.length)throw new peek_readable_1$2.EndOfStreamError}return n}async ignore(e){const t=Math.min(maxBufferSize,e),r=new Uint8Array(t);let n=0;for(;n<e;){const i=e-n,a=await this.readBuffer(r,{length:Math.min(t,i)});if(a<0)return a;n+=a}return n}}ReadStreamTokenizer$1.ReadStreamTokenizer=ReadStreamTokenizer;var BufferTokenizer$1={};Object.defineProperty(BufferTokenizer$1,"__esModule",{value:!0}),BufferTokenizer$1.BufferTokenizer=void 0;const peek_readable_1$1=lib$3,AbstractTokenizer_1$1=AbstractTokenizer$1;class BufferTokenizer extends AbstractTokenizer_1$1.AbstractTokenizer{constructor(e,t){super(t),this.uint8Array=e,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:e.length}async readBuffer(e,t){if(t&&t.position){if(t.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=t.position}const r=await this.peekBuffer(e,t);return this.position+=r,r}async peekBuffer(e,t){const r=this.normalizeOptions(e,t),n=Math.min(this.uint8Array.length-r.position,r.length);if(!r.mayBeLess&&n<r.length)throw new peek_readable_1$1.EndOfStreamError;return e.set(this.uint8Array.subarray(r.position,r.position+n),r.offset),n}async close(){}}BufferTokenizer$1.BufferTokenizer=BufferTokenizer,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fromBuffer=e.fromStream=e.EndOfStreamError=void 0;const t=ReadStreamTokenizer$1,r=BufferTokenizer$1;var n=lib$3;Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return n.EndOfStreamError}}),e.fromStream=function(e,r){return r=r||{},new t.ReadStreamTokenizer(e,r)},e.fromBuffer=function(e,t){return new r.BufferTokenizer(e,t)}}(core$2);var FileTokenizer$1={};Object.defineProperty(FileTokenizer$1,"__esModule",{value:!0}),FileTokenizer$1.fromFile=FileTokenizer$1.FileTokenizer=void 0;const AbstractTokenizer_1=AbstractTokenizer$1,peek_readable_1=lib$3,fs=FsPromise;class FileTokenizer extends AbstractTokenizer_1.AbstractTokenizer{constructor(e,t){super(t),this.fd=e}async readBuffer(e,t){const r=this.normalizeOptions(e,t);this.position=r.position;const n=await fs.read(this.fd,e,r.offset,r.length,r.position);if(this.position+=n.bytesRead,n.bytesRead<r.length&&(!t||!t.mayBeLess))throw new peek_readable_1.EndOfStreamError;return n.bytesRead}async peekBuffer(e,t){const r=this.normalizeOptions(e,t),n=await fs.read(this.fd,e,r.offset,r.length,r.position);if(!r.mayBeLess&&n.bytesRead<r.length)throw new peek_readable_1.EndOfStreamError;return n.bytesRead}async close(){return fs.close(this.fd)}}async function fromFile$1(e){const t=await fs.stat(e);if(!t.isFile)throw new Error(`File not a file: ${e}`);const r=await fs.open(e,"r");return new FileTokenizer(r,{path:e,size:t.size})}FileTokenizer$1.FileTokenizer=FileTokenizer,FileTokenizer$1.fromFile=fromFile$1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fromStream=e.fromBuffer=e.EndOfStreamError=e.fromFile=void 0;const t=FsPromise,r=core$2;var n=FileTokenizer$1;Object.defineProperty(e,"fromFile",{enumerable:!0,get:function(){return n.fromFile}});var i=core$2;Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return i.EndOfStreamError}}),Object.defineProperty(e,"fromBuffer",{enumerable:!0,get:function(){return i.fromBuffer}}),e.fromStream=async function(e,n){if(n=n||{},e.path){const r=await t.stat(e.path);n.path=e.path,n.size=r.size}return r.fromStream(e,n)}}(lib$4);var lib$2={},ieee754$1={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(e,t,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,c=u>>1,d=-7,l=r?i-1:0,p=r?-1:1,h=e[t+l];for(l+=p,a=h&(1<<-d)-1,h>>=-d,d+=s;d>0;a=256*a+e[t+l],l+=p,d-=8);for(o=a&(1<<-d)-1,a>>=-d,d+=n;d>0;o=256*o+e[t+l],l+=p,d-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),a-=c}return(h?-1:1)*o*Math.pow(2,a-n)},write:function(e,t,r,n,i,a){var o,s,u,c=8*a-i-1,d=(1<<c)-1,l=d>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:a-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+l>=1?p/u:p*Math.pow(2,1-l))*u>=2&&(o++,u/=2),o+l>=d?(s=0,o=d):o+l>=1?(s=(t*u-1)*Math.pow(2,i),o+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;e[r+h]=255&s,h+=f,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[r+h]=255&o,h+=f,o/=256,c-=8);e[r+h-f]|=128*m}};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AnsiStringType=e.StringType=e.BufferType=e.Uint8ArrayType=e.IgnoreType=e.Float80_LE=e.Float80_BE=e.Float64_LE=e.Float64_BE=e.Float32_LE=e.Float32_BE=e.Float16_LE=e.Float16_BE=e.INT64_BE=e.UINT64_BE=e.INT64_LE=e.UINT64_LE=e.INT32_LE=e.INT32_BE=e.INT24_BE=e.INT24_LE=e.INT16_LE=e.INT16_BE=e.INT8=e.UINT32_BE=e.UINT32_LE=e.UINT24_BE=e.UINT24_LE=e.UINT16_BE=e.UINT16_LE=e.UINT8=void 0;const t=ieee754$1;function r(e){return new DataView(e.buffer,e.byteOffset)}e.UINT8={len:1,get:(e,t)=>r(e).getUint8(t),put:(e,t,n)=>(r(e).setUint8(t,n),t+1)},e.UINT16_LE={len:2,get:(e,t)=>r(e).getUint16(t,!0),put:(e,t,n)=>(r(e).setUint16(t,n,!0),t+2)},e.UINT16_BE={len:2,get:(e,t)=>r(e).getUint16(t),put:(e,t,n)=>(r(e).setUint16(t,n),t+2)},e.UINT24_LE={len:3,get(e,t){const n=r(e);return n.getUint8(t)+(n.getUint16(t+1,!0)<<8)},put(e,t,n){const i=r(e);return i.setUint8(t,255&n),i.setUint16(t+1,n>>8,!0),t+3}},e.UINT24_BE={len:3,get(e,t){const n=r(e);return(n.getUint16(t)<<8)+n.getUint8(t+2)},put(e,t,n){const i=r(e);return i.setUint16(t,n>>8),i.setUint8(t+2,255&n),t+3}},e.UINT32_LE={len:4,get:(e,t)=>r(e).getUint32(t,!0),put:(e,t,n)=>(r(e).setUint32(t,n,!0),t+4)},e.UINT32_BE={len:4,get:(e,t)=>r(e).getUint32(t),put:(e,t,n)=>(r(e).setUint32(t,n),t+4)},e.INT8={len:1,get:(e,t)=>r(e).getInt8(t),put:(e,t,n)=>(r(e).setInt8(t,n),t+1)},e.INT16_BE={len:2,get:(e,t)=>r(e).getInt16(t),put:(e,t,n)=>(r(e).setInt16(t,n),t+2)},e.INT16_LE={len:2,get:(e,t)=>r(e).getInt16(t,!0),put:(e,t,n)=>(r(e).setInt16(t,n,!0),t+2)},e.INT24_LE={len:3,get(t,r){const n=e.UINT24_LE.get(t,r);return n>8388607?n-16777216:n},put(e,t,n){const i=r(e);return i.setUint8(t,255&n),i.setUint16(t+1,n>>8,!0),t+3}},e.INT24_BE={len:3,get(t,r){const n=e.UINT24_BE.get(t,r);return n>8388607?n-16777216:n},put(e,t,n){const i=r(e);return i.setUint16(t,n>>8),i.setUint8(t+2,255&n),t+3}},e.INT32_BE={len:4,get:(e,t)=>r(e).getInt32(t),put:(e,t,n)=>(r(e).setInt32(t,n),t+4)},e.INT32_LE={len:4,get:(e,t)=>r(e).getInt32(t,!0),put:(e,t,n)=>(r(e).setInt32(t,n,!0),t+4)},e.UINT64_LE={len:8,get:(e,t)=>r(e).getBigUint64(t,!0),put:(e,t,n)=>(r(e).setBigUint64(t,n,!0),t+8)},e.INT64_LE={len:8,get:(e,t)=>r(e).getBigInt64(t,!0),put:(e,t,n)=>(r(e).setBigInt64(t,n,!0),t+8)},e.UINT64_BE={len:8,get:(e,t)=>r(e).getBigUint64(t),put:(e,t,n)=>(r(e).setBigUint64(t,n),t+8)},e.INT64_BE={len:8,get:(e,t)=>r(e).getBigInt64(t),put:(e,t,n)=>(r(e).setBigInt64(t,n),t+8)},e.Float16_BE={len:2,get(e,r){return t.read(e,r,!1,10,this.len)},put(e,r,n){return t.write(e,n,r,!1,10,this.len),r+this.len}},e.Float16_LE={len:2,get(e,r){return t.read(e,r,!0,10,this.len)},put(e,r,n){return t.write(e,n,r,!0,10,this.len),r+this.len}},e.Float32_BE={len:4,get:(e,t)=>r(e).getFloat32(t),put:(e,t,n)=>(r(e).setFloat32(t,n),t+4)},e.Float32_LE={len:4,get:(e,t)=>r(e).getFloat32(t,!0),put:(e,t,n)=>(r(e).setFloat32(t,n,!0),t+4)},e.Float64_BE={len:8,get:(e,t)=>r(e).getFloat64(t),put:(e,t,n)=>(r(e).setFloat64(t,n),t+8)},e.Float64_LE={len:8,get:(e,t)=>r(e).getFloat64(t,!0),put:(e,t,n)=>(r(e).setFloat64(t,n,!0),t+8)},e.Float80_BE={len:10,get(e,r){return t.read(e,r,!1,63,this.len)},put(e,r,n){return t.write(e,n,r,!1,63,this.len),r+this.len}},e.Float80_LE={len:10,get(e,r){return t.read(e,r,!0,63,this.len)},put(e,r,n){return t.write(e,n,r,!0,63,this.len),r+this.len}};e.IgnoreType=class{constructor(e){this.len=e}get(e,t){}};e.Uint8ArrayType=class{constructor(e){this.len=e}get(e,t){return e.subarray(t,t+this.len)}};e.BufferType=class{constructor(e){this.len=e}get(e,t){return Buffer.from(e.subarray(t,t+this.len))}};e.StringType=class{constructor(e,t){this.len=e,this.encoding=t}get(e,t){return Buffer.from(e).toString(this.encoding,t,t+this.len)}};class n{constructor(e){this.len=e}static decode(e,t,r){let i="";for(let a=t;a<r;++a)i+=n.codePointToString(n.singleByteDecoder(e[a]));return i}static inRange(e,t,r){return t<=e&&e<=r}static codePointToString(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}static singleByteDecoder(e){if(n.inRange(e,0,127))return e;const t=n.windows1252[e-128];if(null===t)throw Error("invaliding encoding");return t}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n.decode(e,t,t+this.len)}}e.AnsiStringType=n,n.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]}(lib$2);var util={stringToBytes:e=>[...e].map((e=>e.charCodeAt(0))),tarHeaderChecksumMatches:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=parseInt(e.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(r))return!1;let n=256;for(let r=t;r<t+148;r++)n+=e[r];for(let r=t+156;r<t+512;r++)n+=e[r];return r===n},uint32SyncSafeToken:{get:(e,t)=>127&e[t+3]|e[t+2]<<7|e[t+1]<<14|e[t]<<21,len:4}},supported$1={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]};const Token=lib$2,strtok3$1=core$2,{stringToBytes:stringToBytes$1,tarHeaderChecksumMatches:tarHeaderChecksumMatches,uint32SyncSafeToken:uint32SyncSafeToken}=util,supported=supported$1,minimumBytes=4100;async function fromStream(e){const t=await strtok3$1.fromStream(e);try{return await fromTokenizer(t)}finally{await t.close()}}async function fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||Buffer.isBuffer(e)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof e}\``);const t=e instanceof Buffer?e:Buffer.from(e);if(!(t&&t.length>1))return;return fromTokenizer(strtok3$1.fromBuffer(t))}function _check(e,t,r){r={offset:0,...r};for(const[n,i]of t.entries())if(r.mask){if(i!==(r.mask[n]&e[n+r.offset]))return!1}else if(i!==e[n+r.offset])return!1;return!0}async function fromTokenizer(e){try{return _fromTokenizer(e)}catch(e){if(!(e instanceof strtok3$1.EndOfStreamError))throw e}}async function _fromTokenizer(e){let t=Buffer.alloc(minimumBytes);const r=(e,r)=>_check(t,e,r),n=(e,t)=>r(stringToBytes$1(e),t);if(e.fileInfo.size||(e.fileInfo.size=Number.MAX_SAFE_INTEGER),await e.peekBuffer(t,{length:12,mayBeLess:!0}),r([66,77]))return{ext:"bmp",mime:"image/bmp"};if(r([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(r([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(r([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(r([37,33]))return await e.peekBuffer(t,{length:24,mayBeLess:!0}),n("PS-Adobe-",{offset:2})&&n(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(r([31,160])||r([31,157]))return{ext:"Z",mime:"application/x-compress"};if(r([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(r([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(r([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(r([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(n("ID3")){await e.ignore(6);const i=await e.readToken(uint32SyncSafeToken);return e.position+i>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(i),fromTokenizer(e))}if(n("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((67===t[0]||70===t[0])&&r([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(r([71,73,70]))return{ext:"gif",mime:"image/gif"};if(n("FLIF"))return{ext:"flif",mime:"image/flif"};if(n("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(n("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(n("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(n("FORM"))return{ext:"aif",mime:"audio/aiff"};if(n("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(r([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(t,{length:30});const a={compressedSize:t.readUInt32LE(18),uncompressedSize:t.readUInt32LE(22),filenameLength:t.readUInt16LE(26),extraFieldLength:t.readUInt16LE(28)};if(a.filename=await e.readToken(new Token.StringType(a.filenameLength,"utf-8")),await e.ignore(a.extraFieldLength),"META-INF/mozilla.rsa"===a.filename)return{ext:"xpi",mime:"application/x-xpinstall"};if(a.filename.endsWith(".rels")||a.filename.endsWith(".xml")){switch(a.filename.split("/")[0]){case"_rels":default:break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}}if(a.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(a.filename.startsWith("3D/")&&a.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if("mimetype"===a.filename&&a.compressedSize===a.uncompressedSize){switch(await e.readToken(new Token.StringType(a.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"}}}if(0===a.compressedSize){let o=-1;for(;o<0&&e.position<e.fileInfo.size;)await e.peekBuffer(t,{mayBeLess:!0}),o=t.indexOf("504B0304",0,"hex"),await e.ignore(o>=0?o:t.length)}else await e.ignore(a.compressedSize)}}catch(s){if(!(s instanceof strtok3$1.EndOfStreamError))throw s}return{ext:"zip",mime:"application/zip"}}if(n("OggS")){await e.ignore(28);const u=Buffer.alloc(8);return await e.readBuffer(u),_check(u,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(u,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(u,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(u,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(u,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(u,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(r([80,75])&&(3===t[2]||5===t[2]||7===t[2])&&(4===t[3]||6===t[3]||8===t[3]))return{ext:"zip",mime:"application/zip"};if(n("ftyp",{offset:4})&&0!=(96&t[8])){const c=t.toString("binary",8,12).replace("\0"," ").trim();switch(c){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return c.startsWith("3g")?c.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(n("MThd"))return{ext:"mid",mime:"audio/midi"};if(n("wOFF")&&(r([0,1,0,0],{offset:4})||n("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(n("wOF2")&&(r([0,1,0,0],{offset:4})||n("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(r([212,195,178,161])||r([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(n("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(n("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(n("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(r([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(n("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(n("%PDF")){await e.ignore(1350);const d=10485760,l=Buffer.alloc(Math.min(d,e.fileInfo.size));return await e.readBuffer(l,{mayBeLess:!0}),l.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(r([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(r([73,73,42,0]))return n("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:r([28,0,254,0],{offset:8})||r([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:r([8,0,0,0],{offset:4})&&(r([45,0,254,0],{offset:8})||r([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(t=Buffer.alloc(24),await e.peekBuffer(t),(r([16,251,134,1],{offset:4})||r([8,0,0,0],{offset:4}))&&r([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(r([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(n("MAC "))return{ext:"ape",mime:"audio/ape"};if(r([26,69,223,163])){async function p(){const t=await e.peekNumber(Token.UINT8);let r=128,n=0;for(;0==(t&r);)++n,r>>=1;const i=Buffer.alloc(n+1);return await e.readBuffer(i),i}async function h(){const e=await p(),t=await p();t[0]^=128>>t.length-1;const r=Math.min(6,t.length);return{id:e.readUIntBE(0,e.length),len:t.readUIntBE(t.length-r,r)}}async function f(t,r){for(;r>0;){const t=await h();if(17026===t.id)return e.readToken(new Token.StringType(t.len,"utf-8"));await e.ignore(t.len),--r}}const m=await h();switch(await f(0,m.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(r([82,73,70,70])){if(r([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(r([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(r([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(n("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(r([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(n("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(n("MSCF")||n("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(r([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(r([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(r([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(r([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(n("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(n("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(r([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(n("IMPM"))return{ext:"it",mime:"audio/x-it"};if(n("-lh0-",{offset:2})||n("-lh1-",{offset:2})||n("-lh2-",{offset:2})||n("-lh3-",{offset:2})||n("-lh4-",{offset:2})||n("-lh5-",{offset:2})||n("-lh6-",{offset:2})||n("-lh7-",{offset:2})||n("-lzs-",{offset:2})||n("-lz4-",{offset:2})||n("-lz5-",{offset:2})||n("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(r([0,0,1,186])){if(r([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(r([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(n("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(r([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(n("<?xml "))return{ext:"xml",mime:"application/xml"};if(r([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(r([82,97,114,33,26,7])&&(0===t[6]||1===t[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(n("solid "))return{ext:"stl",mime:"model/stl"};if(n("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(n("!<arch>")){await e.ignore(8);return"debian-binary"===await e.readToken(new Token.StringType(13,"ascii"))?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"}}if(r([137,80,78,71,13,10,26,10])){async function y(){return{length:await e.readToken(Token.INT32_BE),type:await e.readToken(new Token.StringType(4,"binary"))}}await e.ignore(8);do{const g=await y();if(g.length<0)return;switch(g.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(g.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(r([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(r([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(r([102,114,101,101],{offset:4})||r([109,100,97,116],{offset:4})||r([109,111,111,118],{offset:4})||r([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(r([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(n("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(r([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(r([48,38,178,117,142,102,207,17,166,217])){async function b(){const t=Buffer.alloc(16);return await e.readBuffer(t),{id:t,size:Number(await e.readToken(Token.UINT64_LE))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const v=await b();let w=v.size-24;if(_check(v.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const _=Buffer.alloc(16);if(w-=await e.readBuffer(_),_check(_,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(_,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(w)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(r([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((r([126,16,4])||r([126,24,4]))&&r([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(r([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(r([0,0,0,12,106,80,32,32,13,10,135,10])){await e.ignore(20);switch(await e.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}}if(r([255,10])||r([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(r([0,0,1,186])||r([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(r([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(r([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(r([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(r([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(t,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),n("BEGIN:")){if(n("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(n("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(n("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(n("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(n("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(r([4,0,0,0])&&t.length>=16){const S=t.readUInt32LE(12);if(S>12&&t.length>=S+16)try{const E=t.slice(16,S+16).toString();if(JSON.parse(E).files)return{ext:"asar",mime:"application/x-asar"}}catch(A){}}if(r([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(n("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(r([71],{offset:4})&&(r([71],{offset:192})||r([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(r([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(r([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(r([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(r([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(r([76,80],{offset:34})&&(r([0,0,1],{offset:8})||r([1,0,2],{offset:8})||r([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(r([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(t,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(t))return{ext:"tar",mime:"application/x-tar"};if(r([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(n("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(t.length>=2&&r([255,224],{offset:0,mask:[255,224]})){if(r([16],{offset:1,mask:[22]}))return r([8],{offset:1,mask:[8]}),{ext:"aac",mime:"audio/aac"};if(r([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(r([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(r([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise(((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",(async()=>{const e=new stream.PassThrough;let t;t=stream.pipeline?stream.pipeline(readableStream,e,(()=>{})):readableStream.pipe(e);const r=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const t=await fromBuffer(r);e.fileType=t}catch(e){reject(e)}resolve(t)}))})),fileType$1={fromStream:fromStream,fromTokenizer:fromTokenizer,fromBuffer:fromBuffer,stream:stream};Object.defineProperty(fileType$1,"extensions",{get:()=>new Set(supported.extensions)}),Object.defineProperty(fileType$1,"mimeTypes",{get:()=>new Set(supported.mimeTypes)});var core$1=fileType$1;const strtok3=lib$4,core=core$1;async function fromFile(e){const t=await strtok3.fromFile(e);try{return await core.fromTokenizer(t)}finally{await t.close()}}const fileType={fromFile:fromFile};Object.assign(fileType,core),Object.defineProperty(fileType,"extensions",{get:()=>core.extensions}),Object.defineProperty(fileType,"mimeTypes",{get:()=>core.mimeTypes});var fileType_1=fileType;const NodeFileSchema=z.object({buffer:z.custom((e=>e)),name:z.optional(z.string()),type:z.optional(z.string())}),BrowserFileSchema=z.custom((e=>e)),NativeFileSchema=z.object({uri:z.string(),name:z.string().nullable(),type:z.string().nullable(),copyError:z.optional(z.string()),fileCopyUri:z.optional(z.string()).nullable(),size:z.optional(z.number()).nullable()}),CrossPlatformFileSchema=z.union([NodeFileSchema,BrowserFileSchema,NativeFileSchema]),isNodeFile=e=>!(!e||!e.buffer),isNativeFile=e=>!(!e||!e.uri),ALLOWED_IMAGE_MIME_TYPES=["image/jpeg","image/png","image/bmp","image/tiff","image/gif","image/webp"],ALLOWED_AUDIO_MIME_TYPES_REGEX=/audio\/.+/,getFileType=async e=>{if(isNativeFile(e))return{mime:e.type};let t;return"undefined"!=typeof window&&window&&(t=await Promise.resolve().then((function(){return browser$1}))),isNodeFile(e)?e.type?{mime:e.type}:await fileType_1.fromBuffer(e.buffer):await t.fromBlob(e)},ImageFile=CrossPlatformFileSchema.refine((async e=>{const t=await getFileType(e);return t&&ALLOWED_IMAGE_MIME_TYPES.includes(t.mime)}),`Image file has invalid file type. Supported file types are: ${ALLOWED_IMAGE_MIME_TYPES.join(", ")}`),AudioFile=CrossPlatformFileSchema.refine((async e=>{const t=await getFileType(e);return t&&ALLOWED_AUDIO_MIME_TYPES_REGEX.test(t.mime)}),"Audio file has invalid file type. Supported file types are: audio/*");var Genre;!function(e){e.ALL="All Genres",e.ELECTRONIC="Electronic",e.ROCK="Rock",e.METAL="Metal",e.ALTERNATIVE="Alternative",e.HIP_HOP_RAP="Hip-Hop/Rap",e.EXPERIMENTAL="Experimental",e.PUNK="Punk",e.FOLK="Folk",e.POP="Pop",e.AMBIENT="Ambient",e.SOUNDTRACK="Soundtrack",e.WORLD="World",e.JAZZ="Jazz",e.ACOUSTIC="Acoustic",e.FUNK="Funk",e.R_AND_B_SOUL="R&B/Soul",e.DEVOTIONAL="Devotional",e.CLASSICAL="Classical",e.REGGAE="Reggae",e.PODCASTS="Podcasts",e.COUNTRY="Country",e.SPOKEN_WORK="Spoken Word",e.COMEDY="Comedy",e.BLUES="Blues",e.KIDS="Kids",e.AUDIOBOOKS="Audiobooks",e.LATIN="Latin",e.LOFI="Lo-Fi",e.HYPERPOP="Hyperpop",e.DANCEHALL="Dancehall",e.TECHNO="Techno",e.TRAP="Trap",e.HOUSE="House",e.TECH_HOUSE="Tech House",e.DEEP_HOUSE="Deep House",e.DISCO="Disco",e.ELECTRO="Electro",e.JUNGLE="Jungle",e.PROGRESSIVE_HOUSE="Progressive House",e.HARDSTYLE="Hardstyle",e.GLITCH_HOP="Glitch Hop",e.TRANCE="Trance",e.FUTURE_BASS="Future Bass",e.FUTURE_HOUSE="Future House",e.TROPICAL_HOUSE="Tropical House",e.DOWNTEMPO="Downtempo",e.DRUM_AND_BASS="Drum & Bass",e.DUBSTEP="Dubstep",e.JERSEY_CLUB="Jersey Club",e.VAPORWAVE="Vaporwave",e.MOOMBAHTON="Moombahton"}(Genre||(Genre={})),z.string().nullable().optional().transform((e=>{var t;return e&&null!==(t=decodeHashId(e))&&void 0!==t?t:void 0}));const HashId=z.string().transform(((e,t)=>{const r=decodeHashId(e);return null===r?(t.addIssue({code:z.ZodIssueCode.custom,message:"Hash id is invalid"}),z.NEVER):r}));var Mood;z.number().nullable().optional().transform((e=>{var t;return e&&null!==(t=encodeHashId(e))&&void 0!==t?t:void 0})),z.number().transform(((e,t)=>{const r=encodeHashId(e);return null===r?(t.addIssue({code:z.ZodIssueCode.custom,message:"Hash id is invalid"}),z.NEVER):r})),function(e){e.PEACEFUL="Peaceful",e.ROMANTIC="Romantic",e.SENTIMENTAL="Sentimental",e.TENDER="Tender",e.EASYGOING="Easygoing",e.YEARNING="Yearning",e.SOPHISTICATED="Sophisticated",e.SENSUAL="Sensual",e.COOL="Cool",e.GRITTY="Gritty",e.MELANCHOLY="Melancholy",e.SERIOUS="Serious",e.BROODING="Brooding",e.FIERY="Fiery",e.DEFIANT="Defiant",e.AGGRESSIVE="Aggressive",e.ROWDY="Rowdy",e.EXCITED="Excited",e.ENERGIZING="Energizing",e.EMPOWERING="Empowering",e.STIRRING="Stirring",e.UPBEAT="Upbeat",e.OTHER="Other"}(Mood||(Mood={}));var buffer={},base64Js={};base64Js.byteLength=byteLength,base64Js.toByteArray=toByteArray,base64Js.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i$1=0,len=code$1.length;i$1<len;++i$1)lookup[i$1]=code$1[i$1],revLookup[code$1.charCodeAt(i$1)]=i$1;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function byteLength(e){var t=getLens(e),r=t[0],n=t[1];return 3*(r+n)/4-n}function _byteLength(e,t,r){return 3*(t+r)/4-r}function toByteArray(e){var t,r,n=getLens(e),i=n[0],a=n[1],o=new Arr(_byteLength(e,i,a)),s=0,u=a>0?i-4:i;for(r=0;r<u;r+=4)t=revLookup[e.charCodeAt(r)]<<18|revLookup[e.charCodeAt(r+1)]<<12|revLookup[e.charCodeAt(r+2)]<<6|revLookup[e.charCodeAt(r+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=255&t;return 2===a&&(t=revLookup[e.charCodeAt(r)]<<2|revLookup[e.charCodeAt(r+1)]>>4,o[s++]=255&t),1===a&&(t=revLookup[e.charCodeAt(r)]<<10|revLookup[e.charCodeAt(r+1)]<<4|revLookup[e.charCodeAt(r+2)]>>2,o[s++]=t>>8&255,o[s++]=255&t),o}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(tripletToBase64(n));return i.join("")}function fromByteArray(e){for(var t,r=e.length,n=r%3,i=[],a=16383,o=0,s=r-n;o<s;o+=a)i.push(encodeChunk(e,o,o+a>s?s:o+a));return 1===n?(t=e[r-1],i.push(lookup[t>>2]+lookup[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],i.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),i.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var ieee754={};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function anumber(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function isBytes$1(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function abytes$1(e){if(!isBytes$1(e))throw new Error("Uint8Array expected");for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(r.length>0&&!r.includes(e.length))throw new Error("Uint8Array expected of length "+r+", got length="+e.length)}function ahash(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");anumber(e.outputLen),anumber(e.blockLen)}function aexists(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function aoutput(e,t){abytes$1(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}ieee754.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,c=u>>1,d=-7,l=r?i-1:0,p=r?-1:1,h=e[t+l];for(l+=p,a=h&(1<<-d)-1,h>>=-d,d+=s;d>0;a=256*a+e[t+l],l+=p,d-=8);for(o=a&(1<<-d)-1,a>>=-d,d+=n;d>0;o=256*o+e[t+l],l+=p,d-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),a-=c}return(h?-1:1)*o*Math.pow(2,a-n)},ieee754.write=function(e,t,r,n,i,a){var o,s,u,c=8*a-i-1,d=(1<<c)-1,l=d>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:a-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+l>=1?p/u:p*Math.pow(2,1-l))*u>=2&&(o++,u/=2),o+l>=d?(s=0,o=d):o+l>=1?(s=(t*u-1)*Math.pow(2,i),o+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;e[r+h]=255&s,h+=f,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[r+h]=255&o,h+=f,o/=256,c-=8);e[r+h-f]|=128*m},
/*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     */
function(e){const t=base64Js,r=ieee754,n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=function(e){+e!=e&&(e=0);return o.alloc(+e)},e.INSPECT_MAX_BYTES=50;const i=2147483647;function a(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return s(e,t,r)}function s(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|h(e,t);let n=a(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(G(e,Uint8Array)){const t=new Uint8Array(e);return l(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(G(e,ArrayBuffer)||e&&G(e.buffer,ArrayBuffer))return l(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(G(e,SharedArrayBuffer)||e&&G(e.buffer,SharedArrayBuffer)))return l(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return o.from(n,t,r);const i=function(e){if(o.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||W(e.length)?a(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),a(e<0?0:0|p(e))}function d(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function l(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,o.prototype),n}function p(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function h(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||G(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(i)return n?-1:q(e).length;t=(""+t).toLowerCase(),i=!0}}function f(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return $(this,t,r);case"base64":return E(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),W(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){let a,o=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(a=r;a<s;a++)if(c(e,a)===c(t,-1===n?0:a-n)){if(-1===n&&(n=a),a-n+1===u)return n*o}else-1!==n&&(a-=a-n),n=-1}else for(r+u>s&&(r=s-u),a=r;a>=0;a--){let r=!0;for(let n=0;n<u;n++)if(c(e,a+n)!==c(t,n)){r=!1;break}if(r)return a}return-1}function b(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const a=t.length;let o;for(n>a/2&&(n=a/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(W(n))return o;e[r+o]=n}return o}function v(e,t,r,n){return K(q(t,e.length-r),e,r,n)}function w(e,t,r,n){return K(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function _(e,t,r,n){return K(j(t),e,r,n)}function S(e,t,r,n){return K(function(e,t){let r,n,i;const a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function E(e,r,n){return 0===r&&n===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,n))}function A(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let a=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,s,u;switch(o){case 1:t<128&&(a=t);break;case 2:r=e[i+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(a=u));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(a=u));break;case 4:r=e[i+1],n=e[i+2],s=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,u>65535&&u<1114112&&(a=u))}}null===a?(a=65533,o=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=o}return function(e){const t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=T));return r}(n)}e.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return s(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},o.allocUnsafe=function(e){return c(e)},o.allocUnsafeSlow=function(e){return c(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(G(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),G(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=o.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(G(t,Uint8Array))i+t.length>n.length?(o.isBuffer(t)||(t=o.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!o.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},o.byteLength=h,o.prototype._isBuffer=!0,o.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):f.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(e,t,r,n,i){if(G(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let a=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0);const u=Math.min(a,s),c=this.slice(n,i),d=e.slice(t,r);for(let e=0;e<u;++e)if(c[e]!==d[e]){a=c[e],s=d[e];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let a=!1;for(;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return v(this,e,t,r);case"ascii":case"latin1":case"binary":return w(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const T=4096;function I(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function $(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function C(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=V[e[n]];return i}function R(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function k(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,r,n,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n,i){U(t,n,i,e,r,7);let a=Number(t&BigInt(4294967295));e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function O(e,t,r,n,i){U(t,n,i,e,r,7);let a=Number(t&BigInt(4294967295));e[r+7]=a,a>>=8,e[r+6]=a,a>>=8,e[r+5]=a,a>>=8,e[r+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function P(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,n,i,a){return t=+t,n>>>=0,a||P(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function B(e,t,n,i,a){return t=+t,n>>>=0,a||P(e,0,n,8),r.write(e,t,n,i,52,8),n+8}o.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=this[e],i=1,a=0;for(;++a<t&&(i*=256);)n+=this[e+a]*i;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=Z((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||J(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),o.prototype.readBigUInt64BE=Z((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||J(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=this[e],i=1,a=0;for(;++a<t&&(i*=256);)n+=this[e+a]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=t,i=1,a=this[e+--n];for(;n>0&&(i*=256);)a+=this[e+--n]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},o.prototype.readInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||k(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||k(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=Z((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||J(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),o.prototype.readBigInt64BE=Z((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||J(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),o.prototype.readFloatLE=function(e,t){return e>>>=0,t||k(e,4,this.length),r.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||k(e,4,this.length),r.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||k(e,8,this.length),r.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||k(e,8,this.length),r.read(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){x(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){x(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigUInt64LE=Z((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=Z((function(e){return O(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);x(this,e,t,r,n-1,-n)}let i=0,a=1,o=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);x(this,e,t,r,n-1,-n)}let i=r-1,a=1,o=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigInt64LE=Z((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=Z((function(e){return O(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const a=o.isBuffer(e)?e:o.from(e,n),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=a[i%s]}return this};const D={};function M(e,t,r){D[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function L(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function U(e,t,r,n,i,a){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=a>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(a+1)}${n}`:`>= -(2${n} ** ${8*(a+1)-1}${n}) and < 2 ** ${8*(a+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new D.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||J(t,e.length-(r+1))}(n,i,a)}function z(e,t){if("number"!=typeof e)throw new D.ERR_INVALID_ARG_TYPE(t,"number",e)}function J(e,t,r){if(Math.floor(e)!==e)throw z(e,r),new D.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}M("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),M("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),M("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=L(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=L(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function q(e,t){let r;t=t||1/0;const n=e.length;let i=null;const a=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function j(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function G(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function W(e){return e!=e}const V=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function Z(e){return"undefined"==typeof BigInt?Y:e}function Y(){throw new Error("BigInt not supported")}}(buffer);const crypto$3="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,u32$3=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),createView$2=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),rotr$2=(e,t)=>e<<32-t|e>>>t,isLE$2=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])(),byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function byteSwap32(e){for(let t=0;t<e.length;t++)e[t]=byteSwap(e[t])}function utf8ToBytes$3(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function toBytes$2(e){return"string"==typeof e&&(e=utf8ToBytes$3(e)),abytes$1(e),e}function concatBytes$3(){let e=0;for(let t=0;t<arguments.length;t++){const r=t<0||arguments.length<=t?void 0:arguments[t];abytes$1(r),e+=r.length}const t=new Uint8Array(e);for(let e=0,r=0;e<arguments.length;e++){const n=e<0||arguments.length<=e?void 0:arguments[e];t.set(n,r),r+=n.length}return t}class Hash$4{clone(){return this._cloneInto()}}function wrapConstructor$2(e){const t=t=>e().update(toBytes$2(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function randomBytes$1(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(crypto$3&&"function"==typeof crypto$3.getRandomValues)return crypto$3.getRandomValues(new Uint8Array(e));if(crypto$3&&"function"==typeof crypto$3.randomBytes)return crypto$3.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function setBigUint64$2(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),a=BigInt(4294967295),o=Number(r>>i&a),s=Number(r&a),u=n?4:0,c=n?0:4;e.setUint32(t+u,o,n),e.setUint32(t+c,s,n)}const Chi$2=(e,t,r)=>e&t^~e&r,Maj$2=(e,t,r)=>e&t^e&r^t&r;class HashMD extends Hash$4{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView$2(this.buffer)}update(e){aexists(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=toBytes$2(e)).length;for(let a=0;a<i;){const o=Math.min(n-this.pos,i-a);if(o!==n)r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=createView$2(e);for(;n<=i-a;a+=n)this.process(t,a)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){aexists(this),aoutput(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>n-a&&(this.process(r,0),a=0);for(let e=a;e<n;e++)t[e]=0;setBigUint64$2(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=createView$2(e),s=this.outputLen;if(s%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=s/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)o.setUint32(4*e,c[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:a,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=a,n%t&&e.buffer.set(r),e}}const U32_MASK64$1=BigInt(2**32-1),_32n$1=BigInt(32);function fromBig$1(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&U32_MASK64$1),l:Number(e>>_32n$1&U32_MASK64$1)}:{h:0|Number(e>>_32n$1&U32_MASK64$1),l:0|Number(e&U32_MASK64$1)}}function split$1(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:a,l:o}=fromBig$1(e[i],t);[r[i],n[i]]=[a,o]}return[r,n]}const toBig$1=(e,t)=>BigInt(e>>>0)<<_32n$1|BigInt(t>>>0),shrSH$1=(e,t,r)=>e>>>r,shrSL$1=(e,t,r)=>e<<32-r|t>>>r,rotrSH$1=(e,t,r)=>e>>>r|t<<32-r,rotrSL$1=(e,t,r)=>e<<32-r|t>>>r,rotrBH$1=(e,t,r)=>e<<64-r|t>>>r-32,rotrBL$1=(e,t,r)=>e>>>r-32|t<<64-r,rotr32H$1=(e,t)=>t,rotr32L$1=(e,t)=>e,rotlSH$1=(e,t,r)=>e<<r|t>>>32-r,rotlSL$1=(e,t,r)=>t<<r|e>>>32-r,rotlBH$1=(e,t,r)=>t<<r-32|e>>>64-r,rotlBL$1=(e,t,r)=>e<<r-32|t>>>64-r;function add$1(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}const add3L$1=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H$1=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L$1=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H$1=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5L$1=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),add5H$1=(e,t,r,n,i,a)=>t+r+n+i+a+(e/2**32|0)|0,u64$4={fromBig:fromBig$1,split:split$1,toBig:toBig$1,shrSH:shrSH$1,shrSL:shrSL$1,rotrSH:rotrSH$1,rotrSL:rotrSL$1,rotrBH:rotrBH$1,rotrBL:rotrBL$1,rotr32H:rotr32H$1,rotr32L:rotr32L$1,rotlSH:rotlSH$1,rotlSL:rotlSL$1,rotlBH:rotlBH$1,rotlBL:rotlBL$1,add:add$1,add3L:add3L$1,add3H:add3H$1,add4L:add4L$1,add4H:add4H$1,add5H:add5H$1,add5L:add5L$1},[SHA512_Kh,SHA512_Kl]=(()=>u64$4.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);class SHA512 extends HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:a,Dh:o,Dl:s,Eh:u,El:c,Fh:d,Fl:l,Gh:p,Gl:h,Hh:f,Hl:m}=this;return[e,t,r,n,i,a,o,s,u,c,d,l,p,h,f,m]}set(e,t,r,n,i,a,o,s,u,c,d,l,p,h,f,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|a,this.Dh=0|o,this.Dl=0|s,this.Eh=0|u,this.El=0|c,this.Fh=0|d,this.Fl=0|l,this.Gh=0|p,this.Gl=0|h,this.Hh=0|f,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)SHA512_W_H[r]=e.getUint32(t),SHA512_W_L[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|SHA512_W_H[e-15],r=0|SHA512_W_L[e-15],n=u64$4.rotrSH(t,r,1)^u64$4.rotrSH(t,r,8)^u64$4.shrSH(t,r,7),i=u64$4.rotrSL(t,r,1)^u64$4.rotrSL(t,r,8)^u64$4.shrSL(t,r,7),a=0|SHA512_W_H[e-2],o=0|SHA512_W_L[e-2],s=u64$4.rotrSH(a,o,19)^u64$4.rotrBH(a,o,61)^u64$4.shrSH(a,o,6),u=u64$4.rotrSL(a,o,19)^u64$4.rotrBL(a,o,61)^u64$4.shrSL(a,o,6),c=u64$4.add4L(i,u,SHA512_W_L[e-7],SHA512_W_L[e-16]),d=u64$4.add4H(c,n,s,SHA512_W_H[e-7],SHA512_W_H[e-16]);SHA512_W_H[e]=0|d,SHA512_W_L[e]=0|c}let{Ah:r,Al:n,Bh:i,Bl:a,Ch:o,Cl:s,Dh:u,Dl:c,Eh:d,El:l,Fh:p,Fl:h,Gh:f,Gl:m,Hh:y,Hl:g}=this;for(let e=0;e<80;e++){const t=u64$4.rotrSH(d,l,14)^u64$4.rotrSH(d,l,18)^u64$4.rotrBH(d,l,41),b=u64$4.rotrSL(d,l,14)^u64$4.rotrSL(d,l,18)^u64$4.rotrBL(d,l,41),v=d&p^~d&f,w=l&h^~l&m,_=u64$4.add5L(g,b,w,SHA512_Kl[e],SHA512_W_L[e]),S=u64$4.add5H(_,y,t,v,SHA512_Kh[e],SHA512_W_H[e]),E=0|_,A=u64$4.rotrSH(r,n,28)^u64$4.rotrBH(r,n,34)^u64$4.rotrBH(r,n,39),T=u64$4.rotrSL(r,n,28)^u64$4.rotrBL(r,n,34)^u64$4.rotrBL(r,n,39),I=r&i^r&o^i&o,$=n&a^n&s^a&s;y=0|f,g=0|m,f=0|p,m=0|h,p=0|d,h=0|l,({h:d,l:l}=u64$4.add(0|u,0|c,0|S,0|E)),u=0|o,c=0|s,o=0|i,s=0|a,i=0|r,a=0|n;const C=u64$4.add3L(E,T,$);r=u64$4.add3H(C,S,A,I),n=0|C}({h:r,l:n}=u64$4.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:a}=u64$4.add(0|this.Bh,0|this.Bl,0|i,0|a)),({h:o,l:s}=u64$4.add(0|this.Ch,0|this.Cl,0|o,0|s)),({h:u,l:c}=u64$4.add(0|this.Dh,0|this.Dl,0|u,0|c)),({h:d,l:l}=u64$4.add(0|this.Eh,0|this.El,0|d,0|l)),({h:p,l:h}=u64$4.add(0|this.Fh,0|this.Fl,0|p,0|h)),({h:f,l:m}=u64$4.add(0|this.Gh,0|this.Gl,0|f,0|m)),({h:y,l:g}=u64$4.add(0|this.Hh,0|this.Hl,0|y,0|g)),this.set(r,n,i,a,o,s,u,c,d,l,p,h,f,m,y,g)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sha512=wrapConstructor$2((()=>new SHA512)),_0n$7=BigInt(0),_1n$9=BigInt(1),_2n$7=BigInt(2);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function isBytes(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function abytes(e){if(!isBytes(e))throw new Error("Uint8Array expected")}function abool(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const hexes$2=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function bytesToHex$2(e){abytes(e);let t="";for(let r=0;r<e.length;r++)t+=hexes$2[e[r]];return t}function numberToHexUnpadded$1(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function hexToNumber$1(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?_0n$7:BigInt("0x"+e)}const asciis={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16(e){return e>=asciis._0&&e<=asciis._9?e-asciis._0:e>=asciis.A&&e<=asciis.F?e-(asciis.A-10):e>=asciis.a&&e<=asciis.f?e-(asciis.a-10):void 0}function hexToBytes$1(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=asciiToBase16(e.charCodeAt(i)),a=asciiToBase16(e.charCodeAt(i+1));if(void 0===r||void 0===a){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+a}return n}function bytesToNumberBE(e){return hexToNumber$1(bytesToHex$2(e))}function bytesToNumberLE(e){return abytes(e),hexToNumber$1(bytesToHex$2(Uint8Array.from(e).reverse()))}function numberToBytesBE(e,t){return hexToBytes$1(e.toString(16).padStart(2*t,"0"))}function numberToBytesLE(e,t){return numberToBytesBE(e,t).reverse()}function numberToVarBytesBE(e){return hexToBytes$1(numberToHexUnpadded$1(e))}function ensureBytes$2(e,t,r){let n;if("string"==typeof t)try{n=hexToBytes$1(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!isBytes(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function concatBytes$2(){let e=0;for(let t=0;t<arguments.length;t++){const r=t<0||arguments.length<=t?void 0:arguments[t];abytes(r),e+=r.length}const t=new Uint8Array(e);for(let e=0,r=0;e<arguments.length;e++){const n=e<0||arguments.length<=e?void 0:arguments[e];t.set(n,r),r+=n.length}return t}function equalBytes(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}function utf8ToBytes$2(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}const isPosBig=e=>"bigint"==typeof e&&_0n$7<=e;function inRange$1(e,t,r){return isPosBig(e)&&isPosBig(t)&&isPosBig(r)&&t<=e&&e<r}function aInRange(e,t,r,n){if(!inRange$1(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function bitLen(e){let t;for(t=0;e>_0n$7;e>>=_1n$9,t+=1);return t}function bitGet(e,t){return e>>BigInt(t)&_1n$9}function bitSet(e,t,r){return e|(r?_1n$9:_0n$7)<<BigInt(t)}const bitMask=e=>(_2n$7<<BigInt(e-1))-_1n$9,u8n=e=>new Uint8Array(e),u8fr=e=>Uint8Array.from(e);function createHmacDrbg(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=u8n(e),i=u8n(e),a=0;const o=()=>{n.fill(1),i.fill(0),a=0},s=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return r(i,n,...t)},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u8n();i=s(u8fr([0]),e),n=s(),0!==e.length&&(i=s(u8fr([1]),e),n=s())},c=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=s();const t=n.slice();r.push(t),e+=n.length}return concatBytes$2(...r)};return(e,t)=>{let r;for(o(),u(e);!(r=t(c()));)u();return o(),r}}const validatorFns={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||isBytes(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function validateObject(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=(t,r,n)=>{const i=validatorFns[r];if("function"!=typeof i)throw new Error("invalid validator function");const a=e[t];if(!(n&&void 0===a||i(a,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+a)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}const notImplemented=()=>{throw new Error("not implemented")};function memoized(e){const t=new WeakMap;return function(r){const n=t.get(r);if(void 0!==n)return n;for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];const s=e(r,...a);return t.set(r,s),s}}var ut=Object.freeze({__proto__:null,isBytes:isBytes,abytes:abytes,abool:abool,bytesToHex:bytesToHex$2,numberToHexUnpadded:numberToHexUnpadded$1,hexToNumber:hexToNumber$1,hexToBytes:hexToBytes$1,bytesToNumberBE:bytesToNumberBE,bytesToNumberLE:bytesToNumberLE,numberToBytesBE:numberToBytesBE,numberToBytesLE:numberToBytesLE,numberToVarBytesBE:numberToVarBytesBE,ensureBytes:ensureBytes$2,concatBytes:concatBytes$2,equalBytes:equalBytes,utf8ToBytes:utf8ToBytes$2,inRange:inRange$1,aInRange:aInRange,bitLen:bitLen,bitGet:bitGet,bitSet:bitSet,bitMask:bitMask,createHmacDrbg:createHmacDrbg,validateObject:validateObject,notImplemented:notImplemented,memoized:memoized});const _0n$6=BigInt(0),_1n$8=BigInt(1),_2n$6=BigInt(2),_3n$2=BigInt(3),_4n=BigInt(4),_5n$1=BigInt(5),_8n$3=BigInt(8);function mod$1(e,t){const r=e%t;return r>=_0n$6?r:t+r}function pow(e,t,r){if(t<_0n$6)throw new Error("invalid exponent, negatives unsupported");if(r<=_0n$6)throw new Error("invalid modulus");if(r===_1n$8)return _0n$6;let n=_1n$8;for(;t>_0n$6;)t&_1n$8&&(n=n*e%r),e=e*e%r,t>>=_1n$8;return n}function pow2$1(e,t,r){let n=e;for(;t-- >_0n$6;)n*=n,n%=r;return n}function invert$1(e,t){if(e===_0n$6)throw new Error("invert: expected non-zero number");if(t<=_0n$6)throw new Error("invert: expected positive modulus, got "+t);let r=mod$1(e,t),n=t,i=_0n$6,a=_1n$8;for(;r!==_0n$6;){const e=n%r,t=i-a*(n/r);n=r,r=e,i=a,a=t}if(n!==_1n$8)throw new Error("invert: does not exist");return mod$1(i,t)}function tonelliShanks(e){const t=(e-_1n$8)/_2n$6;let r,n,i;for(r=e-_1n$8,n=0;r%_2n$6===_0n$6;r/=_2n$6,n++);for(i=_2n$6;i<e&&pow(i,t,e)!==e-_1n$8;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+_1n$8)/_4n;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const a=(r+_1n$8)/_2n$6;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let s=n,u=e.pow(e.mul(e.ONE,i),r),c=e.pow(o,a),d=e.pow(o,r);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<s&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(u,_1n$8<<BigInt(s-t-1));u=e.sqr(r),c=e.mul(c,r),d=e.mul(d,u),s=t}return c}}function FpSqrt(e){if(e%_4n===_3n$2){const t=(e+_1n$8)/_4n;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%_8n$3===_5n$1){const t=(e-_5n$1)/_8n$3;return function(e,r){const n=e.mul(r,_2n$6),i=e.pow(n,t),a=e.mul(r,i),o=e.mul(e.mul(a,_2n$6),i),s=e.mul(a,e.sub(o,e.ONE));if(!e.eql(e.sqr(s),r))throw new Error("Cannot find square root");return s}}return tonelliShanks(e)}const isNegativeLE=(e,t)=>(mod$1(e,t)&_1n$8)===_1n$8,FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(e){const t=FIELD_FIELDS.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return validateObject(e,t)}function FpPow(e,t,r){if(r<_0n$6)throw new Error("invalid exponent, negatives unsupported");if(r===_0n$6)return e.ONE;if(r===_1n$8)return t;let n=e.ONE,i=t;for(;r>_0n$6;)r&_1n$8&&(n=e.mul(n,i)),i=e.sqr(i),r>>=_1n$8;return n}function FpInvertBatch(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}function nLength(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Field(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=_0n$6)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:a}=nLength(e,t);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const s=Object.freeze({ORDER:e,isLE:r,BITS:i,BYTES:a,MASK:bitMask(i),ZERO:_0n$6,ONE:_1n$8,create:t=>mod$1(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return _0n$6<=t&&t<e},is0:e=>e===_0n$6,isOdd:e=>(e&_1n$8)===_1n$8,neg:t=>mod$1(-t,e),eql:(e,t)=>e===t,sqr:t=>mod$1(t*t,e),add:(t,r)=>mod$1(t+r,e),sub:(t,r)=>mod$1(t-r,e),mul:(t,r)=>mod$1(t*r,e),pow:(e,t)=>FpPow(s,e,t),div:(t,r)=>mod$1(t*invert$1(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>invert$1(t,e),sqrt:n.sqrt||(t=>(o||(o=FpSqrt(e)),o(s,t))),invertBatch:e=>FpInvertBatch(s,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?numberToBytesLE(e,a):numberToBytesBE(e,a),fromBytes:e=>{if(e.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+e.length);return r?bytesToNumberLE(e):bytesToNumberBE(e)}});return Object.freeze(s)}function getFieldBytesLength(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function getMinHashLength(e){const t=getFieldBytesLength(e);return t+Math.ceil(t/2)}function mapHashToField(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.length,i=getFieldBytesLength(t),a=getMinHashLength(t);if(n<16||n<a||n>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+n);const o=mod$1(r?bytesToNumberLE(e):bytesToNumberBE(e),t-_1n$8)+_1n$8;return r?numberToBytesLE(o,i):numberToBytesBE(o,i)}const _0n$5=BigInt(0),_1n$7=BigInt(1);function constTimeNegate(e,t){const r=t.negate();return e?r:t}function validateW(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function calcWOpts(e,t){validateW(e,t);return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}function validateMSMPoints(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}function validateMSMScalars(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}const pointPrecomputes$1=new WeakMap,pointWindowSizes=new WeakMap;function getW(e){return pointWindowSizes.get(e)||1}function wNAF(e,t){return{constTimeNegate:constTimeNegate,hasPrecomputes:e=>1!==getW(e),unsafeLadder(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.ZERO,i=t;for(;r>_0n$5;)r&_1n$7&&(n=n.add(i)),i=i.double(),r>>=_1n$7;return n},precomputeWindow(e,r){const{windows:n,windowSize:i}=calcWOpts(r,t),a=[];let o=e,s=o;for(let e=0;e<n;e++){s=o,a.push(s);for(let e=1;e<i;e++)s=s.add(o),a.push(s);o=s.double()}return a},wNAF(r,n,i){const{windows:a,windowSize:o}=calcWOpts(r,t);let s=e.ZERO,u=e.BASE;const c=BigInt(2**r-1),d=2**r,l=BigInt(r);for(let e=0;e<a;e++){const t=e*o;let r=Number(i&c);i>>=l,r>o&&(r-=d,i+=_1n$7);const a=t,p=t+Math.abs(r)-1,h=e%2!=0,f=r<0;0===r?u=u.add(constTimeNegate(h,n[a])):s=s.add(constTimeNegate(f,n[p]))}return{p:s,f:u}},wNAFUnsafe(r,n,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.ZERO;const{windows:o,windowSize:s}=calcWOpts(r,t),u=BigInt(2**r-1),c=2**r,d=BigInt(r);for(let e=0;e<o;e++){const t=e*s;if(i===_0n$5)break;let r=Number(i&u);if(i>>=d,r>s&&(r-=c,i+=_1n$7),0===r)continue;let o=n[t+Math.abs(r)-1];r<0&&(o=o.negate()),a=a.add(o)}return a},getPrecomputes(e,t,r){let n=pointPrecomputes$1.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&pointPrecomputes$1.set(t,r(n))),n},wNAFCached(e,t,r){const n=getW(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const i=getW(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){validateW(r,t),pointWindowSizes.set(e,r),pointPrecomputes$1.delete(e)}}}function pippenger(e,t,r,n){if(validateMSMPoints(r,e),validateMSMScalars(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,a=bitLen(BigInt(r.length)),o=a>12?a-3:a>4?a-2:a?2:1,s=(1<<o)-1,u=new Array(s+1).fill(i);let c=i;for(let e=Math.floor((t.BITS-1)/o)*o;e>=0;e-=o){u.fill(i);for(let t=0;t<n.length;t++){const i=n[t],a=Number(i>>BigInt(e)&BigInt(s));u[a]=u[a].add(r[t])}let t=i;for(let e=u.length-1,r=i;e>0;e--)r=r.add(u[e]),t=t.add(r);if(c=c.add(t),0!==e)for(let e=0;e<o;e++)c=c.double()}return c}function validateBasic(e){return validateField(e.Fp),validateObject(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const _0n$4=BigInt(0),_1n$6=BigInt(1),_2n$5=BigInt(2),_8n$2=BigInt(8),VERIFY_DEFAULT={zip215:!0};function validateOpts$1(e){const t=validateBasic(e);return validateObject(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function twistedEdwards(e){const t=validateOpts$1(e),{Fp:r,n:n,prehash:i,hash:a,randomBytes:o,nByteLength:s,h:u}=t,c=_2n$5<<BigInt(8*s)-_1n$6,d=r.create,l=Field(t.n,t.nBitLength),p=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(e){return{isValid:!1,value:_0n$4}}}),h=t.adjustScalarBytes||(e=>e),f=t.domain||((e,t,r)=>{if(abool("phflag",r),t.length||r)throw new Error("Contexts/pre-hash are not supported");return e});function m(e,t){aInRange("coordinate "+e,t,_0n$4,c)}function y(e){if(!(e instanceof v))throw new Error("ExtendedPoint expected")}const g=memoized(((e,t)=>{const{ex:n,ey:i,ez:a}=e,o=e.is0();null==t&&(t=o?_8n$2:r.inv(a));const s=d(n*t),u=d(i*t),c=d(a*t);if(o)return{x:_0n$4,y:_1n$6};if(c!==_1n$6)throw new Error("invZ was invalid");return{x:s,y:u}})),b=memoized((e=>{const{a:r,d:n}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:i,ey:a,ez:o,et:s}=e,u=d(i*i),c=d(a*a),l=d(o*o),p=d(l*l),h=d(u*r);if(d(l*d(h+c))!==d(p+d(n*d(u*c))))throw new Error("bad point: equation left != right (1)");if(d(i*a)!==d(o*s))throw new Error("bad point: equation left != right (2)");return!0}));class v{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,m("x",e),m("y",t),m("z",r),m("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof v)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};return m("x",t),m("y",r),new v(t,r,_1n$6,d(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(v.fromAffine)}static msm(e,t){return pippenger(v,l,e,t)}_setWindowSize(e){S.setWindowSize(this,e)}assertValidity(){b(this)}equals(e){y(e);const{ex:t,ey:r,ez:n}=this,{ex:i,ey:a,ez:o}=e,s=d(t*o),u=d(i*n),c=d(r*o),l=d(a*n);return s===u&&c===l}is0(){return this.equals(v.ZERO)}negate(){return new v(d(-this.ex),this.ey,this.ez,d(-this.et))}double(){const{a:e}=t,{ex:r,ey:n,ez:i}=this,a=d(r*r),o=d(n*n),s=d(_2n$5*d(i*i)),u=d(e*a),c=r+n,l=d(d(c*c)-a-o),p=u+o,h=p-s,f=u-o,m=d(l*h),y=d(p*f),g=d(l*f),b=d(h*p);return new v(m,y,b,g)}add(e){y(e);const{a:r,d:n}=t,{ex:i,ey:a,ez:o,et:s}=this,{ex:u,ey:c,ez:l,et:p}=e;if(r===BigInt(-1)){const e=d((a-i)*(c+u)),t=d((a+i)*(c-u)),r=d(t-e);if(r===_0n$4)return this.double();const n=d(o*_2n$5*p),h=d(s*_2n$5*l),f=h+n,m=t+e,y=h-n,g=d(f*r),b=d(m*y),w=d(f*y),_=d(r*m);return new v(g,b,_,w)}const h=d(i*u),f=d(a*c),m=d(s*n*p),g=d(o*l),b=d((i+a)*(u+c)-h-f),w=g-m,_=g+m,S=d(f-r*h),E=d(b*w),A=d(_*S),T=d(b*S),I=d(w*_);return new v(E,A,I,T)}subtract(e){return this.add(e.negate())}wNAF(e){return S.wNAFCached(this,e,v.normalizeZ)}multiply(e){const t=e;aInRange("scalar",t,_1n$6,n);const{p:r,f:i}=this.wNAF(t);return v.normalizeZ([r,i])[0]}multiplyUnsafe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.ZERO;const r=e;return aInRange("scalar",r,_0n$4,n),r===_0n$4?_:this.is0()||r===_1n$6?this:S.wNAFCachedUnsafe(this,r,v.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return S.unsafeLadder(this,n).is0()}toAffine(e){return g(this,e)}clearCofactor(){const{h:e}=t;return e===_1n$6?this:this.multiplyUnsafe(e)}static fromHex(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{d:i,a:a}=t,o=r.BYTES;e=ensureBytes$2("pointHex",e,o),abool("zip215",n);const s=e.slice(),u=e[o-1];s[o-1]=-129&u;const l=bytesToNumberLE(s),h=n?c:r.ORDER;aInRange("pointHex.y",l,_0n$4,h);const f=d(l*l),m=d(f-_1n$6),y=d(i*f-a);let{isValid:g,value:b}=p(m,y);if(!g)throw new Error("Point.fromHex: invalid y coordinate");const w=(b&_1n$6)===_1n$6,_=0!=(128&u);if(!n&&b===_0n$4&&_)throw new Error("Point.fromHex: x=0 and x_0=1");return _!==w&&(b=d(-b)),v.fromAffine({x:b,y:l})}static fromPrivateKey(e){return T(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=numberToBytesLE(t,r.BYTES);return n[n.length-1]|=e&_1n$6?128:0,n}toHex(){return bytesToHex$2(this.toRawBytes())}}v.BASE=new v(t.Gx,t.Gy,_1n$6,d(t.Gx*t.Gy)),v.ZERO=new v(_0n$4,_1n$6,_1n$6,_0n$4);const{BASE:w,ZERO:_}=v,S=wNAF(v,8*s);function E(e){return mod$1(e,n)}function A(e){return E(bytesToNumberLE(e))}function T(e){const t=r.BYTES;e=ensureBytes$2("private key",e,t);const n=ensureBytes$2("hashed private key",a(e),2*t),i=h(n.slice(0,t)),o=n.slice(t,2*t),s=A(i),u=w.multiply(s),c=u.toRawBytes();return{head:i,prefix:o,scalar:s,point:u,pointBytes:c}}function I(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const o=concatBytes$2(...r);return A(a(f(o,ensureBytes$2("context",e),!!i)))}const $=VERIFY_DEFAULT;w._setWindowSize(8);const C={getExtendedPublicKey:T,randomPrivateKey:()=>o(r.BYTES),precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};return{CURVE:t,getPublicKey:function(e){return T(e).pointBytes},sign:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=ensureBytes$2("message",e),i&&(e=i(e));const{prefix:o,scalar:s,pointBytes:u}=T(t),c=I(a.context,o,e),d=w.multiply(c).toRawBytes(),l=E(c+I(a.context,d,u,e)*s);return aInRange("signature.s",l,_0n$4,n),ensureBytes$2("result",concatBytes$2(d,numberToBytesLE(l,r.BYTES)),2*r.BYTES)},verify:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$;const{context:o,zip215:s}=a,u=r.BYTES;e=ensureBytes$2("signature",e,2*u),t=ensureBytes$2("message",t),n=ensureBytes$2("publicKey",n,u),void 0!==s&&abool("zip215",s),i&&(t=i(t));const c=bytesToNumberLE(e.slice(u,2*u));let d,l,p;try{d=v.fromHex(n,s),l=v.fromHex(e.slice(0,u),s),p=w.multiplyUnsafe(c)}catch(e){return!1}if(!s&&d.isSmallOrder())return!1;const h=I(o,l.toRawBytes(),d.toRawBytes(),t);return l.add(d.multiplyUnsafe(h)).subtract(p).clearCofactor().equals(v.ZERO)},ExtendedPoint:v,utils:C}}const ED25519_P=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ED25519_SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const _1n$5=BigInt(1),_2n$4=BigInt(2);BigInt(3);const _5n=BigInt(5),_8n$1=BigInt(8);function ed25519_pow_2_252_3(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),a=ED25519_P,o=e*e%a*e%a,s=pow2$1(o,_2n$4,a)*o%a,u=pow2$1(s,_1n$5,a)*e%a,c=pow2$1(u,_5n,a)*u%a,d=pow2$1(c,t,a)*c%a,l=pow2$1(d,r,a)*d%a,p=pow2$1(l,n,a)*l%a,h=pow2$1(p,i,a)*p%a,f=pow2$1(h,i,a)*p%a,m=pow2$1(f,t,a)*c%a;return{pow_p_5_8:pow2$1(m,_2n$4,a)*e%a,b2:o}}function adjustScalarBytes(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function uvRatio(e,t){const r=ED25519_P,n=mod$1(t*t*t,r),i=mod$1(n*n*t,r);let a=mod$1(e*n*ed25519_pow_2_252_3(e*i).pow_p_5_8,r);const o=mod$1(t*a*a,r),s=a,u=mod$1(a*ED25519_SQRT_M1,r),c=o===e,d=o===mod$1(-e,r),l=o===mod$1(-e*ED25519_SQRT_M1,r);return c&&(a=s),(d||l)&&(a=u),isNegativeLE(a,r)&&(a=mod$1(-a,r)),{isValid:c||d,value:a}}const Fp=(()=>Field(ED25519_P,void 0,!0))(),ed25519Defaults=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Fp,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:_8n$1,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:sha512,randomBytes:randomBytes$1,adjustScalarBytes:adjustScalarBytes,uvRatio:uvRatio}))(),ed25519=(()=>twistedEdwards(ed25519Defaults))();var bn={exports:{}};!function(e){!function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var a;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{a=require("buffer").Buffer}catch(e){}function o(e,t,n){for(var i=0,a=Math.min(e.length,n),o=0,s=t;s<a;s++){var u,c=e.charCodeAt(s)-48;i<<=4,i|=u=c>=49&&c<=54?c-49+10:c>=17&&c<=22?c-17+10:c,o|=u}return r(!(240&o),"Invalid character in "+e),i}function s(e,t,n,i){for(var a=0,o=0,s=Math.min(e.length,n),u=t;u<s;u++){var c=e.charCodeAt(u)-48;a*=i,o=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&o<i,"Invalid character"),a+=o}return a}function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.negative=1),this._strip(),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===n)for(i=e.length-1,a=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===n)for(i=0,a=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this._strip()},i.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,i,a=0;for(r=e.length-6,n=0;r>=t;r-=6)i=o(e,r,r+6),this.words[n]|=i<<a&67108863,this.words[n+1]|=i>>>26-a&4194303,(a+=24)>=26&&(a-=26,n++);r+6!==t&&(i=o(e,t,r+6),this.words[n]|=i<<a&67108863,this.words[n+1]|=i>>>26-a&4194303),this._strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var a=e.length-r,o=a%n,u=Math.min(a,a-o)+r,c=0,d=r;d<u;d+=n)c=s(e,d,d+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var l=1;for(c=s(e,d,e.length,t),d=0;d<o;d++)l*=t;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype._move=function(e){e.words=this.words,e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for?i.prototype[Symbol.for("nodejs.util.inspect.custom")]=u:i.prototype.inspect=u;var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,a=0,o=0;o<this.length;o++){var s=this.words[o],u=(16777215&(s<<i|a)).toString(16);n=0!==(a=s>>>24-i&16777215)||o!==this.length-1?c[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,o--)}for(0!==a&&(n=a.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var p=d[e],h=l[e];n="";var f=this.clone();for(f.negative=0;!f.isZero();){var m=f.modrn(h).toString(e);n=(f=f.idivn(h)).isZero()?m+n:c[p-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16,2)},a&&(i.prototype.toBuffer=function(e,t){return this.toArrayLike(a,e,t)}),i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function p(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],a=0|t.words[0],o=i*a,s=67108863&o,u=o/67108864|0;r.words[0]=s;for(var c=1;c<n;c++){for(var d=u>>>26,l=67108863&u,p=Math.min(c,t.length-1),h=Math.max(0,c-e.length+1);h<=p;h++){var f=c-h|0;d+=(o=(i=0|e.words[f])*(a=0|t.words[h])+l)/67108864|0,l=67108863&o}r.words[c]=0|l,u=0|d}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}i.prototype.toArrayLike=function(e,t,n){this._strip();var i=this.byteLength(),a=n||Math.max(1,i);r(i<=a,"byte array longer than desired length"),r(a>0,"Requested array length <= 0");var o=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,a);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,i),o},i.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,a=0;i<this.length;i++){var o=this.words[i]<<a|n;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===a?(r<e.length&&(e[r++]=o>>24&255),n=0,a=0):(n=o>>>24,a+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},i.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,a=0;i<this.length;i++){var o=this.words[i]<<a|n;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===a?(r>=0&&(e[r--]=o>>24&255),n=0,a=0):(n=o>>>24,a+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},i.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},i.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},i.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},i.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,a=0;a<n.length;a++)t=(0|r.words[a])+(0|n.words[a])+i,this.words[a]=67108863&t,i=t>>>26;for(;0!==i&&a<r.length;a++)t=(0|r.words[a])+i,this.words[a]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var a=0,o=0;o<n.length;o++)a=(t=(0|r.words[o])-(0|n.words[o])+a)>>26,this.words[o]=67108863&t;for(;0!==a&&o<r.length;o++)a=(t=(0|r.words[o])+a)>>26,this.words[o]=67108863&t;if(0===a&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var h=function(e,t,r){var n,i,a,o=e.words,s=t.words,u=r.words,c=0,d=0|o[0],l=8191&d,p=d>>>13,h=0|o[1],f=8191&h,m=h>>>13,y=0|o[2],g=8191&y,b=y>>>13,v=0|o[3],w=8191&v,_=v>>>13,S=0|o[4],E=8191&S,A=S>>>13,T=0|o[5],I=8191&T,$=T>>>13,C=0|o[6],R=8191&C,k=C>>>13,x=0|o[7],N=8191&x,O=x>>>13,P=0|o[8],F=8191&P,B=P>>>13,D=0|o[9],M=8191&D,L=D>>>13,U=0|s[0],z=8191&U,J=U>>>13,H=0|s[1],q=8191&H,j=H>>>13,K=0|s[2],G=8191&K,W=K>>>13,V=0|s[3],Z=8191&V,Y=V>>>13,X=0|s[4],Q=8191&X,ee=X>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ie=0|s[6],ae=8191&ie,oe=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,de=0|s[8],le=8191&de,pe=de>>>13,he=0|s[9],fe=8191&he,me=he>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(c+(n=Math.imul(l,z))|0)+((8191&(i=(i=Math.imul(l,J))+Math.imul(p,z)|0))<<13)|0;c=((a=Math.imul(p,J))+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(f,z),i=(i=Math.imul(f,J))+Math.imul(m,z)|0,a=Math.imul(m,J);var ge=(c+(n=n+Math.imul(l,q)|0)|0)+((8191&(i=(i=i+Math.imul(l,j)|0)+Math.imul(p,q)|0))<<13)|0;c=((a=a+Math.imul(p,j)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,z),i=(i=Math.imul(g,J))+Math.imul(b,z)|0,a=Math.imul(b,J),n=n+Math.imul(f,q)|0,i=(i=i+Math.imul(f,j)|0)+Math.imul(m,q)|0,a=a+Math.imul(m,j)|0;var be=(c+(n=n+Math.imul(l,G)|0)|0)+((8191&(i=(i=i+Math.imul(l,W)|0)+Math.imul(p,G)|0))<<13)|0;c=((a=a+Math.imul(p,W)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(w,z),i=(i=Math.imul(w,J))+Math.imul(_,z)|0,a=Math.imul(_,J),n=n+Math.imul(g,q)|0,i=(i=i+Math.imul(g,j)|0)+Math.imul(b,q)|0,a=a+Math.imul(b,j)|0,n=n+Math.imul(f,G)|0,i=(i=i+Math.imul(f,W)|0)+Math.imul(m,G)|0,a=a+Math.imul(m,W)|0;var ve=(c+(n=n+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,Y)|0)+Math.imul(p,Z)|0))<<13)|0;c=((a=a+Math.imul(p,Y)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(E,z),i=(i=Math.imul(E,J))+Math.imul(A,z)|0,a=Math.imul(A,J),n=n+Math.imul(w,q)|0,i=(i=i+Math.imul(w,j)|0)+Math.imul(_,q)|0,a=a+Math.imul(_,j)|0,n=n+Math.imul(g,G)|0,i=(i=i+Math.imul(g,W)|0)+Math.imul(b,G)|0,a=a+Math.imul(b,W)|0,n=n+Math.imul(f,Z)|0,i=(i=i+Math.imul(f,Y)|0)+Math.imul(m,Z)|0,a=a+Math.imul(m,Y)|0;var we=(c+(n=n+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,ee)|0)+Math.imul(p,Q)|0))<<13)|0;c=((a=a+Math.imul(p,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(I,z),i=(i=Math.imul(I,J))+Math.imul($,z)|0,a=Math.imul($,J),n=n+Math.imul(E,q)|0,i=(i=i+Math.imul(E,j)|0)+Math.imul(A,q)|0,a=a+Math.imul(A,j)|0,n=n+Math.imul(w,G)|0,i=(i=i+Math.imul(w,W)|0)+Math.imul(_,G)|0,a=a+Math.imul(_,W)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(b,Z)|0,a=a+Math.imul(b,Y)|0,n=n+Math.imul(f,Q)|0,i=(i=i+Math.imul(f,ee)|0)+Math.imul(m,Q)|0,a=a+Math.imul(m,ee)|0;var _e=(c+(n=n+Math.imul(l,re)|0)|0)+((8191&(i=(i=i+Math.imul(l,ne)|0)+Math.imul(p,re)|0))<<13)|0;c=((a=a+Math.imul(p,ne)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(R,z),i=(i=Math.imul(R,J))+Math.imul(k,z)|0,a=Math.imul(k,J),n=n+Math.imul(I,q)|0,i=(i=i+Math.imul(I,j)|0)+Math.imul($,q)|0,a=a+Math.imul($,j)|0,n=n+Math.imul(E,G)|0,i=(i=i+Math.imul(E,W)|0)+Math.imul(A,G)|0,a=a+Math.imul(A,W)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,Z)|0,a=a+Math.imul(_,Y)|0,n=n+Math.imul(g,Q)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(b,Q)|0,a=a+Math.imul(b,ee)|0,n=n+Math.imul(f,re)|0,i=(i=i+Math.imul(f,ne)|0)+Math.imul(m,re)|0,a=a+Math.imul(m,ne)|0;var Se=(c+(n=n+Math.imul(l,ae)|0)|0)+((8191&(i=(i=i+Math.imul(l,oe)|0)+Math.imul(p,ae)|0))<<13)|0;c=((a=a+Math.imul(p,oe)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(N,z),i=(i=Math.imul(N,J))+Math.imul(O,z)|0,a=Math.imul(O,J),n=n+Math.imul(R,q)|0,i=(i=i+Math.imul(R,j)|0)+Math.imul(k,q)|0,a=a+Math.imul(k,j)|0,n=n+Math.imul(I,G)|0,i=(i=i+Math.imul(I,W)|0)+Math.imul($,G)|0,a=a+Math.imul($,W)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,Y)|0)+Math.imul(A,Z)|0,a=a+Math.imul(A,Y)|0,n=n+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(_,Q)|0,a=a+Math.imul(_,ee)|0,n=n+Math.imul(g,re)|0,i=(i=i+Math.imul(g,ne)|0)+Math.imul(b,re)|0,a=a+Math.imul(b,ne)|0,n=n+Math.imul(f,ae)|0,i=(i=i+Math.imul(f,oe)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,oe)|0;var Ee=(c+(n=n+Math.imul(l,ue)|0)|0)+((8191&(i=(i=i+Math.imul(l,ce)|0)+Math.imul(p,ue)|0))<<13)|0;c=((a=a+Math.imul(p,ce)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(F,z),i=(i=Math.imul(F,J))+Math.imul(B,z)|0,a=Math.imul(B,J),n=n+Math.imul(N,q)|0,i=(i=i+Math.imul(N,j)|0)+Math.imul(O,q)|0,a=a+Math.imul(O,j)|0,n=n+Math.imul(R,G)|0,i=(i=i+Math.imul(R,W)|0)+Math.imul(k,G)|0,a=a+Math.imul(k,W)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul($,Z)|0,a=a+Math.imul($,Y)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(A,Q)|0,a=a+Math.imul(A,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(_,re)|0,a=a+Math.imul(_,ne)|0,n=n+Math.imul(g,ae)|0,i=(i=i+Math.imul(g,oe)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,oe)|0,n=n+Math.imul(f,ue)|0,i=(i=i+Math.imul(f,ce)|0)+Math.imul(m,ue)|0,a=a+Math.imul(m,ce)|0;var Ae=(c+(n=n+Math.imul(l,le)|0)|0)+((8191&(i=(i=i+Math.imul(l,pe)|0)+Math.imul(p,le)|0))<<13)|0;c=((a=a+Math.imul(p,pe)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(M,z),i=(i=Math.imul(M,J))+Math.imul(L,z)|0,a=Math.imul(L,J),n=n+Math.imul(F,q)|0,i=(i=i+Math.imul(F,j)|0)+Math.imul(B,q)|0,a=a+Math.imul(B,j)|0,n=n+Math.imul(N,G)|0,i=(i=i+Math.imul(N,W)|0)+Math.imul(O,G)|0,a=a+Math.imul(O,W)|0,n=n+Math.imul(R,Z)|0,i=(i=i+Math.imul(R,Y)|0)+Math.imul(k,Z)|0,a=a+Math.imul(k,Y)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul($,Q)|0,a=a+Math.imul($,ee)|0,n=n+Math.imul(E,re)|0,i=(i=i+Math.imul(E,ne)|0)+Math.imul(A,re)|0,a=a+Math.imul(A,ne)|0,n=n+Math.imul(w,ae)|0,i=(i=i+Math.imul(w,oe)|0)+Math.imul(_,ae)|0,a=a+Math.imul(_,oe)|0,n=n+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(b,ue)|0,a=a+Math.imul(b,ce)|0,n=n+Math.imul(f,le)|0,i=(i=i+Math.imul(f,pe)|0)+Math.imul(m,le)|0,a=a+Math.imul(m,pe)|0;var Te=(c+(n=n+Math.imul(l,fe)|0)|0)+((8191&(i=(i=i+Math.imul(l,me)|0)+Math.imul(p,fe)|0))<<13)|0;c=((a=a+Math.imul(p,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(M,q),i=(i=Math.imul(M,j))+Math.imul(L,q)|0,a=Math.imul(L,j),n=n+Math.imul(F,G)|0,i=(i=i+Math.imul(F,W)|0)+Math.imul(B,G)|0,a=a+Math.imul(B,W)|0,n=n+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(O,Z)|0,a=a+Math.imul(O,Y)|0,n=n+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,ee)|0)+Math.imul(k,Q)|0,a=a+Math.imul(k,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul($,re)|0,a=a+Math.imul($,ne)|0,n=n+Math.imul(E,ae)|0,i=(i=i+Math.imul(E,oe)|0)+Math.imul(A,ae)|0,a=a+Math.imul(A,oe)|0,n=n+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(_,ue)|0,a=a+Math.imul(_,ce)|0,n=n+Math.imul(g,le)|0,i=(i=i+Math.imul(g,pe)|0)+Math.imul(b,le)|0,a=a+Math.imul(b,pe)|0;var Ie=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(M,G),i=(i=Math.imul(M,W))+Math.imul(L,G)|0,a=Math.imul(L,W),n=n+Math.imul(F,Z)|0,i=(i=i+Math.imul(F,Y)|0)+Math.imul(B,Z)|0,a=a+Math.imul(B,Y)|0,n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(O,Q)|0,a=a+Math.imul(O,ee)|0,n=n+Math.imul(R,re)|0,i=(i=i+Math.imul(R,ne)|0)+Math.imul(k,re)|0,a=a+Math.imul(k,ne)|0,n=n+Math.imul(I,ae)|0,i=(i=i+Math.imul(I,oe)|0)+Math.imul($,ae)|0,a=a+Math.imul($,oe)|0,n=n+Math.imul(E,ue)|0,i=(i=i+Math.imul(E,ce)|0)+Math.imul(A,ue)|0,a=a+Math.imul(A,ce)|0,n=n+Math.imul(w,le)|0,i=(i=i+Math.imul(w,pe)|0)+Math.imul(_,le)|0,a=a+Math.imul(_,pe)|0;var $e=(c+(n=n+Math.imul(g,fe)|0)|0)+((8191&(i=(i=i+Math.imul(g,me)|0)+Math.imul(b,fe)|0))<<13)|0;c=((a=a+Math.imul(b,me)|0)+(i>>>13)|0)+($e>>>26)|0,$e&=67108863,n=Math.imul(M,Z),i=(i=Math.imul(M,Y))+Math.imul(L,Z)|0,a=Math.imul(L,Y),n=n+Math.imul(F,Q)|0,i=(i=i+Math.imul(F,ee)|0)+Math.imul(B,Q)|0,a=a+Math.imul(B,ee)|0,n=n+Math.imul(N,re)|0,i=(i=i+Math.imul(N,ne)|0)+Math.imul(O,re)|0,a=a+Math.imul(O,ne)|0,n=n+Math.imul(R,ae)|0,i=(i=i+Math.imul(R,oe)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,oe)|0,n=n+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul($,ue)|0,a=a+Math.imul($,ce)|0,n=n+Math.imul(E,le)|0,i=(i=i+Math.imul(E,pe)|0)+Math.imul(A,le)|0,a=a+Math.imul(A,pe)|0;var Ce=(c+(n=n+Math.imul(w,fe)|0)|0)+((8191&(i=(i=i+Math.imul(w,me)|0)+Math.imul(_,fe)|0))<<13)|0;c=((a=a+Math.imul(_,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(M,Q),i=(i=Math.imul(M,ee))+Math.imul(L,Q)|0,a=Math.imul(L,ee),n=n+Math.imul(F,re)|0,i=(i=i+Math.imul(F,ne)|0)+Math.imul(B,re)|0,a=a+Math.imul(B,ne)|0,n=n+Math.imul(N,ae)|0,i=(i=i+Math.imul(N,oe)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,oe)|0,n=n+Math.imul(R,ue)|0,i=(i=i+Math.imul(R,ce)|0)+Math.imul(k,ue)|0,a=a+Math.imul(k,ce)|0,n=n+Math.imul(I,le)|0,i=(i=i+Math.imul(I,pe)|0)+Math.imul($,le)|0,a=a+Math.imul($,pe)|0;var Re=(c+(n=n+Math.imul(E,fe)|0)|0)+((8191&(i=(i=i+Math.imul(E,me)|0)+Math.imul(A,fe)|0))<<13)|0;c=((a=a+Math.imul(A,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(M,re),i=(i=Math.imul(M,ne))+Math.imul(L,re)|0,a=Math.imul(L,ne),n=n+Math.imul(F,ae)|0,i=(i=i+Math.imul(F,oe)|0)+Math.imul(B,ae)|0,a=a+Math.imul(B,oe)|0,n=n+Math.imul(N,ue)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(O,ue)|0,a=a+Math.imul(O,ce)|0,n=n+Math.imul(R,le)|0,i=(i=i+Math.imul(R,pe)|0)+Math.imul(k,le)|0,a=a+Math.imul(k,pe)|0;var ke=(c+(n=n+Math.imul(I,fe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul($,fe)|0))<<13)|0;c=((a=a+Math.imul($,me)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(M,ae),i=(i=Math.imul(M,oe))+Math.imul(L,ae)|0,a=Math.imul(L,oe),n=n+Math.imul(F,ue)|0,i=(i=i+Math.imul(F,ce)|0)+Math.imul(B,ue)|0,a=a+Math.imul(B,ce)|0,n=n+Math.imul(N,le)|0,i=(i=i+Math.imul(N,pe)|0)+Math.imul(O,le)|0,a=a+Math.imul(O,pe)|0;var xe=(c+(n=n+Math.imul(R,fe)|0)|0)+((8191&(i=(i=i+Math.imul(R,me)|0)+Math.imul(k,fe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(M,ue),i=(i=Math.imul(M,ce))+Math.imul(L,ue)|0,a=Math.imul(L,ce),n=n+Math.imul(F,le)|0,i=(i=i+Math.imul(F,pe)|0)+Math.imul(B,le)|0,a=a+Math.imul(B,pe)|0;var Ne=(c+(n=n+Math.imul(N,fe)|0)|0)+((8191&(i=(i=i+Math.imul(N,me)|0)+Math.imul(O,fe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(M,le),i=(i=Math.imul(M,pe))+Math.imul(L,le)|0,a=Math.imul(L,pe);var Oe=(c+(n=n+Math.imul(F,fe)|0)|0)+((8191&(i=(i=i+Math.imul(F,me)|0)+Math.imul(B,fe)|0))<<13)|0;c=((a=a+Math.imul(B,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863;var Pe=(c+(n=Math.imul(M,fe))|0)+((8191&(i=(i=Math.imul(M,me))+Math.imul(L,fe)|0))<<13)|0;return c=((a=Math.imul(L,me))+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,u[0]=ye,u[1]=ge,u[2]=be,u[3]=ve,u[4]=we,u[5]=_e,u[6]=Se,u[7]=Ee,u[8]=Ae,u[9]=Te,u[10]=Ie,u[11]=$e,u[12]=Ce,u[13]=Re,u[14]=ke,u[15]=xe,u[16]=Ne,u[17]=Oe,u[18]=Pe,0!==c&&(u[19]=c,r.length++),r};function f(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,a=0;a<r.length-1;a++){var o=i;i=0;for(var s=67108863&n,u=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=u;c++){var d=a-c,l=(0|e.words[d])*(0|t.words[c]),p=67108863&l;s=67108863&(p=p+s|0),i+=(o=(o=o+(l/67108864|0)|0)+(p>>>26)|0)>>>26,o&=67108863}r.words[a]=s,n=o,o=i}return 0!==n?r.words[a]=n:r.length--,r._strip()}function m(e,t,r){return f(e,t,r)}Math.imul||(h=p),i.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?h(this,e,t):r<63?p(this,e,t):r<1024?f(this,e,t):m(this,e,t)},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),m(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<67108864);for(var n=0,i=0;i<this.length;i++){var a=(0|this.words[i])*e,o=(67108863&a)+(67108863&n);n>>=26,n+=a/67108864|0,n+=o>>>26,this.words[i]=67108863&o}return 0!==n&&(this.words[i]=n,this.length++),t?this.ineg():this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var a=r.sqr();n<t.length;n++,a=a.sqr())0!==t[n]&&(r=r.mul(a));return r},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&a,u=(0|this.words[t])-s<<n;this.words[t]=u|o,o=s>>>26-n}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var a=e%26,o=Math.min((e-a)/26,this.length),s=67108863^67108863>>>a<<a,u=n;if(i-=o,i=Math.max(0,i),u){for(var c=0;c<o;c++)u.words[c]=this.words[c];u.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var d=0;for(c=this.length-1;c>=0&&(0!==d||c>=i);c--){var l=0|this.words[c];this.words[c]=d<<26-a|l>>>a,d=l&s}return u&&0!==d&&(u.words[u.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,n){var i,a,o=e.length+n;this._expand(o);var s=0;for(i=0;i<e.length;i++){a=(0|this.words[i+n])+s;var u=(0|e.words[i])*t;s=((a-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)s=(a=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&a;if(0===s)return this._strip();for(r(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this._strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),a=e,o=0|a.words[a.length-1];0!==(r=26-this._countBits(o))&&(a=a.ushln(r),n.iushln(r),o=0|a.words[a.length-1]);var s,u=n.length-a.length;if("mod"!==t){(s=new i(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var d=n.clone()._ishlnsubmul(a,1,u);0===d.negative&&(n=d,s&&(s.words[u]=1));for(var l=u-1;l>=0;l--){var p=67108864*(0|n.words[a.length+l])+(0|n.words[a.length+l-1]);for(p=Math.min(p/o|0,67108863),n._ishlnsubmul(a,p,l);0!==n.negative;)p--,n.negative=0,n._ishlnsubmul(a,1,l),n.isZero()||(n.negative^=1);s&&(s.words[l]=p)}return s&&s._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},i.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(a=s.div.neg()),"div"!==t&&(o=s.mod.neg(),n&&0!==o.negative&&o.iadd(e)),{div:a,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(a=s.div.neg()),{div:a,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),n&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modrn(e.words[0]))}:this._wordDiv(e,t);var a,o,s},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),a=r.cmp(n);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=(1<<26)%e,i=0,a=this.length-1;a>=0;a--)i=(n*i+(0|this.words[a]))%e;return t?-i:i},i.prototype.modn=function(e){return this.modrn(e)},i.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var a=(0|this.words[i])+67108864*n;this.words[i]=a/e|0,n=a%e}return this._strip(),t?this.ineg():this},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new i(1),o=new i(0),s=new i(0),u=new i(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var d=n.clone(),l=t.clone();!t.isZero();){for(var p=0,h=1;0==(t.words[0]&h)&&p<26;++p,h<<=1);if(p>0)for(t.iushrn(p);p-- >0;)(a.isOdd()||o.isOdd())&&(a.iadd(d),o.isub(l)),a.iushrn(1),o.iushrn(1);for(var f=0,m=1;0==(n.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(n.iushrn(f);f-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(d),u.isub(l)),s.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(s),o.isub(u)):(n.isub(t),s.isub(a),u.isub(o))}return{a:s,b:u,gcd:n.iushln(c)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a,o=new i(1),s=new i(0),u=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,d=1;0==(t.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(t.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var l=0,p=1;0==(n.words[0]&p)&&l<26;++l,p<<=1);if(l>0)for(n.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(s)):(n.isub(t),s.isub(o))}return(a=0===t.cmpn(1)?o:s).cmpn(0)<0&&a.iadd(e),a},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var a=t;t=r,r=a}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,o=n;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new S(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function g(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function E(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},g.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r._strip(),r},g.prototype.split=function(e,t){e.iushrn(this.n,0,t)},g.prototype.imulK=function(e){return e.imul(this.k)},n(b,g),b.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&r,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&r)<<4|a>>>22,a=o}a>>>=22,e.words[i-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(v,g),n(w,g),n(_,g),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new v;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return y[e]=t,t},S.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(e.umod(this.m)._forceRed(this)._move(e),e)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new i(1)).iushrn(2);return this.pow(e,n)}for(var a=this.m.subn(1),o=0;!a.isZero()&&0===a.andln(1);)o++,a.iushrn(1);r(!a.isZero());var s=new i(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new i(2*d*d).toRed(this);0!==this.pow(d,c).cmp(u);)d.redIAdd(u);for(var l=this.pow(d,a),p=this.pow(e,a.addn(1).iushrn(1)),h=this.pow(e,a),f=o;0!==h.cmp(s);){for(var m=h,y=0;0!==m.cmp(s);y++)m=m.redSqr();r(y<f);var g=this.pow(l,new i(1).iushln(f-y-1));p=p.redMul(g),l=g.redSqr(),h=h.redMul(l),f=y}return p},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var a=r[0],o=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],d=u-1;d>=0;d--){var l=c>>d&1;a!==r[0]&&(a=this.sqr(a)),0!==l||0!==o?(o<<=1,o|=l,(4===++s||0===n&&0===d)&&(a=this.mul(a,r[o]),s=0,o=0)):s=0}u=26}return a},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new E(e)},n(E,S),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=r.isub(n).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,commonjsGlobal$1)}(bn);var BN=bn.exports,safeBuffer={exports:{}};
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
!function(e,t){var r=buffer,n=r.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=a),a.prototype=Object.create(n.prototype),i(n,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(safeBuffer,safeBuffer.exports);var _Buffer=safeBuffer.exports.Buffer;function base$2(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),a=i.charCodeAt(0);if(255!==t[a])throw new TypeError(i+" is ambiguous");t[a]=n}var o=e.length,s=e.charAt(0),u=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return _Buffer.alloc(0);for(var r=0,n=0,i=0;e[r]===s;)n++,r++;for(var a=(e.length-r)*u+1>>>0,c=new Uint8Array(a);e[r];){var d=t[e.charCodeAt(r)];if(255===d)return;for(var l=0,p=a-1;(0!==d||l<i)&&-1!==p;p--,l++)d+=o*c[p]>>>0,c[p]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");i=l,r++}for(var h=a-i;h!==a&&0===c[h];)h++;var f=_Buffer.allocUnsafe(n+(a-h));f.fill(0,0,n);for(var m=n;h!==a;)f[m++]=c[h++];return f}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=_Buffer.from(t)),!_Buffer.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,n=0,i=0,a=t.length;i!==a&&0===t[i];)i++,r++;for(var u=(a-i)*c+1>>>0,d=new Uint8Array(u);i!==a;){for(var l=t[i],p=0,h=u-1;(0!==l||p<n)&&-1!==h;h--,p++)l+=256*d[h]>>>0,d[h]=l%o>>>0,l=l/o>>>0;if(0!==l)throw new Error("Non-zero carry");n=p,i++}for(var f=u-n;f!==u&&0===d[f];)f++;for(var m=s.repeat(r);f<u;++f)m+=e.charAt(d[f]);return m},decodeUnsafe:d,decode:function(e){var t=d(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}var src$1=base$2,basex=src$1,ALPHABET$1="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58$1=basex(ALPHABET$1);const SHA256_K$2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$2=new Uint32Array(64);class SHA256$2 extends HashMD{constructor(){super(64,32,8,!1),this.A=0|SHA256_IV[0],this.B=0|SHA256_IV[1],this.C=0|SHA256_IV[2],this.D=0|SHA256_IV[3],this.E=0|SHA256_IV[4],this.F=0|SHA256_IV[5],this.G=0|SHA256_IV[6],this.H=0|SHA256_IV[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:a,G:o,H:s}=this;return[e,t,r,n,i,a,o,s]}set(e,t,r,n,i,a,o,s){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|o,this.H=0|s}process(e,t){for(let r=0;r<16;r++,t+=4)SHA256_W$2[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=SHA256_W$2[e-15],r=SHA256_W$2[e-2],n=rotr$2(t,7)^rotr$2(t,18)^t>>>3,i=rotr$2(r,17)^rotr$2(r,19)^r>>>10;SHA256_W$2[e]=i+SHA256_W$2[e-7]+n+SHA256_W$2[e-16]|0}let{A:r,B:n,C:i,D:a,E:o,F:s,G:u,H:c}=this;for(let e=0;e<64;e++){const t=c+(rotr$2(o,6)^rotr$2(o,11)^rotr$2(o,25))+Chi$2(o,s,u)+SHA256_K$2[e]+SHA256_W$2[e]|0,d=(rotr$2(r,2)^rotr$2(r,13)^rotr$2(r,22))+Maj$2(r,n,i)|0;c=u,u=s,s=o,o=a+t|0,a=i,i=n,n=r,r=t+d|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,s=s+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,i,a,o,s,u,c)}roundClean(){SHA256_W$2.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256$3=wrapConstructor$2((()=>new SHA256$2));var lib$1={},encoding_lib={};function inRange(e,t,r){return t<=e&&e<=r}function ToDictionary(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function stringToCodePoints(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var a=t.charCodeAt(n);if(a<55296||a>57343)i.push(a);else if(56320<=a&&a<=57343)i.push(65533);else if(55296<=a&&a<=56319)if(n===r-1)i.push(65533);else{var o=e.charCodeAt(n+1);if(56320<=o&&o<=57343){var s=1023&a,u=1023&o;i.push(65536+(s<<10)+u),n+=1}else i.push(65533)}n+=1}return i}function codePointsToString(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}var end_of_stream=-1;function Stream$2(e){this.tokens=[].slice.call(e)}Stream$2.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():end_of_stream},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var finished$1=-1;function decoderError(e,t){if(e)throw TypeError("Decoder error");return t||65533}var DEFAULT_ENCODING="utf-8";function TextDecoder$1(e,t){if(!(this instanceof TextDecoder$1))return new TextDecoder$1(e,t);if((e=void 0!==e?String(e).toLowerCase():DEFAULT_ENCODING)!==DEFAULT_ENCODING)throw new Error("Encoding not supported. Only utf-8 is supported");t=ToDictionary(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function TextEncoder$1(e,t){if(!(this instanceof TextEncoder$1))return new TextEncoder$1(e,t);if((e=void 0!==e?String(e).toLowerCase():DEFAULT_ENCODING)!==DEFAULT_ENCODING)throw new Error("Encoding not supported. Only utf-8 is supported");t=ToDictionary(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function UTF8Decoder(e){var t=e.fatal,r=0,n=0,i=0,a=128,o=191;this.handler=function(e,s){if(s===end_of_stream&&0!==i)return i=0,decoderError(t);if(s===end_of_stream)return finished$1;if(0===i){if(inRange(s,0,127))return s;if(inRange(s,194,223))i=1,r=s-192;else if(inRange(s,224,239))224===s&&(a=160),237===s&&(o=159),i=2,r=s-224;else{if(!inRange(s,240,244))return decoderError(t);240===s&&(a=144),244===s&&(o=143),i=3,r=s-240}return r<<=6*i,null}if(!inRange(s,a,o))return r=i=n=0,a=128,o=191,e.prepend(s),decoderError(t);if(a=128,o=191,r+=s-128<<6*(i-(n+=1)),n!==i)return null;var u=r;return r=i=n=0,u}}function UTF8Encoder(e){e.fatal,this.handler=function(e,t){if(t===end_of_stream)return finished$1;if(inRange(t,0,127))return t;var r,n;inRange(t,128,2047)?(r=1,n=192):inRange(t,2048,65535)?(r=2,n=224):inRange(t,65536,1114111)&&(r=3,n=240);for(var i=[(t>>6*r)+n];r>0;){var a=t>>6*(r-1);i.push(128|63&a),r-=1}return i}}TextDecoder$1.prototype={decode:function(e,t){var r;r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=ToDictionary(t),this._streaming||(this._decoder=new UTF8Decoder({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var n,i=new Stream$2(r),a=[];!i.endOfStream()&&(n=this._decoder.handler(i,i.read()))!==finished$1;)null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n));if(!this._streaming){do{if((n=this._decoder.handler(i,i.read()))===finished$1)break;null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n))}while(!i.endOfStream());this._decoder=null}return a.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===a[0]?(this._BOMseen=!0,a.shift()):this._BOMseen=!0)),codePointsToString(a)}},TextEncoder$1.prototype={encode:function(e,t){e=e?String(e):"",t=ToDictionary(t),this._streaming||(this._encoder=new UTF8Encoder(this._options)),this._streaming=Boolean(t.stream);for(var r,n=[],i=new Stream$2(stringToCodePoints(e));!i.endOfStream()&&(r=this._encoder.handler(i,i.read()))!==finished$1;)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;(r=this._encoder.handler(i,i.read()))!==finished$1;)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}},encoding_lib.TextEncoder=TextEncoder$1,encoding_lib.TextDecoder=TextDecoder$1;var __createBinding=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),__setModuleDefault=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__decorate=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,r,n){var i,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,r,o):i(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},__importStar=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__importDefault=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lib$1,"__esModule",{value:!0});var deserializeUnchecked_1=lib$1.deserializeUnchecked=deserialize_1=lib$1.deserialize=serialize_1=lib$1.serialize=lib$1.BinaryReader=lib$1.BinaryWriter=lib$1.BorshError=lib$1.baseDecode=lib$1.baseEncode=void 0;const bn_js_1=__importDefault(bn.exports),bs58_1=__importDefault(bs58$1),encoding=__importStar(encoding_lib),ResolvedTextDecoder="function"!=typeof TextDecoder?encoding.TextDecoder:TextDecoder,textDecoder=new ResolvedTextDecoder("utf-8",{fatal:!0});function baseEncode(e){return"string"==typeof e&&(e=Buffer.from(e,"utf8")),bs58_1.default.encode(Buffer.from(e))}function baseDecode(e){return Buffer.from(bs58_1.default.decode(e))}lib$1.baseEncode=baseEncode,lib$1.baseDecode=baseDecode;const INITIAL_LENGTH=1024;class BorshError extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}lib$1.BorshError=BorshError;class BinaryWriter{constructor(){this.buf=Buffer.alloc(INITIAL_LENGTH),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(INITIAL_LENGTH)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(INITIAL_LENGTH)]),this.length+=e.length}writeString(e){this.maybeResize();const t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}function handlingRangeError(e,t,r){const n=r.value;r.value=function(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(this,t)}catch(e){if(e instanceof RangeError){const t=e.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(t)>=0)throw new BorshError("Reached the end of buffer when deserializing")}throw e}}}lib$1.BinaryWriter=BinaryWriter;class BinaryReader{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new bn_js_1.default(e,"le")}readU128(){const e=this.readBuffer(16);return new bn_js_1.default(e,"le")}readU256(){const e=this.readBuffer(32);return new bn_js_1.default(e,"le")}readU512(){const e=this.readBuffer(64);return new bn_js_1.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new BorshError(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return textDecoder.decode(t)}catch(e){throw new BorshError(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let n=0;n<t;++n)r.push(e());return r}}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function serializeField(e,t,r,n,i){try{if("string"==typeof n)i[`write${capitalizeFirstLetter(n)}`](r);else if(n instanceof Array)if("number"==typeof n[0]){if(r.length!==n[0])throw new BorshError(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(2===n.length&&"number"==typeof n[1]){if(r.length!==n[1])throw new BorshError(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let t=0;t<n[1];t++)serializeField(e,null,r[t],n[0],i)}else i.writeArray(r,(r=>{serializeField(e,t,r,n[0],i)}));else if(void 0!==n.kind)switch(n.kind){case"option":null==r?i.writeU8(0):(i.writeU8(1),serializeField(e,t,r,n.type,i));break;case"map":i.writeU32(r.size),r.forEach(((r,a)=>{serializeField(e,t,a,n.key,i),serializeField(e,t,r,n.value,i)}));break;default:throw new BorshError(`FieldType ${n} unrecognized`)}else serializeStruct(e,r,i)}catch(e){throw e instanceof BorshError&&e.addToFieldPath(t),e}}function serializeStruct(e,t,r){if("function"==typeof t.borshSerialize)return void t.borshSerialize(r);const n=e.get(t.constructor);if(!n)throw new BorshError(`Class ${t.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map((n=>{let[i,a]=n;serializeField(e,i,t[i],a,r)}));else{if("enum"!==n.kind)throw new BorshError(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`);{const i=t[n.field];for(let a=0;a<n.values.length;++a){const[o,s]=n.values[a];if(o===i){r.writeU8(a),serializeField(e,o,t[o],s,r);break}}}}}function serialize(e,t){const r=new(arguments.length>2&&void 0!==arguments[2]?arguments[2]:BinaryWriter);return serializeStruct(e,t,r),r.toArray()}__decorate([handlingRangeError],BinaryReader.prototype,"readU8",null),__decorate([handlingRangeError],BinaryReader.prototype,"readU16",null),__decorate([handlingRangeError],BinaryReader.prototype,"readU32",null),__decorate([handlingRangeError],BinaryReader.prototype,"readU64",null),__decorate([handlingRangeError],BinaryReader.prototype,"readU128",null),__decorate([handlingRangeError],BinaryReader.prototype,"readU256",null),__decorate([handlingRangeError],BinaryReader.prototype,"readU512",null),__decorate([handlingRangeError],BinaryReader.prototype,"readString",null),__decorate([handlingRangeError],BinaryReader.prototype,"readFixedArray",null),__decorate([handlingRangeError],BinaryReader.prototype,"readArray",null),lib$1.BinaryReader=BinaryReader;var serialize_1=lib$1.serialize=serialize;function deserializeField(e,t,r,n){try{if("string"==typeof r)return n[`read${capitalizeFirstLetter(r)}`]();if(r instanceof Array){if("number"==typeof r[0])return n.readFixedArray(r[0]);if("number"==typeof r[1]){const t=[];for(let i=0;i<r[1];i++)t.push(deserializeField(e,null,r[0],n));return t}return n.readArray((()=>deserializeField(e,t,r[0],n)))}if("option"===r.kind){return n.readU8()?deserializeField(e,t,r.type,n):void 0}if("map"===r.kind){let i=new Map;const a=n.readU32();for(let o=0;o<a;o++){const a=deserializeField(e,t,r.key,n),o=deserializeField(e,t,r.value,n);i.set(a,o)}return i}return deserializeStruct(e,r,n)}catch(e){throw e instanceof BorshError&&e.addToFieldPath(t),e}}function deserializeStruct(e,t,r){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(r);const n=e.get(t);if(!n)throw new BorshError(`Class ${t.name} is missing in schema`);if("struct"===n.kind){const n={};for(const[i,a]of e.get(t).fields)n[i]=deserializeField(e,i,a,r);return new t(n)}if("enum"===n.kind){const i=r.readU8();if(i>=n.values.length)throw new BorshError(`Enum index: ${i} is out of range`);const[a,o]=n.values[i];return new t({[a]:deserializeField(e,a,o,r)})}throw new BorshError(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function deserialize(e,t,r){const n=new(arguments.length>3&&void 0!==arguments[3]?arguments[3]:BinaryReader)(r),i=deserializeStruct(e,t,n);if(n.offset<r.length)throw new BorshError(`Unexpected ${r.length-n.offset} bytes after deserialized data`);return i}var deserialize_1=lib$1.deserialize=deserialize;function deserializeUnchecked(e,t,r){return deserializeStruct(e,t,new(arguments.length>3&&void 0!==arguments[3]?arguments[3]:BinaryReader)(r))}deserializeUnchecked_1=lib$1.deserializeUnchecked=deserializeUnchecked;var Layout$4={};Object.defineProperty(Layout$4,"__esModule",{value:!0}),Layout$4.s16=Layout$4.s8=Layout$4.nu64be=Layout$4.u48be=Layout$4.u40be=Layout$4.u32be=Layout$4.u24be=Layout$4.u16be=nu64$1=Layout$4.nu64=Layout$4.u48=Layout$4.u40=u32$2=Layout$4.u32=Layout$4.u24=u16=Layout$4.u16=u8$1=Layout$4.u8=offset$1=Layout$4.offset=Layout$4.greedy=Layout$4.Constant=Layout$4.UTF8=Layout$4.CString=Layout$4.Blob=Layout$4.Boolean=Layout$4.BitField=Layout$4.BitStructure=Layout$4.VariantLayout=Layout$4.Union=Layout$4.UnionLayoutDiscriminator=Layout$4.UnionDiscriminator=Layout$4.Structure=Layout$4.Sequence=Layout$4.DoubleBE=Layout$4.Double=Layout$4.FloatBE=Layout$4.Float=Layout$4.NearInt64BE=Layout$4.NearInt64=Layout$4.NearUInt64BE=Layout$4.NearUInt64=Layout$4.IntBE=Layout$4.Int=Layout$4.UIntBE=Layout$4.UInt=Layout$4.OffsetLayout=Layout$4.GreedyCount=Layout$4.ExternalLayout=Layout$4.bindConstructorLayout=Layout$4.nameWithProperty=Layout_2$1=Layout$4.Layout=uint8ArrayToBuffer_1=Layout$4.uint8ArrayToBuffer=Layout$4.checkUint8Array=void 0,Layout$4.constant=utf8$1=Layout$4.utf8=Layout$4.cstr=blob$1=Layout$4.blob=Layout$4.unionLayoutDiscriminator=Layout$4.union=seq=Layout$4.seq=Layout$4.bits=struct$1=Layout$4.struct=Layout$4.f64be=Layout$4.f64=Layout$4.f32be=Layout$4.f32=Layout$4.ns64be=Layout$4.s48be=Layout$4.s40be=Layout$4.s32be=Layout$4.s24be=Layout$4.s16be=ns64$1=Layout$4.ns64=Layout$4.s48=Layout$4.s40=Layout$4.s32=Layout$4.s24=void 0;const buffer_1=buffer;function checkUint8Array(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function uint8ArrayToBuffer(e){return checkUint8Array(e),buffer_1.Buffer.from(e.buffer,e.byteOffset,e.length)}Layout$4.checkUint8Array=checkUint8Array;var uint8ArrayToBuffer_1=Layout$4.uint8ArrayToBuffer=uint8ArrayToBuffer;class Layout$3{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var Layout_2$1=Layout$4.Layout=Layout$3;function nameWithProperty$2(e,t){return t.property?e+"["+t.property+"]":e}function bindConstructorLayout$1(e,t){if("function"!=typeof e)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Layout$3))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(e,"decode",{value:(e,r)=>t.decode(e,r),writable:!0})}Layout$4.nameWithProperty=nameWithProperty$2,Layout$4.bindConstructorLayout=bindConstructorLayout$1;class ExternalLayout$2 extends Layout$3{isCount(){throw new Error("ExternalLayout is abstract")}}Layout$4.ExternalLayout=ExternalLayout$2;class GreedyCount$1 extends ExternalLayout$2{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;checkUint8Array(e);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}Layout$4.GreedyCount=GreedyCount$1;class OffsetLayout$2 extends ExternalLayout$2{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(!(e instanceof Layout$3))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof UInt$2||this.layout instanceof UIntBE$2}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.layout.decode(e,t+this.offset)}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.layout.encode(e,t,r+this.offset)}}Layout$4.OffsetLayout=OffsetLayout$2;class UInt$2 extends Layout$3{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return uint8ArrayToBuffer(e).readUIntLE(t,this.span)}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return uint8ArrayToBuffer(t).writeUIntLE(e,r,this.span),this.span}}Layout$4.UInt=UInt$2;class UIntBE$2 extends Layout$3{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return uint8ArrayToBuffer(e).readUIntBE(t,this.span)}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return uint8ArrayToBuffer(t).writeUIntBE(e,r,this.span),this.span}}Layout$4.UIntBE=UIntBE$2;class Int$1 extends Layout$3{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return uint8ArrayToBuffer(e).readIntLE(t,this.span)}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return uint8ArrayToBuffer(t).writeIntLE(e,r,this.span),this.span}}Layout$4.Int=Int$1;class IntBE$1 extends Layout$3{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return uint8ArrayToBuffer(e).readIntBE(t,this.span)}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return uint8ArrayToBuffer(t).writeIntBE(e,r,this.span),this.span}}Layout$4.IntBE=IntBE$1;const V2E32$2=Math.pow(2,32);function divmodInt64$2(e){const t=Math.floor(e/V2E32$2);return{hi32:t,lo32:e-t*V2E32$2}}function roundedInt64$2(e,t){return e*V2E32$2+t}class NearUInt64$2 extends Layout$3{constructor(e){super(8,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=uint8ArrayToBuffer(e),n=r.readUInt32LE(t);return roundedInt64$2(r.readUInt32LE(t+4),n)}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=divmodInt64$2(e),i=uint8ArrayToBuffer(t);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}Layout$4.NearUInt64=NearUInt64$2;class NearUInt64BE$1 extends Layout$3{constructor(e){super(8,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=uint8ArrayToBuffer(e);return roundedInt64$2(r.readUInt32BE(t),r.readUInt32BE(t+4))}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=divmodInt64$2(e),i=uint8ArrayToBuffer(t);return i.writeUInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}Layout$4.NearUInt64BE=NearUInt64BE$1;class NearInt64$2 extends Layout$3{constructor(e){super(8,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=uint8ArrayToBuffer(e),n=r.readUInt32LE(t);return roundedInt64$2(r.readInt32LE(t+4),n)}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=divmodInt64$2(e),i=uint8ArrayToBuffer(t);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}Layout$4.NearInt64=NearInt64$2;class NearInt64BE$1 extends Layout$3{constructor(e){super(8,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=uint8ArrayToBuffer(e);return roundedInt64$2(r.readInt32BE(t),r.readUInt32BE(t+4))}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=divmodInt64$2(e),i=uint8ArrayToBuffer(t);return i.writeInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}Layout$4.NearInt64BE=NearInt64BE$1;class Float$1 extends Layout$3{constructor(e){super(4,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return uint8ArrayToBuffer(e).readFloatLE(t)}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return uint8ArrayToBuffer(t).writeFloatLE(e,r),4}}Layout$4.Float=Float$1;class FloatBE$1 extends Layout$3{constructor(e){super(4,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return uint8ArrayToBuffer(e).readFloatBE(t)}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return uint8ArrayToBuffer(t).writeFloatBE(e,r),4}}Layout$4.FloatBE=FloatBE$1;class Double$1 extends Layout$3{constructor(e){super(8,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return uint8ArrayToBuffer(e).readDoubleLE(t)}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return uint8ArrayToBuffer(t).writeDoubleLE(e,r),8}}Layout$4.Double=Double$1;class DoubleBE$1 extends Layout$3{constructor(e){super(8,e)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return uint8ArrayToBuffer(e).readDoubleBE(t)}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return uint8ArrayToBuffer(t).writeDoubleBE(e,r),8}}Layout$4.DoubleBE=DoubleBE$1;class Sequence$1 extends Layout$3{constructor(e,t,r){if(!(e instanceof Layout$3))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof ExternalLayout$2&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(t instanceof ExternalLayout$2)&&0<e.span&&(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof ExternalLayout$2&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(e,t+r),++i}return r}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=[];let n=0,i=this.count;for(i instanceof ExternalLayout$2&&(i=i.decode(e,t));n<i;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this.elementLayout,i=e.reduce(((e,i)=>e+n.encode(i,t,r+e)),0);return this.count instanceof ExternalLayout$2&&this.count.encode(e.length,t,r),i}}Layout$4.Sequence=Sequence$1;class Structure$2 extends Layout$3{constructor(e,t,r){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof Layout$3),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===r&&(r=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(e,t);return t+=i,r+i}),0)}catch(e){throw new RangeError("indeterminate span")}return r}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;checkUint8Array(e);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=r;let i=0,a=0;for(const n of this.fields){let o=n.span;if(a=0<o?o:0,void 0!==n.property){const i=e[n.property];void 0!==i&&(a=n.encode(i,t,r),0>o&&(o=n.getSpan(t,r)))}i=r,r+=o}return i+a-n}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}Layout$4.Structure=Structure$2;class UnionDiscriminator$2{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}}Layout$4.UnionDiscriminator=UnionDiscriminator$2;class UnionLayoutDiscriminator$2 extends UnionDiscriminator$2{constructor(e,t){if(!(e instanceof ExternalLayout$2&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}Layout$4.UnionLayoutDiscriminator=UnionLayoutDiscriminator$2;class Union$2 extends Layout$3{constructor(e,t,r){let n;if(e instanceof UInt$2||e instanceof UIntBE$2)n=new UnionLayoutDiscriminator$2(new OffsetLayout$2(e));else if(e instanceof ExternalLayout$2&&e.isCount())n=new UnionLayoutDiscriminator$2(e);else{if(!(e instanceof UnionDiscriminator$2))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");n=e}if(void 0===t&&(t=null),!(null===t||t instanceof Layout$3))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&(e instanceof UInt$2||e instanceof UIntBE$2)&&(i+=n.layout.span)),super(i,r),this.discriminator=n,this.usesPrefixDiscriminator=e instanceof UInt$2||e instanceof UIntBE$2,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return a(e)},this.configGetSourceVariant=function(e){a=e.bind(this)}}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.discriminator,i=n.decode(e,r),a=this.registry[i];if(void 0===a){const a=this.defaultLayout;let o=0;this.usesPrefixDiscriminator&&(o=n.layout.span),t=this.makeDestinationObject(),t[n.property]=i,t[a.property]=a.decode(e,r+o)}else t=a.decode(e,r);return t}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this.getSourceVariant(e);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=n.layout.span),n.encode(e[n.property],t,r),a+i.encode(e[i.property],t,r+a)}return n.encode(e,t,r)}addVariant(e,t,r){const n=new VariantLayout$2(this,e,t,r);return this.registry[e]=n,n}getVariant(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=e instanceof Uint8Array?this.discriminator.decode(e,r):e,this.registry[t]}}Layout$4.Union=Union$2;class VariantLayout$2 extends Layout$3{constructor(e,t,r,n){if(!(e instanceof Union$2))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof Layout$3))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof n)throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=r?r.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(e,t+r)),r+n}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let i=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),i+=this.layout.getSpan(t,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function fixBitwiseResult$1(e){return 0>e&&(e+=4294967296),e}Layout$4.VariantLayout=VariantLayout$2;class BitStructure$1 extends Layout$3{constructor(e,t,r){if(!(e instanceof UInt$2||e instanceof UIntBE$2))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===r&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let n=0;this._packedSetValue=function(e){return n=fixBitwiseResult$1(e),this},this._packedGetValue=function(){return n}}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=this.makeDestinationObject(),n=this.word.decode(e,t);this._packedSetValue(n);for(const t of this.fields)void 0!==t.property&&(r[t.property]=t.decode(e));return r}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this.word.decode(t,r);this._packedSetValue(n);for(const t of this.fields)if(void 0!==t.property){const r=e[t.property];void 0!==r&&t.encode(r)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new BitField$1(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new Boolean$2(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}Layout$4.BitStructure=BitStructure$1;class BitField$1{constructor(e,t,r){if(!(e instanceof BitStructure$1))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const n=8*e.span,i=e.fields.reduce(((e,t)=>e+t.bits),0);if(t+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-t),this.wordMask=fixBitwiseResult$1(this.valueMask<<this.start),this.property=r}decode(e,t){return fixBitwiseResult$1(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==fixBitwiseResult$1(e&this.valueMask))throw new TypeError(nameWithProperty$2("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=fixBitwiseResult$1(e<<this.start);this.container._packedSetValue(fixBitwiseResult$1(t&~this.wordMask)|r)}}Layout$4.BitField=BitField$1;class Boolean$2 extends BitField$1{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e=+e),super.encode(e)}}Layout$4.Boolean=Boolean$2;class Blob$3 extends Layout$3{constructor(e,t){if(!(e instanceof ExternalLayout$2&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof ExternalLayout$2||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.span;return 0>r&&(r=this.length.decode(e,t)),uint8ArrayToBuffer(e).slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof ExternalLayout$2&&(n=e.length),!(e instanceof Uint8Array&&n===e.length))throw new TypeError(nameWithProperty$2("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>t.length)throw new RangeError("encoding overruns Uint8Array");const i=uint8ArrayToBuffer(e);return uint8ArrayToBuffer(t).write(i.toString("hex"),r,n,"hex"),this.length instanceof ExternalLayout$2&&this.length.encode(n,t,r),n}}Layout$4.Blob=Blob$3;class CString$1 extends Layout$3{constructor(e){super(-1,e)}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;checkUint8Array(e);let r=t;for(;r<e.length&&0!==e[r];)r+=1;return 1+r-t}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=this.getSpan(e,t);return uint8ArrayToBuffer(e).slice(t,t+r-1).toString("utf-8")}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"string"!=typeof e&&(e=String(e));const n=buffer_1.Buffer.from(e,"utf8"),i=n.length;if(r+i>t.length)throw new RangeError("encoding overruns Buffer");const a=uint8ArrayToBuffer(t);return n.copy(a,r),a[r+i]=0,i+1}}Layout$4.CString=CString$1;class UTF8$1 extends Layout$3{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return checkUint8Array(e),e.length-t}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return uint8ArrayToBuffer(e).slice(t,t+r).toString("utf-8")}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"string"!=typeof e&&(e=String(e));const n=buffer_1.Buffer.from(e,"utf8"),i=n.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>t.length)throw new RangeError("encoding overruns Buffer");return n.copy(uint8ArrayToBuffer(t),r),i}}Layout$4.UTF8=UTF8$1;class Constant$1 extends Layout$3{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}Layout$4.Constant=Constant$1,Layout$4.greedy=(e,t)=>new GreedyCount$1(e,t);var offset$1=Layout$4.offset=(e,t,r)=>new OffsetLayout$2(e,t,r),u8$1=Layout$4.u8=e=>new UInt$2(1,e),u16=Layout$4.u16=e=>new UInt$2(2,e);Layout$4.u24=e=>new UInt$2(3,e);var u32$2=Layout$4.u32=e=>new UInt$2(4,e);Layout$4.u40=e=>new UInt$2(5,e),Layout$4.u48=e=>new UInt$2(6,e);var nu64$1=Layout$4.nu64=e=>new NearUInt64$2(e);Layout$4.u16be=e=>new UIntBE$2(2,e),Layout$4.u24be=e=>new UIntBE$2(3,e),Layout$4.u32be=e=>new UIntBE$2(4,e),Layout$4.u40be=e=>new UIntBE$2(5,e),Layout$4.u48be=e=>new UIntBE$2(6,e),Layout$4.nu64be=e=>new NearUInt64BE$1(e),Layout$4.s8=e=>new Int$1(1,e),Layout$4.s16=e=>new Int$1(2,e),Layout$4.s24=e=>new Int$1(3,e),Layout$4.s32=e=>new Int$1(4,e),Layout$4.s40=e=>new Int$1(5,e),Layout$4.s48=e=>new Int$1(6,e);var ns64$1=Layout$4.ns64=e=>new NearInt64$2(e);Layout$4.s16be=e=>new IntBE$1(2,e),Layout$4.s24be=e=>new IntBE$1(3,e),Layout$4.s32be=e=>new IntBE$1(4,e),Layout$4.s40be=e=>new IntBE$1(5,e),Layout$4.s48be=e=>new IntBE$1(6,e),Layout$4.ns64be=e=>new NearInt64BE$1(e),Layout$4.f32=e=>new Float$1(e),Layout$4.f32be=e=>new FloatBE$1(e),Layout$4.f64=e=>new Double$1(e),Layout$4.f64be=e=>new DoubleBE$1(e);var struct$1=Layout$4.struct=(e,t,r)=>new Structure$2(e,t,r);Layout$4.bits=(e,t,r)=>new BitStructure$1(e,t,r);var seq=Layout$4.seq=(e,t,r)=>new Sequence$1(e,t,r);Layout$4.union=(e,t,r)=>new Union$2(e,t,r),Layout$4.unionLayoutDiscriminator=(e,t)=>new UnionLayoutDiscriminator$2(e,t);var blob$1=Layout$4.blob=(e,t)=>new Blob$3(e,t);Layout$4.cstr=e=>new CString$1(e);var utf8$1=Layout$4.utf8=(e,t)=>new UTF8$1(e,t);Layout$4.constant=(e,t)=>new Constant$1(e,t);var browser$6={};function toBigIntLE(e){{const t=Buffer.from(e);t.reverse();const r=t.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}}Object.defineProperty(browser$6,"__esModule",{value:!0});var toBigIntLE_1=browser$6.toBigIntLE=toBigIntLE;function toBigIntBE(e){{const t=e.toString("hex");return 0===t.length?BigInt(0):BigInt(`0x${t}`)}}function toBufferLE(e,t){{const r=e.toString(16),n=Buffer.from(r.padStart(2*t,"0").slice(0,2*t),"hex");return n.reverse(),n}}browser$6.toBigIntBE=toBigIntBE;var toBufferLE_1=browser$6.toBufferLE=toBufferLE,getRandomValues;function toBufferBE(e,t){{const r=e.toString(16);return Buffer.from(r.padStart(2*t,"0").slice(0,2*t),"hex")}}browser$6.toBufferBE=toBufferBE;class StructError$1 extends TypeError{constructor(e,t){let r;const{message:n,explanation:i,...a}=e,{path:o}=e,s=0===o.length?n:`At path: ${o.join(".")} -- ${n}`;super(i??s),null!=i&&(this.cause=s),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function isIterable$1(e){return isObject$b(e)&&"function"==typeof e[Symbol.iterator]}function isObject$b(e){return"object"==typeof e&&null!=e}function isNonArrayObject(e){return isObject$b(e)&&!Array.isArray(e)}function print$1(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function shiftIterator$1(e){const{done:t,value:r}=e.next();return t?void 0:r}function toFailure$1(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:a}=t,{type:o}=r,{refinement:s,message:u=`Expected a value of type \`${o}\`${s?` with refinement \`${s}\``:""}, but received: \`${print$1(n)}\``}=e;return{value:n,type:o,refinement:s,key:i[i.length-1],path:i,branch:a,...e,message:u}}function*toFailures$1(e,t,r,n){isIterable$1(e)||(e=[e]);for(const i of e){const e=toFailure$1(i,t,r,n);e&&(yield e)}}function*run$1(e,t,r={}){const{path:n=[],branch:i=[e],coerce:a=!1,mask:o=!1}=r,s={path:n,branch:i,mask:o};a&&(e=t.coercer(e,s));let u="valid";for(const n of t.validator(e,s))n.explanation=r.message,u="not_valid",yield[n,void 0];for(let[c,d,l]of t.entries(e,s)){const t=run$1(d,l,{path:void 0===c?n:[...n,c],branch:void 0===c?i:[...i,d],coerce:a,mask:o,message:r.message});for(const r of t)r[0]?(u=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):a&&(d=r[1],void 0===c?e=d:e instanceof Map?e.set(c,d):e instanceof Set?e.add(d):isObject$b(e)&&(void 0!==d||c in e)&&(e[c]=d))}if("not_valid"!==u)for(const n of t.refiner(e,s))n.explanation=r.message,u="not_refined",yield[n,void 0];"valid"===u&&(yield[void 0,e])}class Struct$2{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:a=(e=>e),entries:o=function*(){}}=e;this.type=t,this.schema=r,this.entries=o,this.coercer=a,this.validator=n?(e,t)=>toFailures$1(n(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>toFailures$1(i(e,t),t,this,e):()=>[]}assert(e,t){return assert$3(e,this,t)}create(e,t){return create$2(e,this,t)}is(e){return is$1(e,this)}mask(e,t){return mask$1(e,this,t)}validate(e,t={}){return validate$2(e,this,t)}}function assert$3(e,t,r){const n=validate$2(e,t,{message:r});if(n[0])throw n[0]}function create$2(e,t,r){const n=validate$2(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function mask$1(e,t,r){const n=validate$2(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function is$1(e,t){return!validate$2(e,t)[0]}function validate$2(e,t,r={}){const n=run$1(e,t,r),i=shiftIterator$1(n);if(i[0]){return[new StructError$1(i[0],(function*(){for(const e of n)e[0]&&(yield e[0])})),void 0]}return[void 0,i[1]]}function define$1(e,t){return new Struct$2({type:e,schema:null,validator:t})}function any$1(){return define$1("any",(()=>!0))}function array$1(e){return new Struct$2({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${print$1(e)}`})}function boolean$1(){return define$1("boolean",(e=>"boolean"==typeof e))}function instance(e){return define$1("instance",(t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${print$1(t)}`))}function literal$1(e){const t=print$1(e),r=typeof e;return new Struct$2({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${print$1(r)}`})}function never(){return define$1("never",(()=>!1))}function nullable$1(e){return new Struct$2({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function number$2(){return define$1("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${print$1(e)}`))}function optional$1(e){return new Struct$2({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function record(e,t){return new Struct$2({type:"record",schema:null,*entries(r){if(isObject$b(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator:e=>isNonArrayObject(e)||`Expected an object, but received: ${print$1(e)}`,coercer:e=>isNonArrayObject(e)?{...e}:e})}function string$1(){return define$1("string",(e=>"string"==typeof e||`Expected a string, but received: ${print$1(e)}`))}function tuple(e){const t=never();return new Struct$2({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${print$1(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function type$1(e){const t=Object.keys(e);return new Struct$2({type:"type",schema:e,*entries(r){if(isObject$b(r))for(const n of t)yield[n,r[n],e[n]]},validator:e=>isNonArrayObject(e)||`Expected an object, but received: ${print$1(e)}`,coercer:e=>isNonArrayObject(e)?{...e}:e})}function union$2(e){const t=e.map((e=>e.type)).join(" | ");return new Struct$2({type:"union",schema:null,coercer(t,r){for(const n of e){const[e,i]=n.validate(t,{coerce:!0,mask:r.mask});if(!e)return i}return t},validator(r,n){const i=[];for(const t of e){const[...e]=run$1(r,t,n),[a]=e;if(!a[0])return[];for(const[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${print$1(r)}`,...i]}})}function unknown$1(){return define$1("unknown",(()=>!0))}function coerce$2(e,t,r){return new Struct$2({...e,coercer:(n,i)=>is$1(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate$1(e){return"string"==typeof e&&REGEX.test(e)}for(var byteToHex=[],i=0,_nodeId,_clockseq;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(byteToHex[e[t+0]]+byteToHex[e[t+1]]+byteToHex[e[t+2]]+byteToHex[e[t+3]]+"-"+byteToHex[e[t+4]]+byteToHex[e[t+5]]+"-"+byteToHex[e[t+6]]+byteToHex[e[t+7]]+"-"+byteToHex[e[t+8]]+byteToHex[e[t+9]]+"-"+byteToHex[e[t+10]]+byteToHex[e[t+11]]+byteToHex[e[t+12]]+byteToHex[e[t+13]]+byteToHex[e[t+14]]+byteToHex[e[t+15]]).toLowerCase();if(!validate$1(r))throw TypeError("Stringified UUID is invalid");return r}var _lastMSecs=0,_lastNSecs=0;function v1(e,t,r){var n=t&&r||0,i=t||new Array(16),a=(e=e||{}).node||_nodeId,o=void 0!==e.clockseq?e.clockseq:_clockseq;if(null==a||null==o){var s=e.random||(e.rng||rng)();null==a&&(a=_nodeId=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==o&&(o=_clockseq=16383&(s[6]<<8|s[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:_lastNSecs+1,d=u-_lastMSecs+(c-_lastNSecs)/1e4;if(d<0&&void 0===e.clockseq&&(o=o+1&16383),(d<0||u>_lastMSecs)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=u,_lastNSecs=c,_clockseq=o;var l=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=255&l;var p=u/4294967296*1e4&268435455;i[n++]=p>>>8&255,i[n++]=255&p,i[n++]=p>>>24&15|16,i[n++]=p>>>16&255,i[n++]=o>>>8|128,i[n++]=255&o;for(var h=0;h<6;++h)i[n+h]=a[h];return t||stringify(i)}function parse(e){if(!validate$1(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}function stringToBytes(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(e,t,r){function n(e,n,i,a){if("string"==typeof e&&(e=stringToBytes(e)),"string"==typeof n&&(n=parse(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+e.length);if(o.set(n),o.set(e,n.length),(o=r(o))[6]=15&o[6]|t,o[8]=63&o[8]|128,i){a=a||0;for(var s=0;s<16;++s)i[a+s]=o[s];return i}return stringify(o)}try{n.name=e}catch(e){}return n.DNS=DNS,n.URL=URL$1,n}function md5(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(e),8*e.length))}function md5ToHexEncodedArray(e){for(var t=[],r=32*e.length,n="0123456789abcdef",i=0;i<r;i+=8){var a=e[i>>5]>>>i%32&255,o=parseInt(n.charAt(a>>>4&15)+n.charAt(15&a),16);t.push(o)}return t}function getOutputLength(e){return 14+(e+64>>>9<<4)+1}function wordsToMd5(e,t){e[t>>5]|=128<<t%32,e[getOutputLength(t)-1]=t;for(var r=1732584193,n=-271733879,i=-1732584194,a=271733878,o=0;o<e.length;o+=16){var s=r,u=n,c=i,d=a;r=md5ff(r,n,i,a,e[o],7,-680876936),a=md5ff(a,r,n,i,e[o+1],12,-389564586),i=md5ff(i,a,r,n,e[o+2],17,606105819),n=md5ff(n,i,a,r,e[o+3],22,-1044525330),r=md5ff(r,n,i,a,e[o+4],7,-176418897),a=md5ff(a,r,n,i,e[o+5],12,1200080426),i=md5ff(i,a,r,n,e[o+6],17,-1473231341),n=md5ff(n,i,a,r,e[o+7],22,-45705983),r=md5ff(r,n,i,a,e[o+8],7,1770035416),a=md5ff(a,r,n,i,e[o+9],12,-1958414417),i=md5ff(i,a,r,n,e[o+10],17,-42063),n=md5ff(n,i,a,r,e[o+11],22,-1990404162),r=md5ff(r,n,i,a,e[o+12],7,1804603682),a=md5ff(a,r,n,i,e[o+13],12,-40341101),i=md5ff(i,a,r,n,e[o+14],17,-1502002290),r=md5gg(r,n=md5ff(n,i,a,r,e[o+15],22,1236535329),i,a,e[o+1],5,-165796510),a=md5gg(a,r,n,i,e[o+6],9,-1069501632),i=md5gg(i,a,r,n,e[o+11],14,643717713),n=md5gg(n,i,a,r,e[o],20,-373897302),r=md5gg(r,n,i,a,e[o+5],5,-701558691),a=md5gg(a,r,n,i,e[o+10],9,38016083),i=md5gg(i,a,r,n,e[o+15],14,-660478335),n=md5gg(n,i,a,r,e[o+4],20,-405537848),r=md5gg(r,n,i,a,e[o+9],5,568446438),a=md5gg(a,r,n,i,e[o+14],9,-1019803690),i=md5gg(i,a,r,n,e[o+3],14,-187363961),n=md5gg(n,i,a,r,e[o+8],20,1163531501),r=md5gg(r,n,i,a,e[o+13],5,-1444681467),a=md5gg(a,r,n,i,e[o+2],9,-51403784),i=md5gg(i,a,r,n,e[o+7],14,1735328473),r=md5hh(r,n=md5gg(n,i,a,r,e[o+12],20,-1926607734),i,a,e[o+5],4,-378558),a=md5hh(a,r,n,i,e[o+8],11,-2022574463),i=md5hh(i,a,r,n,e[o+11],16,1839030562),n=md5hh(n,i,a,r,e[o+14],23,-35309556),r=md5hh(r,n,i,a,e[o+1],4,-1530992060),a=md5hh(a,r,n,i,e[o+4],11,1272893353),i=md5hh(i,a,r,n,e[o+7],16,-155497632),n=md5hh(n,i,a,r,e[o+10],23,-1094730640),r=md5hh(r,n,i,a,e[o+13],4,681279174),a=md5hh(a,r,n,i,e[o],11,-358537222),i=md5hh(i,a,r,n,e[o+3],16,-722521979),n=md5hh(n,i,a,r,e[o+6],23,76029189),r=md5hh(r,n,i,a,e[o+9],4,-640364487),a=md5hh(a,r,n,i,e[o+12],11,-421815835),i=md5hh(i,a,r,n,e[o+15],16,530742520),r=md5ii(r,n=md5hh(n,i,a,r,e[o+2],23,-995338651),i,a,e[o],6,-198630844),a=md5ii(a,r,n,i,e[o+7],10,1126891415),i=md5ii(i,a,r,n,e[o+14],15,-1416354905),n=md5ii(n,i,a,r,e[o+5],21,-57434055),r=md5ii(r,n,i,a,e[o+12],6,1700485571),a=md5ii(a,r,n,i,e[o+3],10,-1894986606),i=md5ii(i,a,r,n,e[o+10],15,-1051523),n=md5ii(n,i,a,r,e[o+1],21,-2054922799),r=md5ii(r,n,i,a,e[o+8],6,1873313359),a=md5ii(a,r,n,i,e[o+15],10,-30611744),i=md5ii(i,a,r,n,e[o+6],15,-1560198380),n=md5ii(n,i,a,r,e[o+13],21,1309151649),r=md5ii(r,n,i,a,e[o+4],6,-145523070),a=md5ii(a,r,n,i,e[o+11],10,-1120210379),i=md5ii(i,a,r,n,e[o+2],15,718787259),n=md5ii(n,i,a,r,e[o+9],21,-343485551),r=safeAdd(r,s),n=safeAdd(n,u),i=safeAdd(i,c),a=safeAdd(a,d)}return[r,n,i,a]}function bytesToWords(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(getOutputLength(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}function safeAdd(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function bitRotateLeft(e,t){return e<<t|e>>>32-t}function md5cmn(e,t,r,n,i,a){return safeAdd(bitRotateLeft(safeAdd(safeAdd(t,e),safeAdd(n,a)),i),r)}function md5ff(e,t,r,n,i,a,o){return md5cmn(t&r|~t&n,e,t,i,a,o)}function md5gg(e,t,r,n,i,a,o){return md5cmn(t&n|r&~n,e,t,i,a,o)}function md5hh(e,t,r,n,i,a,o){return md5cmn(t^r^n,e,t,i,a,o)}function md5ii(e,t,r,n,i,a,o){return md5cmn(r^(t|~n),e,t,i,a,o)}var v3=v35("v3",48,md5),v3$1=v3;function v4(e,t,r){var n=(e=e||{}).random||(e.rng||rng)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return stringify(n)}function f(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function ROTL(e,t){return e<<t|e>>>32-t}function sha1(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var i=0;i<n.length;++i)e.push(n.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,o=Math.ceil(a/16),s=new Array(o),u=0;u<o;++u){for(var c=new Uint32Array(16),d=0;d<16;++d)c[d]=e[64*u+4*d]<<24|e[64*u+4*d+1]<<16|e[64*u+4*d+2]<<8|e[64*u+4*d+3];s[u]=c}s[o-1][14]=8*(e.length-1)/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=8*(e.length-1)&4294967295;for(var l=0;l<o;++l){for(var p=new Uint32Array(80),h=0;h<16;++h)p[h]=s[l][h];for(var m=16;m<80;++m)p[m]=ROTL(p[m-3]^p[m-8]^p[m-14]^p[m-16],1);for(var y=r[0],g=r[1],b=r[2],v=r[3],w=r[4],_=0;_<80;++_){var S=Math.floor(_/20),E=ROTL(y,5)+f(S,g,b,v)+w+t[S]+p[_]>>>0;w=v,v=b,b=ROTL(g,30)>>>0,g=y,y=E}r[0]=r[0]+y>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+b>>>0,r[3]=r[3]+v>>>0,r[4]=r[4]+w>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}var v5=v35("v5",80,sha1),v5$1=v5,nil="00000000-0000-0000-0000-000000000000";function version(e){if(!validate$1(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var esmBrowser=Object.freeze({__proto__:null,v1:v1,v3:v3$1,v4:v4,v5:v5$1,NIL:nil,version:version,validate:validate$1,stringify:stringify,parse:parse}),require$$0=getAugmentedNamespace(esmBrowser);const uuid$1=require$$0.v4,generateRequest$1=function(e,t,r,n){if("string"!=typeof e)throw new TypeError(e+" must be a string");const i="number"==typeof(n=n||{}).version?n.version:2;if(1!==i&&2!==i)throw new TypeError(i+" must be 1 or 2");const a={method:e};if(2===i&&(a.jsonrpc="2.0"),t){if("object"!=typeof t&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");a.params=t}if(void 0===r){const e="function"==typeof n.generator?n.generator:function(){return uuid$1()};a.id=e(a,n)}else 2===i&&null===r?n.notificationIdNull&&(a.id=null):a.id=r;return a};var generateRequest_1=generateRequest$1;const uuid=require$$0.v4,generateRequest=generateRequest_1,ClientBrowser=function(e,t){if(!(this instanceof ClientBrowser))return new ClientBrowser(e,t);t||(t={}),this.options={reviver:void 0!==t.reviver?t.reviver:null,replacer:void 0!==t.replacer?t.replacer:null,generator:void 0!==t.generator?t.generator:function(){return uuid()},version:void 0!==t.version?t.version:2,notificationIdNull:"boolean"==typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};var browser$5=ClientBrowser;ClientBrowser.prototype.request=function(e,t,r,n){const i=this;let a=null;const o=Array.isArray(e)&&"function"==typeof t;if(1===this.options.version&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&e&&"object"==typeof e&&"function"==typeof t)n=t,a=e;else{"function"==typeof r&&(n=r,r=void 0);const i="function"==typeof n;try{a=generateRequest(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(e){if(i)return n(e);throw e}if(!i)return a}let s;try{s=JSON.stringify(a,this.options.replacer)}catch(e){return n(e)}return this.callServer(s,(function(e,t){i._parseResponse(e,t,n)})),a},ClientBrowser.prototype._parseResponse=function(e,t,r){if(e)return void r(e);if(!t)return r();let n;try{n=JSON.parse(t,this.options.reviver)}catch(e){return r(e)}if(3===r.length){if(Array.isArray(n)){const e=function(e){return void 0!==e.error},t=function(t){return!e(t)};return r(null,n.filter(e),n.filter(t))}return r(null,n.error,n.result)}r(null,n)};var eventemitter3$1={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new i(n,a||e,o),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=new Array(a);i<a;i++)o[i]=n[i].fn;return o},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var u,c,d=this._events[s],l=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),l){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,i),!0;case 5:return d.fn.call(d.context,t,n,i,a),!0;case 6:return d.fn.call(d.context,t,n,i,a,o),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];d.fn.apply(d.context,u)}else{var p,h=d.length;for(c=0;c<h;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),l){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,i);break;default:if(!u)for(p=1,u=new Array(l-1);p<l;p++)u[p-1]=arguments[p];d[c].fn.apply(d[c].context,u)}}return!0},s.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||o(this,a);else{for(var u=0,c=[],d=s.length;u<d;u++)(s[u].fn!==t||i&&!s[u].once||n&&s[u].context!==n)&&c.push(s[u]);c.length?this._events[a]=1===c.length?c[0]:c:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s}(eventemitter3$1);var EventEmitter$2=eventemitter3$1.exports,WebSocketBrowserImpl=class extends EventEmitter$2{socket;constructor(e,t,r){super(),this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(e,t,r){const n=r||t;try{this.socket.send(e),n()}catch(e){n(e)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};function WebSocket$2(e,t){return new WebSocketBrowserImpl(e,t)}var DefaultDataPack=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},CommonClient=class extends EventEmitter$2{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:n=!0,reconnect_interval:i=1e3,max_reconnects:a=5,...o}={},s,u){super(),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=a,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=s||(()=>++this.rpc_id),this.dataPack=u||new DefaultDataPack,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,n){return n||"object"!=typeof r||(n=r,r=null),new Promise(((i,a)=>{if(!this.ready)return a(new Error("socket not ready"));const o=this.generate_request_id(e,t),s={jsonrpc:"2.0",method:e,params:t||void 0,id:o};this.socket.send(this.dataPack.encode(s),n,(e=>{if(e)return a(e);this.queue[o]={promise:[i,a]},r&&(this.queue[o].timeout=setTimeout((()=>{delete this.queue[o],a(new Error("reply timeout"))}),r))}))}))}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise(((r,n)=>{if(!this.ready)return n(new Error("socket not ready"));const i={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(i),(e=>{if(e)return n(e);r()}))}))}async subscribe(e){"string"==typeof e&&(e=[e]);const t=await this.call("rpc.on",e);if("string"==typeof e&&"ok"!==t[e])throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){"string"==typeof e&&(e=[e]);const t=await this.call("rpc.off",e);if("string"==typeof e&&"ok"!==t[e])throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",(()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0})),this.socket.addEventListener("message",(({data:e})=>{e instanceof ArrayBuffer&&(e=buffer.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch(e){return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const t=[e.notification];if(e.params.constructor===Object)t.push(e.params);else for(let r=0;r<e.params.length;r++)t.push(e.params[r]);return Promise.resolve().then((()=>{this.emit.apply(this,t)}))}if(!this.queue[e.id])return e.method?Promise.resolve().then((()=>{this.emit(e.method,e?.params)})):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]})),this.socket.addEventListener("error",(e=>this.emit("error",e))),this.socket.addEventListener("close",(({code:r,reason:n})=>{this.ready&&setTimeout((()=>this.emit("close",r,n)),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)&&(this.reconnect_timer_id=setTimeout((()=>this._connect(e,t)),this.reconnect_interval)))}))}};const SHA3_PI$1=[],SHA3_ROTL$1=[],_SHA3_IOTA$1=[],_0n$3=BigInt(0),_1n$4=BigInt(1),_2n$3=BigInt(2),_7n$1=BigInt(7),_256n$1=BigInt(256),_0x71n$1=BigInt(113);for(let e=0,t=_1n$4,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],SHA3_PI$1.push(2*(5*n+r)),SHA3_ROTL$1.push((e+1)*(e+2)/2%64);let i=_0n$3;for(let e=0;e<7;e++)t=(t<<_1n$4^(t>>_7n$1)*_0x71n$1)%_256n$1,t&_2n$3&&(i^=_1n$4<<(_1n$4<<BigInt(e))-_1n$4);_SHA3_IOTA$1.push(i)}const[SHA3_IOTA_H$1,SHA3_IOTA_L$1]=split$1(_SHA3_IOTA$1,!0),rotlH$1=(e,t,r)=>r>32?rotlBH$1(e,t,r):rotlSH$1(e,t,r),rotlL$1=(e,t,r)=>r>32?rotlBL$1(e,t,r):rotlSL$1(e,t,r);function keccakP$1(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,a=r[i],o=r[i+1],s=rotlH$1(a,o,1)^r[n],u=rotlL$1(a,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=s,e[t+r+1]^=u}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=SHA3_ROTL$1[r],a=rotlH$1(t,i,n),o=rotlL$1(t,i,n),s=SHA3_PI$1[r];t=e[s],i=e[s+1],e[s]=a,e[s+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=SHA3_IOTA_H$1[n],e[1]^=SHA3_IOTA_L$1[n]}r.fill(0)}class Keccak$1 extends Hash$4{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,anumber(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=u32$3(this.state)}keccak(){isLE$2||byteSwap32(this.state32),keccakP$1(this.state32,this.rounds),isLE$2||byteSwap32(this.state32),this.posOut=0,this.pos=0}update(e){aexists(this);const{blockLen:t,state:r}=this,n=(e=toBytes$2(e)).length;for(let i=0;i<n;){const a=Math.min(t-this.pos,n-i);for(let t=0;t<a;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!=(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){aexists(this,!1),abytes$1(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return anumber(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(aoutput(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:a}=this;return e||(e=new Keccak$1(t,r,n,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=a,e.destroyed=this.destroyed,e}}const gen$1=(e,t,r)=>wrapConstructor$2((()=>new Keccak$1(t,e,r))),keccak_256$1=gen$1(1,136,32);class HMAC extends Hash$4{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ahash(e);const r=toBytes$2(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return aexists(this),this.iHash.update(e),this}digestInto(e){aexists(this),abytes$1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:a,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(e,t,r)=>new HMAC(e,t).update(r).digest();function validateSigVerOpts(e){void 0!==e.lowS&&abool("lowS",e.lowS),void 0!==e.prehash&&abool("prehash",e.prehash)}function validatePointOpts(e){const t=validateBasic(e);validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}hmac.create=(e,t)=>new HMAC(e,t);const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut;class DERErr extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}}const DER={Err:DERErr,_tlv:{encode:(e,t)=>{const{Err:r}=DER;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=numberToHexUnpadded$1(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const a=n>127?numberToHexUnpadded$1(i.length/2|128):"";return numberToHexUnpadded$1(e)+a+i+t},decode(e,t){const{Err:r}=DER;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++];let a=0;if(!!(128&i)){const e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const o=t.subarray(n,n+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(const e of o)a=a<<8|e;if(n+=e,a<128)throw new r("tlv.decode(long): not minimal encoding")}else a=i;const o=t.subarray(n,n+a);if(o.length!==a)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(n+a)}}},_int:{encode(e){const{Err:t}=DER;if(e<_0n$2)throw new t("integer: negative integers are not allowed");let r=numberToHexUnpadded$1(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=DER;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return b2n(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=DER,i="string"==typeof e?h2b(e):e;abytes(i);const{v:a,l:o}=n.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:s,l:u}=n.decode(2,a),{v:c,l:d}=n.decode(2,u);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(s),s:r.decode(c)}},hexFromSig(e){const{_tlv:t,_int:r}=DER,n=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,n)}},_0n$2=BigInt(0),_1n$3=BigInt(1);BigInt(2);const _3n$1=BigInt(3);function weierstrassPoints(e){const t=validatePointOpts(e),{Fp:r}=t,n=Field(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{const i=t.toAffine();return concatBytes$2(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),a=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){const{a:n,b:i}=t,a=r.sqr(e),o=r.mul(a,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:a}=t;if(r&&"bigint"!=typeof e){if(isBytes(e)&&(e=bytesToHex$2(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*n,"0")}let o;try{o="bigint"==typeof e?e:bytesToNumberBE(ensureBytes$2("private key",e,n))}catch(t){throw new Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return i&&(o=mod$1(o,a)),aInRange("private key",o,_1n$3,a),o}function u(e){if(!(e instanceof l))throw new Error("ProjectivePoint expected")}const c=memoized(((e,t)=>{const{px:n,py:i,pz:a}=e;if(r.eql(a,r.ONE))return{x:n,y:i};const o=e.is0();null==t&&(t=o?r.ONE:r.inv(a));const s=r.mul(n,t),u=r.mul(i,t),c=r.mul(a,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:s,y:u}})),d=memoized((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const a=r.sqr(i),s=o(n);if(!r.eql(a,s))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class l{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof l)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?l.ZERO:new l(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(l.fromAffine)}static fromHex(e){const t=l.fromAffine(a(ensureBytes$2("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return l.BASE.multiply(s(e))}static msm(e,t){return pippenger(l,n,e,t)}_setWindowSize(e){h.setWindowSize(this,e)}assertValidity(){d(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:n,pz:i}=this,{px:a,py:o,pz:s}=e,c=r.eql(r.mul(t,s),r.mul(a,i)),d=r.eql(r.mul(n,s),r.mul(o,i));return c&&d}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,_3n$1),{px:a,py:o,pz:s}=this;let u=r.ZERO,c=r.ZERO,d=r.ZERO,p=r.mul(a,a),h=r.mul(o,o),f=r.mul(s,s),m=r.mul(a,o);return m=r.add(m,m),d=r.mul(a,s),d=r.add(d,d),u=r.mul(e,d),c=r.mul(i,f),c=r.add(u,c),u=r.sub(h,c),c=r.add(h,c),c=r.mul(u,c),u=r.mul(m,u),d=r.mul(i,d),f=r.mul(e,f),m=r.sub(p,f),m=r.mul(e,m),m=r.add(m,d),d=r.add(p,p),p=r.add(d,p),p=r.add(p,f),p=r.mul(p,m),c=r.add(c,p),f=r.mul(o,s),f=r.add(f,f),p=r.mul(f,m),u=r.sub(u,p),d=r.mul(f,h),d=r.add(d,d),d=r.add(d,d),new l(u,c,d)}add(e){u(e);const{px:n,py:i,pz:a}=this,{px:o,py:s,pz:c}=e;let d=r.ZERO,p=r.ZERO,h=r.ZERO;const f=t.a,m=r.mul(t.b,_3n$1);let y=r.mul(n,o),g=r.mul(i,s),b=r.mul(a,c),v=r.add(n,i),w=r.add(o,s);v=r.mul(v,w),w=r.add(y,g),v=r.sub(v,w),w=r.add(n,a);let _=r.add(o,c);return w=r.mul(w,_),_=r.add(y,b),w=r.sub(w,_),_=r.add(i,a),d=r.add(s,c),_=r.mul(_,d),d=r.add(g,b),_=r.sub(_,d),h=r.mul(f,w),d=r.mul(m,b),h=r.add(d,h),d=r.sub(g,h),h=r.add(g,h),p=r.mul(d,h),g=r.add(y,y),g=r.add(g,y),b=r.mul(f,b),w=r.mul(m,w),g=r.add(g,b),b=r.sub(y,b),b=r.mul(f,b),w=r.add(w,b),y=r.mul(g,w),p=r.add(p,y),y=r.mul(_,w),d=r.mul(v,d),d=r.sub(d,y),y=r.mul(v,g),h=r.mul(_,h),h=r.add(h,y),new l(d,p,h)}subtract(e){return this.add(e.negate())}is0(){return this.equals(l.ZERO)}wNAF(e){return h.wNAFCached(this,e,l.normalizeZ)}multiplyUnsafe(e){const{endo:n,n:i}=t;aInRange("scalar",e,_0n$2,i);const a=l.ZERO;if(e===_0n$2)return a;if(this.is0()||e===_1n$3)return this;if(!n||h.hasPrecomputes(this))return h.wNAFCachedUnsafe(this,e,l.normalizeZ);let{k1neg:o,k1:s,k2neg:u,k2:c}=n.splitScalar(e),d=a,p=a,f=this;for(;s>_0n$2||c>_0n$2;)s&_1n$3&&(d=d.add(f)),c&_1n$3&&(p=p.add(f)),f=f.double(),s>>=_1n$3,c>>=_1n$3;return o&&(d=d.negate()),u&&(p=p.negate()),p=new l(r.mul(p.px,n.beta),p.py,p.pz),d.add(p)}multiply(e){const{endo:n,n:i}=t;let a,o;if(aInRange("scalar",e,_1n$3,i),n){const{k1neg:t,k1:i,k2neg:s,k2:u}=n.splitScalar(e);let{p:c,f:d}=this.wNAF(i),{p:p,f:f}=this.wNAF(u);c=h.constTimeNegate(t,c),p=h.constTimeNegate(s,p),p=new l(r.mul(p.px,n.beta),p.py,p.pz),a=c.add(p),o=d.add(f)}else{const{p:t,f:r}=this.wNAF(e);a=t,o=r}return l.normalizeZ([a,o])[0]}multiplyAndAddUnsafe(e,t,r){const n=l.BASE,i=(e,t)=>t!==_0n$2&&t!==_1n$3&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),a=i(this,t).add(i(e,r));return a.is0()?void 0:a}toAffine(e){return c(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===_1n$3)return!0;if(r)return r(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===_1n$3?this:r?r(l,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return abool("isCompressed",e),this.assertValidity(),i(l,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return abool("isCompressed",e),bytesToHex$2(this.toRawBytes(e))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);const p=t.nBitLength,h=wNAF(l,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:s,weierstrassEquation:o,isWithinCurveOrder:function(e){return inRange$1(e,_1n$3,t.n)}}}function validateOpts(e){const t=validateBasic(e);return validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function weierstrass(e){const t=validateOpts(e),{Fp:r,n:n}=t,i=r.BYTES+1,a=2*r.BYTES+1;function o(e){return mod$1(e,n)}function s(e){return invert$1(e,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:d,isWithinCurveOrder:l}=weierstrassPoints({...t,toBytes(e,t,n){const i=t.toAffine(),a=r.toBytes(i.x),o=concatBytes$2;return abool("isCompressed",n),n?o(Uint8Array.from([t.hasEvenY()?2:3]),a):o(Uint8Array.from([4]),a,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],o=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===a&&4===n){return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))}}throw new Error("invalid Point, expected length of "+i+", or uncompressed "+a+", got "+t)}{const e=bytesToNumberBE(o);if(!inRange$1(e,_1n$3,r.ORDER))throw new Error("Point is not on curve");const t=d(e);let i;try{i=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return 1==(1&n)!==((i&_1n$3)===_1n$3)&&(i=r.neg(i)),{x:e,y:i}}}}),p=e=>bytesToHex$2(numberToBytesBE(e,t.nByteLength));function h(e){return e>n>>_1n$3}const f=(e,t,r)=>bytesToNumberBE(e.slice(t,r));class m{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=ensureBytes$2("compactSignature",e,2*r),new m(f(e,0,r),f(e,r,2*r))}static fromDER(e){const{r:t,s:r}=DER.toSig(ensureBytes$2("DER",e));return new m(t,r)}assertValidity(){aInRange("r",this.r,_1n$3,n),aInRange("s",this.s,_1n$3,n)}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:a}=this,c=v(ensureBytes$2("msgHash",e));if(null==a||![0,1,2,3].includes(a))throw new Error("recovery id invalid");const d=2===a||3===a?n+t.n:n;if(d>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=0==(1&a)?"02":"03",h=u.fromHex(l+p(d)),f=s(d),m=o(-c*f),y=o(i*f),g=u.BASE.multiplyAndAddUnsafe(h,m,y);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes$1(this.toDERHex())}toDERHex(){return DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes$1(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const y={isValidPrivateKey(e){try{return c(e),!0}catch(e){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const e=getMinHashLength(t.n);return mapHashToField(t.randomBytes(e),t.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function g(e){const t=isBytes(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===a:r?n===2*i||n===2*a:e instanceof u}const b=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const r=bytesToNumberBE(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},v=t.bits2int_modN||function(e){return o(b(e))},w=bitMask(t.nBitLength);function _(e){return aInRange("num < 2^"+t.nBitLength,e,_0n$2,w),numberToBytesBE(e,t.nByteLength)}function S(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:a,randomBytes:d}=t;let{lowS:p,prehash:f,extraEntropy:y}=i;null==p&&(p=!0),e=ensureBytes$2("msgHash",e),validateSigVerOpts(i),f&&(e=ensureBytes$2("prehashed msgHash",a(e)));const g=v(e),w=c(n),S=[_(w),_(g)];if(null!=y&&!1!==y){const e=!0===y?d(r.BYTES):y;S.push(ensureBytes$2("extraEntropy",e))}const A=concatBytes$2(...S),T=g;return{seed:A,k2sig:function(e){const t=b(e);if(!l(t))return;const r=s(t),n=u.BASE.multiply(t).toAffine(),i=o(n.x);if(i===_0n$2)return;const a=o(r*o(T+i*w));if(a===_0n$2)return;let c=(n.x===i?0:2)|Number(n.y&_1n$3),d=a;return p&&h(a)&&(d=function(e){return h(e)?o(-e):e}(a),c^=1),new m(i,d,c)}}}const E={lowS:t.lowS,prehash:!1},A={lowS:t.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return u.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(g(e))throw new Error("first arg must be private key");if(!g(t))throw new Error("second arg must be public key");return u.fromHex(t).multiply(c(e)).toRawBytes(r)},sign:function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;const{seed:i,k2sig:a}=S(e,r,n),o=t;return createHmacDrbg(o.hash.outputLen,o.nByteLength,o.hmac)(i,a)},verify:function(e,r,n){var i;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;const c=e;r=ensureBytes$2("msgHash",r),n=ensureBytes$2("publicKey",n);const{lowS:d,prehash:l,format:p}=a;if(validateSigVerOpts(a),"strict"in a)throw new Error("options.strict was renamed to lowS");if(void 0!==p&&"compact"!==p&&"der"!==p)throw new Error("format must be compact or der");const h="string"==typeof c||isBytes(c),f=!h&&!p&&"object"==typeof c&&null!==c&&"bigint"==typeof c.r&&"bigint"==typeof c.s;if(!h&&!f)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let y,g;try{if(f&&(y=new m(c.r,c.s)),h){try{"compact"!==p&&(y=m.fromDER(c))}catch(e){if(!(e instanceof DER.Err))throw e}y||"der"===p||(y=m.fromCompact(c))}g=u.fromHex(n)}catch(e){return!1}if(!y)return!1;if(d&&y.hasHighS())return!1;l&&(r=t.hash(r));const{r:b,s:w}=y,_=v(r),S=s(w),E=o(_*S),T=o(b*S),I=null===(i=u.BASE.multiplyAndAddUnsafe(g,E,T))||void 0===i?void 0:i.toAffine();return!!I&&o(I.x)===b},ProjectivePoint:u,Signature:m,utils:y}}function getHash(e){return{hash:e,hmac:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return hmac(e,t,concatBytes$3(...n))},randomBytes:randomBytes$1}}function createCurve(e,t){const r=t=>weierstrass({...e,...getHash(t)});return{...r(t),create:r}}BigInt(4);const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n$2=BigInt(1),_2n$2=BigInt(2),divNearest$1=(e,t)=>(e+t/_2n$2)/t;function sqrtMod$1(e){const t=secp256k1P,r=BigInt(3),n=BigInt(6),i=BigInt(11),a=BigInt(22),o=BigInt(23),s=BigInt(44),u=BigInt(88),c=e*e*e%t,d=c*c*e%t,l=pow2$1(d,r,t)*d%t,p=pow2$1(l,r,t)*d%t,h=pow2$1(p,_2n$2,t)*c%t,f=pow2$1(h,i,t)*h%t,m=pow2$1(f,a,t)*f%t,y=pow2$1(m,s,t)*m%t,g=pow2$1(y,u,t)*y%t,b=pow2$1(g,s,t)*m%t,v=pow2$1(b,r,t)*d%t,w=pow2$1(v,o,t)*f%t,_=pow2$1(w,n,t)*c%t,S=pow2$1(_,_2n$2,t);if(!Fpk1.eql(Fpk1.sqr(S),e))throw new Error("Cannot find square root");return S}const Fpk1=Field(secp256k1P,void 0,void 0,{sqrt:sqrtMod$1}),secp256k1=createCurve({a:BigInt(0),b:BigInt(7),Fp:Fpk1,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=secp256k1N,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-_1n$2*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=r,o=BigInt("0x100000000000000000000000000000000"),s=divNearest$1(a*e,t),u=divNearest$1(-n*e,t);let c=mod$1(e-s*r-u*i,t),d=mod$1(-s*n-u*a,t);const l=c>o,p=d>o;if(l&&(c=t-c),p&&(d=t-d),c>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:c,k2neg:p,k2:d}}}},sha256$3);BigInt(0),secp256k1.ProjectivePoint;const generatePrivateKey$1=ed25519.utils.randomPrivateKey,generateKeypair=()=>{const e=ed25519.utils.randomPrivateKey(),t=getPublicKey(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},getPublicKey=ed25519.getPublicKey;function isOnCurve(e){try{return ed25519.ExtendedPoint.fromHex(e),!0}catch{return!1}}const sign$3=(e,t)=>ed25519.sign(e,t.slice(0,32)),verify=ed25519.verify,toBuffer=e=>buffer.Buffer.isBuffer(e)?e:e instanceof Uint8Array?buffer.Buffer.from(e.buffer,e.byteOffset,e.byteLength):buffer.Buffer.from(e);class Struct$1{constructor(e){Object.assign(this,e)}encode(){return buffer.Buffer.from(serialize_1(SOLANA_SCHEMA,this))}static decode(e){return deserialize_1(SOLANA_SCHEMA,this,e)}static decodeUnchecked(e){return deserializeUnchecked_1(SOLANA_SCHEMA,this,e)}}class Enum extends Struct$1{constructor(e){if(super(e),this.enum="",1!==Object.keys(e).length)throw new Error("Enum can only take single value");Object.keys(e).map((e=>{this.enum=e}))}}const SOLANA_SCHEMA=new Map;var _PublicKey;const MAX_SEED_LENGTH=32,PUBLIC_KEY_LENGTH=32;function isPublicKeyData(e){return void 0!==e._bn}let uniquePublicKeyCounter=1;class PublicKey extends Struct$1{constructor(e){if(super({}),this._bn=void 0,isPublicKeyData(e))this._bn=e._bn;else{if("string"==typeof e){const t=bs58$1.decode(e);if(t.length!=PUBLIC_KEY_LENGTH)throw new Error("Invalid public key input");this._bn=new BN(t)}else this._bn=new BN(e);if(this._bn.byteLength()>PUBLIC_KEY_LENGTH)throw new Error("Invalid public key input")}}static unique(){const e=new PublicKey(uniquePublicKeyCounter);return uniquePublicKeyCounter+=1,new PublicKey(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return bs58$1.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(buffer.Buffer);if(e.length===PUBLIC_KEY_LENGTH)return e;const t=buffer.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const n=buffer.Buffer.concat([e.toBuffer(),buffer.Buffer.from(t),r.toBuffer()]),i=sha256$3(n);return new PublicKey(i)}static createProgramAddressSync(e,t){let r=buffer.Buffer.alloc(0);e.forEach((function(e){if(e.length>MAX_SEED_LENGTH)throw new TypeError("Max seed length exceeded");r=buffer.Buffer.concat([r,toBuffer(e)])})),r=buffer.Buffer.concat([r,t.toBuffer(),buffer.Buffer.from("ProgramDerivedAddress")]);const n=sha256$3(r);if(isOnCurve(n))throw new Error("Invalid seeds, address must fall off the curve");return new PublicKey(n)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r,n=255;for(;0!=n;){try{const i=e.concat(buffer.Buffer.from([n]));r=this.createProgramAddressSync(i,t)}catch(e){if(e instanceof TypeError)throw e;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){return isOnCurve(new PublicKey(e).toBytes())}}_PublicKey=PublicKey,PublicKey.default=new _PublicKey("11111111111111111111111111111111"),SOLANA_SCHEMA.set(PublicKey,{kind:"struct",fields:[["_bn","u256"]]});class Account{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=toBuffer(e);if(64!==e.length)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=toBuffer(generatePrivateKey$1()),this._publicKey=toBuffer(getPublicKey(this._secretKey))}get publicKey(){return new PublicKey(this._publicKey)}get secretKey(){return buffer.Buffer.concat([this._secretKey,this._publicKey],64)}}const BPF_LOADER_DEPRECATED_PROGRAM_ID=new PublicKey("BPFLoader1111111111111111111111111111111111"),PACKET_DATA_SIZE=1232,VERSION_PREFIX_MASK=127,SIGNATURE_LENGTH_IN_BYTES=64;class TransactionExpiredBlockheightExceededError extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(TransactionExpiredBlockheightExceededError.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class TransactionExpiredTimeoutError extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(TransactionExpiredTimeoutError.prototype,"name",{value:"TransactionExpiredTimeoutError"});class TransactionExpiredNonceInvalidError extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(TransactionExpiredNonceInvalidError.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class MessageAccountKeys{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const t=new Map;this.keySegments().flat().forEach(((e,r)=>{t.set(e.toBase58(),r)}));const r=e=>{const r=t.get(e.toBase58());if(void 0===r)throw new Error("Encountered an unknown instruction account key during compilation");return r};return e.map((e=>({programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map((e=>r(e.pubkey))),data:e.data})))}}const publicKey$4=function(){return blob$1(32,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey")},signature=function(){return blob$1(64,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"signature")},rustString=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string";const t=struct$1([u32$2("length"),u32$2("lengthPadding"),blob$1(offset$1(u32$2(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=(e,t)=>r(e,t).chars.toString(),i.encode=(e,t,r)=>{const i={chars:buffer.Buffer.from(e,"utf8")};return n(i,t,r)},i.alloc=e=>u32$2().span+u32$2().span+buffer.Buffer.from(e,"utf8").length,i},authorized=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"authorized";return struct$1([publicKey$4("staker"),publicKey$4("withdrawer")],e)},lockup=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lockup";return struct$1([ns64$1("unixTimestamp"),ns64$1("epoch"),publicKey$4("custodian")],e)},voteInit=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteInit";return struct$1([publicKey$4("nodePubkey"),publicKey$4("authorizedVoter"),publicKey$4("authorizedWithdrawer"),u8$1("commission")],e)},voteAuthorizeWithSeedArgs=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteAuthorizeWithSeedArgs";return struct$1([u32$2("voteAuthorizationType"),publicKey$4("currentAuthorityDerivedKeyOwnerPubkey"),rustString("currentAuthorityDerivedKeySeed"),publicKey$4("newAuthorized")],e)};function getAlloc(e,t){const r=e=>{if(e.span>=0)return e.span;if("function"==typeof e.alloc)return e.alloc(t[e.property]);if("count"in e&&"elementLayout"in e){const n=t[e.property];if(Array.isArray(n))return n.length*r(e.elementLayout)}else if("fields"in e)return getAlloc({layout:e},t[e.property]);return 0};let n=0;return e.layout.fields.forEach((e=>{n+=r(e)})),n}function decodeLength(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,0==(128&n))break}return t}function encodeLength(e,t){let r=t;for(;;){let t=127&r;if(r>>=7,0==r){e.push(t);break}t|=128,e.push(t)}}function assert$2(e,t){if(!e)throw new Error(t||"Assertion failed")}class CompiledKeys{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,n=e=>{const t=e.toBase58();let n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},i=n(t);i.isSigner=!0,i.isWritable=!0;for(const t of e){n(t.programId).isInvoked=!0;for(const e of t.keys){const t=n(e.pubkey);t.isSigner||(t.isSigner=e.isSigner),t.isWritable||(t.isWritable=e.isWritable)}}return new CompiledKeys(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];assert$2(e.length<=256,"Max static account keys length exceeded");const t=e.filter((e=>{let[,t]=e;return t.isSigner&&t.isWritable})),r=e.filter((e=>{let[,t]=e;return t.isSigner&&!t.isWritable})),n=e.filter((e=>{let[,t]=e;return!t.isSigner&&t.isWritable})),i=e.filter((e=>{let[,t]=e;return!t.isSigner&&!t.isWritable})),a={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{assert$2(t.length>0,"Expected at least one writable signer key");const[e]=t[0];assert$2(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[a,[...t.map((e=>{let[t]=e;return new PublicKey(t)})),...r.map((e=>{let[t]=e;return new PublicKey(t)})),...n.map((e=>{let[t]=e;return new PublicKey(t)})),...i.map((e=>{let[t]=e;return new PublicKey(t)}))]]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&e.isWritable)),[n,i]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&!e.isWritable));if(0!==t.length||0!==n.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,t){const r=new Array,n=new Array;for(const[i,a]of this.keyMetaMap.entries())if(t(a)){const t=new PublicKey(i),a=e.findIndex((e=>e.equals(t)));a>=0&&(assert$2(a<256,"Max lookup table index exceeded"),r.push(a),n.push(t),this.keyMetaMap.delete(i))}return[r,n]}}const END_OF_BUFFER_ERROR_MESSAGE="Reached end of buffer unexpectedly";function guardedShift(e){if(0===e.length)throw new Error(END_OF_BUFFER_ERROR_MESSAGE);return e.shift()}function guardedSplice(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];const[a]=n;if(2===n.length?a+(null!==(t=n[1])&&void 0!==t?t:0)>e.length:a>=e.length)throw new Error(END_OF_BUFFER_ERROR_MESSAGE);return e.splice(...n)}class Message{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map((e=>new PublicKey(e))),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach((e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex])))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:bs58$1.decode(e.data)})))}get addressTableLookups(){return[]}getAccountKeys(){return new MessageAccountKeys(this.staticAccountKeys)}static compile(e){const t=CompiledKeys.compile(e.instructions,e.payerKey),[r,n]=t.getMessageComponents(),i=new MessageAccountKeys(n).compileInstructions(e.instructions).map((e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:bs58$1.encode(e.data)})));return new Message({header:r,accountKeys:n,recentBlockhash:e.recentBlockhash,instructions:i})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){return e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts}return e<t-this.header.numReadonlySignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((e,t)=>!this.isProgramId(t)))}serialize(){const e=this.accountKeys.length;let t=[];encodeLength(t,e);const r=this.instructions.map((e=>{const{accounts:t,programIdIndex:r}=e,n=Array.from(bs58$1.decode(e.data));let i=[];encodeLength(i,t.length);let a=[];return encodeLength(a,n.length),{programIdIndex:r,keyIndicesCount:buffer.Buffer.from(i),keyIndices:t,dataLength:buffer.Buffer.from(a),data:n}}));let n=[];encodeLength(n,r.length);let i=buffer.Buffer.alloc(PACKET_DATA_SIZE);buffer.Buffer.from(n).copy(i);let a=n.length;r.forEach((e=>{const t=struct$1([u8$1("programIdIndex"),blob$1(e.keyIndicesCount.length,"keyIndicesCount"),seq(u8$1("keyIndex"),e.keyIndices.length,"keyIndices"),blob$1(e.dataLength.length,"dataLength"),seq(u8$1("userdatum"),e.data.length,"data")]).encode(e,i,a);a+=t})),i=i.slice(0,a);const o=struct$1([blob$1(1,"numRequiredSignatures"),blob$1(1,"numReadonlySignedAccounts"),blob$1(1,"numReadonlyUnsignedAccounts"),blob$1(t.length,"keyCount"),seq(publicKey$4("key"),e,"keys"),publicKey$4("recentBlockhash")]),s={numRequiredSignatures:buffer.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:buffer.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:buffer.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:buffer.Buffer.from(t),keys:this.accountKeys.map((e=>toBuffer(e.toBytes()))),recentBlockhash:bs58$1.decode(this.recentBlockhash)};let u=buffer.Buffer.alloc(2048);const c=o.encode(s,u);return i.copy(u,c),u.slice(0,c+i.length)}static from(e){let t=[...e];const r=guardedShift(t);if(r!==(r&VERSION_PREFIX_MASK))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const n=guardedShift(t),i=guardedShift(t),a=decodeLength(t);let o=[];for(let e=0;e<a;e++){const e=guardedSplice(t,0,PUBLIC_KEY_LENGTH);o.push(new PublicKey(buffer.Buffer.from(e)))}const s=guardedSplice(t,0,PUBLIC_KEY_LENGTH),u=decodeLength(t);let c=[];for(let e=0;e<u;e++){const e=guardedShift(t),r=guardedSplice(t,0,decodeLength(t)),n=guardedSplice(t,0,decodeLength(t)),i=bs58$1.encode(buffer.Buffer.from(n));c.push({programIdIndex:e,accounts:r,data:i})}const d={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:i},recentBlockhash:bs58$1.encode(buffer.Buffer.from(s)),accountKeys:o,instructions:c};return new Message(d)}}class MessageV0{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new MessageAccountKeys(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const t=e-r,n=this.addressTableLookups.reduce(((e,t)=>e+t.writableIndexes.length),0);return t<n}if(e>=this.header.numRequiredSignatures){return e-t<r-t-this.header.numReadonlyUnsignedAccounts}return e<t-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=e.find((e=>e.key.equals(r.accountKey)));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const e of r.writableIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.writable.push(n.state.addresses[e])}for(const e of r.readonlyIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.readonly.push(n.state.addresses[e])}}return t}static compile(e){const t=CompiledKeys.compile(e.instructions,e.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const e of i){const i=t.extractTableLookup(e);if(void 0!==i){const[e,{writable:t,readonly:a}]=i;r.push(e),n.writable.push(...t),n.readonly.push(...a)}}const[a,o]=t.getMessageComponents(),s=new MessageAccountKeys(o,n).compileInstructions(e.instructions);return new MessageV0({header:a,staticAccountKeys:o,recentBlockhash:e.recentBlockhash,compiledInstructions:s,addressTableLookups:r})}serialize(){const e=Array();encodeLength(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();encodeLength(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();encodeLength(i,this.addressTableLookups.length);const a=struct$1([u8$1("prefix"),struct$1([u8$1("numRequiredSignatures"),u8$1("numReadonlySignedAccounts"),u8$1("numReadonlyUnsignedAccounts")],"header"),blob$1(e.length,"staticAccountKeysLength"),seq(publicKey$4(),this.staticAccountKeys.length,"staticAccountKeys"),publicKey$4("recentBlockhash"),blob$1(r.length,"instructionsLength"),blob$1(t.length,"serializedInstructions"),blob$1(i.length,"addressTableLookupsLength"),blob$1(n.length,"serializedAddressTableLookups")]),o=new Uint8Array(PACKET_DATA_SIZE),s=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map((e=>e.toBytes())),recentBlockhash:bs58$1.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},o);return o.slice(0,s)}serializeInstructions(){let e=0;const t=new Uint8Array(PACKET_DATA_SIZE);for(const r of this.compiledInstructions){const n=Array();encodeLength(n,r.accountKeyIndexes.length);const i=Array();encodeLength(i,r.data.length);e+=struct$1([u8$1("programIdIndex"),blob$1(n.length,"encodedAccountKeyIndexesLength"),seq(u8$1(),r.accountKeyIndexes.length,"accountKeyIndexes"),blob$1(i.length,"encodedDataLength"),blob$1(r.data.length,"data")]).encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(PACKET_DATA_SIZE);for(const r of this.addressTableLookups){const n=Array();encodeLength(n,r.writableIndexes.length);const i=Array();encodeLength(i,r.readonlyIndexes.length);e+=struct$1([publicKey$4("accountKey"),blob$1(n.length,"encodedWritableIndexesLength"),seq(u8$1(),r.writableIndexes.length,"writableIndexes"),blob$1(i.length,"encodedReadonlyIndexesLength"),seq(u8$1(),r.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=guardedShift(t),n=r&VERSION_PREFIX_MASK;assert$2(r!==n,"Expected versioned message but received legacy message");assert$2(0===n,`Expected versioned message with version 0 but found version ${n}`);const i={numRequiredSignatures:guardedShift(t),numReadonlySignedAccounts:guardedShift(t),numReadonlyUnsignedAccounts:guardedShift(t)},a=[],o=decodeLength(t);for(let e=0;e<o;e++)a.push(new PublicKey(guardedSplice(t,0,PUBLIC_KEY_LENGTH)));const s=bs58$1.encode(guardedSplice(t,0,PUBLIC_KEY_LENGTH)),u=decodeLength(t),c=[];for(let e=0;e<u;e++){const e=guardedShift(t),r=guardedSplice(t,0,decodeLength(t)),n=decodeLength(t),i=new Uint8Array(guardedSplice(t,0,n));c.push({programIdIndex:e,accountKeyIndexes:r,data:i})}const d=decodeLength(t),l=[];for(let e=0;e<d;e++){const e=new PublicKey(guardedSplice(t,0,PUBLIC_KEY_LENGTH)),r=guardedSplice(t,0,decodeLength(t)),n=guardedSplice(t,0,decodeLength(t));l.push({accountKey:e,writableIndexes:r,readonlyIndexes:n})}return new MessageV0({header:i,staticAccountKeys:a,recentBlockhash:s,compiledInstructions:c,addressTableLookups:l})}}const VersionedMessage={deserializeMessageVersion(e){const t=e[0],r=t&VERSION_PREFIX_MASK;return r===t?"legacy":r},deserialize:e=>{const t=VersionedMessage.deserializeMessageVersion(e);if("legacy"===t)return Message.from(e);if(0===t)return MessageV0.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let TransactionStatus=function(e){return e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID",e}({});const DEFAULT_SIGNATURE=buffer.Buffer.alloc(SIGNATURE_LENGTH_IN_BYTES).fill(0);class TransactionInstruction{constructor(e){this.keys=void 0,this.programId=void 0,this.data=buffer.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map((e=>{let{pubkey:t,isSigner:r,isWritable:n}=e;return{pubkey:t.toJSON(),isSigner:r,isWritable:n}})),programId:this.programId.toJSON(),data:[...this.data]}}}class Transaction{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((e=>e.toJSON())),signers:this.signatures.map((e=>{let{publicKey:t}=e;return t.toJSON()}))}}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No instructions");return t.forEach((e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new TransactionInstruction(e))})),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let e=0;e<t.length;e++)if(void 0===t[e].programId)throw new Error(`Transaction instruction index ${e} has undefined program id`);const n=[],i=[];t.forEach((e=>{e.keys.forEach((e=>{i.push({...e})}));const t=e.programId.toString();n.includes(t)||n.push(t)})),n.forEach((e=>{i.push({pubkey:new PublicKey(e),isSigner:!1,isWritable:!1})}));const a=[];i.forEach((e=>{const t=e.pubkey.toString(),r=a.findIndex((e=>e.pubkey.toString()===t));r>-1?(a[r].isWritable=a[r].isWritable||e.isWritable,a[r].isSigner=a[r].isSigner||e.isSigner):a.push(e)})),a.sort((function(e,t){if(e.isSigner!==t.isSigner)return e.isSigner?-1:1;if(e.isWritable!==t.isWritable)return e.isWritable?-1:1;return e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));const o=a.findIndex((e=>e.pubkey.equals(r)));if(o>-1){const[e]=a.splice(o,1);e.isSigner=!0,e.isWritable=!0,a.unshift(e)}else a.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const e of this.signatures){const t=a.findIndex((t=>t.pubkey.equals(e.publicKey)));if(!(t>-1))throw new Error(`unknown signer: ${e.publicKey.toString()}`);a[t].isSigner||(a[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let s=0,u=0,c=0;const d=[],l=[];a.forEach((e=>{let{pubkey:t,isSigner:r,isWritable:n}=e;r?(d.push(t.toString()),s+=1,n||(u+=1)):(l.push(t.toString()),n||(c+=1))}));const p=d.concat(l),h=t.map((e=>{const{data:t,programId:r}=e;return{programIdIndex:p.indexOf(r.toString()),accounts:e.keys.map((e=>p.indexOf(e.pubkey.toString()))),data:bs58$1.encode(t)}}));return h.forEach((e=>{assert$2(e.programIdIndex>=0),e.accounts.forEach((e=>assert$2(e>=0)))})),new Message({header:{numRequiredSignatures:s,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:c},accountKeys:p,recentBlockhash:e,instructions:h})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length){const r=this.signatures.every(((e,r)=>t[r].equals(e.publicKey)));if(r)return e}return this.signatures=t.map((e=>({signature:null,publicKey:e}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");const n=new Set;this.signatures=t.filter((e=>{const t=e.toString();return!n.has(t)&&(n.add(t),!0)})).map((e=>({signature:null,publicKey:e})))}sign(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");const n=new Set,i=[];for(const e of t){const t=e.publicKey.toString();n.has(t)||(n.add(t),i.push(e))}this.signatures=i.map((e=>({signature:null,publicKey:e.publicKey})));const a=this._compile();this._partialSign(a,...i)}partialSign(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");const n=new Set,i=[];for(const e of t){const t=e.publicKey.toString();n.has(t)||(n.add(t),i.push(e))}const a=this._compile();this._partialSign(a,...i)}_partialSign(e){const t=e.serialize();for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];n.forEach((e=>{const r=sign$3(t,e.secretKey);this._addSignature(e.publicKey,toBuffer(r))}))}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){assert$2(64===t.length);const r=this.signatures.findIndex((t=>e.equals(t.publicKey)));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=buffer.Buffer.from(t)}verifySignatures(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?t&&(r.missing||(r.missing=[])).push(i):verify(n,e,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r){const e=this._getMessageSignednessErrors(n,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`\nInvalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map((e=>e.toBase58())).join("`, `")}\`].`),e.missing&&(t+=`\nMissing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map((e=>e.toBase58())).join("`, `")}\`].`),new Error(t)}}return this._serialize(n)}_serialize(e){const{signatures:t}=this,r=[];encodeLength(r,t.length);const n=r.length+64*t.length+e.length,i=buffer.Buffer.alloc(n);return assert$2(t.length<256),buffer.Buffer.from(r).copy(i,0),t.forEach(((e,t)=>{let{signature:n}=e;null!==n&&(assert$2(64===n.length,"signature has invalid length"),buffer.Buffer.from(n).copy(i,r.length+64*t))})),e.copy(i,r.length+64*t.length),assert$2(i.length<=PACKET_DATA_SIZE,`Transaction too large: ${i.length} > ${PACKET_DATA_SIZE}`),i}get keys(){return assert$2(1===this.instructions.length),this.instructions[0].keys.map((e=>e.pubkey))}get programId(){return assert$2(1===this.instructions.length),this.instructions[0].programId}get data(){return assert$2(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e];const r=decodeLength(t);let n=[];for(let e=0;e<r;e++){const e=guardedSplice(t,0,SIGNATURE_LENGTH_IN_BYTES);n.push(bs58$1.encode(buffer.Buffer.from(e)))}return Transaction.populate(Message.from(t),n)}static populate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=new Transaction;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach(((t,n)=>{const i={signature:t==bs58$1.encode(DEFAULT_SIGNATURE)?null:bs58$1.decode(t),publicKey:e.accountKeys[n]};r.signatures.push(i)})),e.instructions.forEach((t=>{const n=t.accounts.map((t=>{const n=e.accountKeys[t];return{pubkey:n,isSigner:r.signatures.some((e=>e.publicKey.toString()===n.toString()))||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}}));r.instructions.push(new TransactionInstruction({keys:n,programId:e.accountKeys[t.programIdIndex],data:bs58$1.decode(t.data)}))})),r._message=e,r._json=r.toJSON(),r}}class TransactionMessage{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:r,compiledInstructions:n,recentBlockhash:i}=e,{numRequiredSignatures:a,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:s}=r,u=a-o;assert$2(u>0,"Message header is invalid");const c=e.staticAccountKeys.length-a-s;assert$2(c>=0,"Message header is invalid");const d=e.getAccountKeys(t),l=d.get(0);if(void 0===l)throw new Error("Failed to decompile message because no account keys were found");const p=[];for(const e of n){const t=[];for(const n of e.accountKeyIndexes){const e=d.get(n);if(void 0===e)throw new Error(`Failed to find key for account key index ${n}`);let i;i=n<a?n<u:n<d.staticAccountKeys.length?n-a<c:n-d.staticAccountKeys.length<d.accountKeysFromLookups.writable.length,t.push({pubkey:e,isSigner:n<r.numRequiredSignatures,isWritable:i})}const n=d.get(e.programIdIndex);if(void 0===n)throw new Error(`Failed to find program id for program id index ${e.programIdIndex}`);p.push(new TransactionInstruction({programId:n,data:toBuffer(e.data),keys:t}))}return new TransactionMessage({payerKey:l,instructions:p,recentBlockhash:i})}compileToLegacyMessage(){return Message.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return MessageV0.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class VersionedTransaction{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)assert$2(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const t=[];for(let r=0;r<e.header.numRequiredSignatures;r++)t.push(new Uint8Array(SIGNATURE_LENGTH_IN_BYTES));this.signatures=t}this.message=e}serialize(){const e=this.message.serialize(),t=Array();encodeLength(t,this.signatures.length);const r=struct$1([blob$1(t.length,"encodedSignaturesLength"),seq(signature(),this.signatures.length,"signatures"),blob$1(e.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,i)}static deserialize(e){let t=[...e];const r=[],n=decodeLength(t);for(let e=0;e<n;e++)r.push(new Uint8Array(guardedSplice(t,0,SIGNATURE_LENGTH_IN_BYTES)));const i=VersionedMessage.deserialize(new Uint8Array(t));return new VersionedTransaction(i,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of e){const e=r.findIndex((e=>e.equals(n.publicKey)));assert$2(e>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[e]=sign$3(t,n.secretKey)}}addSignature(e,t){assert$2(64===t.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex((t=>t.equals(e)));assert$2(r>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=t}}const NUM_TICKS_PER_SECOND=160,DEFAULT_TICKS_PER_SLOT=64,NUM_SLOTS_PER_SECOND=NUM_TICKS_PER_SECOND/DEFAULT_TICKS_PER_SLOT,MS_PER_SLOT=1e3/NUM_SLOTS_PER_SECOND,SYSVAR_CLOCK_PUBKEY=new PublicKey("SysvarC1ock11111111111111111111111111111111"),SYSVAR_EPOCH_SCHEDULE_PUBKEY=new PublicKey("SysvarEpochSchedu1e111111111111111111111111"),SYSVAR_INSTRUCTIONS_PUBKEY=new PublicKey("Sysvar1nstructions1111111111111111111111111"),SYSVAR_RECENT_BLOCKHASHES_PUBKEY=new PublicKey("SysvarRecentB1ockHashes11111111111111111111"),SYSVAR_RENT_PUBKEY=new PublicKey("SysvarRent111111111111111111111111111111111"),SYSVAR_REWARDS_PUBKEY=new PublicKey("SysvarRewards111111111111111111111111111111"),SYSVAR_SLOT_HASHES_PUBKEY=new PublicKey("SysvarS1otHashes111111111111111111111111111"),SYSVAR_SLOT_HISTORY_PUBKEY=new PublicKey("SysvarS1otHistory11111111111111111111111111"),SYSVAR_STAKE_HISTORY_PUBKEY=new PublicKey("SysvarStakeHistory1111111111111111111111111");class SendTransactionError extends Error{constructor(e){let{action:t,signature:r,transactionMessage:n,logs:i}=e;const a=i?`Logs: \n${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let s;switch(t){case"send":s=`Transaction ${r} resulted in an error. \n${n}. `+a+o;break;case"simulate":s=`Simulation failed. \nMessage: ${n}. \n`+a+o;break;default:s=`Unknown action '${t}'`}super(s),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=r,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(null==e||"object"!=typeof e||!("then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise(((t,r)=>{e.getTransaction(this.signature).then((e=>{if(e&&e.meta&&e.meta.logMessages){const r=e.meta.logMessages;this.transactionLogs=r,t(r)}else r(new Error("Log messages not found"))})).catch(r)}))),await this.transactionLogs}}const SolanaJSONRPCErrorCode={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class SolanaJSONRPCError extends Error{constructor(e,t){let{code:r,message:n,data:i}=e;super(null!=t?`${t}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=r,this.data=i,this.name="SolanaJSONRPCError"}}async function sendAndConfirmTransaction(e,t,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},a=await e.sendTransaction(t,r,i);let o;if(null!=t.recentBlockhash&&null!=t.lastValidBlockHeight)o=(await e.confirmTransaction({abortSignal:null==n?void 0:n.abortSignal,signature:a,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=t.minNonceContextSlot&&null!=t.nonceInfo){const{nonceInstruction:r}=t.nonceInfo,i=r.keys[0].pubkey;o=(await e.confirmTransaction({abortSignal:null==n?void 0:n.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:t.nonceInfo.nonce,signature:a},n&&n.commitment)).value}else null!=(null==n?void 0:n.abortSignal)&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await e.confirmTransaction(a,n&&n.commitment)).value;if(o.err){if(null!=a)throw new SendTransactionError({action:"send",signature:a,transactionMessage:`Status: (${JSON.stringify(o)})`});throw new Error(`Transaction ${a} failed (${JSON.stringify(o)})`)}return a}function sleep(e){return new Promise((t=>setTimeout(t,e)))}function encodeData(e,t){const r=e.layout.span>=0?e.layout.span:getAlloc(e,t),n=buffer.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}function decodeData$1(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw new Error("invalid instruction; "+e)}if(r.instruction!==e.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${e.index}`);return r}const FeeCalculatorLayout=nu64$1("lamportsPerSignature"),NonceAccountLayout=struct$1([u32$2("version"),u32$2("state"),publicKey$4("authorizedPubkey"),publicKey$4("nonce"),struct$1([FeeCalculatorLayout],"feeCalculator")]),NONCE_ACCOUNT_LENGTH=NonceAccountLayout.span;class NonceAccount{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=NonceAccountLayout.decode(toBuffer(e),0);return new NonceAccount({authorizedPubkey:new PublicKey(t.authorizedPubkey),nonce:new PublicKey(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const encodeDecode$1=e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)}),bigInt$1=e=>t=>{const r=blob$1(e,t),{encode:n,decode:i}=encodeDecode$1(r),a=r;return a.decode=(e,t)=>{const r=i(e,t);return toBigIntLE_1(buffer.Buffer.from(r))},a.encode=(t,r,i)=>{const a=toBufferLE_1(t,e);return n(a,r,i)},a},u64$3=bigInt$1(8);class SystemInstruction{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=u32$2("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(SYSTEM_INSTRUCTION_LAYOUTS))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a SystemInstruction");return r}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:r,programId:n}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:r,programId:new PublicKey(n)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:r,programId:n}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:r,programId:new PublicKey(n)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,space:n,programId:i}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new PublicKey(t),seed:r,space:n,programId:new PublicKey(i)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new PublicKey(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,programId:n}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new PublicKey(t),seed:r,programId:new PublicKey(n)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:r,lamports:n,space:i,programId:a}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new PublicKey(t),seed:r,lamports:n,space:i,programId:new PublicKey(a)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new PublicKey(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=decodeData$1(SYSTEM_INSTRUCTION_LAYOUTS.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new PublicKey(t)}}static checkProgramId(e){if(!e.equals(SystemProgram.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const SYSTEM_INSTRUCTION_LAYOUTS=Object.freeze({Create:{index:0,layout:struct$1([u32$2("instruction"),ns64$1("lamports"),ns64$1("space"),publicKey$4("programId")])},Assign:{index:1,layout:struct$1([u32$2("instruction"),publicKey$4("programId")])},Transfer:{index:2,layout:struct$1([u32$2("instruction"),u64$3("lamports")])},CreateWithSeed:{index:3,layout:struct$1([u32$2("instruction"),publicKey$4("base"),rustString("seed"),ns64$1("lamports"),ns64$1("space"),publicKey$4("programId")])},AdvanceNonceAccount:{index:4,layout:struct$1([u32$2("instruction")])},WithdrawNonceAccount:{index:5,layout:struct$1([u32$2("instruction"),ns64$1("lamports")])},InitializeNonceAccount:{index:6,layout:struct$1([u32$2("instruction"),publicKey$4("authorized")])},AuthorizeNonceAccount:{index:7,layout:struct$1([u32$2("instruction"),publicKey$4("authorized")])},Allocate:{index:8,layout:struct$1([u32$2("instruction"),ns64$1("space")])},AllocateWithSeed:{index:9,layout:struct$1([u32$2("instruction"),publicKey$4("base"),rustString("seed"),ns64$1("space"),publicKey$4("programId")])},AssignWithSeed:{index:10,layout:struct$1([u32$2("instruction"),publicKey$4("base"),rustString("seed"),publicKey$4("programId")])},TransferWithSeed:{index:11,layout:struct$1([u32$2("instruction"),u64$3("lamports"),rustString("seed"),publicKey$4("programId")])},UpgradeNonceAccount:{index:12,layout:struct$1([u32$2("instruction")])}});class SystemProgram{constructor(){}static createAccount(e){const t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.Create,{lamports:e.lamports,space:e.space,programId:toBuffer(e.programId.toBuffer())});return new TransactionInstruction({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}static transfer(e){let t,r;if("basePubkey"in e){t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:toBuffer(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new TransactionInstruction({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.AssignWithSeed,{base:toBuffer(e.basePubkey.toBuffer()),seed:e.seed,programId:toBuffer(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.Assign,{programId:toBuffer(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.CreateWithSeed,{base:toBuffer(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:toBuffer(e.programId.toBuffer())});let r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new TransactionInstruction({keys:r,programId:this.programId,data:t})}static createNonceAccount(e){const t=new Transaction;"basePubkey"in e&&"seed"in e?t.add(SystemProgram.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:NONCE_ACCOUNT_LENGTH,programId:this.programId})):t.add(SystemProgram.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:NONCE_ACCOUNT_LENGTH,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.InitializeNonceAccount,{authorized:toBuffer(e.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new TransactionInstruction(r)}static nonceAdvance(e){const t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.AdvanceNonceAccount),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new TransactionInstruction(r)}static nonceWithdraw(e){const t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.WithdrawNonceAccount,{lamports:e.lamports});return new TransactionInstruction({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceAuthorize(e){const t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.AuthorizeNonceAccount,{authorized:toBuffer(e.newAuthorizedPubkey.toBuffer())});return new TransactionInstruction({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static allocate(e){let t,r;if("basePubkey"in e){t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.AllocateWithSeed,{base:toBuffer(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:toBuffer(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{t=encodeData(SYSTEM_INSTRUCTION_LAYOUTS.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new TransactionInstruction({keys:r,programId:this.programId,data:t})}}SystemProgram.programId=new PublicKey("11111111111111111111111111111111");const CHUNK_SIZE=PACKET_DATA_SIZE-300;class Loader{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Loader.chunkSize)+1+1)}static async load(e,t,r,n,i){{const a=await e.getMinimumBalanceForRentExemption(i.length),o=await e.getAccountInfo(r.publicKey,"confirmed");let s=null;if(null!==o){if(o.executable)return console.error("Program load failed, account is already executable"),!1;o.data.length!==i.length&&(s=s||new Transaction,s.add(SystemProgram.allocate({accountPubkey:r.publicKey,space:i.length}))),o.owner.equals(n)||(s=s||new Transaction,s.add(SystemProgram.assign({accountPubkey:r.publicKey,programId:n}))),o.lamports<a&&(s=s||new Transaction,s.add(SystemProgram.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:a-o.lamports})))}else s=(new Transaction).add(SystemProgram.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:a>0?a:1,space:i.length,programId:n}));null!==s&&await sendAndConfirmTransaction(e,s,[t,r],{commitment:"confirmed"})}const a=struct$1([u32$2("instruction"),u32$2("offset"),u32$2("bytesLength"),u32$2("bytesLengthPadding"),seq(u8$1("byte"),offset$1(u32$2(),-8),"bytes")]),o=Loader.chunkSize;let s=0,u=i,c=[];for(;u.length>0;){const i=u.slice(0,o),d=buffer.Buffer.alloc(o+16);a.encode({instruction:0,offset:s,bytes:i,bytesLength:0,bytesLengthPadding:0},d);const l=(new Transaction).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:d});if(c.push(sendAndConfirmTransaction(e,l,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")){const e=4;await sleep(1e3/e)}s+=o,u=u.slice(o)}await Promise.all(c);{const i=struct$1([u32$2("instruction")]),a=buffer.Buffer.alloc(i.span);i.encode({instruction:1},a);const o=(new Transaction).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:n,data:a}),s="processed",u=await e.sendTransaction(o,[t,r],{preflightCommitment:s}),{context:c,value:d}=await e.confirmTransaction({signature:u,lastValidBlockHeight:o.lastValidBlockHeight,blockhash:o.recentBlockhash},s);if(d.err)throw new Error(`Transaction ${u} failed (${JSON.stringify(d)})`);for(;;){try{if(await e.getSlot({commitment:s})>c.slot)break}catch{}await new Promise((e=>setTimeout(e,Math.round(MS_PER_SLOT/2))))}}return!0}}Loader.chunkSize=CHUNK_SIZE;const BPF_LOADER_PROGRAM_ID=new PublicKey("BPFLoader2111111111111111111111111111111111");class BpfLoader{static getMinNumSignatures(e){return Loader.getMinNumSignatures(e)}static load(e,t,r,n,i){return Loader.load(e,t,r,i,n)}}function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fastStableStringify$1,hasRequiredFastStableStringify;function requireFastStableStringify(){if(hasRequiredFastStableStringify)return fastStableStringify$1;hasRequiredFastStableStringify=1;var e=Object.prototype.toString,t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function r(n,i){var a,o,s,u,c,d,l;if(!0===n)return"true";if(!1===n)return"false";switch(typeof n){case"object":if(null===n)return null;if(n.toJSON&&"function"==typeof n.toJSON)return r(n.toJSON(),i);if("[object Array]"===(l=e.call(n))){for(s="[",o=n.length-1,a=0;a<o;a++)s+=r(n[a],!0)+",";return o>-1&&(s+=r(n[a],!0)),s+"]"}if("[object Object]"===l){for(o=(u=t(n).sort()).length,s="",a=0;a<o;)void 0!==(d=r(n[c=u[a]],!1))&&(s&&(s+=","),s+=JSON.stringify(c)+":"+d),a++;return"{"+s+"}"}return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return fastStableStringify$1=function(e){var t=r(e,!1);if(void 0!==t)return""+t}}var fastStableStringifyExports=requireFastStableStringify(),fastStableStringify=getDefaultExportFromCjs$1(fastStableStringifyExports);const MINIMUM_SLOT_PER_EPOCH=32;function trailingZeros(e){let t=0;for(;e>1;)e/=2,t++;return t}function nextPowerOfTwo(e){return 0===e?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,(e|=e>>32)+1)}class EpochSchedule{constructor(e,t,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=trailingZeros(nextPowerOfTwo(e+MINIMUM_SLOT_PER_EPOCH+1))-trailingZeros(MINIMUM_SLOT_PER_EPOCH)-1;return[t,e-(this.getSlotsInEpoch(t)-MINIMUM_SLOT_PER_EPOCH)]}{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch);return[this.firstNormalEpoch+r,t%this.slotsPerEpoch]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*MINIMUM_SLOT_PER_EPOCH:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+trailingZeros(MINIMUM_SLOT_PER_EPOCH)):this.slotsPerEpoch}}var fetchImpl=globalThis.fetch;class RpcWebSocketClient extends CommonClient{constructor(e,t,r){super((e=>{const r=WebSocket$2(e,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return this.underlyingSocket="socket"in r?r.socket:r,r}),e,t,r),this.underlyingSocket=void 0}call(){var e;const t=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState;return 1===t?super.call(...arguments):Promise.reject(new Error("Tried to call a JSON-RPC method `"+(arguments.length<=0?void 0:arguments[0])+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(){var e;const t=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState;return 1===t?super.notify(...arguments):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+(arguments.length<=0?void 0:arguments[0])+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function decodeData(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw new Error("invalid instruction; "+e)}if(r.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}const LOOKUP_TABLE_META_SIZE=56;class AddressLookupTableAccount{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=decodeData(LookupTableMetaLayout,e),r=e.length-LOOKUP_TABLE_META_SIZE;assert$2(r>=0,"lookup table is invalid"),assert$2(r%32==0,"lookup table is invalid");const n=r/32,{addresses:i}=struct$1([seq(publicKey$4(),n,"addresses")]).decode(e.slice(LOOKUP_TABLE_META_SIZE));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new PublicKey(t.authority[0]):void 0,addresses:i.map((e=>new PublicKey(e)))}}}const LookupTableMetaLayout={index:1,layout:struct$1([u32$2("typeIndex"),u64$3("deactivationSlot"),nu64$1("lastExtendedSlot"),u8$1("lastExtendedStartIndex"),u8$1(),seq(publicKey$4(),offset$1(u8$1(),-1),"authority")])},URL_RE=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function makeWebsocketUrl(e){const t=e.match(URL_RE);if(null==t)throw TypeError(`Failed to validate endpoint URL \`${e}\``);const[r,n,i,a]=t,o=e.startsWith("https:")?"wss:":"ws:",s=null==i?null:parseInt(i.slice(1),10);return`${o}//${n}${null==s?"":`:${s+1}`}${a}`}const PublicKeyFromString=coerce$2(instance(PublicKey),string$1(),(e=>new PublicKey(e))),RawAccountDataResult=tuple([string$1(),literal$1("base64")]),BufferFromRawAccountData=coerce$2(instance(buffer.Buffer),RawAccountDataResult,(e=>buffer.Buffer.from(e[0],"base64"))),BLOCKHASH_CACHE_TIMEOUT_MS=3e4;function assertEndpointUrl(e){if(!1===/^https?:/.test(e))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}function extractCommitmentFromConfig(e){let t,r;if("string"==typeof e)t=e;else if(e){const{commitment:n,...i}=e;t=n,r=i}return{commitment:t,config:r}}function applyDefaultMemcmpEncodingToFilters(e){return e.map((e=>{var t;return"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:null!==(t=e.memcmp.encoding)&&void 0!==t?t:"base58"}}:e}))}function createRpcResult$1(e){return union$2([type$1({jsonrpc:literal$1("2.0"),id:string$1(),result:e}),type$1({jsonrpc:literal$1("2.0"),id:string$1(),error:type$1({code:unknown$1(),message:string$1(),data:optional$1(any$1())})})])}const UnknownRpcResult$1=createRpcResult$1(unknown$1());function jsonRpcResult$1(e){return coerce$2(createRpcResult$1(e),UnknownRpcResult$1,(t=>"error"in t?t:{...t,result:create$2(t.result,e)}))}function jsonRpcResultAndContext$1(e){return jsonRpcResult$1(type$1({context:type$1({slot:number$2()}),value:e}))}function notificationResultAndContext(e){return type$1({context:type$1({slot:number$2()}),value:e})}function versionedMessageFromResponse(e,t){return 0===e?new MessageV0({header:t.header,staticAccountKeys:t.accountKeys.map((e=>new PublicKey(e))),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:bs58$1.decode(e.data)}))),addressTableLookups:t.addressTableLookups}):new Message(t)}const GetInflationGovernorResult=type$1({foundation:number$2(),foundationTerm:number$2(),initial:number$2(),taper:number$2(),terminal:number$2()}),GetInflationRewardResult=jsonRpcResult$1(array$1(nullable$1(type$1({epoch:number$2(),effectiveSlot:number$2(),amount:number$2(),postBalance:number$2(),commission:optional$1(nullable$1(number$2()))})))),GetRecentPrioritizationFeesResult=array$1(type$1({slot:number$2(),prioritizationFee:number$2()})),GetInflationRateResult=type$1({total:number$2(),validator:number$2(),foundation:number$2(),epoch:number$2()}),GetEpochInfoResult=type$1({epoch:number$2(),slotIndex:number$2(),slotsInEpoch:number$2(),absoluteSlot:number$2(),blockHeight:optional$1(number$2()),transactionCount:optional$1(number$2())}),GetEpochScheduleResult=type$1({slotsPerEpoch:number$2(),leaderScheduleSlotOffset:number$2(),warmup:boolean$1(),firstNormalEpoch:number$2(),firstNormalSlot:number$2()}),GetLeaderScheduleResult=record(string$1(),array$1(number$2())),TransactionErrorResult=nullable$1(union$2([type$1({}),string$1()])),SignatureStatusResult=type$1({err:TransactionErrorResult}),SignatureReceivedResult=literal$1("receivedSignature"),VersionResult=type$1({"solana-core":string$1(),"feature-set":optional$1(number$2())}),ParsedInstructionStruct=type$1({program:string$1(),programId:PublicKeyFromString,parsed:unknown$1()}),PartiallyDecodedInstructionStruct=type$1({programId:PublicKeyFromString,accounts:array$1(PublicKeyFromString),data:string$1()}),SimulatedTransactionResponseStruct$1=jsonRpcResultAndContext$1(type$1({err:nullable$1(union$2([type$1({}),string$1()])),logs:nullable$1(array$1(string$1())),accounts:optional$1(nullable$1(array$1(nullable$1(type$1({executable:boolean$1(),owner:string$1(),lamports:number$2(),data:array$1(string$1()),rentEpoch:optional$1(number$2())}))))),unitsConsumed:optional$1(number$2()),returnData:optional$1(nullable$1(type$1({programId:string$1(),data:tuple([string$1(),literal$1("base64")])}))),innerInstructions:optional$1(nullable$1(array$1(type$1({index:number$2(),instructions:array$1(union$2([ParsedInstructionStruct,PartiallyDecodedInstructionStruct]))}))))})),BlockProductionResponseStruct=jsonRpcResultAndContext$1(type$1({byIdentity:record(string$1(),array$1(number$2())),range:type$1({firstSlot:number$2(),lastSlot:number$2()})}));function createRpcClient(e,t,r,n,i,a){const o=r||fetchImpl;let s;null!=a&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(s=async(e,t)=>{const r=await new Promise(((r,i)=>{try{n(e,t,((e,t)=>r([e,t])))}catch(e){i(e)}}));return await o(...r)});const u=new browser$5((async(r,n)=>{const a={method:"POST",body:r,agent:undefined,headers:Object.assign({"Content-Type":"application/json"},t||{},COMMON_HTTP_HEADERS)};try{let t,r=5,u=500;for(;(t=s?await s(e,a):await o(e,a),429===t.status)&&!0!==i&&(r-=1,0!==r);)console.error(`Server responded with ${t.status} ${t.statusText}.  Retrying after ${u}ms delay...`),await sleep(u),u*=2;const c=await t.text();t.ok?n(null,c):n(new Error(`${t.status} ${t.statusText}: ${c}`))}catch(e){e instanceof Error&&n(e)}}),{});return u}function createRpcRequest(e){return(t,r)=>new Promise(((n,i)=>{e.request(t,r,((e,t)=>{e?i(e):n(t)}))}))}function createRpcBatchRequest(e){return t=>new Promise(((r,n)=>{0===t.length&&r([]);const i=t.map((t=>e.request(t.methodName,t.args)));e.request(i,((e,t)=>{e?n(e):r(t)}))}))}const GetInflationGovernorRpcResult=jsonRpcResult$1(GetInflationGovernorResult),GetInflationRateRpcResult=jsonRpcResult$1(GetInflationRateResult),GetRecentPrioritizationFeesRpcResult=jsonRpcResult$1(GetRecentPrioritizationFeesResult),GetEpochInfoRpcResult=jsonRpcResult$1(GetEpochInfoResult),GetEpochScheduleRpcResult=jsonRpcResult$1(GetEpochScheduleResult),GetLeaderScheduleRpcResult=jsonRpcResult$1(GetLeaderScheduleResult),SlotRpcResult=jsonRpcResult$1(number$2()),GetSupplyRpcResult=jsonRpcResultAndContext$1(type$1({total:number$2(),circulating:number$2(),nonCirculating:number$2(),nonCirculatingAccounts:array$1(PublicKeyFromString)})),TokenAmountResult=type$1({amount:string$1(),uiAmount:nullable$1(number$2()),decimals:number$2(),uiAmountString:optional$1(string$1())}),GetTokenLargestAccountsResult=jsonRpcResultAndContext$1(array$1(type$1({address:PublicKeyFromString,amount:string$1(),uiAmount:nullable$1(number$2()),decimals:number$2(),uiAmountString:optional$1(string$1())}))),GetTokenAccountsByOwner=jsonRpcResultAndContext$1(array$1(type$1({pubkey:PublicKeyFromString,account:type$1({executable:boolean$1(),owner:PublicKeyFromString,lamports:number$2(),data:BufferFromRawAccountData,rentEpoch:number$2()})}))),ParsedAccountDataResult=type$1({program:string$1(),parsed:unknown$1(),space:number$2()}),GetParsedTokenAccountsByOwner=jsonRpcResultAndContext$1(array$1(type$1({pubkey:PublicKeyFromString,account:type$1({executable:boolean$1(),owner:PublicKeyFromString,lamports:number$2(),data:ParsedAccountDataResult,rentEpoch:number$2()})}))),GetLargestAccountsRpcResult=jsonRpcResultAndContext$1(array$1(type$1({lamports:number$2(),address:PublicKeyFromString}))),AccountInfoResult=type$1({executable:boolean$1(),owner:PublicKeyFromString,lamports:number$2(),data:BufferFromRawAccountData,rentEpoch:number$2()}),KeyedAccountInfoResult=type$1({pubkey:PublicKeyFromString,account:AccountInfoResult}),ParsedOrRawAccountData=coerce$2(union$2([instance(buffer.Buffer),ParsedAccountDataResult]),union$2([RawAccountDataResult,ParsedAccountDataResult]),(e=>Array.isArray(e)?create$2(e,BufferFromRawAccountData):e)),ParsedAccountInfoResult=type$1({executable:boolean$1(),owner:PublicKeyFromString,lamports:number$2(),data:ParsedOrRawAccountData,rentEpoch:number$2()}),KeyedParsedAccountInfoResult=type$1({pubkey:PublicKeyFromString,account:ParsedAccountInfoResult}),StakeActivationResult=type$1({state:union$2([literal$1("active"),literal$1("inactive"),literal$1("activating"),literal$1("deactivating")]),active:number$2(),inactive:number$2()}),GetConfirmedSignaturesForAddress2RpcResult=jsonRpcResult$1(array$1(type$1({signature:string$1(),slot:number$2(),err:TransactionErrorResult,memo:nullable$1(string$1()),blockTime:optional$1(nullable$1(number$2()))}))),GetSignaturesForAddressRpcResult=jsonRpcResult$1(array$1(type$1({signature:string$1(),slot:number$2(),err:TransactionErrorResult,memo:nullable$1(string$1()),blockTime:optional$1(nullable$1(number$2()))}))),AccountNotificationResult=type$1({subscription:number$2(),result:notificationResultAndContext(AccountInfoResult)}),ProgramAccountInfoResult=type$1({pubkey:PublicKeyFromString,account:AccountInfoResult}),ProgramAccountNotificationResult=type$1({subscription:number$2(),result:notificationResultAndContext(ProgramAccountInfoResult)}),SlotInfoResult=type$1({parent:number$2(),slot:number$2(),root:number$2()}),SlotNotificationResult=type$1({subscription:number$2(),result:SlotInfoResult}),SlotUpdateResult=union$2([type$1({type:union$2([literal$1("firstShredReceived"),literal$1("completed"),literal$1("optimisticConfirmation"),literal$1("root")]),slot:number$2(),timestamp:number$2()}),type$1({type:literal$1("createdBank"),parent:number$2(),slot:number$2(),timestamp:number$2()}),type$1({type:literal$1("frozen"),slot:number$2(),timestamp:number$2(),stats:type$1({numTransactionEntries:number$2(),numSuccessfulTransactions:number$2(),numFailedTransactions:number$2(),maxTransactionsPerEntry:number$2()})}),type$1({type:literal$1("dead"),slot:number$2(),timestamp:number$2(),err:string$1()})]),SlotUpdateNotificationResult=type$1({subscription:number$2(),result:SlotUpdateResult}),SignatureNotificationResult=type$1({subscription:number$2(),result:notificationResultAndContext(union$2([SignatureStatusResult,SignatureReceivedResult]))}),RootNotificationResult=type$1({subscription:number$2(),result:number$2()}),ContactInfoResult=type$1({pubkey:string$1(),gossip:nullable$1(string$1()),tpu:nullable$1(string$1()),rpc:nullable$1(string$1()),version:nullable$1(string$1())}),VoteAccountInfoResult=type$1({votePubkey:string$1(),nodePubkey:string$1(),activatedStake:number$2(),epochVoteAccount:boolean$1(),epochCredits:array$1(tuple([number$2(),number$2(),number$2()])),commission:number$2(),lastVote:number$2(),rootSlot:nullable$1(number$2())}),GetVoteAccounts=jsonRpcResult$1(type$1({current:array$1(VoteAccountInfoResult),delinquent:array$1(VoteAccountInfoResult)})),ConfirmationStatus=union$2([literal$1("processed"),literal$1("confirmed"),literal$1("finalized")]),SignatureStatusResponse=type$1({slot:number$2(),confirmations:nullable$1(number$2()),err:TransactionErrorResult,confirmationStatus:optional$1(ConfirmationStatus)}),GetSignatureStatusesRpcResult=jsonRpcResultAndContext$1(array$1(nullable$1(SignatureStatusResponse))),GetMinimumBalanceForRentExemptionRpcResult=jsonRpcResult$1(number$2()),AddressTableLookupStruct=type$1({accountKey:PublicKeyFromString,writableIndexes:array$1(number$2()),readonlyIndexes:array$1(number$2())}),ConfirmedTransactionResult=type$1({signatures:array$1(string$1()),message:type$1({accountKeys:array$1(string$1()),header:type$1({numRequiredSignatures:number$2(),numReadonlySignedAccounts:number$2(),numReadonlyUnsignedAccounts:number$2()}),instructions:array$1(type$1({accounts:array$1(number$2()),data:string$1(),programIdIndex:number$2()})),recentBlockhash:string$1(),addressTableLookups:optional$1(array$1(AddressTableLookupStruct))})}),AnnotatedAccountKey=type$1({pubkey:PublicKeyFromString,signer:boolean$1(),writable:boolean$1(),source:optional$1(union$2([literal$1("transaction"),literal$1("lookupTable")]))}),ConfirmedTransactionAccountsModeResult=type$1({accountKeys:array$1(AnnotatedAccountKey),signatures:array$1(string$1())}),ParsedInstructionResult=type$1({parsed:unknown$1(),program:string$1(),programId:PublicKeyFromString}),RawInstructionResult=type$1({accounts:array$1(PublicKeyFromString),data:string$1(),programId:PublicKeyFromString}),InstructionResult=union$2([RawInstructionResult,ParsedInstructionResult]),UnknownInstructionResult=union$2([type$1({parsed:unknown$1(),program:string$1(),programId:string$1()}),type$1({accounts:array$1(string$1()),data:string$1(),programId:string$1()})]),ParsedOrRawInstruction=coerce$2(InstructionResult,UnknownInstructionResult,(e=>create$2(e,"accounts"in e?RawInstructionResult:ParsedInstructionResult))),ParsedConfirmedTransactionResult=type$1({signatures:array$1(string$1()),message:type$1({accountKeys:array$1(AnnotatedAccountKey),instructions:array$1(ParsedOrRawInstruction),recentBlockhash:string$1(),addressTableLookups:optional$1(nullable$1(array$1(AddressTableLookupStruct)))})}),TokenBalanceResult=type$1({accountIndex:number$2(),mint:string$1(),owner:optional$1(string$1()),programId:optional$1(string$1()),uiTokenAmount:TokenAmountResult}),LoadedAddressesResult=type$1({writable:array$1(PublicKeyFromString),readonly:array$1(PublicKeyFromString)}),ConfirmedTransactionMetaResult=type$1({err:TransactionErrorResult,fee:number$2(),innerInstructions:optional$1(nullable$1(array$1(type$1({index:number$2(),instructions:array$1(type$1({accounts:array$1(number$2()),data:string$1(),programIdIndex:number$2()}))})))),preBalances:array$1(number$2()),postBalances:array$1(number$2()),logMessages:optional$1(nullable$1(array$1(string$1()))),preTokenBalances:optional$1(nullable$1(array$1(TokenBalanceResult))),postTokenBalances:optional$1(nullable$1(array$1(TokenBalanceResult))),loadedAddresses:optional$1(LoadedAddressesResult),computeUnitsConsumed:optional$1(number$2())}),ParsedConfirmedTransactionMetaResult=type$1({err:TransactionErrorResult,fee:number$2(),innerInstructions:optional$1(nullable$1(array$1(type$1({index:number$2(),instructions:array$1(ParsedOrRawInstruction)})))),preBalances:array$1(number$2()),postBalances:array$1(number$2()),logMessages:optional$1(nullable$1(array$1(string$1()))),preTokenBalances:optional$1(nullable$1(array$1(TokenBalanceResult))),postTokenBalances:optional$1(nullable$1(array$1(TokenBalanceResult))),loadedAddresses:optional$1(LoadedAddressesResult),computeUnitsConsumed:optional$1(number$2())}),TransactionVersionStruct=union$2([literal$1(0),literal$1("legacy")]),RewardsResult=type$1({pubkey:string$1(),lamports:number$2(),postBalance:nullable$1(number$2()),rewardType:nullable$1(string$1()),commission:optional$1(nullable$1(number$2()))}),GetBlockRpcResult=jsonRpcResult$1(nullable$1(type$1({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$2(),transactions:array$1(type$1({transaction:ConfirmedTransactionResult,meta:nullable$1(ConfirmedTransactionMetaResult),version:optional$1(TransactionVersionStruct)})),rewards:optional$1(array$1(RewardsResult)),blockTime:nullable$1(number$2()),blockHeight:nullable$1(number$2())}))),GetNoneModeBlockRpcResult=jsonRpcResult$1(nullable$1(type$1({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$2(),rewards:optional$1(array$1(RewardsResult)),blockTime:nullable$1(number$2()),blockHeight:nullable$1(number$2())}))),GetAccountsModeBlockRpcResult=jsonRpcResult$1(nullable$1(type$1({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$2(),transactions:array$1(type$1({transaction:ConfirmedTransactionAccountsModeResult,meta:nullable$1(ConfirmedTransactionMetaResult),version:optional$1(TransactionVersionStruct)})),rewards:optional$1(array$1(RewardsResult)),blockTime:nullable$1(number$2()),blockHeight:nullable$1(number$2())}))),GetParsedBlockRpcResult=jsonRpcResult$1(nullable$1(type$1({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$2(),transactions:array$1(type$1({transaction:ParsedConfirmedTransactionResult,meta:nullable$1(ParsedConfirmedTransactionMetaResult),version:optional$1(TransactionVersionStruct)})),rewards:optional$1(array$1(RewardsResult)),blockTime:nullable$1(number$2()),blockHeight:nullable$1(number$2())}))),GetParsedAccountsModeBlockRpcResult=jsonRpcResult$1(nullable$1(type$1({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$2(),transactions:array$1(type$1({transaction:ConfirmedTransactionAccountsModeResult,meta:nullable$1(ParsedConfirmedTransactionMetaResult),version:optional$1(TransactionVersionStruct)})),rewards:optional$1(array$1(RewardsResult)),blockTime:nullable$1(number$2()),blockHeight:nullable$1(number$2())}))),GetParsedNoneModeBlockRpcResult=jsonRpcResult$1(nullable$1(type$1({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$2(),rewards:optional$1(array$1(RewardsResult)),blockTime:nullable$1(number$2()),blockHeight:nullable$1(number$2())}))),GetConfirmedBlockRpcResult=jsonRpcResult$1(nullable$1(type$1({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$2(),transactions:array$1(type$1({transaction:ConfirmedTransactionResult,meta:nullable$1(ConfirmedTransactionMetaResult)})),rewards:optional$1(array$1(RewardsResult)),blockTime:nullable$1(number$2())}))),GetBlockSignaturesRpcResult=jsonRpcResult$1(nullable$1(type$1({blockhash:string$1(),previousBlockhash:string$1(),parentSlot:number$2(),signatures:array$1(string$1()),blockTime:nullable$1(number$2())}))),GetTransactionRpcResult=jsonRpcResult$1(nullable$1(type$1({slot:number$2(),meta:nullable$1(ConfirmedTransactionMetaResult),blockTime:optional$1(nullable$1(number$2())),transaction:ConfirmedTransactionResult,version:optional$1(TransactionVersionStruct)}))),GetParsedTransactionRpcResult=jsonRpcResult$1(nullable$1(type$1({slot:number$2(),transaction:ParsedConfirmedTransactionResult,meta:nullable$1(ParsedConfirmedTransactionMetaResult),blockTime:optional$1(nullable$1(number$2())),version:optional$1(TransactionVersionStruct)}))),GetLatestBlockhashRpcResult=jsonRpcResultAndContext$1(type$1({blockhash:string$1(),lastValidBlockHeight:number$2()})),IsBlockhashValidRpcResult=jsonRpcResultAndContext$1(boolean$1()),PerfSampleResult=type$1({slot:number$2(),numTransactions:number$2(),numSlots:number$2(),samplePeriodSecs:number$2()}),GetRecentPerformanceSamplesRpcResult=jsonRpcResult$1(array$1(PerfSampleResult)),GetFeeCalculatorRpcResult=jsonRpcResultAndContext$1(nullable$1(type$1({feeCalculator:type$1({lamportsPerSignature:number$2()})}))),RequestAirdropRpcResult=jsonRpcResult$1(string$1()),SendTransactionRpcResult=jsonRpcResult$1(string$1()),LogsResult=type$1({err:TransactionErrorResult,logs:array$1(string$1()),signature:string$1()}),LogsNotificationResult=type$1({result:notificationResultAndContext(LogsResult),subscription:number$2()}),COMMON_HTTP_HEADERS={"solana-client":"js/1.0.0-maintenance"};class Connection{constructor(e,t){let r,n,i,a,o,s;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const e={};return async t=>{var r;const{commitment:n,config:i}=extractCommitmentFromConfig(t),a=this._buildArgs([],n,void 0,i),o=fastStableStringify(a);return e[o]=null!==(r=e[o])&&void 0!==r?r:(async()=>{try{const e=create$2(await this._rpcRequest("getBlockHeight",a),jsonRpcResult$1(number$2()));if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get block height information");return e.result}finally{delete e[o]}})(),await e[o]}})(),t&&"string"==typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,n=t.httpHeaders,i=t.fetch,a=t.fetchMiddleware,o=t.disableRetryOnRateLimit,s=t.httpAgent),this._rpcEndpoint=assertEndpointUrl(e),this._rpcWsEndpoint=r||makeWebsocketUrl(e),this._rpcClient=createRpcClient(e,n,i,a,o,s),this._rpcRequest=createRpcRequest(this._rpcClient),this._rpcBatchRequest=createRpcBatchRequest(this._rpcClient),this._rpcWebSocket=new RpcWebSocketClient(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:n}=extractCommitmentFromConfig(t),i=this._buildArgs([e.toBase58()],r,void 0,n),a=create$2(await this._rpcRequest("getBalance",i),jsonRpcResultAndContext$1(number$2()));if("error"in a)throw new SolanaJSONRPCError(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+t)}))}async getBlockTime(e){const t=create$2(await this._rpcRequest("getBlockTime",[e]),jsonRpcResult$1(nullable$1(number$2())));if("error"in t)throw new SolanaJSONRPCError(t.error,`failed to get block time for slot ${e}`);return t.result}async getMinimumLedgerSlot(){const e=create$2(await this._rpcRequest("minimumLedgerSlot",[]),jsonRpcResult$1(number$2()));if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const e=create$2(await this._rpcRequest("getFirstAvailableBlock",[]),SlotRpcResult);if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get first available block");return e.result}async getSupply(e){let t={};t="string"==typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};const r=create$2(await this._rpcRequest("getSupply",[t]),GetSupplyRpcResult);if("error"in r)throw new SolanaJSONRPCError(r.error,"failed to get supply");return r.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),n=create$2(await this._rpcRequest("getTokenSupply",r),jsonRpcResultAndContext$1(TokenAmountResult));if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get token supply");return n.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),n=create$2(await this._rpcRequest("getTokenAccountBalance",r),jsonRpcResultAndContext$1(TokenAmountResult));if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get token account balance");return n.result}async getTokenAccountsByOwner(e,t,r){const{commitment:n,config:i}=extractCommitmentFromConfig(r);let a=[e.toBase58()];"mint"in t?a.push({mint:t.mint.toBase58()}):a.push({programId:t.programId.toBase58()});const o=this._buildArgs(a,n,"base64",i),s=create$2(await this._rpcRequest("getTokenAccountsByOwner",o),GetTokenAccountsByOwner);if("error"in s)throw new SolanaJSONRPCError(s.error,`failed to get token accounts owned by account ${e.toBase58()}`);return s.result}async getParsedTokenAccountsByOwner(e,t,r){let n=[e.toBase58()];"mint"in t?n.push({mint:t.mint.toBase58()}):n.push({programId:t.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),a=create$2(await this._rpcRequest("getTokenAccountsByOwner",i),GetParsedTokenAccountsByOwner);if("error"in a)throw new SolanaJSONRPCError(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],n=create$2(await this._rpcRequest("getLargestAccounts",r),GetLargestAccountsRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get largest accounts");return n.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),n=create$2(await this._rpcRequest("getTokenLargestAccounts",r),GetTokenLargestAccountsResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get token largest accounts");return n.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:n}=extractCommitmentFromConfig(t),i=this._buildArgs([e.toBase58()],r,"base64",n),a=create$2(await this._rpcRequest("getAccountInfo",i),jsonRpcResultAndContext$1(nullable$1(AccountInfoResult)));if("error"in a)throw new SolanaJSONRPCError(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:r,config:n}=extractCommitmentFromConfig(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),a=create$2(await this._rpcRequest("getAccountInfo",i),jsonRpcResultAndContext$1(nullable$1(ParsedAccountInfoResult)));if("error"in a)throw new SolanaJSONRPCError(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(t){throw new Error("failed to get info about account "+e.toBase58()+": "+t)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:n}=extractCommitmentFromConfig(t),i=e.map((e=>e.toBase58())),a=this._buildArgs([i],r,"jsonParsed",n),o=create$2(await this._rpcRequest("getMultipleAccounts",a),jsonRpcResultAndContext$1(array$1(nullable$1(ParsedAccountInfoResult))));if("error"in o)throw new SolanaJSONRPCError(o.error,`failed to get info for accounts ${i}`);return o.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:n}=extractCommitmentFromConfig(t),i=e.map((e=>e.toBase58())),a=this._buildArgs([i],r,"base64",n),o=create$2(await this._rpcRequest("getMultipleAccounts",a),jsonRpcResultAndContext$1(array$1(nullable$1(AccountInfoResult))));if("error"in o)throw new SolanaJSONRPCError(o.error,`failed to get info for accounts ${i}`);return o.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:n,config:i}=extractCommitmentFromConfig(t),a=this._buildArgs([e.toBase58()],n,void 0,{...i,epoch:null!=r?r:null==i?void 0:i.epoch}),o=create$2(await this._rpcRequest("getStakeActivation",a),jsonRpcResult$1(StakeActivationResult));if("error"in o)throw new SolanaJSONRPCError(o.error,`failed to get Stake Activation ${e.toBase58()}`);return o.result}async getProgramAccounts(e,t){const{commitment:r,config:n}=extractCommitmentFromConfig(t),{encoding:i,...a}=n||{},o=this._buildArgs([e.toBase58()],r,i||"base64",{...a,...a.filters?{filters:applyDefaultMemcmpEncodingToFilters(a.filters)}:null}),s=await this._rpcRequest("getProgramAccounts",o),u=array$1(KeyedAccountInfoResult),c=!0===a.withContext?create$2(s,jsonRpcResultAndContext$1(u)):create$2(s,jsonRpcResult$1(u));if("error"in c)throw new SolanaJSONRPCError(c.error,`failed to get accounts owned by program ${e.toBase58()}`);return c.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:n}=extractCommitmentFromConfig(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),a=create$2(await this._rpcRequest("getProgramAccounts",i),jsonRpcResult$1(array$1(KeyedParsedAccountInfoResult)));if("error"in a)throw new SolanaJSONRPCError(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){let r,n;if("string"==typeof e)r=e;else{var i;const t=e;if(null!==(i=t.abortSignal)&&void 0!==i&&i.aborted)return Promise.reject(t.abortSignal.reason);r=t.signature}try{n=bs58$1.decode(r)}catch(e){throw new Error("signature must be base58 encoded: "+r)}return assert$2(64===n.length,"signature has invalid length"),"string"==typeof e?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise(((t,r)=>{null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",(()=>{r(e.reason)})))}))}getTransactionConfirmationPromise(e){let t,r,{commitment:n,signature:i}=e,a=!1;const o=new Promise(((e,o)=>{try{t=this.onSignature(i,((r,n)=>{t=void 0;const i={context:n,value:r};e({__type:TransactionStatus.PROCESSED,response:i})}),n);const s=new Promise((e=>{null==t?e():r=this._onSubscriptionStateChange(t,(t=>{"subscribed"===t&&e()}))}));(async()=>{if(await s,a)return;const t=await this.getSignatureStatus(i);if(a)return;if(null==t)return;const{context:r,value:u}=t;if(null!=u)if(null!=u&&u.err)o(u.err);else{switch(n){case"confirmed":case"single":case"singleGossip":if("processed"===u.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===u.confirmationStatus||"confirmed"===u.confirmationStatus)return}a=!0,e({__type:TransactionStatus.PROCESSED,response:{context:r,value:u}})}})()}catch(e){o(e)}}));return{abortConfirmation:()=>{r&&(r(),r=void 0),null!=t&&(this.removeSignatureListener(t),t=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy(e){let{commitment:t,strategy:{abortSignal:r,lastValidBlockHeight:n,signature:i}}=e,a=!1;const o=new Promise((e=>{const r=async()=>{try{return await this.getBlockHeight(t)}catch(e){return-1}};(async()=>{let t=await r();if(!a){for(;t<=n;){if(await sleep(1e3),a)return;if(t=await r(),a)return}e({__type:TransactionStatus.BLOCKHEIGHT_EXCEEDED})}})()})),{abortConfirmation:s,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:i}),c=this.getCancellationPromise(r);let d;try{const e=await Promise.race([c,u,o]);if(e.__type!==TransactionStatus.PROCESSED)throw new TransactionExpiredBlockheightExceededError(i);d=e.response}finally{a=!0,s()}return d}async confirmTransactionUsingDurableNonceStrategy(e){let{commitment:t,strategy:{abortSignal:r,minContextSlot:n,nonceAccountPubkey:i,nonceValue:a,signature:o}}=e,s=!1;const u=new Promise((e=>{let r=a,o=null;const u=async()=>{try{const{context:e,value:r}=await this.getNonceAndContext(i,{commitment:t,minContextSlot:n});return o=e.slot,null==r?void 0:r.nonce}catch(e){return r}};(async()=>{if(r=await u(),!s)for(;;){if(a!==r)return void e({__type:TransactionStatus.NONCE_INVALID,slotInWhichNonceDidAdvance:o});if(await sleep(2e3),s)return;if(r=await u(),s)return}})()})),{abortConfirmation:c,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),l=this.getCancellationPromise(r);let p;try{const e=await Promise.race([l,d,u]);if(e.__type===TransactionStatus.PROCESSED)p=e.response;else{var h;let r;for(;;){var f;const t=await this.getSignatureStatus(o);if(null==t)break;if(!(t.context.slot<(null!==(f=e.slotInWhichNonceDidAdvance)&&void 0!==f?f:n))){r=t;break}await sleep(400)}if(null===(h=r)||void 0===h||!h.value)throw new TransactionExpiredNonceInvalidError(o);{const e=t||"finalized",{confirmationStatus:n}=r.value;switch(e){case"processed":case"recent":if("processed"!==n&&"confirmed"!==n&&"finalized"!==n)throw new TransactionExpiredNonceInvalidError(o);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==n&&"finalized"!==n)throw new TransactionExpiredNonceInvalidError(o);break;case"finalized":case"max":case"root":if("finalized"!==n)throw new TransactionExpiredNonceInvalidError(o)}p={context:r.context,value:{err:r.value.err}}}}}finally{s=!0,c()}return p}async confirmTransactionUsingLegacyTimeoutStrategy(e){let t,{commitment:r,signature:n}=e;const i=new Promise((e=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(r){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4}t=setTimeout((()=>e({__type:TransactionStatus.TIMED_OUT,timeoutMs:n})),n)})),{abortConfirmation:a,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:r,signature:n});let s;try{const e=await Promise.race([o,i]);if(e.__type!==TransactionStatus.PROCESSED)throw new TransactionExpiredTimeoutError(n,e.timeoutMs/1e3);s=e.response}finally{clearTimeout(t),a()}return s}async getClusterNodes(){const e=create$2(await this._rpcRequest("getClusterNodes",[]),jsonRpcResult$1(array$1(ContactInfoResult)));if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=create$2(await this._rpcRequest("getVoteAccounts",t),GetVoteAccounts);if("error"in r)throw new SolanaJSONRPCError(r.error,"failed to get vote accounts");return r.result}async getSlot(e){const{commitment:t,config:r}=extractCommitmentFromConfig(e),n=this._buildArgs([],t,void 0,r),i=create$2(await this._rpcRequest("getSlot",n),jsonRpcResult$1(number$2()));if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get slot");return i.result}async getSlotLeader(e){const{commitment:t,config:r}=extractCommitmentFromConfig(e),n=this._buildArgs([],t,void 0,r),i=create$2(await this._rpcRequest("getSlotLeader",n),jsonRpcResult$1(string$1()));if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get slot leader");return i.result}async getSlotLeaders(e,t){const r=[e,t],n=create$2(await this._rpcRequest("getSlotLeaders",r),jsonRpcResult$1(array$1(PublicKeyFromString)));if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get slot leaders");return n.result}async getSignatureStatus(e,t){const{context:r,value:n}=await this.getSignatureStatuses([e],t);assert$2(1===n.length);return{context:r,value:n[0]}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const n=create$2(await this._rpcRequest("getSignatureStatuses",r),GetSignatureStatusesRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get signature status");return n.result}async getTransactionCount(e){const{commitment:t,config:r}=extractCommitmentFromConfig(e),n=this._buildArgs([],t,void 0,r),i=create$2(await this._rpcRequest("getTransactionCount",n),jsonRpcResult$1(number$2()));if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get transaction count");return i.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=create$2(await this._rpcRequest("getInflationGovernor",t),GetInflationGovernorRpcResult);if("error"in r)throw new SolanaJSONRPCError(r.error,"failed to get inflation");return r.result}async getInflationReward(e,t,r){const{commitment:n,config:i}=extractCommitmentFromConfig(r),a=this._buildArgs([e.map((e=>e.toBase58()))],n,void 0,{...i,epoch:null!=t?t:null==i?void 0:i.epoch}),o=create$2(await this._rpcRequest("getInflationReward",a),GetInflationRewardResult);if("error"in o)throw new SolanaJSONRPCError(o.error,"failed to get inflation reward");return o.result}async getInflationRate(){const e=create$2(await this._rpcRequest("getInflationRate",[]),GetInflationRateRpcResult);if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(e){const{commitment:t,config:r}=extractCommitmentFromConfig(e),n=this._buildArgs([],t,void 0,r),i=create$2(await this._rpcRequest("getEpochInfo",n),GetEpochInfoRpcResult);if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get epoch info");return i.result}async getEpochSchedule(){const e=create$2(await this._rpcRequest("getEpochSchedule",[]),GetEpochScheduleRpcResult);if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get epoch schedule");const t=e.result;return new EpochSchedule(t.slotsPerEpoch,t.leaderScheduleSlotOffset,t.warmup,t.firstNormalEpoch,t.firstNormalSlot)}async getLeaderSchedule(){const e=create$2(await this._rpcRequest("getLeaderSchedule",[]),GetLeaderScheduleRpcResult);if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),n=create$2(await this._rpcRequest("getMinimumBalanceForRentExemption",r),GetMinimumBalanceForRentExemptionRpcResult);return"error"in n?(console.warn("Unable to fetch minimum balance for rent exemption"),0):n.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}}async getRecentPerformanceSamples(e){const t=create$2(await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),GetRecentPerformanceSamplesRpcResult);if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get recent performance samples");return t.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),n=create$2(await this._rpcRequest("getFeeCalculatorForBlockhash",r),GetFeeCalculatorRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get fee calculator");const{context:i,value:a}=n.result;return{context:i,value:null!==a?a.feeCalculator:null}}async getFeeForMessage(e,t){const r=toBuffer(e.serialize()).toString("base64"),n=this._buildArgs([r],t),i=create$2(await this._rpcRequest("getFeeForMessage",n),jsonRpcResultAndContext$1(nullable$1(number$2())));if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get fee for message");if(null===i.result)throw new Error("invalid blockhash");return i.result}async getRecentPrioritizationFees(e){var t;const r=null==e||null===(t=e.lockedWritableAccounts)||void 0===t?void 0:t.map((e=>e.toBase58())),n=null!=r&&r.length?[r]:[],i=create$2(await this._rpcRequest("getRecentPrioritizationFees",n),GetRecentPrioritizationFeesRpcResult);if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=extractCommitmentFromConfig(e),n=this._buildArgs([],t,void 0,r),i=create$2(await this._rpcRequest("getLatestBlockhash",n),GetLatestBlockhashRpcResult);if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get latest blockhash");return i.result}async isBlockhashValid(e,t){const{commitment:r,config:n}=extractCommitmentFromConfig(t),i=this._buildArgs([e],r,void 0,n),a=create$2(await this._rpcRequest("isBlockhashValid",i),IsBlockhashValidRpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=create$2(await this._rpcRequest("getVersion",[]),jsonRpcResult$1(VersionResult));if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get version");return e.result}async getGenesisHash(){const e=create$2(await this._rpcRequest("getGenesisHash",[]),jsonRpcResult$1(string$1()));if("error"in e)throw new SolanaJSONRPCError(e.error,"failed to get genesis hash");return e.result}async getBlock(e,t){const{commitment:r,config:n}=extractCommitmentFromConfig(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),a=await this._rpcRequest("getBlock",i);try{switch(null==n?void 0:n.transactionDetails){case"accounts":{const e=create$2(a,GetAccountsModeBlockRpcResult);if("error"in e)throw e.error;return e.result}case"none":{const e=create$2(a,GetNoneModeBlockRpcResult);if("error"in e)throw e.error;return e.result}default:{const e=create$2(a,GetBlockRpcResult);if("error"in e)throw e.error;const{result:t}=e;return t?{...t,transactions:t.transactions.map((e=>{let{transaction:t,meta:r,version:n}=e;return{meta:r,transaction:{...t,message:versionedMessageFromResponse(n,t.message)},version:n}}))}:null}}}catch(e){throw new SolanaJSONRPCError(e,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:n}=extractCommitmentFromConfig(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),a=await this._rpcRequest("getBlock",i);try{switch(null==n?void 0:n.transactionDetails){case"accounts":{const e=create$2(a,GetParsedAccountsModeBlockRpcResult);if("error"in e)throw e.error;return e.result}case"none":{const e=create$2(a,GetParsedNoneModeBlockRpcResult);if("error"in e)throw e.error;return e.result}default:{const e=create$2(a,GetParsedBlockRpcResult);if("error"in e)throw e.error;return e.result}}}catch(e){throw new SolanaJSONRPCError(e,"failed to get block")}}async getBlockProduction(e){let t,r;if("string"==typeof e)r=e;else if(e){const{commitment:n,...i}=e;r=n,t=i}const n=this._buildArgs([],r,"base64",t),i=create$2(await this._rpcRequest("getBlockProduction",n),BlockProductionResponseStruct);if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get block production information");return i.result}async getTransaction(e,t){const{commitment:r,config:n}=extractCommitmentFromConfig(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),a=create$2(await this._rpcRequest("getTransaction",i),GetTransactionRpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get transaction");const o=a.result;return o?{...o,transaction:{...o.transaction,message:versionedMessageFromResponse(o.version,o.transaction.message)}}:o}async getParsedTransaction(e,t){const{commitment:r,config:n}=extractCommitmentFromConfig(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),a=create$2(await this._rpcRequest("getTransaction",i),GetParsedTransactionRpcResult);if("error"in a)throw new SolanaJSONRPCError(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:r,config:n}=extractCommitmentFromConfig(t),i=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n)})));return(await this._rpcBatchRequest(i)).map((e=>{const t=create$2(e,GetParsedTransactionRpcResult);if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get transactions");return t.result}))}async getTransactions(e,t){const{commitment:r,config:n}=extractCommitmentFromConfig(t),i=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,void 0,n)})));return(await this._rpcBatchRequest(i)).map((e=>{const t=create$2(e,GetTransactionRpcResult);if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get transactions");const r=t.result;return r?{...r,transaction:{...r.transaction,message:versionedMessageFromResponse(r.version,r.transaction.message)}}:r}))}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=create$2(await this._rpcRequest("getBlock",r),GetConfirmedBlockRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+e+" not found");const a={...i,transactions:i.transactions.map((e=>{let{transaction:t,meta:r}=e;const n=new Message(t.message);return{meta:r,transaction:{...t,message:n}}}))};return{...a,transactions:a.transactions.map((e=>{let{transaction:t,meta:r}=e;return{meta:r,transaction:Transaction.populate(t.message,t.signatures)}}))}}async getBlocks(e,t,r){const n=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),i=create$2(await this._rpcRequest("getBlocks",n),jsonRpcResult$1(array$1(number$2())));if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get blocks");return i.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=create$2(await this._rpcRequest("getBlock",r),GetBlockSignaturesRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get block");const i=n.result;if(!i)throw new Error("Block "+e+" not found");return i}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=create$2(await this._rpcRequest("getBlock",r),GetBlockSignaturesRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+e+" not found");return i}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=create$2(await this._rpcRequest("getTransaction",r),GetTransactionRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get transaction");const i=n.result;if(!i)return i;const a=new Message(i.transaction.message),o=i.transaction.signatures;return{...i,transaction:Transaction.populate(a,o)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),n=create$2(await this._rpcRequest("getTransaction",r),GetParsedTransactionRpcResult);if("error"in n)throw new SolanaJSONRPCError(n.error,"failed to get confirmed transaction");return n.result}async getParsedConfirmedTransactions(e,t){const r=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],t,"jsonParsed")})));return(await this._rpcBatchRequest(r)).map((e=>{const t=create$2(e,GetParsedTransactionRpcResult);if("error"in t)throw new SolanaJSONRPCError(t.error,"failed to get confirmed transactions");return t.result}))}async getConfirmedSignaturesForAddress(e,t,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&!(--t<=0||t<i);)try{const e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(n.until=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}let a=await this.getSlot("finalized");for(;!("before"in n||++r>a);)try{const e=await this.getConfirmedBlockSignatures(r);e.signatures.length>0&&(n.before=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}return(await this.getConfirmedSignaturesForAddress2(e,n)).map((e=>e.signature))}async getConfirmedSignaturesForAddress2(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=create$2(await this._rpcRequest("getConfirmedSignaturesForAddress2",n),GetConfirmedSignaturesForAddress2RpcResult);if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get confirmed signatures for address");return i.result}async getSignaturesForAddress(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=create$2(await this._rpcRequest("getSignaturesForAddress",n),GetSignaturesForAddressRpcResult);if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get signatures for address");return i.result}async getAddressLookupTable(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=new AddressLookupTableAccount({key:e,state:AddressLookupTableAccount.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=NonceAccount.fromAccountData(n.data)),{context:r,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+t)}))}async requestAirdrop(e,t){const r=create$2(await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),RequestAirdropRpcResult);if("error"in r)throw new SolanaJSONRPCError(r.error,`airdrop to ${e.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await sleep(100);const e=Date.now()-this._blockhashInfo.lastFetch>=BLOCKHASH_CACHE_TIMEOUT_MS;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let e=0;e<50;e++){const e=await this.getLatestBlockhash("finalized");if(r!==e.blockhash)return this._blockhashInfo={latestBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await sleep(MS_PER_SLOT/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=extractCommitmentFromConfig(e),n=this._buildArgs([],t,"base64",r),i=create$2(await this._rpcRequest("getStakeMinimumDelegation",n),jsonRpcResultAndContext$1(number$2()));if("error"in i)throw new SolanaJSONRPCError(i.error,"failed to get stake minimum delegation");return i.result}async simulateTransaction(e,t,r){if("message"in e){const n=e.serialize(),i=buffer.Buffer.from(n).toString("base64");if(Array.isArray(t)||void 0!==r)throw new Error("Invalid arguments");const a=t||{};a.encoding="base64","commitment"in a||(a.commitment=this.commitment),t&&"object"==typeof t&&"innerInstructions"in t&&(a.innerInstructions=t.innerInstructions);const o=[i,a],s=create$2(await this._rpcRequest("simulateTransaction",o),SimulatedTransactionResponseStruct$1);if("error"in s)throw new Error("failed to simulate transaction: "+s.error.message);return s.result}let n;if(e instanceof Transaction){let t=e;n=new Transaction,n.feePayer=t.feePayer,n.instructions=e.instructions,n.nonceInfo=t.nonceInfo,n.signatures=t.signatures}else n=Transaction.populate(e),n._message=n._json=void 0;if(void 0!==t&&!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(n.nonceInfo&&i)n.sign(...i);else{let e=this._disableBlockhashCaching;for(;;){const t=await this._blockhashWithExpiryBlockHeight(e);if(n.lastValidBlockHeight=t.lastValidBlockHeight,n.recentBlockhash=t.blockhash,!i)break;if(n.sign(...i),!n.signature)throw new Error("!signature");const r=n.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}e=!0}}const a=n._compile(),o=a.serialize(),s=n._serialize(o).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const e=(Array.isArray(r)?r:a.nonProgramIds()).map((e=>e.toBase58()));u.accounts={encoding:"base64",addresses:e}}i&&(u.sigVerify=!0),t&&"object"==typeof t&&"innerInstructions"in t&&(u.innerInstructions=t.innerInstructions);const c=[s,u],d=create$2(await this._rpcRequest("simulateTransaction",c),SimulatedTransactionResponseStruct$1);if("error"in d){let e;if("data"in d.error&&(e=d.error.data.logs,e&&Array.isArray(e))){const t="\n    ",r=t+e.join(t);console.error(d.error.message,r)}throw new SendTransactionError({action:"simulate",signature:"",transactionMessage:d.error.message,logs:e})}return d.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const r=e.serialize();return await this.sendRawTransaction(r,t)}if(void 0===t||!Array.isArray(t))throw new Error("Invalid arguments");const n=t;if(e.nonceInfo)e.sign(...n);else{let t=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(t);if(e.lastValidBlockHeight=r.lastValidBlockHeight,e.recentBlockhash=r.blockhash,e.sign(...n),!e.signature)throw new Error("!signature");const i=e.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}t=!0}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,t){const r=toBuffer(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},n=t&&t.skipPreflight,i=!0===n?"processed":t&&t.preflightCommitment||this.commitment;t&&null!=t.maxRetries&&(r.maxRetries=t.maxRetries),t&&null!=t.minContextSlot&&(r.minContextSlot=t.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const a=[e,r],o=create$2(await this._rpcRequest("sendTransaction",a),SendTransactionRpcResult);if("error"in o){let e;throw"data"in o.error&&(e=o.error.data.logs),new SendTransactionError({action:n?"send":"simulate",signature:"",transactionMessage:o.error.message,logs:e})}return o.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()}),5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((e=>{let[t,r]=e;this._setSubscription(t,{...r,state:"pending"})}))):this._updateSubscriptions()}_setSubscription(e,t){var r;const n=null===(r=this._subscriptionsByHash[e])||void 0===r?void 0:r.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const r=this._subscriptionStateChangeCallbacksByHash[e];r&&r.forEach((e=>{try{e(t.state)}catch{}}))}}_onSubscriptionStateChange(e,t){var r;const n=this._subscriptionHashByClientSubscriptionId[e];if(null==n)return()=>{};const i=(r=this._subscriptionStateChangeCallbacksByHash)[n]||(r[n]=new Set);return i.add(t),()=>{i.delete(t),0===i.size&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log(`Error when closing socket connection: ${e.message}`)}}),500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map((async e=>{const r=this._subscriptionsByHash[e];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[e],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(e,{...r,state:"subscribing"});const t=await this._rpcWebSocket.call(i,n);this._setSubscription(e,{...r,serverSubscriptionId:t,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[t]=r.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${i}\``,{args:n,error:a}),!t())return;this._setSubscription(e,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(e,{...r,state:"unsubscribing"}),this._setSubscription(e,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(n){if(n instanceof Error&&console.error(`${i} error:`,n.message),!t())return;return this._setSubscription(e,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(e,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})()}})))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach((e=>{try{e(...t)}catch(e){console.error(e)}}))}_wsOnAccountNotification(e){const{result:t,subscription:r}=create$2(e,AccountNotificationResult);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,n=fastStableStringify([e.method,t]),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const t=this._subscriptionsByHash[n];assert$2(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:n,config:i}=extractCommitmentFromConfig(r),a=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=create$2(e,ProgramAccountNotificationResult);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,n){const{commitment:i,config:a}=extractCommitmentFromConfig(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",a||(n?{filters:applyDefaultMemcmpEncodingToFilters(n)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const n=this._buildArgs(["object"==typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=create$2(e,LogsNotificationResult);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=create$2(e,SlotNotificationResult);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=create$2(e,SlotUpdateNotificationResult);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,n){const i=t||this._commitment;if(i||r||n){let t={};r&&(t.encoding=r),i&&(t.commitment=i),n&&(t=Object.assign(t,n)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,r,n){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=create$2(e,SignatureNotificationResult);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const n=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(e,r)=>{if("status"===e.type){t(e.result,r);try{this.removeSignatureListener(i)}catch(e){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(e,t,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},a=this._buildArgs([e],n,void 0,i),o=this._makeSubscription({callback:(e,r)=>{t(e,r);try{this.removeSignatureListener(o)}catch(e){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return o}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=create$2(e,RootNotificationResult);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Keypair{constructor(e){this._keypair=void 0,this._keypair=null!=e?e:generateKeypair()}static generate(){return new Keypair(generateKeypair())}static fromSecretKey(e,t){if(64!==e.byteLength)throw new Error("bad secret key size");const r=e.slice(32,64);if(!t||!t.skipValidation){const t=e.slice(0,32),n=getPublicKey(t);for(let e=0;e<32;e++)if(r[e]!==n[e])throw new Error("provided secretKey is invalid")}return new Keypair({publicKey:r,secretKey:e})}static fromSeed(e){const t=getPublicKey(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new Keypair({publicKey:t,secretKey:r})}get publicKey(){return new PublicKey(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const LOOKUP_TABLE_INSTRUCTION_LAYOUTS=Object.freeze({CreateLookupTable:{index:0,layout:struct$1([u32$2("instruction"),u64$3("recentSlot"),u8$1("bumpSeed")])},FreezeLookupTable:{index:1,layout:struct$1([u32$2("instruction")])},ExtendLookupTable:{index:2,layout:struct$1([u32$2("instruction"),u64$3(),seq(publicKey$4(),offset$1(u32$2(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:struct$1([u32$2("instruction")])},CloseLookupTable:{index:4,layout:struct$1([u32$2("instruction")])}});class AddressLookupTableInstruction{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=u32$2("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(LOOKUP_TABLE_INSTRUCTION_LAYOUTS))if(n.index==t){r=e;break}if(!r)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return r}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=decodeData$1(LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=decodeData$1(LOOKUP_TABLE_INSTRUCTION_LAYOUTS.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map((e=>new PublicKey(e)))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(AddressLookupTableProgram.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class AddressLookupTableProgram{constructor(){}static createLookupTable(e){const[t,r]=PublicKey.findProgramAddressSync([e.authority.toBuffer(),toBufferLE_1(BigInt(e.recentSlot),8)],this.programId),n=encodeData(LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CreateLookupTable,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),i=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:SystemProgram.programId,isSigner:!1,isWritable:!1}];return[new TransactionInstruction({programId:this.programId,keys:i,data:n}),t]}static freezeLookupTable(e){const t=encodeData(LOOKUP_TABLE_INSTRUCTION_LAYOUTS.FreezeLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new TransactionInstruction({programId:this.programId,keys:r,data:t})}static extendLookupTable(e){const t=encodeData(LOOKUP_TABLE_INSTRUCTION_LAYOUTS.ExtendLookupTable,{addresses:e.addresses.map((e=>e.toBytes()))}),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&r.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:SystemProgram.programId,isSigner:!1,isWritable:!1}),new TransactionInstruction({programId:this.programId,keys:r,data:t})}static deactivateLookupTable(e){const t=encodeData(LOOKUP_TABLE_INSTRUCTION_LAYOUTS.DeactivateLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new TransactionInstruction({programId:this.programId,keys:r,data:t})}static closeLookupTable(e){const t=encodeData(LOOKUP_TABLE_INSTRUCTION_LAYOUTS.CloseLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new TransactionInstruction({programId:this.programId,keys:r,data:t})}}AddressLookupTableProgram.programId=new PublicKey("AddressLookupTab1e1111111111111111111111111");class ComputeBudgetInstruction{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=u8$1("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return r}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:r}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestUnits,e.data);return{units:t,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=decodeData$1(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(ComputeBudgetProgram.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=Object.freeze({RequestUnits:{index:0,layout:struct$1([u8$1("instruction"),u32$2("units"),u32$2("additionalFee")])},RequestHeapFrame:{index:1,layout:struct$1([u8$1("instruction"),u32$2("bytes")])},SetComputeUnitLimit:{index:2,layout:struct$1([u8$1("instruction"),u32$2("units")])},SetComputeUnitPrice:{index:3,layout:struct$1([u8$1("instruction"),u64$3("microLamports")])}});class ComputeBudgetProgram{constructor(){}static requestUnits(e){const t=encodeData(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestUnits,e);return new TransactionInstruction({keys:[],programId:this.programId,data:t})}static requestHeapFrame(e){const t=encodeData(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.RequestHeapFrame,e);return new TransactionInstruction({keys:[],programId:this.programId,data:t})}static setComputeUnitLimit(e){const t=encodeData(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitLimit,e);return new TransactionInstruction({keys:[],programId:this.programId,data:t})}static setComputeUnitPrice(e){const t=encodeData(COMPUTE_BUDGET_INSTRUCTION_LAYOUTS.SetComputeUnitPrice,{microLamports:BigInt(e.microLamports)});return new TransactionInstruction({keys:[],programId:this.programId,data:t})}}ComputeBudgetProgram.programId=new PublicKey("ComputeBudget111111111111111111111111111111");const PRIVATE_KEY_BYTES$1=64,PUBLIC_KEY_BYTES$1=32,SIGNATURE_BYTES=64,ED25519_INSTRUCTION_LAYOUT=struct$1([u8$1("numSignatures"),u8$1("padding"),u16("signatureOffset"),u16("signatureInstructionIndex"),u16("publicKeyOffset"),u16("publicKeyInstructionIndex"),u16("messageDataOffset"),u16("messageDataSize"),u16("messageInstructionIndex")]);class Ed25519Program{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,instructionIndex:i}=e;assert$2(t.length===PUBLIC_KEY_BYTES$1,`Public Key must be ${PUBLIC_KEY_BYTES$1} bytes but received ${t.length} bytes`),assert$2(n.length===SIGNATURE_BYTES,`Signature must be ${SIGNATURE_BYTES} bytes but received ${n.length} bytes`);const a=ED25519_INSTRUCTION_LAYOUT.span,o=a+t.length,s=o+n.length,u=buffer.Buffer.alloc(s+r.length),c=null==i?65535:i;return ED25519_INSTRUCTION_LAYOUT.encode({numSignatures:1,padding:0,signatureOffset:o,signatureInstructionIndex:c,publicKeyOffset:a,publicKeyInstructionIndex:c,messageDataOffset:s,messageDataSize:r.length,messageInstructionIndex:c},u),u.fill(t,a),u.fill(n,o),u.fill(r,s),new TransactionInstruction({keys:[],programId:Ed25519Program.programId,data:u})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;assert$2(t.length===PRIVATE_KEY_BYTES$1,`Private key must be ${PRIVATE_KEY_BYTES$1} bytes but received ${t.length} bytes`);try{const e=Keypair.fromSecretKey(t),i=e.publicKey.toBytes(),a=sign$3(r,e.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:a,instructionIndex:n})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}Ed25519Program.programId=new PublicKey("Ed25519SigVerify111111111111111111111111111");const ecdsaSign=(e,t)=>{const r=secp256k1.sign(e,t);return[r.toCompactRawBytes(),r.recovery]};secp256k1.utils.isValidPrivateKey;const publicKeyCreate=secp256k1.getPublicKey,PRIVATE_KEY_BYTES=32,ETHEREUM_ADDRESS_BYTES=20,PUBLIC_KEY_BYTES=64,SIGNATURE_OFFSETS_SERIALIZED_SIZE=11,SECP256K1_INSTRUCTION_LAYOUT=struct$1([u8$1("numSignatures"),u16("signatureOffset"),u8$1("signatureInstructionIndex"),u16("ethAddressOffset"),u8$1("ethAddressInstructionIndex"),u16("messageDataOffset"),u16("messageDataSize"),u8$1("messageInstructionIndex"),blob$1(20,"ethAddress"),blob$1(64,"signature"),u8$1("recoveryId")]);class Secp256k1Program{constructor(){}static publicKeyToEthAddress(e){assert$2(e.length===PUBLIC_KEY_BYTES,`Public key must be ${PUBLIC_KEY_BYTES} bytes but received ${e.length} bytes`);try{return buffer.Buffer.from(keccak_256$1(toBuffer(e))).slice(-ETHEREUM_ADDRESS_BYTES)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,recoveryId:i,instructionIndex:a}=e;return Secp256k1Program.createInstructionWithEthAddress({ethAddress:Secp256k1Program.publicKeyToEthAddress(t),message:r,signature:n,recoveryId:i,instructionIndex:a})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:r,signature:n,recoveryId:i,instructionIndex:a=0}=e;let o;o="string"==typeof t?t.startsWith("0x")?buffer.Buffer.from(t.substr(2),"hex"):buffer.Buffer.from(t,"hex"):t,assert$2(o.length===ETHEREUM_ADDRESS_BYTES,`Address must be ${ETHEREUM_ADDRESS_BYTES} bytes but received ${o.length} bytes`);const s=1+SIGNATURE_OFFSETS_SERIALIZED_SIZE,u=s,c=s+o.length,d=c+n.length+1,l=buffer.Buffer.alloc(SECP256K1_INSTRUCTION_LAYOUT.span+r.length);return SECP256K1_INSTRUCTION_LAYOUT.encode({numSignatures:1,signatureOffset:c,signatureInstructionIndex:a,ethAddressOffset:u,ethAddressInstructionIndex:a,messageDataOffset:d,messageDataSize:r.length,messageInstructionIndex:a,signature:toBuffer(n),ethAddress:toBuffer(o),recoveryId:i},l),l.fill(toBuffer(r),SECP256K1_INSTRUCTION_LAYOUT.span),new TransactionInstruction({keys:[],programId:Secp256k1Program.programId,data:l})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;assert$2(t.length===PRIVATE_KEY_BYTES,`Private key must be ${PRIVATE_KEY_BYTES} bytes but received ${t.length} bytes`);try{const e=toBuffer(t),i=publicKeyCreate(e,!1).slice(1),a=buffer.Buffer.from(keccak_256$1(toBuffer(r))),[o,s]=ecdsaSign(a,e);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:o,recoveryId:s,instructionIndex:n})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}var _Lockup;Secp256k1Program.programId=new PublicKey("KeccakSecp256k11111111111111111111111111111");const STAKE_CONFIG_ID=new PublicKey("StakeConfig11111111111111111111111111111111");class Authorized{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class Lockup{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}_Lockup=Lockup,Lockup.default=new _Lockup(0,0,PublicKey.default);class StakeInstruction{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=u32$2("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(STAKE_INSTRUCTION_LAYOUTS))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a StakeInstruction");return r}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:r}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Authorized(new PublicKey(t.staker),new PublicKey(t.withdrawer)),lockup:new Lockup(r.unixTimestamp,r.epoch,new PublicKey(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:r}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Authorize,e.data),n={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new PublicKey(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(n.custodianPubkey=e.keys[3].pubkey),n}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed,e.data),a={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:n,authorityOwner:new PublicKey(i),newAuthorizedPubkey:new PublicKey(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(a.custodianPubkey=e.keys[3].pubkey),a}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),decodeData$1(STAKE_INSTRUCTION_LAYOUTS.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(StakeProgram.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const STAKE_INSTRUCTION_LAYOUTS=Object.freeze({Initialize:{index:0,layout:struct$1([u32$2("instruction"),authorized(),lockup()])},Authorize:{index:1,layout:struct$1([u32$2("instruction"),publicKey$4("newAuthorized"),u32$2("stakeAuthorizationType")])},Delegate:{index:2,layout:struct$1([u32$2("instruction")])},Split:{index:3,layout:struct$1([u32$2("instruction"),ns64$1("lamports")])},Withdraw:{index:4,layout:struct$1([u32$2("instruction"),ns64$1("lamports")])},Deactivate:{index:5,layout:struct$1([u32$2("instruction")])},Merge:{index:7,layout:struct$1([u32$2("instruction")])},AuthorizeWithSeed:{index:8,layout:struct$1([u32$2("instruction"),publicKey$4("newAuthorized"),u32$2("stakeAuthorizationType"),rustString("authoritySeed"),publicKey$4("authorityOwner")])}}),StakeAuthorizationLayout=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class StakeProgram{constructor(){}static initialize(e){const{stakePubkey:t,authorized:r,lockup:n}=e,i=n||Lockup.default,a=encodeData(STAKE_INSTRUCTION_LAYOUTS.Initialize,{authorized:{staker:toBuffer(r.staker.toBuffer()),withdrawer:toBuffer(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:toBuffer(i.custodian.toBuffer())}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new TransactionInstruction(o)}static createAccountWithSeed(e){const t=new Transaction;t.add(SystemProgram.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(e){const t=new Transaction;t.add(SystemProgram.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:r,votePubkey:n}=e,i=encodeData(STAKE_INSTRUCTION_LAYOUTS.Delegate);return(new Transaction).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:STAKE_CONFIG_ID,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(e){const{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:a}=e,o=encodeData(STAKE_INSTRUCTION_LAYOUTS.Authorize,{newAuthorized:toBuffer(n.toBuffer()),stakeAuthorizationType:i.index}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&s.push({pubkey:a,isSigner:!0,isWritable:!1}),(new Transaction).add({keys:s,programId:this.programId,data:o})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:a,stakeAuthorizationType:o,custodianPubkey:s}=e,u=encodeData(STAKE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed,{newAuthorized:toBuffer(a.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:toBuffer(i.toBuffer())}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new Transaction).add({keys:c,programId:this.programId,data:u})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=e,a=encodeData(STAKE_INSTRUCTION_LAYOUTS.Split,{lamports:i});return new TransactionInstruction({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(e,t){const r=new Transaction;return r.add(SystemProgram.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:a,seed:o,lamports:s}=e,u=new Transaction;return u.add(SystemProgram.allocate({accountPubkey:i,basePubkey:a,seed:o,space:this.space,programId:this.programId})),t&&t>0&&u.add(SystemProgram.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),u.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:s}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:n}=e,i=encodeData(STAKE_INSTRUCTION_LAYOUTS.Merge);return(new Transaction).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:a}=e,o=encodeData(STAKE_INSTRUCTION_LAYOUTS.Withdraw,{lamports:i}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&s.push({pubkey:a,isSigner:!0,isWritable:!1}),(new Transaction).add({keys:s,programId:this.programId,data:o})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:r}=e,n=encodeData(STAKE_INSTRUCTION_LAYOUTS.Deactivate);return(new Transaction).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}StakeProgram.programId=new PublicKey("Stake11111111111111111111111111111111111111"),StakeProgram.space=200;class VoteInit{constructor(e,t,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=r,this.commission=n}}class VoteInstruction{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=u32$2("instruction").decode(e.data);let r;for(const[e,n]of Object.entries(VOTE_INSTRUCTION_LAYOUTS))if(n.index==t){r=e;break}if(!r)throw new Error("Instruction type incorrect; not a VoteInstruction");return r}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new VoteInit(new PublicKey(t.nodePubkey),new PublicKey(t.authorizedVoter),new PublicKey(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:r}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new PublicKey(t),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:i}}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new PublicKey(t),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new PublicKey(n),voteAuthorizationType:{index:i},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=decodeData$1(VOTE_INSTRUCTION_LAYOUTS.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(VoteProgram.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const VOTE_INSTRUCTION_LAYOUTS=Object.freeze({InitializeAccount:{index:0,layout:struct$1([u32$2("instruction"),voteInit()])},Authorize:{index:1,layout:struct$1([u32$2("instruction"),publicKey$4("newAuthorized"),u32$2("voteAuthorizationType")])},Withdraw:{index:3,layout:struct$1([u32$2("instruction"),ns64$1("lamports")])},UpdateValidatorIdentity:{index:4,layout:struct$1([u32$2("instruction")])},AuthorizeWithSeed:{index:10,layout:struct$1([u32$2("instruction"),voteAuthorizeWithSeedArgs()])}}),VoteAuthorizationLayout=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class VoteProgram{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:r,voteInit:n}=e,i=encodeData(VOTE_INSTRUCTION_LAYOUTS.InitializeAccount,{voteInit:{nodePubkey:toBuffer(n.nodePubkey.toBuffer()),authorizedVoter:toBuffer(n.authorizedVoter.toBuffer()),authorizedWithdrawer:toBuffer(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new TransactionInstruction(a)}static createAccount(e){const t=new Transaction;return t.add(SystemProgram.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=e,a=encodeData(VOTE_INSTRUCTION_LAYOUTS.Authorize,{newAuthorized:toBuffer(n.toBuffer()),voteAuthorizationType:i.index}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Transaction).add({keys:o,programId:this.programId,data:a})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:a,votePubkey:o}=e,s=encodeData(VOTE_INSTRUCTION_LAYOUTS.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:toBuffer(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:toBuffer(i.toBuffer()),voteAuthorizationType:a.index}}),u=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new Transaction).add({keys:u,programId:this.programId,data:s})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=e,a=encodeData(VOTE_INSTRUCTION_LAYOUTS.Withdraw,{lamports:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Transaction).add({keys:o,programId:this.programId,data:a})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return VoteProgram.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:n}=e,i=encodeData(VOTE_INSTRUCTION_LAYOUTS.UpdateValidatorIdentity),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Transaction).add({keys:a,programId:this.programId,data:i})}}VoteProgram.programId=new PublicKey("Vote111111111111111111111111111111111111111"),VoteProgram.space=3762;const VALIDATOR_INFO_KEY=new PublicKey("Va1idator1nfo111111111111111111111111111111"),InfoString=type$1({name:string$1(),website:optional$1(string$1()),details:optional$1(string$1()),iconUrl:optional$1(string$1()),keybaseUsername:optional$1(string$1())});class ValidatorInfo{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(2!==decodeLength(t))return null;const r=[];for(let e=0;e<2;e++){const e=new PublicKey(guardedSplice(t,0,PUBLIC_KEY_LENGTH)),n=1===guardedShift(t);r.push({publicKey:e,isSigner:n})}if(r[0].publicKey.equals(VALIDATOR_INFO_KEY)&&r[1].isSigner){const e=rustString().decode(buffer.Buffer.from(t)),n=JSON.parse(e);return assert$3(n,InfoString),new ValidatorInfo(r[1].publicKey,n)}return null}}const VOTE_PROGRAM_ID=new PublicKey("Vote111111111111111111111111111111111111111"),VoteAccountLayout=struct$1([publicKey$4("nodePubkey"),publicKey$4("authorizedWithdrawer"),u8$1("commission"),nu64$1(),seq(struct$1([nu64$1("slot"),u32$2("confirmationCount")]),offset$1(u32$2(),-8),"votes"),u8$1("rootSlotValid"),nu64$1("rootSlot"),nu64$1(),seq(struct$1([nu64$1("epoch"),publicKey$4("authorizedVoter")]),offset$1(u32$2(),-8),"authorizedVoters"),struct$1([seq(struct$1([publicKey$4("authorizedPubkey"),nu64$1("epochOfLastAuthorizedSwitch"),nu64$1("targetEpoch")]),32,"buf"),nu64$1("idx"),u8$1("isEmpty")],"priorVoters"),nu64$1(),seq(struct$1([nu64$1("epoch"),nu64$1("credits"),nu64$1("prevCredits")]),offset$1(u32$2(),-8),"epochCredits"),struct$1([nu64$1("slot"),nu64$1("timestamp")],"lastTimestamp")]);class VoteAccount{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const t=VoteAccountLayout.decode(toBuffer(e),4);let r=t.rootSlot;return t.rootSlotValid||(r=null),new VoteAccount({nodePubkey:new PublicKey(t.nodePubkey),authorizedWithdrawer:new PublicKey(t.authorizedWithdrawer),commission:t.commission,votes:t.votes,rootSlot:r,authorizedVoters:t.authorizedVoters.map(parseAuthorizedVoter),priorVoters:getPriorVoters(t.priorVoters),epochCredits:t.epochCredits,lastTimestamp:t.lastTimestamp})}}function parseAuthorizedVoter(e){let{authorizedVoter:t,epoch:r}=e;return{epoch:r,authorizedVoter:new PublicKey(t)}}function parsePriorVoters(e){let{authorizedPubkey:t,epochOfLastAuthorizedSwitch:r,targetEpoch:n}=e;return{authorizedPubkey:new PublicKey(t),epochOfLastAuthorizedSwitch:r,targetEpoch:n}}function getPriorVoters(e){let{buf:t,idx:r,isEmpty:n}=e;return n?[]:[...t.slice(r+1).map(parsePriorVoters),...t.slice(0,r).map(parsePriorVoters)]}const endpoint={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function clusterApiUrl(e,t){const r=!1===t?"http":"https";if(!e)return endpoint[r].devnet;const n=endpoint[r][e];if(!n)throw new Error(`Unknown ${r} cluster: ${e}`);return n}async function sendAndConfirmRawTransaction$1(e,t,r,n){let i,a;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,a=n):a=r;const o=a&&{skipPreflight:a.skipPreflight,preflightCommitment:a.preflightCommitment||a.commitment,minContextSlot:a.minContextSlot},s=await e.sendRawTransaction(t,o),u=a&&a.commitment,c=i?e.confirmTransaction(i,u):e.confirmTransaction(s,u),d=(await c).value;if(d.err){if(null!=s)throw new SendTransactionError({action:null!=o&&o.skipPreflight?"send":"simulate",signature:s,transactionMessage:`Status: (${JSON.stringify(d)})`});throw new Error(`Raw transaction ${s} failed (${JSON.stringify(d)})`)}return s}const LAMPORTS_PER_SOL=1e9;var index_browser_esm=Object.freeze({__proto__:null,Account:Account,AddressLookupTableAccount:AddressLookupTableAccount,AddressLookupTableInstruction:AddressLookupTableInstruction,AddressLookupTableProgram:AddressLookupTableProgram,Authorized:Authorized,BLOCKHASH_CACHE_TIMEOUT_MS:BLOCKHASH_CACHE_TIMEOUT_MS,BPF_LOADER_DEPRECATED_PROGRAM_ID:BPF_LOADER_DEPRECATED_PROGRAM_ID,BPF_LOADER_PROGRAM_ID:BPF_LOADER_PROGRAM_ID,BpfLoader:BpfLoader,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:COMPUTE_BUDGET_INSTRUCTION_LAYOUTS,ComputeBudgetInstruction:ComputeBudgetInstruction,ComputeBudgetProgram:ComputeBudgetProgram,Connection:Connection,Ed25519Program:Ed25519Program,Enum:Enum,EpochSchedule:EpochSchedule,FeeCalculatorLayout:FeeCalculatorLayout,Keypair:Keypair,LAMPORTS_PER_SOL:LAMPORTS_PER_SOL,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:LOOKUP_TABLE_INSTRUCTION_LAYOUTS,Loader:Loader,Lockup:Lockup,MAX_SEED_LENGTH:MAX_SEED_LENGTH,Message:Message,MessageAccountKeys:MessageAccountKeys,MessageV0:MessageV0,NONCE_ACCOUNT_LENGTH:NONCE_ACCOUNT_LENGTH,NonceAccount:NonceAccount,PACKET_DATA_SIZE:PACKET_DATA_SIZE,PUBLIC_KEY_LENGTH:PUBLIC_KEY_LENGTH,PublicKey:PublicKey,SIGNATURE_LENGTH_IN_BYTES:SIGNATURE_LENGTH_IN_BYTES,SOLANA_SCHEMA:SOLANA_SCHEMA,STAKE_CONFIG_ID:STAKE_CONFIG_ID,STAKE_INSTRUCTION_LAYOUTS:STAKE_INSTRUCTION_LAYOUTS,SYSTEM_INSTRUCTION_LAYOUTS:SYSTEM_INSTRUCTION_LAYOUTS,SYSVAR_CLOCK_PUBKEY:SYSVAR_CLOCK_PUBKEY,SYSVAR_EPOCH_SCHEDULE_PUBKEY:SYSVAR_EPOCH_SCHEDULE_PUBKEY,SYSVAR_INSTRUCTIONS_PUBKEY:SYSVAR_INSTRUCTIONS_PUBKEY,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:SYSVAR_RECENT_BLOCKHASHES_PUBKEY,SYSVAR_RENT_PUBKEY:SYSVAR_RENT_PUBKEY,SYSVAR_REWARDS_PUBKEY:SYSVAR_REWARDS_PUBKEY,SYSVAR_SLOT_HASHES_PUBKEY:SYSVAR_SLOT_HASHES_PUBKEY,SYSVAR_SLOT_HISTORY_PUBKEY:SYSVAR_SLOT_HISTORY_PUBKEY,SYSVAR_STAKE_HISTORY_PUBKEY:SYSVAR_STAKE_HISTORY_PUBKEY,Secp256k1Program:Secp256k1Program,SendTransactionError:SendTransactionError,SolanaJSONRPCError:SolanaJSONRPCError,SolanaJSONRPCErrorCode:SolanaJSONRPCErrorCode,StakeAuthorizationLayout:StakeAuthorizationLayout,StakeInstruction:StakeInstruction,StakeProgram:StakeProgram,Struct:Struct$1,SystemInstruction:SystemInstruction,SystemProgram:SystemProgram,Transaction:Transaction,TransactionExpiredBlockheightExceededError:TransactionExpiredBlockheightExceededError,TransactionExpiredNonceInvalidError:TransactionExpiredNonceInvalidError,TransactionExpiredTimeoutError:TransactionExpiredTimeoutError,TransactionInstruction:TransactionInstruction,TransactionMessage:TransactionMessage,TransactionStatus:TransactionStatus,VALIDATOR_INFO_KEY:VALIDATOR_INFO_KEY,VERSION_PREFIX_MASK:VERSION_PREFIX_MASK,VOTE_PROGRAM_ID:VOTE_PROGRAM_ID,ValidatorInfo:ValidatorInfo,VersionedMessage:VersionedMessage,VersionedTransaction:VersionedTransaction,VoteAccount:VoteAccount,VoteAuthorizationLayout:VoteAuthorizationLayout,VoteInit:VoteInit,VoteInstruction:VoteInstruction,VoteProgram:VoteProgram,clusterApiUrl:clusterApiUrl,sendAndConfirmRawTransaction:sendAndConfirmRawTransaction$1,sendAndConfirmTransaction:sendAndConfirmTransaction});const PublicKeySchema=z.union([z.string().transform(((e,t)=>{try{return new PublicKey(e)}catch(e){t.addIssue({code:z.ZodIssueCode.custom,message:e instanceof Error?e.message:"Invalid PublicKey input"})}return z.NEVER})),z.custom((e=>e instanceof PublicKey))]),TokenNameSchema=z.enum(["wAUDIO","USDC","BONK"]),MintSchema=z.union([TokenNameSchema,PublicKeySchema]),RelaySchema=z.object({transaction:z.custom(),confirmationOptions:z.object({strategy:z.union([z.object({blockhash:z.string(),lastValidBlockHeight:z.number()}),z.object({minContextSlot:z.number(),nonceAccountPubkey:PublicKeySchema,nonceValue:z.string()})]).optional(),commitment:z.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional()}).optional(),sendOptions:z.custom().optional()}).strict(),LaunchCoinSchema=z.object({name:z.string().min(1,"Name is required"),symbol:z.string().min(1,"Symbol is required"),description:z.string().min(1,"Description is required"),walletPublicKey:PublicKeySchema,initialBuyAmountAudio:z.string().optional(),image:z.custom((e=>e instanceof Blob),"Image file is required")}).strict();class SolanaRelay extends BaseAPI$1{constructor(){super(...arguments),_defineProperty$3(this,"feePayer",null)}async getFeePayer(e){if(null!==this.feePayer)return this.feePayer;const t=await this.request({path:"/feePayer",method:"GET",headers:{"Content-Type":"application/json"}},e),{feePayer:r}=await new JSONApiResponse$1(t,(e=>({feePayer:exists$3(e,"feePayer")?new PublicKey(e.feePayer):void 0}))).value();if(!r)throw new Error("Failed to get fee payer!");return this.feePayer=r,this.feePayer}async getLocationInstruction(e){const t=await this.request({path:"/instruction/location",method:"GET",headers:{"Content-Type":"application/json"}},e),{instruction:r}=await new JSONApiResponse$1(t,(e=>({instruction:new TransactionInstruction({keys:e.instruction.keys,programId:new PublicKey(e.instruction.programId),data:Buffer.from(e.instruction.data)})}))).value();if(!r)throw new Error("Failed to get instruction!");return r}async relay(e,t){const{transaction:r,confirmationOptions:n,sendOptions:i}=await parseParams("relay",RelaySchema)(e),a={"Content-Type":"application/json"},o={transaction:Buffer.from(r.serialize()).toString("base64"),confirmationOptions:n,sendOptions:i};let s;try{s=await this.request({path:"/relay",method:"POST",headers:a,body:o},t)}catch(e){if(e instanceof Error&&"ResponseError"===e.name){const t=e.response.clone(),r=await t.json();if("error"in r&&"transactionMessage"in r&&"signature"in r)throw new SendTransactionError({action:r.error.indexOf("Simulation")>-1?"simulate":"send",signature:r.signature,transactionMessage:r.transactionMessage,logs:r.transactionLogs})}throw e}return await new JSONApiResponse$1(s,(e=>{if(!exists$3(e,"signature"))throw new Error("Signature missing");return{signature:e.signature}})).value()}async launchCoin(e){const{name:t,symbol:r,description:n,walletPublicKey:i,initialBuyAmountAudio:a,image:o}=await parseParams("launchCoin",LaunchCoinSchema)(e),s=new FormData;s.append("name",t),s.append("symbol",r),s.append("description",n),s.append("walletPublicKey",i.toBase58()),a&&s.append("initialBuyAmountAudio",a.toString()),s.append("image",o);const u=await this.request({path:"/launchpad/launch_coin",method:"POST",headers:{},body:s});return await new JSONApiResponse$1(u,(e=>{if(!exists$3(e,"mintPublicKey"))throw new Error("mintPublicKey missing from response");if(!exists$3(e,"createPoolTx"))throw new Error("createPoolTx missing from response");if(!exists$3(e,"imageUri"))throw new Error("imageUri missing from response");return e})).value()}async getFirstBuyQuote(e,t){const r="audioInputAmount"in e?e.audioInputAmount:void 0,n="tokenOutputAmount"in e?e.tokenOutputAmount:void 0;if(!r&&!n)throw new Error("Invalid arguments. Either solInputAmount or tokenOutputAmount must be provided");const i=r?{audioInputAmount:r}:{tokenOutputAmount:n},a=await this.request({path:"/launchpad/first_buy_quote",method:"GET",headers:{},query:i},t);return await new JSONApiResponse$1(a,(e=>{if(!exists$3(e,"audioInputAmount"))throw new Error("audioInputAmount missing from response");if(!exists$3(e,"usdcValue"))throw new Error("usdcValue missing from response");if(!exists$3(e,"tokenOutputAmount"))throw new Error("tokenOutputAmount missing from response");return{usdcValue:e.usdcValue,tokenOutputAmount:e.tokenOutputAmount,audioInputAmount:e.audioInputAmount,maxAudioInputAmount:e.maxAudioInputAmount,maxTokenOutputAmount:e.maxTokenOutputAmount}})).value()}async getLaunchpadConfig(e){const t=await this.request({path:"/launchpad/config",method:"GET",headers:{"Content-Type":"application/json"},query:{}},e);return await new JSONApiResponse$1(t,(e=>e)).value()}async claimFees(e,t){const r={tokenMint:e.tokenMint,ownerWalletAddress:e.ownerWalletAddress,receiverWalletAddress:e.receiverWalletAddress},n=await this.request({path:"/launchpad/claim_fees",method:"GET",headers:{"Content-Type":"application/json"},query:r},t);return await new JSONApiResponse$1(n,(e=>e)).value()}}class SolanaRelayWalletAdapter{constructor(e){let{solanaRelay:t}=e;_defineProperty$3(this,"name","AudiusSolanaWallet"),_defineProperty$3(this,"url",""),_defineProperty$3(this,"icon",""),_defineProperty$3(this,"readyState","Loadable"),_defineProperty$3(this,"supportedTransactionVersions",void 0),_defineProperty$3(this,"solanaRelay",void 0),_defineProperty$3(this,"_publicKey",null),_defineProperty$3(this,"_connecting",!1),_defineProperty$3(this,"_connected",!1),this.solanaRelay=t}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return this._connected}async autoConnect(){await this.connect()}async connect(){if(this._connecting=!0,this._publicKey=await this.solanaRelay.getFeePayer(),!this._publicKey)throw new Error("Failed to connect SolanaRelayWalletAdapter: Failed to get fee payer.");this._connecting=!1,this._connected=!0}async disconnect(){this._connected=!1,this._publicKey=null}async sendTransaction(e,t,r){const{signature:n}=await this.solanaRelay.relay({transaction:e,sendOptions:r});return n}}function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$4(e,t){return e===t||e!=e&&t!=t}var eq_1=eq$4,eq$3=eq_1;function assocIndexOf$4(e,t){for(var r=e.length;r--;)if(eq$3(e[r][0],t))return r;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(e){var t=this.__data__,r=assocIndexOf$3(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice.call(t,r,1),--this.size,!0)}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(e){var t=this.__data__,r=assocIndexOf$2(t,e);return r<0?void 0:t[r][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(e){return assocIndexOf$1(this.__data__,e)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(e,t){var r=this.__data__,n=assocIndexOf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ListCache$4.prototype.clear=listCacheClear,ListCache$4.prototype.delete=listCacheDelete,ListCache$4.prototype.get=listCacheGet,ListCache$4.prototype.has=listCacheHas,ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var _stackDelete=stackDelete$1;function stackGet$1(e){return this.__data__.get(e)}var _stackGet=stackGet$1;function stackHas$1(e){return this.__data__.has(e)}var _stackHas=stackHas$1,freeGlobal$1="object"==typeof commonjsGlobal$1&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root$4=freeGlobal||freeSelf||Function("return this")(),_root=root$4,root$3=_root,Symbol$3=root$3.Symbol,_Symbol=Symbol$3,Symbol$2=_Symbol,objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty,nativeObjectToString$1=objectProto$a.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag$1(e){var t=hasOwnProperty$8.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var n=!0}catch(e){}var i=nativeObjectToString$1.call(e);return n&&(t?e[symToStringTag$1]=r:delete e[symToStringTag$1]),i}var _getRawTag=getRawTag$1,objectProto$9=Object.prototype,nativeObjectToString=objectProto$9.toString;function objectToString$1(e){return nativeObjectToString.call(e)}var _objectToString=objectToString$1,Symbol$1=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag$4(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString(e)}var _baseGetTag=baseGetTag$4;function isObject$a(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var isObject_1=isObject$a,baseGetTag$3=_baseGetTag,isObject$9=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$5(e){if(!isObject$9(e))return!1;var t=baseGetTag$3(e);return t==funcTag$1||t==genTag||t==asyncTag||t==proxyTag}var isFunction_1=isFunction$5,root$2=_root,coreJsData$1=root$2["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked$1(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked$1,funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource$1(e){if(null!=e){try{return funcToString$2.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var _toSource=toSource$1,isFunction$4=isFunction_1,isMasked=_isMasked,isObject$8=isObject_1,toSource=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$8=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$7=objectProto$8.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(e){return!(!isObject$8(e)||isMasked(e))&&(isFunction$4(e)?reIsNative:reIsHostCtor).test(toSource(e))}var _baseIsNative=baseIsNative$1;function getValue$1(e,t){return null==e?void 0:e[t]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$3(e,t){var r=getValue(e,t);return baseIsNative(r)?r:void 0}var _getNative=getNative$3,getNative$2=_getNative,root$1=_root,Map$3=getNative$2(root$1,"Map"),_Map=Map$3,getNative$1=_getNative,nativeCreate$4=getNative$1(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function hashGet$1(e){var t=this.__data__;if(nativeCreate$2){var r=t[e];return r===HASH_UNDEFINED$1?void 0:r}return hasOwnProperty$6.call(t,e)?t[e]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function hashHas$1(e){var t=this.__data__;return nativeCreate$1?void 0!==t[e]:hasOwnProperty$5.call(t,e)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet$1(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nativeCreate&&void 0===t?HASH_UNDEFINED:t,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$3(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hash$3.prototype.clear=hashClear,Hash$3.prototype.delete=hashDelete,Hash$3.prototype.get=hashGet,Hash$3.prototype.has=hashHas,Hash$3.prototype.set=hashSet;var _Hash=Hash$3,Hash$2=_Hash,ListCache$2=_ListCache,Map$2=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash$2,map:new(Map$2||ListCache$2),string:new Hash$2}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(e,t){var r=e.__data__;return isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(e){var t=getMapData$3(this,e).delete(e);return this.size-=t?1:0,t}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(e){return getMapData$2(this,e).get(e)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(e){return getMapData$1(this,e).has(e)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(e,t){var r=getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$1(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}MapCache$1.prototype.clear=mapCacheClear,MapCache$1.prototype.delete=mapCacheDelete,MapCache$1.prototype.get=mapCacheGet,MapCache$1.prototype.has=mapCacheHas,MapCache$1.prototype.set=mapCacheSet;var _MapCache=MapCache$1,ListCache$1=_ListCache,Map$1=_Map,MapCache=_MapCache,LARGE_ARRAY_SIZE=200;function stackSet$1(e,t){var r=this.__data__;if(r instanceof ListCache$1){var n=r.__data__;if(!Map$1||n.length<LARGE_ARRAY_SIZE-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new MapCache(n)}return r.set(e,t),this.size=r.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$1(e){var t=this.__data__=new ListCache(e);this.size=t.size}Stack$1.prototype.clear=stackClear,Stack$1.prototype.delete=stackDelete,Stack$1.prototype.get=stackGet,Stack$1.prototype.has=stackHas,Stack$1.prototype.set=stackSet;var _Stack=Stack$1,getNative=_getNative,defineProperty$2=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),_defineProperty$2=defineProperty$2,defineProperty$1=_defineProperty$2;function baseAssignValue$3(e,t,r){"__proto__"==t&&defineProperty$1?defineProperty$1(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var _baseAssignValue=baseAssignValue$3,baseAssignValue$2=_baseAssignValue,eq$2=eq_1;function assignMergeValue$2(e,t,r){(void 0!==r&&!eq$2(e[t],r)||void 0===r&&!(t in e))&&baseAssignValue$2(e,t,r)}var _assignMergeValue=assignMergeValue$2;function createBaseFor$1(e){return function(t,r,n){for(var i=-1,a=Object(t),o=n(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===r(a[u],u,a))break}return t}}var _createBaseFor=createBaseFor$1,createBaseFor=_createBaseFor,baseFor$1=createBaseFor(),_baseFor=baseFor$1,_cloneBuffer={exports:{}};!function(e,t){var r=_root,n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,a=i&&i.exports===n?r.Buffer:void 0,o=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=o?o(r):new e.constructor(r);return e.copy(n),n}}(_cloneBuffer,_cloneBuffer.exports);var root=_root,Uint8Array$2=root.Uint8Array,_Uint8Array=Uint8Array$2,Uint8Array$1=_Uint8Array;function cloneArrayBuffer$1(e){var t=new e.constructor(e.byteLength);return new Uint8Array$1(t).set(new Uint8Array$1(e)),t}var _cloneArrayBuffer=cloneArrayBuffer$1,cloneArrayBuffer=_cloneArrayBuffer;function cloneTypedArray$1(e,t){var r=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var _cloneTypedArray=cloneTypedArray$1;function copyArray$1(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var _copyArray=copyArray$1,isObject$7=isObject_1,objectCreate=Object.create,baseCreate$1=function(){function e(){}return function(t){if(!isObject$7(t))return{};if(objectCreate)return objectCreate(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),_baseCreate=baseCreate$1;function overArg$1(e,t){return function(r){return e(t(r))}}var _overArg=overArg$1,overArg=_overArg,getPrototype$2=overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype$2,objectProto$5=Object.prototype;function isPrototype$2(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$5)}var _isPrototype=isPrototype$2,baseCreate=_baseCreate,getPrototype$1=_getPrototype,isPrototype$1=_isPrototype;function initCloneObject$1(e){return"function"!=typeof e.constructor||isPrototype$1(e)?{}:baseCreate(getPrototype$1(e))}var _initCloneObject=initCloneObject$1;function isObjectLike$5(e){return null!=e&&"object"==typeof e}var isObjectLike_1=isObjectLike$5,baseGetTag$2=_baseGetTag,isObjectLike$4=isObjectLike_1,argsTag$1="[object Arguments]";function baseIsArguments$1(e){return isObjectLike$4(e)&&baseGetTag$2(e)==argsTag$1}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$3=isObjectLike_1,objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty,propertyIsEnumerable=objectProto$4.propertyIsEnumerable,isArguments$2=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike$3(e)&&hasOwnProperty$4.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArguments_1=isArguments$2,isArray$3=Array.isArray,isArray_1=isArray$3,MAX_SAFE_INTEGER$1=9007199254740991;function isLength$2(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER$1}var isLength_1=isLength$2,isFunction$3=isFunction_1,isLength$1=isLength_1;function isArrayLike$3(e){return null!=e&&isLength$1(e.length)&&!isFunction$3(e)}var isArrayLike_1=isArrayLike$3,isArrayLike$2=isArrayLike_1,isObjectLike$2=isObjectLike_1;function isArrayLikeObject$1(e){return isObjectLike$2(e)&&isArrayLike$2(e)}var isArrayLikeObject_1=isArrayLikeObject$1,isBuffer$3={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;!function(e,t){var r=_root,n=stubFalse_1,i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,o=a&&a.exports===i?r.Buffer:void 0,s=(o?o.isBuffer:void 0)||n;e.exports=s}(isBuffer$3,isBuffer$3.exports);var baseGetTag$1=_baseGetTag,getPrototype=_getPrototype,isObjectLike$1=isObjectLike_1,objectTag$1="[object Object]",funcProto=Function.prototype,objectProto$3=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$3=objectProto$3.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$1(e){if(!isObjectLike$1(e)||baseGetTag$1(e)!=objectTag$1)return!1;var t=getPrototype(e);if(null===t)return!0;var r=hasOwnProperty$3.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&funcToString.call(r)==objectCtorString}var isPlainObject_1=isPlainObject$1,baseGetTag=_baseGetTag,isLength=isLength_1,isObjectLike=isObjectLike_1,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray$1(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$1(e){return function(t){return e(t)}}var _baseUnary=baseUnary$1,_nodeUtil={exports:{}};!function(e,t){var r=_freeGlobal,n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,a=i&&i.exports===n&&r.process,o=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=o}(_nodeUtil,_nodeUtil.exports);var baseIsTypedArray=_baseIsTypedArray,baseUnary=_baseUnary,nodeUtil=_nodeUtil.exports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$2;function safeGet$2(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _safeGet=safeGet$2,baseAssignValue$1=_baseAssignValue,eq$1=eq_1,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function assignValue$1(e,t,r){var n=e[t];hasOwnProperty$2.call(e,t)&&eq$1(n,r)&&(void 0!==r||t in e)||baseAssignValue$1(e,t,r)}var _assignValue=assignValue$1,assignValue=_assignValue,baseAssignValue=_baseAssignValue;function copyObject$1(e,t,r,n){var i=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],u=n?n(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),i?baseAssignValue(r,s,u):assignValue(r,s,u)}return r}var _copyObject=copyObject$1;function baseTimes$1(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var _baseTimes=baseTimes$1,MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$2(e,t){var r=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==r||"symbol"!=r&&reIsUint.test(e))&&e>-1&&e%1==0&&e<t}var _isIndex=isIndex$2,baseTimes=_baseTimes,isArguments$1=isArguments_1,isArray$2=isArray_1,isBuffer$2=isBuffer$3.exports,isIndex$1=_isIndex,isTypedArray$1=isTypedArray_1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function arrayLikeKeys$1(e,t){var r=isArray$2(e),n=!r&&isArguments$1(e),i=!r&&!n&&isBuffer$2(e),a=!r&&!n&&!i&&isTypedArray$1(e),o=r||n||i||a,s=o?baseTimes(e.length,String):[],u=s.length;for(var c in e)!t&&!hasOwnProperty$1.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||isIndex$1(c,u))||s.push(c);return s}var _arrayLikeKeys=arrayLikeKeys$1;function nativeKeysIn$1(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}var _nativeKeysIn=nativeKeysIn$1,isObject$6=isObject_1,isPrototype=_isPrototype,nativeKeysIn=_nativeKeysIn,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseKeysIn$1(e){if(!isObject$6(e))return nativeKeysIn(e);var t=isPrototype(e),r=[];for(var n in e)("constructor"!=n||!t&&hasOwnProperty.call(e,n))&&r.push(n);return r}var _baseKeysIn=baseKeysIn$1,arrayLikeKeys=_arrayLikeKeys,baseKeysIn=_baseKeysIn,isArrayLike$1=isArrayLike_1;function keysIn$2(e){return isArrayLike$1(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var keysIn_1=keysIn$2,copyObject=_copyObject,keysIn$1=keysIn_1;function toPlainObject$1(e){return copyObject(e,keysIn$1(e))}var toPlainObject_1=toPlainObject$1,assignMergeValue$1=_assignMergeValue,cloneBuffer=_cloneBuffer.exports,cloneTypedArray=_cloneTypedArray,copyArray=_copyArray,initCloneObject=_initCloneObject,isArguments=isArguments_1,isArray$1=isArray_1,isArrayLikeObject=isArrayLikeObject_1,isBuffer$1=isBuffer$3.exports,isFunction$2=isFunction_1,isObject$5=isObject_1,isPlainObject=isPlainObject_1,isTypedArray=isTypedArray_1,safeGet$1=_safeGet,toPlainObject=toPlainObject_1;function baseMergeDeep$1(e,t,r,n,i,a,o){var s=safeGet$1(e,r),u=safeGet$1(t,r),c=o.get(u);if(c)assignMergeValue$1(e,r,c);else{var d=a?a(s,u,r+"",e,t,o):void 0,l=void 0===d;if(l){var p=isArray$1(u),h=!p&&isBuffer$1(u),f=!p&&!h&&isTypedArray(u);d=u,p||h||f?isArray$1(s)?d=s:isArrayLikeObject(s)?d=copyArray(s):h?(l=!1,d=cloneBuffer(u,!0)):f?(l=!1,d=cloneTypedArray(u,!0)):d=[]:isPlainObject(u)||isArguments(u)?(d=s,isArguments(s)?d=toPlainObject(s):isObject$5(s)&&!isFunction$2(s)||(d=initCloneObject(u))):l=!1}l&&(o.set(u,d),i(d,u,n,a,o),o.delete(u)),assignMergeValue$1(e,r,d)}}var _baseMergeDeep=baseMergeDeep$1,Stack=_Stack,assignMergeValue=_assignMergeValue,baseFor=_baseFor,baseMergeDeep=_baseMergeDeep,isObject$4=isObject_1,keysIn=keysIn_1,safeGet=_safeGet;function baseMerge$1(e,t,r,n,i){e!==t&&baseFor(t,(function(a,o){if(i||(i=new Stack),isObject$4(a))baseMergeDeep(e,t,o,r,baseMerge$1,n,i);else{var s=n?n(safeGet(e,o),a,o+"",e,t,i):void 0;void 0===s&&(s=a),assignMergeValue(e,o,s)}}),keysIn)}var _baseMerge=baseMerge$1;function identity$2(e){return e}var identity_1=identity$2;function apply$1(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var _apply=apply$1,apply=_apply,nativeMax=Math.max;function overRest$1(e,t,r){return t=nativeMax(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=nativeMax(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),apply(e,this,s)}}var _overRest=overRest$1;function constant$1(e){return function(){return e}}var constant_1=constant$1,constant=constant_1,defineProperty=_defineProperty$2,identity$1=identity_1,baseSetToString$1=defineProperty?function(e,t){return defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant(t),writable:!0})}:identity$1,_baseSetToString=baseSetToString$1,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut$1(e){var t=0,r=0;return function(){var n=nativeNow(),i=HOT_SPAN-(n-r);if(r=n,i>0){if(++t>=HOT_COUNT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var _shortOut=shortOut$1,baseSetToString=_baseSetToString,shortOut=_shortOut,setToString$1=shortOut(baseSetToString),_setToString=setToString$1,identity=identity_1,overRest=_overRest,setToString=_setToString;function baseRest$1(e,t){return setToString(overRest(e,t,identity),e+"")}var _baseRest=baseRest$1,eq=eq_1,isArrayLike=isArrayLike_1,isIndex=_isIndex,isObject$3=isObject_1;function isIterateeCall$1(e,t,r){if(!isObject$3(r))return!1;var n=typeof t;return!!("number"==n?isArrayLike(r)&&isIndex(t,r.length):"string"==n&&t in r)&&eq(r[t],e)}var _isIterateeCall=isIterateeCall$1,baseRest=_baseRest,isIterateeCall=_isIterateeCall;function createAssigner$1(e){return baseRest((function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,o&&isIterateeCall(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,a)}return t}))}var _createAssigner=createAssigner$1,baseMerge=_baseMerge,createAssigner=_createAssigner,mergeWith=createAssigner((function(e,t,r,n){baseMerge(e,t,r,n)})),mergeWith_1=mergeWith;const mergeConfigWithDefaults=(e,t)=>mergeWith_1({},t,e,((e,t)=>{if(Array.isArray(t))return t})),DEFAULT_LOG_LEVEL="warn",DEFAULT_LOG_PREFIX="[audius-sdk]",logLevels=["debug","info","warn","error"];class Logger{constructor(e){var t,r;_defineProperty$3(this,"logLevel",void 0),_defineProperty$3(this,"logPrefix","[audius-sdk]"),this.logLevel=null!==(t=null==e?void 0:e.logLevel)&&void 0!==t?t:DEFAULT_LOG_LEVEL,this.logPrefix=null!==(r=null==e?void 0:e.logPrefix)&&void 0!==r?r:DEFAULT_LOG_PREFIX}createPrefixedLogger(e){return new Logger({logLevel:this.logLevel,logPrefix:`${this.logPrefix}${e}`})}debug(){if(!(logLevels.indexOf(this.logLevel)>logLevels.indexOf("debug"))){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.debug(this.logPrefix,...t)}}info(){if(!(logLevels.indexOf(this.logLevel)>logLevels.indexOf("info"))){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.info(this.logPrefix,...t)}}warn(){if(!(logLevels.indexOf(this.logLevel)>logLevels.indexOf("warn"))){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.warn(this.logPrefix,...t)}}error(){if(!(logLevels.indexOf(this.logLevel)>logLevels.indexOf("error"))){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.error(this.logPrefix,...t)}}}const getDefaultSolanaClientConfig=e=>({rpcEndpoints:[e.solana.rpcEndpoint],logger:new Logger}),PrioritySchema=z.enum(["MIN","LOW","MEDIUM","HIGH","VERY_HIGH","UNSAFE_MAX"]),TransactionInstructionSchema=z.object({data:z.custom(),keys:z.array(z.object({pubkey:PublicKeySchema,isSigner:z.boolean(),isWritable:z.boolean()})),programId:PublicKeySchema}).transform((e=>e instanceof TransactionInstruction?e:new TransactionInstruction(e))),AddressLookupTableAccountSchema=z.object({key:PublicKeySchema,state:z.object({addresses:z.array(PublicKeySchema),authority:z.optional(PublicKeySchema),deactivationSlot:z.bigint(),lastExtendedSlot:z.number(),lastExtendedSlotStartIndex:z.number()})}).transform((e=>e instanceof AddressLookupTableAccount?e:new AddressLookupTableAccount(e))),BuildTransactionSchema=z.object({instructions:z.array(TransactionInstructionSchema).min(1),recentBlockhash:z.string().optional(),feePayer:PublicKeySchema.optional(),addressLookupTables:z.union([z.array(PublicKeySchema).default([]),z.array(AddressLookupTableAccountSchema).default([])]).optional(),priorityFee:z.union([z.object({microLamports:z.number().min(0)}),z.object({percentile:z.number().min(0).max(100),multiplier:z.number().min(0).optional(),minimumMicroLamports:z.number().min(0).optional(),maximumMicroLamports:z.number().min(0).optional()}),z.object({priority:PrioritySchema,multiplier:z.number().min(0).optional(),minimumMicroLamports:z.number().min(0).optional(),maximumMicroLamports:z.number().min(0).optional()})]).nullable().optional(),computeLimit:z.union([z.object({units:z.number().min(0)}),z.object({simulationMultiplier:z.number().min(0)})]).nullable().optional()}).strict(),isPublicKeyArray=e=>e.every((e=>e instanceof PublicKey)),priorityToPercentileMap={MIN:0,LOW:25,MEDIUM:50,HIGH:75,VERY_HIGH:95,UNSAFE_MAX:100};class SolanaClient{constructor(e){var t;_defineProperty$3(this,"connection",void 0),_defineProperty$3(this,"wallet",void 0),_defineProperty$3(this,"logger",void 0);const r=mergeConfigWithDefaults(e,getDefaultSolanaClientConfig(productionConfig));if(!r.rpcEndpoints[0])throw new Error("RPC Endpoints not configured");this.connection=new Connection(r.rpcEndpoints[0],r.rpcConfig),this.wallet=e.solanaWalletAdapter,this.logger=null===(t=r.logger)||void 0===t?void 0:t.createPrefixedLogger("[solana-client]")}async buildTransaction(e){let{instructions:t,feePayer:r,recentBlockhash:n,addressLookupTables:i=[],priorityFee:a={priority:"VERY_HIGH",minimumMicroLamports:15e4,maximumMicroLamports:1e7,multiplier:1.5},computeLimit:o={simulationMultiplier:1.5}}=await parseParams("buildTransaction",BuildTransactionSchema)(e);if(!n){n=(await this.connection.getLatestBlockhash()).blockhash}const s=null!=r?r:await this.getFeePayer();if(a)if("microLamports"in a)t.push(ComputeBudgetProgram.setComputeUnitPrice({microLamports:a.microLamports}));else{var u,c,d,l;const e=(await this.connection.getRecentPrioritizationFees()).map((e=>e.prioritizationFee)).sort(((e,t)=>e-t)),r="percentile"in a?a.percentile:priorityToPercentileMap[a.priority],n=null!==(u=a.multiplier)&&void 0!==u?u:1,i=(null!==(c=e[Math.max(Math.round(r/100*e.length-1),0)])&&void 0!==c?c:0)*n,o=Math.min(Math.max(i,null!==(d=a.minimumMicroLamports)&&void 0!==d?d:0),null!==(l=a.maximumMicroLamports)&&void 0!==l?l:Number.MAX_SAFE_INTEGER);void 0!==o&&t.push(ComputeBudgetProgram.setComputeUnitPrice({microLamports:o}))}const p=isPublicKeyArray(i)?await this.getLookupTableAccounts(i):i;if(o)if("units"in o)t.push(ComputeBudgetProgram.setComputeUnitLimit({units:o.units}));else try{const e=new TransactionMessage({payerKey:s,recentBlockhash:n,instructions:t}).compileToV0Message(p),r=new VersionedTransaction(e),i=await this.connection.simulateTransaction(r,{replaceRecentBlockhash:!0});if(i.value.err)throw new Error(JSON.stringify(i.value.err));this.logger.debug("Simulation succeeded, compute units used:",i.value.unitsConsumed),i.value.unitsConsumed&&t.push(ComputeBudgetProgram.setComputeUnitLimit({units:i.value.unitsConsumed*o.simulationMultiplier}))}catch(e){this.logger.warn("Failed to get computeLimit",e)}const h=new TransactionMessage({payerKey:s,recentBlockhash:n,instructions:t}).compileToV0Message(p);return new VersionedTransaction(h)}async sendTransaction(e,t){return await this.wallet.sendTransaction(e,this.connection,t)}async confirmAllTransactions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"confirmed";const{blockhash:r,lastValidBlockHeight:n}=await this.connection.getLatestBlockhash(),i=await Promise.all(e.map((async e=>({signature:e,err:(await this.connection.confirmTransaction({signature:e,blockhash:r,lastValidBlockHeight:n},t)).value.err})))),a=i.filter((e=>!!e.err));if(a.length>0)throw new Error(`Failed to confirm transactions: ${a.map((e=>`${e.signature}: ${e.err}`)).join(", ")}`)}async getFeePayer(){return this.wallet.connected||await this.wallet.connect(),this.wallet.publicKey}async getInstructions(e){if("version"in e){const t=await this.getLookupTableAccounts(e.message.addressTableLookups.map((e=>e.accountKey)));return TransactionMessage.decompile(e.message,{addressLookupTableAccounts:t}).instructions}return e.instructions}async getLookupTableAccounts(e){return await Promise.all(e.map((async e=>{const t=await this.connection.getAddressLookupTable(e);if(null===t.value)throw new Error(`Lookup table not found: ${e.toBase58()}`);return t.value})))}}const encodeDecode=e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)}),bigInt=e=>t=>{const r=blob$1(e,t),{encode:n,decode:i}=encodeDecode(r),a=r;return a.decode=(e,t)=>{const r=i(e,t);return toBigIntLE_1(Buffer.from(r))},a.encode=(t,r,i)=>{const a=toBufferLE_1(t,e);return n(a,r,i)},a},u64$2=bigInt(8),bool$1=e=>{const t=u8$1(e),{encode:r,decode:n}=encodeDecode(t),i=t;return i.decode=(e,t)=>!!n(e,t),i.encode=(e,t,n)=>{const i=Number(e);return r(i,t,n)},i},publicKey$3=e=>{const t=blob$1(32,e),{encode:r,decode:n}=encodeDecode(t),i=t;return i.decode=(e,t)=>{const r=n(e,t);return new PublicKey(r)},i.encode=(e,t,n)=>{const i=e.toBuffer();return r(i,t,n)},i},TOKEN_PROGRAM_ID$1=new PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new PublicKey("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const ASSOCIATED_TOKEN_PROGRAM_ID=new PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new PublicKey("So11111111111111111111111111111111111111112"),new PublicKey("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");class TokenError extends Error{constructor(e){super(e)}}class TokenAccountNotFoundError extends TokenError{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class TokenInvalidAccountError extends TokenError{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class TokenInvalidAccountOwnerError extends TokenError{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class TokenInvalidAccountSizeError extends TokenError{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class TokenInvalidMintError extends TokenError{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class TokenInvalidOwnerError extends TokenError{constructor(){super(...arguments),this.name="TokenInvalidOwnerError"}}class TokenOwnerOffCurveError extends TokenError{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var TokenInstruction,AccountType;function addSigners(e,t,r){if(r.length){e.push({pubkey:t,isSigner:!1,isWritable:!1});for(const t of r)e.push({pubkey:t instanceof PublicKey?t:t.publicKey,isSigner:!0,isWritable:!1})}else e.push({pubkey:t,isSigner:!0,isWritable:!1});return e}!function(e){e[e.InitializeMint=0]="InitializeMint",e[e.InitializeAccount=1]="InitializeAccount",e[e.InitializeMultisig=2]="InitializeMultisig",e[e.Transfer=3]="Transfer",e[e.Approve=4]="Approve",e[e.Revoke=5]="Revoke",e[e.SetAuthority=6]="SetAuthority",e[e.MintTo=7]="MintTo",e[e.Burn=8]="Burn",e[e.CloseAccount=9]="CloseAccount",e[e.FreezeAccount=10]="FreezeAccount",e[e.ThawAccount=11]="ThawAccount",e[e.TransferChecked=12]="TransferChecked",e[e.ApproveChecked=13]="ApproveChecked",e[e.MintToChecked=14]="MintToChecked",e[e.BurnChecked=15]="BurnChecked",e[e.InitializeAccount2=16]="InitializeAccount2",e[e.SyncNative=17]="SyncNative",e[e.InitializeAccount3=18]="InitializeAccount3",e[e.InitializeMultisig2=19]="InitializeMultisig2",e[e.InitializeMint2=20]="InitializeMint2",e[e.GetAccountDataSize=21]="GetAccountDataSize",e[e.InitializeImmutableOwner=22]="InitializeImmutableOwner",e[e.AmountToUiAmount=23]="AmountToUiAmount",e[e.UiAmountToAmount=24]="UiAmountToAmount",e[e.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",e[e.TransferFeeExtension=26]="TransferFeeExtension",e[e.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",e[e.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",e[e.Reallocate=29]="Reallocate",e[e.MemoTransferExtension=30]="MemoTransferExtension",e[e.CreateNativeMint=31]="CreateNativeMint",e[e.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",e[e.InterestBearingMintExtension=33]="InterestBearingMintExtension",e[e.CpiGuardExtension=34]="CpiGuardExtension",e[e.InitializePermanentDelegate=35]="InitializePermanentDelegate"}(TokenInstruction||(TokenInstruction={})),function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Mint=1]="Mint",e[e.Account=2]="Account"}(AccountType||(AccountType={}));const ACCOUNT_TYPE_SIZE=1,MultisigLayout=struct$1([u8$1("m"),u8$1("n"),bool$1("isInitialized"),publicKey$3("signer1"),publicKey$3("signer2"),publicKey$3("signer3"),publicKey$3("signer4"),publicKey$3("signer5"),publicKey$3("signer6"),publicKey$3("signer7"),publicKey$3("signer8"),publicKey$3("signer9"),publicKey$3("signer10"),publicKey$3("signer11")]),MULTISIG_SIZE=MultisigLayout.span;var AccountState;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initialized=1]="Initialized",e[e.Frozen=2]="Frozen"}(AccountState||(AccountState={}));const AccountLayout=struct$1([publicKey$3("mint"),publicKey$3("owner"),u64$2("amount"),u32$2("delegateOption"),publicKey$3("delegate"),u8$1("state"),u32$2("isNativeOption"),u64$2("isNative"),u64$2("delegatedAmount"),u32$2("closeAuthorityOption"),publicKey$3("closeAuthority")]),ACCOUNT_SIZE=AccountLayout.span;async function getAccount(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:TOKEN_PROGRAM_ID$1;return unpackAccount(t,await e.getAccountInfo(t,r),n)}function unpackAccount(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TOKEN_PROGRAM_ID$1;if(!t)throw new TokenAccountNotFoundError;if(!t.owner.equals(r))throw new TokenInvalidAccountOwnerError;if(t.data.length<ACCOUNT_SIZE)throw new TokenInvalidAccountSizeError;const n=AccountLayout.decode(t.data.slice(0,ACCOUNT_SIZE));let i=Buffer.alloc(0);if(t.data.length>ACCOUNT_SIZE){if(t.data.length===MULTISIG_SIZE)throw new TokenInvalidAccountSizeError;if(t.data[ACCOUNT_SIZE]!=AccountType.Account)throw new TokenInvalidAccountError;i=t.data.slice(ACCOUNT_SIZE+ACCOUNT_TYPE_SIZE)}return{address:e,mint:n.mint,owner:n.owner,amount:n.amount,delegate:n.delegateOption?n.delegate:null,delegatedAmount:n.delegatedAmount,isInitialized:n.state!==AccountState.Uninitialized,isFrozen:n.state===AccountState.Frozen,isNative:!!n.isNativeOption,rentExemptReserve:n.isNativeOption?n.isNative:null,closeAuthority:n.closeAuthorityOption?n.closeAuthority:null,tlvData:i}}const MintLayout=struct$1([u32$2("mintAuthorityOption"),publicKey$3("mintAuthority"),u64$2("supply"),u8$1("decimals"),bool$1("isInitialized"),u32$2("freezeAuthorityOption"),publicKey$3("freezeAuthority")]);function getAssociatedTokenAddressSync(e,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:TOKEN_PROGRAM_ID$1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ASSOCIATED_TOKEN_PROGRAM_ID;if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&!PublicKey.isOnCurve(t.toBuffer()))throw new TokenOwnerOffCurveError;const[i]=PublicKey.findProgramAddressSync([t.toBuffer(),r.toBuffer(),e.toBuffer()],n);return i}function createAssociatedTokenAccountIdempotentInstruction(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:TOKEN_PROGRAM_ID$1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ASSOCIATED_TOKEN_PROGRAM_ID;return buildAssociatedTokenAccountInstruction(e,t,r,n,Buffer.from([1]),i,a)}function buildAssociatedTokenAccountInstruction(e,t,r,n,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:TOKEN_PROGRAM_ID$1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ASSOCIATED_TOKEN_PROGRAM_ID;const s=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1}];return new TransactionInstruction({keys:s,programId:o,data:i})}MintLayout.span;const transferInstructionData=struct$1([u8$1("instruction"),u64$2("amount")]);function createTransferInstruction(e,t,r,n){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:TOKEN_PROGRAM_ID$1;const a=addSigners([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],r,arguments.length>4&&void 0!==arguments[4]?arguments[4]:[]),o=Buffer.alloc(transferInstructionData.span);return transferInstructionData.encode({instruction:TokenInstruction.Transfer,amount:BigInt(n)},o),new TransactionInstruction({keys:a,programId:i,data:o})}function base$1(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){const n=e.charAt(r),i=n.charCodeAt(0);if(255!==t[i])throw new TypeError(n+" is ambiguous");t[i]=r}const r=e.length,n=e.charAt(0),i=Math.log(r)/Math.log(256),a=Math.log(256)/Math.log(r);function o(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;let a=0,o=0,s=0;for(;e[a]===n;)o++,a++;const u=(e.length-a)*i+1>>>0,c=new Uint8Array(u);for(;e[a];){let n=t[e.charCodeAt(a)];if(255===n)return;let i=0;for(let e=u-1;(0!==n||i<s)&&-1!==e;e--,i++)n+=r*c[e]>>>0,c[e]=n%256>>>0,n=n/256>>>0;if(0!==n)throw new Error("Non-zero carry");s=i,a++}let d=u-s;for(;d!==u&&0===c[d];)d++;const l=new Uint8Array(o+(u-d));let p=o;for(;d!==u;)l[p++]=c[d++];return l}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";let i=0,o=0,s=0;const u=t.length;for(;s!==u&&0===t[s];)s++,i++;const c=(u-s)*a+1>>>0,d=new Uint8Array(c);for(;s!==u;){let e=t[s],n=0;for(let t=c-1;(0!==e||n<o)&&-1!==t;t--,n++)e+=256*d[t]>>>0,d[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw new Error("Non-zero carry");o=n,s++}let l=c-o;for(;l!==c&&0===d[l];)l++;let p=n.repeat(i);for(;l<c;++l)p+=e.charAt(d[l]);return p},decodeUnsafe:o,decode:function(e){const t=o(e);if(t)return t;throw new Error("Non-base"+r+" character")}}}var ALPHABET="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58=base$1(ALPHABET);class EthereumAddress extends Layout_2$1{constructor(e){super(20,e),this.blob=blob$1(20,e)}getSpan(e,t){return this.blob.getSpan(e,t)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=this.blob.decode(e,t);return"0x"+Buffer.from(r).toString("hex")}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=e.replace("0x",""),i=Buffer.from(n,"hex"),a=Buffer.alloc(20,0);return i.copy(a,20-i.length),this.blob.encode(i,t,r)}}class BorshString extends Layout_2$1{constructor(e,t){super(-1,t),this.maxLength=e}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return u32$2().span+this.maxLength;const r=u32$2().decode(e,t);return u32$2().span+r}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=u32$2().decode(e,t),n=blob$1(r).decode(e,t+u32$2().span);return uint8ArrayToBuffer_1(n).toString("utf-8")}encode(e,t,r){const n=Buffer.from(e,"utf-8");if(n.length>this.maxLength)throw new RangeError("text exceeds maxLength");if(r+n.length>t.length)throw new RangeError("text length exceeds buffer");return u32$2().encode(n.length,t,r)+blob$1(n.length).encode(n,t,r+u32$2().span)}}const ethAddress=e=>new EthereumAddress(e),borshString=(e,t)=>new BorshString(e,t);var ClaimableTokensInstruction,ClaimableTokensErrorCode;!function(e){e[e.Create=0]="Create",e[e.Transfer=1]="Transfer"}(ClaimableTokensInstruction||(ClaimableTokensInstruction={})),function(e){e[e.SignatureVerificationFailed=0]="SignatureVerificationFailed",e[e.Secp256InstructionLosing=1]="Secp256InstructionLosing",e[e.InstructionLoadError=2]="InstructionLoadError",e[e.NonceVerificationError=3]="NonceVerificationError"}(ClaimableTokensErrorCode||(ClaimableTokensErrorCode={}));const ClaimableTokensErrorMessages={[ClaimableTokensErrorCode.SignatureVerificationFailed]:"Signature verification failed",[ClaimableTokensErrorCode.Secp256InstructionLosing]:"Secp256 instruction losing",[ClaimableTokensErrorCode.InstructionLoadError]:"Instruction load error",[ClaimableTokensErrorCode.NonceVerificationError]:"Nonce verification failed"},TRANSFER_NONCE_PREFIX="N_",TRANSFER_NONCE_PREFIX_BYTES=(new TextEncoder).encode(TRANSFER_NONCE_PREFIX),SECP256K1_INSTRUCTION_MESSAGE_DATA_START=97;class ClaimableTokensProgram{static createAccountInstruction(e){let{ethAddress:t,payer:r,mint:n,authority:i,userBank:a,programId:o=ClaimableTokensProgram.programId,tokenProgramId:s=TOKEN_PROGRAM_ID$1}=e;const u=Buffer.alloc(ClaimableTokensProgram.layouts.createAccountInstructionData.span);ClaimableTokensProgram.layouts.createAccountInstructionData.encode({instruction:ClaimableTokensInstruction.Create,ethAddress:t},u);const c=[{pubkey:r,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:SystemProgram.programId,isSigner:!1,isWritable:!1}];return new TransactionInstruction({keys:c,programId:o,data:u})}static decodeCreateAccountInstruction(e){let{programId:t,keys:[r,n,i,a,o,s,u],data:c}=e;return{programId:t,keys:{payer:r,mint:n,authority:i,userBank:a,rent:o,tokenProgramId:s,systemProgramId:u},data:ClaimableTokensProgram.layouts.createAccountInstructionData.decode(c)}}static createTransferInstruction(e){let{payer:t,sourceEthAddress:r,sourceUserBank:n,destination:i,nonceAccount:a,authority:o,programId:s=ClaimableTokensProgram.programId,tokenProgramId:u=TOKEN_PROGRAM_ID$1}=e;const c=Buffer.alloc(ClaimableTokensProgram.layouts.unsignedTransferInstructionData.span);ClaimableTokensProgram.layouts.unsignedTransferInstructionData.encode({instruction:ClaimableTokensInstruction.Transfer,sender:r},c);const d=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_INSTRUCTIONS_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!1}];return new TransactionInstruction({programId:s,keys:d,data:c})}static decodeTransferInstruction(e){let{programId:t,keys:[r,n,i,a,o,s,u,c,d],data:l}=e;return{programId:t,keys:{payer:r,sourceUserBank:n,destination:i,nonceAccount:a,authority:o,rent:s,sysvarInstructions:u,systemProgramId:c,tokenProgramId:d},data:ClaimableTokensProgram.layouts.unsignedTransferInstructionData.decode(l)}}static decodeInstruction(e){switch(e.data[0]){case ClaimableTokensInstruction.Create:return ClaimableTokensProgram.decodeCreateAccountInstruction(e);case ClaimableTokensInstruction.Transfer:return ClaimableTokensProgram.decodeTransferInstruction(e);default:throw new Error("Invalid Claimable Token Program Instruction")}}static isCreateAccountInstruction(e){return e.data.instruction===ClaimableTokensInstruction.Create}static isTransferInstruction(e){return e.data.instruction===ClaimableTokensInstruction.Transfer}static createSignedTransferInstructionData(e){let{destination:t,amount:r,nonce:n}=e;const i=Buffer.alloc(ClaimableTokensProgram.layouts.signedTransferInstructionData.span);return ClaimableTokensProgram.layouts.signedTransferInstructionData.encode({destination:t,amount:r,nonce:n},i),i}static decodeSignedTransferInstructionData(e){return ClaimableTokensProgram.layouts.signedTransferInstructionData.decode(Uint8Array.from(e.data).slice(SECP256K1_INSTRUCTION_MESSAGE_DATA_START))}static deriveNonce(e){let{ethAddress:t,programId:r,authority:n}=e;const i=ethAddress(),a=Buffer.alloc(i.span);i.encode(t,a);const o=Uint8Array.from([...TRANSFER_NONCE_PREFIX_BYTES,...a]);return PublicKey.findProgramAddressSync([n.toBytes().slice(0,32),o],r)[0]}static async deriveUserBank(e){let{ethAddress:t,claimableTokensPDA:r,tokenProgramId:n=TOKEN_PROGRAM_ID$1}=e;const i=ethAddress(),a=Buffer.alloc(i.span);i.encode(t,a);const o=bs58.encode(a);return await PublicKey.createWithSeed(r,o,n)}}ClaimableTokensProgram.programId=new PublicKey("Ewkv3JahEFRKkcJmpoKB7pXbnUHwjAyXiwEo4ZY2rezQ"),ClaimableTokensProgram.layouts={createAccountInstructionData:struct$1([u8$1("instruction"),ethAddress("ethAddress")]),unsignedTransferInstructionData:struct$1([u8$1("instruction"),ethAddress("sender")]),signedTransferInstructionData:struct$1([publicKey$3("destination"),u64$2("amount"),u64$2("nonce")]),nonceAccountData:struct$1([u8$1("version"),u64$2("nonce")])},ClaimableTokensProgram.deriveAuthority=e=>{let{programId:t,mint:r}=e;return PublicKey.findProgramAddressSync([r.toBytes().slice(0,32)],t)[0]};class AttestationLayout extends Layout_2$1{constructor(e){super(83,e)}getSpan(e){return this.span}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=Buffer.from("_","utf-8"),n=ethAddress().decode(e,t);t+=ethAddress().span+1;const i=u64$2().decode(e,t);t+=u64$2().span+1;const a=e.slice(t).findIndex((e=>e===r[0]||0===e)),o=a>-1?a:e.byteLength-t,s=blob$1(o).decode(e,t);return t+=o+1,{recipientEthAddress:n,amount:i,disbursementId:Buffer.from(s).toString("utf-8"),antiAbuseOracleEthAddress:t<e.byteLength?ethAddress().decode(e,t):null}}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=Buffer.from("_","utf-8");let i=r;return i+=ethAddress().encode(e.recipientEthAddress,t,i),i+=blob$1(1).encode(n,t,i),i+=u64$2().encode(e.amount,t,i),i+=blob$1(1).encode(n,t,i),i+=utf8$1(32).encode(e.disbursementId,t,i),e.antiAbuseOracleEthAddress&&(i+=blob$1(1).encode(n,t,i),i+=ethAddress().encode(e.antiAbuseOracleEthAddress,t,i)),i-r}}const attestationLayout=e=>new AttestationLayout(e),encoder$1=new TextEncoder,SENDER_ATTESTATION_PREFIX="add",SENDER_ATTESTATION_PREFIX_BYTES=encoder$1.encode(SENDER_ATTESTATION_PREFIX);class SenderAttestationLayout extends Layout_2$1{constructor(e){super(55,e)}decode(e,t){throw new Error("Method not implemented.")}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return r+=blob$1(3).encode(SENDER_ATTESTATION_PREFIX_BYTES,t,r),r+=publicKey$3().encode(e.rewardManagerState,t,r),r+=ethAddress().encode(e.senderEthAddress,t,r),r}}const senderAttestationLayout=e=>new SenderAttestationLayout(e);var RewardManagerInstruction,RewardManagerErrorCode;!function(e){e[e.Init=0]="Init",e[e.ChangeManagerAccount=1]="ChangeManagerAccount",e[e.CreateSender=2]="CreateSender",e[e.DeleteSender=3]="DeleteSender",e[e.CreateSenderPublic=4]="CreateSenderPublic",e[e.DeleteSenderPublic=5]="DeleteSenderPublic",e[e.SubmitAttestation=6]="SubmitAttestation",e[e.EvaluateAttestations=7]="EvaluateAttestations"}(RewardManagerInstruction||(RewardManagerInstruction={})),function(e){e[e.IncorrectOwner=0]="IncorrectOwner",e[e.SignCollision=1]="SignCollision",e[e.WrongSigner=2]="WrongSigner",e[e.NotEnoughSigners=3]="NotEnoughSigners",e[e.Secp256InstructionMissing=4]="Secp256InstructionMissing",e[e.InstructionLoadError=5]="InstructionLoadError",e[e.RepeatedSenders=6]="RepeatedSenders",e[e.SignatureVerificationFailed=7]="SignatureVerificationFailed",e[e.OperatorCollision=8]="OperatorCollision",e[e.AlreadySent=9]="AlreadySent",e[e.IncorrectMessages=10]="IncorrectMessages",e[e.MessagesOverflow=11]="MessagesOverflow",e[e.MathOverflow=12]="MathOverflow",e[e.InvalidRecipient=13]="InvalidRecipient"}(RewardManagerErrorCode||(RewardManagerErrorCode={}));const RewardManagerErrorMessages={[RewardManagerErrorCode.IncorrectOwner]:"Input account owner is not the program address",[RewardManagerErrorCode.SignCollision]:"Signature with an already met principal",[RewardManagerErrorCode.WrongSigner]:"Unexpected signer met",[RewardManagerErrorCode.NotEnoughSigners]:"Isn't enough signers keys",[RewardManagerErrorCode.Secp256InstructionMissing]:"Secp256 instruction missing",[RewardManagerErrorCode.InstructionLoadError]:"Instruction load error",[RewardManagerErrorCode.RepeatedSenders]:"Repeated sender",[RewardManagerErrorCode.SignatureVerificationFailed]:"Signature verification failed",[RewardManagerErrorCode.OperatorCollision]:"Some signers have same operators",[RewardManagerErrorCode.AlreadySent]:"Funds already sent",[RewardManagerErrorCode.IncorrectMessages]:"Incorrect messages",[RewardManagerErrorCode.MessagesOverflow]:"Messages overflow",[RewardManagerErrorCode.MathOverflow]:"Math overflow",[RewardManagerErrorCode.InvalidRecipient]:"Invalid Recipient"};var _a;const encoder=new TextEncoder,SENDER_SEED_PREFIX="S_",SENDER_SEED_PREFIX_BYTES=encoder.encode(SENDER_SEED_PREFIX),ATTESTATIONS_SEED_PREFIX="V_",ATTESTATIONS_SEED_PREFIX_BYTES=encoder.encode(ATTESTATIONS_SEED_PREFIX),DISBURSEMENT_SEED_PREFIX="T_",DISBURSEMENT_SEED_PREFIX_BYTES=encoder.encode(DISBURSEMENT_SEED_PREFIX);class RewardManagerProgram{static createSenderInstruction(e){let{senderEthAddress:t,operatorEthAddress:r,rewardManagerState:n,manager:i,authority:a,payer:o,sender:s,rewardManagerProgramId:u=RewardManagerProgram.programId}=e;const c=Buffer.alloc(RewardManagerProgram.layouts.createSenderInstructionData.span);RewardManagerProgram.layouts.createSenderInstructionData.encode({instruction:RewardManagerInstruction.CreateSender,senderEthAddress:t,operatorEthAddress:r},c);const d=[{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!0,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new TransactionInstruction({programId:u,keys:d,data:c})}static decodeCreateSenderInstruction(e){let{programId:t,keys:[r,n,i,a,o,s,u],data:c}=e;return{programId:t,keys:{rewardManagerState:r,manager:n,authority:i,payer:a,sender:o,systemProgramId:s,rent:u},data:RewardManagerProgram.layouts.createSenderInstructionData.decode(c)}}static createSenderPublicInstruction(e){let{senderEthAddress:t,operatorEthAddress:r,rewardManagerState:n,authority:i,payer:a,sender:o,existingSenders:s,rewardManagerProgramId:u}=e;const c=Buffer.alloc(RewardManagerProgram.layouts.createSenderPublicInstructionData.span);RewardManagerProgram.layouts.createSenderPublicInstructionData.encode({instruction:RewardManagerInstruction.CreateSenderPublic,senderEthAddress:t,operatorEthAddress:r},c);const d=[{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:SYSVAR_INSTRUCTIONS_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SystemProgram.programId,isSigner:!1,isWritable:!1},...s.map((e=>({pubkey:e,isSigner:!1,isWritable:!1})))];return new TransactionInstruction({programId:u,keys:d,data:c})}static decodeCreateSenderPublicInstruction(e){let{programId:t,keys:[r,n,i,a,o,s,u,...c],data:d}=e;return{programId:t,keys:{rewardManagerState:r,authority:n,payer:i,sender:a,sysvarInstructions:o,rent:s,systemProgramId:u,existingSenders:c},data:RewardManagerProgram.layouts.createSenderPublicInstructionData.decode(d)}}static decodeDeleteSenderPublicInstruction(e){let{programId:t,keys:[r,n,i,a,...o]}=e;return{programId:t,keys:{rewardManagerState:r,sender:n,refunder:i,sysvarInstructions:a,existingSenders:o},data:{instruction:RewardManagerInstruction.DeleteSenderPublic}}}static decodeSubmitAttestationInstruction(e){let{programId:t,keys:[r,n,i,a,o,s,u,c],data:d}=e;return{programId:t,keys:{attestations:r,rewardManagerState:n,authority:i,payer:a,sender:o,rent:s,sysvarInstructions:u,systemProgramId:c},data:RewardManagerProgram.layouts.submitAttestationInstructionData.decode(d)}}static decodeEvaluateAttestationsInstruction(e){let{programId:t,keys:[r,n,i,a,o,s,u,c,d,l,p],data:h}=e;return{programId:t,keys:{attestations:r,rewardManagerState:n,authority:i,rewardManagerTokenSource:a,destinationUserbank:o,disbursementAccount:s,antiAbuseOracle:u,payer:c,rent:d,tokenProgramId:l,systemProgramId:p},data:RewardManagerProgram.layouts.evaluateAttestationsInstructionData.decode(h)}}static decodeInstruction(e){switch(e.data[0]){case RewardManagerInstruction.Init:case RewardManagerInstruction.ChangeManagerAccount:throw new Error("Not Implemented");case RewardManagerInstruction.CreateSender:return RewardManagerProgram.decodeCreateSenderInstruction(e);case RewardManagerInstruction.DeleteSender:throw new Error("Not Implemented");case RewardManagerInstruction.CreateSenderPublic:return RewardManagerProgram.decodeCreateSenderPublicInstruction(e);case RewardManagerInstruction.DeleteSenderPublic:return RewardManagerProgram.decodeDeleteSenderPublicInstruction(e);case RewardManagerInstruction.SubmitAttestation:return RewardManagerProgram.decodeSubmitAttestationInstruction(e);case RewardManagerInstruction.EvaluateAttestations:return RewardManagerProgram.decodeEvaluateAttestationsInstruction(e);default:throw new Error("Invalid RewardManager Instruction")}}static isCreateSenderInstruction(e){return e.data.instruction===RewardManagerInstruction.CreateSender}static isCreateSenderPublicInstruction(e){return e.data.instruction===RewardManagerInstruction.CreateSenderPublic}static isDeleteSenderPublicInstruction(e){return e.data.instruction===RewardManagerInstruction.DeleteSenderPublic}static isSubmitAttestationInstruction(e){return e.data.instruction===RewardManagerInstruction.SubmitAttestation}static isEvaluateAttestationsInstruction(e){return e.data.instruction===RewardManagerInstruction.EvaluateAttestations}static encodeAttestation(e){const t=Buffer.alloc(attestationLayout().span),r=attestationLayout().encode(e,t);return t.subarray(0,r)}static decodeAttestation(e){return attestationLayout().decode(e)}static decodeAttestationsAccountData(e,t){const r=this.layouts.attestationsAccountData(e).decode(t);r.messages=r.messages.slice(0,r.count);for(let e=0;e<r.messages.length;e++)"0x0000000000000000000000000000000000000000"===r.messages[e].attestation.antiAbuseOracleEthAddress&&(r.messages[e].attestation.antiAbuseOracleEthAddress=null);return r}static deriveAuthority(e){let{programId:t,rewardManagerState:r}=e;return PublicKey.findProgramAddressSync([r.toBytes().slice(0,32)],t)[0]}static deriveSender(e){let{ethAddress:t,programId:r,authority:n}=e;const i=ethAddress(t),a=Buffer.alloc(i.span);i.encode(t,a);const o=Uint8Array.from([...SENDER_SEED_PREFIX_BYTES,...a]);return PublicKey.findProgramAddressSync([n.toBytes().slice(0,32),o],r)[0]}static deriveAttestations(e){let{disbursementId:t,programId:r,authority:n}=e;const i=new TextEncoder,a=Uint8Array.from([...ATTESTATIONS_SEED_PREFIX_BYTES,...i.encode(t)]);return PublicKey.findProgramAddressSync([n.toBytes().slice(0,32),a],r)[0]}static deriveDisbursement(e){let{disbursementId:t,programId:r,authority:n}=e;const i=new TextEncoder,a=Uint8Array.from([...DISBURSEMENT_SEED_PREFIX_BYTES,...i.encode(t)]);return PublicKey.findProgramAddressSync([n.toBytes().slice(0,32),a],r)[0]}static encodeSignature(e){const t=e.slice(-2),r=Buffer.from(t,"hex"),n=e.substring(0,e.length-2).replace("0x","").padStart(128,"0").substring(0,128);return{signature:Buffer.from(n,"hex"),recoveryId:r.readInt8()}}static decodeRewardManagerState(e){return RewardManagerProgram.layouts.rewardManagerStateData.decode(e)}static encodeSenderAttestation(e){const t=Buffer.alloc(senderAttestationLayout().span),r=senderAttestationLayout().encode(e,t);return t.subarray(0,r)}}_a=RewardManagerProgram,RewardManagerProgram.programId=new PublicKey("DDZDcYdQFEMwcu2Mwo75yGFjJ1mUQyyXLWzhZLEVFcei"),RewardManagerProgram.layouts={createSenderInstructionData:struct$1([u8$1("instruction"),ethAddress("senderEthAddress"),ethAddress("operatorEthAddress")]),createSenderPublicInstructionData:struct$1([u8$1("instruction"),ethAddress("senderEthAddress"),ethAddress("operatorEthAddress")]),evaluateAttestationsInstructionData:struct$1([u8$1("instruction"),u64$2("amount"),borshString(32,"disbursementId"),ethAddress("recipientEthAddress")]),submitAttestationInstructionData:struct$1([u8$1("instruction"),borshString(32,"disbursementId")]),rewardManagerStateData:struct$1([u8$1("version"),publicKey$3("tokenAccount"),publicKey$3("manager"),u8$1("minVotes")]),attestationsAccountData:e=>struct$1([u8$1("version"),publicKey$3("rewardManagerState"),u8$1("count"),seq(struct$1([ethAddress("senderEthAddress"),attestationLayout("attestation"),blob$1(45),ethAddress("operator")]),e,"messages")])},RewardManagerProgram.createSubmitAttestationInstruction=e=>{let{disbursementId:t,attestations:r,rewardManagerState:n,authority:i,payer:a,sender:o,rewardManagerProgramId:s=RewardManagerProgram.programId}=e;const u=Buffer.alloc(_a.layouts.submitAttestationInstructionData.span),c=_a.layouts.submitAttestationInstructionData.encode({instruction:RewardManagerInstruction.SubmitAttestation,disbursementId:t},u),d=u.subarray(0,c),l=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SYSVAR_INSTRUCTIONS_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:SystemProgram.programId,isSigner:!1,isWritable:!1}];return new TransactionInstruction({programId:s,keys:l,data:d})},RewardManagerProgram.createEvaluateAttestationsInstruction=e=>{let{disbursementId:t,recipientEthAddress:r,amount:n,attestations:i,rewardManagerState:a,authority:o,rewardManagerTokenSource:s,destinationUserBank:u,disbursementAccount:c,antiAbuseOracle:d,payer:l,tokenProgramId:p=TOKEN_PROGRAM_ID$1,rewardManagerProgramId:h=RewardManagerProgram.programId}=e;const f=Buffer.alloc(RewardManagerProgram.layouts.evaluateAttestationsInstructionData.span),m=RewardManagerProgram.layouts.evaluateAttestationsInstructionData.encode({instruction:RewardManagerInstruction.EvaluateAttestations,disbursementId:t,amount:n,recipientEthAddress:r},f),y=f.subarray(0,m),g=[{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!0,isWritable:!0},{pubkey:SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:SystemProgram.programId,isSigner:!1,isWritable:!1}];return new TransactionInstruction({programId:h,keys:g,data:y})};var _nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty});
/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
const _0n$1=BigInt(0),_1n$1=BigInt(1),_2n$1=BigInt(2),_3n=BigInt(3),_8n=BigInt(8),CURVE=Object.freeze({a:_0n$1,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:_1n$1,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});function weistrass(e){const{a:t,b:r}=CURVE,n=mod(e*e),i=mod(n*e);return mod(i+t*e+r)}const USE_ENDOMORPHISM=CURVE.a===_0n$1;class ShaError extends Error{constructor(e){super(e)}}class JacobianPoint{constructor(e,t,r){this.x=e,this.y=t,this.z=r}static fromAffine(e){if(!(e instanceof Point))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new JacobianPoint(e.x,e.y,_1n$1)}static toAffineBatch(e){const t=invertBatch(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return JacobianPoint.toAffineBatch(e).map(JacobianPoint.fromAffine)}equals(e){if(!(e instanceof JacobianPoint))throw new TypeError("JacobianPoint expected");const{x:t,y:r,z:n}=this,{x:i,y:a,z:o}=e,s=mod(n*n),u=mod(o*o),c=mod(t*u),d=mod(i*s),l=mod(mod(r*o)*u),p=mod(mod(a*n)*s);return c===d&&l===p}negate(){return new JacobianPoint(this.x,mod(-this.y),this.z)}double(){const{x:e,y:t,z:r}=this,n=mod(e*e),i=mod(t*t),a=mod(i*i),o=e+i,s=mod(_2n$1*(mod(o*o)-n-a)),u=mod(_3n*n),c=mod(u*u),d=mod(c-_2n$1*s),l=mod(u*(s-d)-_8n*a),p=mod(_2n$1*t*r);return new JacobianPoint(d,l,p)}add(e){if(!(e instanceof JacobianPoint))throw new TypeError("JacobianPoint expected");const{x:t,y:r,z:n}=this,{x:i,y:a,z:o}=e;if(i===_0n$1||a===_0n$1)return this;if(t===_0n$1||r===_0n$1)return e;const s=mod(n*n),u=mod(o*o),c=mod(t*u),d=mod(i*s),l=mod(mod(r*o)*u),p=mod(mod(a*n)*s),h=mod(d-c),f=mod(p-l);if(h===_0n$1)return f===_0n$1?this.double():JacobianPoint.ZERO;const m=mod(h*h),y=mod(h*m),g=mod(c*m),b=mod(f*f-y-_2n$1*g),v=mod(f*(g-b)-l*y),w=mod(n*o*h);return new JacobianPoint(b,v,w)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=JacobianPoint.ZERO;if("bigint"==typeof e&&e===_0n$1)return t;let r=normalizeScalar(e);if(r===_1n$1)return this;if(!USE_ENDOMORPHISM){let e=t,n=this;for(;r>_0n$1;)r&_1n$1&&(e=e.add(n)),n=n.double(),r>>=_1n$1;return e}let{k1neg:n,k1:i,k2neg:a,k2:o}=splitScalarEndo(r),s=t,u=t,c=this;for(;i>_0n$1||o>_0n$1;)i&_1n$1&&(s=s.add(c)),o&_1n$1&&(u=u.add(c)),c=c.double(),i>>=_1n$1,o>>=_1n$1;return n&&(s=s.negate()),a&&(u=u.negate()),u=new JacobianPoint(mod(u.x*CURVE.beta),u.y,u.z),s.add(u)}precomputeWindow(e){const t=USE_ENDOMORPHISM?128/e+1:256/e+1,r=[];let n=this,i=n;for(let a=0;a<t;a++){i=n,r.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(e,t){!t&&this.equals(JacobianPoint.BASE)&&(t=Point.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&pointPrecomputes.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=JacobianPoint.normalizeZ(n),pointPrecomputes.set(t,n)));let i=JacobianPoint.ZERO,a=JacobianPoint.ZERO;const o=1+(USE_ENDOMORPHISM?128/r:256/r),s=2**(r-1),u=BigInt(2**r-1),c=2**r,d=BigInt(r);for(let t=0;t<o;t++){const r=t*s;let o=Number(e&u);if(e>>=d,o>s&&(o-=c,e+=_1n$1),0===o){let e=n[r];t%2&&(e=e.negate()),a=a.add(e)}else{let e=n[r+Math.abs(o)-1];o<0&&(e=e.negate()),i=i.add(e)}}return{p:i,f:a}}multiply(e,t){let r,n,i=normalizeScalar(e);if(USE_ENDOMORPHISM){const{k1neg:e,k1:a,k2neg:o,k2:s}=splitScalarEndo(i);let{p:u,f:c}=this.wNAF(a,t),{p:d,f:l}=this.wNAF(s,t);e&&(u=u.negate()),o&&(d=d.negate()),d=new JacobianPoint(mod(d.x*CURVE.beta),d.y,d.z),r=u.add(d),n=c.add(l)}else{const{p:e,f:a}=this.wNAF(i,t);r=e,n=a}return JacobianPoint.normalizeZ([r,n])[0]}toAffine(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:invert(this.z);const{x:t,y:r,z:n}=this,i=e,a=mod(i*i),o=mod(a*i),s=mod(t*a),u=mod(r*o);if(mod(n*i)!==_1n$1)throw new Error("invZ was invalid");return new Point(s,u)}}JacobianPoint.BASE=new JacobianPoint(CURVE.Gx,CURVE.Gy,_1n$1),JacobianPoint.ZERO=new JacobianPoint(_0n$1,_1n$1,_0n$1);const pointPrecomputes=new WeakMap;class Point{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,pointPrecomputes.delete(this)}hasEvenY(){return this.y%_2n$1===_0n$1}static fromCompressedHex(e){const t=32===e.length,r=bytesToNumber(t?e:e.subarray(1));if(!isValidFieldElement(r))throw new Error("Point is not on curve");let n=sqrtMod(weistrass(r));const i=(n&_1n$1)===_1n$1;if(t)i&&(n=mod(-n));else{1==(1&e[0])!==i&&(n=mod(-n))}const a=new Point(r,n);return a.assertValidity(),a}static fromUncompressedHex(e){const t=bytesToNumber(e.subarray(1,33)),r=bytesToNumber(e.subarray(33,65)),n=new Point(t,r);return n.assertValidity(),n}static fromHex(e){const t=ensureBytes$1(e),r=t.length,n=t[0];if(32===r||33===r&&(2===n||3===n))return this.fromCompressedHex(t);if(65===r&&4===n)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r}`)}static fromPrivateKey(e){return Point.BASE.multiply(normalizePrivateKey(e))}static fromSignature(e,t,r){const n=truncateHash(e=ensureBytes$1(e)),{r:i,s:a}=normalizeSignature(t);if(0!==r&&1!==r)throw new Error("Cannot recover signature: invalid recovery bit");const o=1&r?"03":"02",s=Point.fromHex(o+numTo32bStr(i)),{n:u}=CURVE,c=invert(i,u),d=mod(-n*c,u),l=mod(a*c,u),p=Point.BASE.multiplyAndAddUnsafe(s,d,l);if(!p)throw new Error("Cannot recover signature: point at infinify");return p.assertValidity(),p}toRawBytes(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return hexToBytes(this.toHex(e))}toHex(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=numTo32bStr(this.x);if(e){return`${this.hasEvenY()?"02":"03"}${t}`}return`04${t}${numTo32bStr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:r}=this;if(!isValidFieldElement(t)||!isValidFieldElement(r))throw new Error(e);const n=mod(r*r);if(mod(n-weistrass(t))!==_0n$1)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Point(this.x,mod(-this.y))}double(){return JacobianPoint.fromAffine(this).double().toAffine()}add(e){return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return JacobianPoint.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,r){const n=JacobianPoint.fromAffine(this),i=t===_0n$1||t===_1n$1||this!==Point.BASE?n.multiplyUnsafe(t):n.multiply(t),a=JacobianPoint.fromAffine(e).multiplyUnsafe(r),o=i.add(a);return o.equals(JacobianPoint.ZERO)?void 0:o.toAffine()}}function sliceDER(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function parseDERInt(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${bytesToHex$1(e)}`);const t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:bytesToNumber(r),left:e.subarray(t+2)}}function parseDERSignature(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${bytesToHex$1(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:r}=parseDERInt(e.subarray(2)),{data:n,left:i}=parseDERInt(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${bytesToHex$1(i)}`);return{r:t,s:n}}Point.BASE=new Point(CURVE.Gx,CURVE.Gy),Point.ZERO=new Point(_0n$1,_0n$1);class Signature{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=e instanceof Uint8Array,r="Signature.fromCompact";if("string"!=typeof e&&!t)throw new TypeError(`${r}: Expected string or Uint8Array`);const n=t?bytesToHex$1(e):e;if(128!==n.length)throw new Error(`${r}: Expected 64-byte hex`);return new Signature(hexToNumber(n.slice(0,64)),hexToNumber(n.slice(64,128)))}static fromDER(e){const t=e instanceof Uint8Array;if("string"!=typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:r,s:n}=parseDERSignature(t?e:hexToBytes(e));return new Signature(r,n)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!isWithinCurveOrder(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!isWithinCurveOrder(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=CURVE.n>>_1n$1;return this.s>e}normalizeS(){return this.hasHighS()?new Signature(this.r,CURVE.n-this.s):this}toDERRawBytes(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return hexToBytes(this.toDERHex(e))}toDERHex(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=sliceDER(numberToHexUnpadded(this.s));if(e)return t;const r=sliceDER(numberToHexUnpadded(this.r)),n=numberToHexUnpadded(r.length/2),i=numberToHexUnpadded(t.length/2);return`30${numberToHexUnpadded(r.length/2+t.length/2+4)}02${n}${r}02${i}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}}function concatBytes$1(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const n=t.reduce(((e,t)=>e+t.length),0),i=new Uint8Array(n);for(let e=0,r=0;e<t.length;e++){const n=t[e];i.set(n,r),r+=n.length}return i}const hexes$1=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function bytesToHex$1(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=hexes$1[e[r]];return t}const POW_2_256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function numTo32bStr(e){if("bigint"!=typeof e)throw new Error("Expected bigint");if(!(_0n$1<=e&&e<POW_2_256))throw new Error("Expected number < 2^256");return e.toString(16).padStart(64,"0")}function numTo32b(e){const t=hexToBytes(numTo32bStr(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function numberToHexUnpadded(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function hexToNumber(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function hexToBytes(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");t[r]=a}return t}function bytesToNumber(e){return hexToNumber(bytesToHex$1(e))}function ensureBytes$1(e){return e instanceof Uint8Array?Uint8Array.from(e):hexToBytes(e)}function normalizeScalar(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&isWithinCurveOrder(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function mod(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CURVE.P;const r=e%t;return r>=_0n$1?r:t+r}function pow2(e,t){const{P:r}=CURVE;let n=e;for(;t-- >_0n$1;)n*=n,n%=r;return n}function sqrtMod(e){const{P:t}=CURVE,r=BigInt(6),n=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),s=BigInt(88),u=e*e*e%t,c=u*u*e%t,d=pow2(c,_3n)*c%t,l=pow2(d,_3n)*c%t,p=pow2(l,_2n$1)*u%t,h=pow2(p,n)*p%t,f=pow2(h,i)*h%t,m=pow2(f,o)*f%t,y=pow2(m,s)*m%t,g=pow2(y,o)*f%t,b=pow2(g,_3n)*c%t,v=pow2(b,a)*h%t,w=pow2(v,r)*u%t;return pow2(w,_2n$1)}function invert(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CURVE.P;if(e===_0n$1||t<=_0n$1)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=mod(e,t),n=t,i=_0n$1,a=_1n$1;for(;r!==_0n$1;){const e=n%r,t=i-a*(n/r);n=r,r=e,i=a,a=t}if(n!==_1n$1)throw new Error("invert: does not exist");return mod(i,t)}function invertBatch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CURVE.P;const r=new Array(e.length),n=e.reduce(((e,n,i)=>n===_0n$1?e:(r[i]=e,mod(e*n,t))),_1n$1),i=invert(n,t);return e.reduceRight(((e,n,i)=>n===_0n$1?e:(r[i]=mod(e*r[i],t),mod(e*n,t))),i),r}const divNearest=(e,t)=>(e+t/_2n$1)/t,ENDO={a1:BigInt("0x3086d221a7d46bcde86c90e49284eb15"),b1:-_1n$1*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a2:BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),b2:BigInt("0x3086d221a7d46bcde86c90e49284eb15"),POW_2_128:BigInt("0x100000000000000000000000000000000")};function splitScalarEndo(e){const{n:t}=CURVE,{a1:r,b1:n,a2:i,b2:a,POW_2_128:o}=ENDO,s=divNearest(a*e,t),u=divNearest(-n*e,t);let c=mod(e-s*r-u*i,t),d=mod(-s*n-u*a,t);const l=c>o,p=d>o;if(l&&(c=t-c),p&&(d=t-d),c>o||d>o)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:l,k1:c,k2neg:p,k2:d}}function truncateHash(e){const{n:t}=CURVE,r=8*e.length-256;let n=bytesToNumber(e);return r>0&&(n>>=BigInt(r)),n>=t&&(n-=t),n}let _sha256Sync,_hmacSha256Sync;class HmacDrbg{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return utils$f.hmacSha256(this.k,...t)}hmacSync(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return _hmacSha256Sync(this.k,...t)}checkSync(){if("function"!=typeof _hmacSha256Sync)throw new ShaError("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.checkSync(),this.incr(),this.v=this.hmacSync(this.v),this.v}}function isWithinCurveOrder(e){return _0n$1<e&&e<CURVE.n}function isValidFieldElement(e){return _0n$1<e&&e<CURVE.P}function kmdToSig(e,t,r){const n=bytesToNumber(e);if(!isWithinCurveOrder(n))return;const{n:i}=CURVE,a=Point.BASE.multiply(n),o=mod(a.x,i);if(o===_0n$1)return;const s=mod(invert(n,i)*mod(t+r*o,i),i);if(s===_0n$1)return;const u=new Signature(o,s);return{sig:u,recovery:(a.x===u.r?0:2)|Number(a.y&_1n$1)}}function normalizePrivateKey(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(64!==e.length)throw new Error("Expected 32 bytes of private key");t=hexToNumber(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(32!==e.length)throw new Error("Expected 32 bytes of private key");t=bytesToNumber(e)}if(!isWithinCurveOrder(t))throw new Error("Expected private key: 0 < key < n");return t}function normalizePublicKey(e){return e instanceof Point?(e.assertValidity(),e):Point.fromHex(e)}function normalizeSignature(e){if(e instanceof Signature)return e.assertValidity(),e;try{return Signature.fromDER(e)}catch(t){return Signature.fromCompact(e)}}function isProbPub(e){const t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?33===n||65===n:r?66===n||130===n:e instanceof Point}function getSharedSecret$1(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(isProbPub(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!isProbPub(t))throw new TypeError("getSharedSecret: second arg must be public key");const n=normalizePublicKey(t);return n.assertValidity(),n.multiply(normalizePrivateKey(e)).toRawBytes(r)}function bits2int(e){return bytesToNumber(e.length>32?e.slice(0,32):e)}function bits2octets(e){const t=bits2int(e),r=mod(t,CURVE.n);return int2octets(r<_0n$1?t:r)}function int2octets(e){return numTo32b(e)}function initSigArgs(e,t,r){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const n=ensureBytes$1(e),i=normalizePrivateKey(t),a=[int2octets(i),bits2octets(n)];if(null!=r){!0===r&&(r=utils$f.randomBytes(32));const e=ensureBytes$1(r);if(32!==e.length)throw new Error("sign: Expected 32 bytes of extra data");a.push(e)}return{seed:concatBytes$1(...a),m:bits2int(n),d:i}}function finalizeSig(e,t){let{sig:r,recovery:n}=e;const{canonical:i,der:a,recovered:o}=Object.assign({canonical:!0,der:!0},t);i&&r.hasHighS()&&(r=r.normalizeS(),n^=1);const s=a?r.toDERRawBytes():r.toCompactRawBytes();return o?[s,n]:s}async function sign$2(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{seed:n,m:i,d:a}=initSigArgs(e,t,r.extraEntropy);let o;const s=new HmacDrbg;for(await s.reseed(n);!(o=kmdToSig(await s.generate(),i,a));)await s.reseed();return finalizeSig(o,r)}Point.BASE._setWindowSize(8);const crypto$2={node:_nodeResolve_empty$1,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},TAGGED_HASH_PREFIXES={},utils$f={bytesToHex:bytesToHex$1,hexToBytes:hexToBytes,concatBytes:concatBytes$1,mod:mod,invert:invert,isValidPrivateKey(e){try{return normalizePrivateKey(e),!0}catch(e){return!1}},_bigintTo32Bytes:numTo32b,_normalizePrivateKey:normalizePrivateKey,hashToPrivateKey:e=>{if((e=ensureBytes$1(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return numTo32b(mod(bytesToNumber(e),CURVE.n-_1n$1)+_1n$1)},randomBytes:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(crypto$2.web)return crypto$2.web.getRandomValues(new Uint8Array(e));if(crypto$2.node){const{randomBytes:t}=crypto$2.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>utils$f.hashToPrivateKey(utils$f.randomBytes(40)),sha256:async function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(crypto$2.web){const e=await crypto$2.web.subtle.digest("SHA-256",concatBytes$1(...t));return new Uint8Array(e)}if(crypto$2.node){const{createHash:e}=crypto$2.node,r=e("sha256");return t.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(crypto$2.web){const t=await crypto$2.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=concatBytes$1(...r),i=await crypto$2.web.subtle.sign("HMAC",t,n);return new Uint8Array(i)}if(crypto$2.node){const{createHmac:t}=crypto$2.node,n=t("sha256",e);return r.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async function(e){let t=TAGGED_HASH_PREFIXES[e];if(void 0===t){const r=await utils$f.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=concatBytes$1(r,r),TAGGED_HASH_PREFIXES[e]=t}for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return utils$f.sha256(t,...n)},taggedHashSync:function(e){if("function"!=typeof _sha256Sync)throw new ShaError("sha256Sync is undefined, you need to set it");let t=TAGGED_HASH_PREFIXES[e];if(void 0===t){const r=_sha256Sync(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=concatBytes$1(r,r),TAGGED_HASH_PREFIXES[e]=t}for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return _sha256Sync(t,...n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Point.BASE;const r=t===Point.BASE?t:new Point(t.x,t.y);return r._setWindowSize(e),r.multiply(_3n),r}};var AssociatedTokenInstruction;Object.defineProperties(utils$f,{sha256Sync:{configurable:!1,get:()=>_sha256Sync,set(e){_sha256Sync||(_sha256Sync=e)}},hmacSha256Sync:{configurable:!1,get:()=>_hmacSha256Sync,set(e){_hmacSha256Sync||(_hmacSha256Sync=e)}}}),struct$1([u8$1("numSignatures"),u16("signatureOffset"),u8$1("signatureInstructionIndex"),u16("ethAddressOffset"),u8$1("ethAddressInstructionIndex"),u16("messageDataOffset"),u16("messageDataSize"),u8$1("messageInstructionIndex"),blob$1(20,"ethAddress"),blob$1(64,"signature"),u8$1("recoveryId")]),function(e){e[e.Create=0]="Create",e[e.CreateIdempotent=1]="CreateIdempotent",e[e.RecoverNested=2]="RecoverNested"}(AssociatedTokenInstruction||(AssociatedTokenInstruction={}));const IDL={version:"0.1.0",name:"payment_router",instructions:[{name:"createPaymentRouterBalancePda",accounts:[{name:"paymentRouterPda",isMut:!0,isSigner:!1,docs:["before transferring them over to given recipients, all within the same transaction."]},{name:"payer",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"route",accounts:[{name:"sender",isMut:!0,isSigner:!1},{name:"senderOwner",isMut:!1,isSigner:!1},{name:"splToken",isMut:!1,isSigner:!1}],args:[{name:"paymentRouterPdaBump",type:"u8"},{name:"amounts",type:{vec:"u64"}},{name:"totalAmount",type:"u64"}]}],errors:[{code:6e3,name:"SenderTokenAccountNotOwnedByPDA",msg:"Sender token account not owned by PDA."},{code:6001,name:"RecipientAmountMismatch",msg:"Number of recipients does not match number of amounts."},{code:6002,name:"TotalAmountMismatch",msg:"Total of individual amounts does not match total amount."}]};var camelcase={exports:{}};const UPPERCASE=/[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1C89\u1C90-\u1CBA\u1CBD-\u1CBF\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2F\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uA7B8\uA7BA\uA7BC\uA7BE\uA7C0\uA7C2\uA7C4-\uA7C7\uA7C9\uA7CB\uA7CC\uA7D0\uA7D6\uA7D8\uA7DA\uA7DC\uA7F5\uFF21-\uFF3A\u{10400}-\u{10427}\u{104B0}-\u{104D3}\u{10570}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10C80}-\u{10CB2}\u{10D50}-\u{10D65}\u{118A0}-\u{118BF}\u{16E40}-\u{16E5F}\u{1D400}-\u{1D419}\u{1D434}-\u{1D44D}\u{1D468}-\u{1D481}\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B5}\u{1D4D0}-\u{1D4E9}\u{1D504}\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D538}\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D56C}-\u{1D585}\u{1D5A0}-\u{1D5B9}\u{1D5D4}-\u{1D5ED}\u{1D608}-\u{1D621}\u{1D63C}-\u{1D655}\u{1D670}-\u{1D689}\u{1D6A8}-\u{1D6C0}\u{1D6E2}-\u{1D6FA}\u{1D71C}-\u{1D734}\u{1D756}-\u{1D76E}\u{1D790}-\u{1D7A8}\u{1D7CA}\u{1E900}-\u{1E921}]/u,LOWERCASE=/[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0560-\u0588\u10D0-\u10FA\u10FD-\u10FF\u13F8-\u13FD\u1C80-\u1C88\u1C8A\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5F\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7AF\uA7B5\uA7B7\uA7B9\uA7BB\uA7BD\uA7BF\uA7C1\uA7C3\uA7C8\uA7CA\uA7CD\uA7D1\uA7D3\uA7D5\uA7D7\uA7D9\uA7DB\uA7F6\uA7FA\uAB30-\uAB5A\uAB60-\uAB68\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A\u{10428}-\u{1044F}\u{104D8}-\u{104FB}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10CC0}-\u{10CF2}\u{10D70}-\u{10D85}\u{118C0}-\u{118DF}\u{16E60}-\u{16E7F}\u{1D41A}-\u{1D433}\u{1D44E}-\u{1D454}\u{1D456}-\u{1D467}\u{1D482}-\u{1D49B}\u{1D4B6}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D4CF}\u{1D4EA}-\u{1D503}\u{1D51E}-\u{1D537}\u{1D552}-\u{1D56B}\u{1D586}-\u{1D59F}\u{1D5BA}-\u{1D5D3}\u{1D5EE}-\u{1D607}\u{1D622}-\u{1D63B}\u{1D656}-\u{1D66F}\u{1D68A}-\u{1D6A5}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6E1}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D71B}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D755}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D78F}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7C9}\u{1D7CB}\u{1DF00}-\u{1DF09}\u{1DF0B}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E922}-\u{1E943}]/u,LEADING_CAPITAL=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1C89\u1C90-\u1CBA\u1CBD-\u1CBF\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2F\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uA7B8\uA7BA\uA7BC\uA7BE\uA7C0\uA7C2\uA7C4-\uA7C7\uA7C9\uA7CB\uA7CC\uA7D0\uA7D6\uA7D8\uA7DA\uA7DC\uA7F5\uFF21-\uFF3A\u{10400}-\u{10427}\u{104B0}-\u{104D3}\u{10570}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10C80}-\u{10CB2}\u{10D50}-\u{10D65}\u{118A0}-\u{118BF}\u{16E40}-\u{16E5F}\u{1D400}-\u{1D419}\u{1D434}-\u{1D44D}\u{1D468}-\u{1D481}\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B5}\u{1D4D0}-\u{1D4E9}\u{1D504}\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D538}\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D56C}-\u{1D585}\u{1D5A0}-\u{1D5B9}\u{1D5D4}-\u{1D5ED}\u{1D608}-\u{1D621}\u{1D63C}-\u{1D655}\u{1D670}-\u{1D689}\u{1D6A8}-\u{1D6C0}\u{1D6E2}-\u{1D6FA}\u{1D71C}-\u{1D734}\u{1D756}-\u{1D76E}\u{1D790}-\u{1D7A8}\u{1D7CA}\u{1E900}-\u{1E921}](?![A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1C89\u1C90-\u1CBA\u1CBD-\u1CBF\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2F\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uA7B8\uA7BA\uA7BC\uA7BE\uA7C0\uA7C2\uA7C4-\uA7C7\uA7C9\uA7CB\uA7CC\uA7D0\uA7D6\uA7D8\uA7DA\uA7DC\uA7F5\uFF21-\uFF3A\u{10400}-\u{10427}\u{104B0}-\u{104D3}\u{10570}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10C80}-\u{10CB2}\u{10D50}-\u{10D65}\u{118A0}-\u{118BF}\u{16E40}-\u{16E5F}\u{1D400}-\u{1D419}\u{1D434}-\u{1D44D}\u{1D468}-\u{1D481}\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B5}\u{1D4D0}-\u{1D4E9}\u{1D504}\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D538}\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D56C}-\u{1D585}\u{1D5A0}-\u{1D5B9}\u{1D5D4}-\u{1D5ED}\u{1D608}-\u{1D621}\u{1D63C}-\u{1D655}\u{1D670}-\u{1D689}\u{1D6A8}-\u{1D6C0}\u{1D6E2}-\u{1D6FA}\u{1D71C}-\u{1D734}\u{1D756}-\u{1D76E}\u{1D790}-\u{1D7A8}\u{1D7CA}\u{1E900}-\u{1E921}])/gu,IDENTIFIER=/([0-9A-Z_a-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0345\u0363-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05B0-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0657\u0659-\u0669\u066E-\u06D3\u06D5-\u06DC\u06E1-\u06E8\u06ED-\u06FC\u06FF\u0710-\u073F\u074D-\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0817\u081A-\u082C\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0897\u08A0-\u08C9\u08D4-\u08DF\u08E3-\u08E9\u08F0-\u093B\u093D-\u094C\u094E-\u0950\u0955-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C4\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A42\u0A47\u0A48\u0A4B\u0A4C\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC5\u0AC7-\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFC\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D-\u0B44\u0B47\u0B48\u0B4B\u0B4C\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4C\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C78-\u0C7E\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCC\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D54-\u0D63\u0D66-\u0D78\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E46\u0E4D\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F71-\u0F83\u0F88-\u0F97\u0F99-\u0FBC\u1000-\u1036\u1038\u103B-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1713\u171F-\u1733\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17B3\u17B6-\u17C8\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A61-\u1A74\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1ABF\u1AC0\u1ACC-\u1ACE\u1B00-\u1B33\u1B35-\u1B43\u1B45-\u1B4C\u1B50-\u1B59\u1B80-\u1BA9\u1BAC-\u1BE5\u1BE7-\u1BF1\u1C00-\u1C36\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1DD3-\u1DF4\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2189\u2150-\u2182\u2460-\u249B\u24B6-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA674-\uA67B\uA67F-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA805\uA807-\uA827\uA830-\uA835\uA840-\uA873\uA880-\uA8C3\uA8C5\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD-\uA92A\uA930-\uA952\uA960-\uA97C\uA980-\uA9B2\uA9B4-\uA9BF\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAABE\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10107}-\u{10133}\u{10140}-\u{10178}\u{1018A}\u{1018B}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{103A0}-\u{103C3}\u{103C8}-\u{103CF}\u{103D1}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{10570}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10858}-\u{10876}\u{10879}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A60}-\u{10A7E}\u{10A80}-\u{10A9F}\u{10AC0}-\u{10AC7}\u{10AC9}-\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D69}\u{10D6F}-\u{10D85}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}\u{10EAC}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10EFC}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F54}\u{10F70}-\u{10F81}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11000}-\u{11045}\u{11052}-\u{1106F}\u{11071}-\u{11075}\u{11080}-\u{110B8}\u{110C2}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11132}\u{11136}-\u{1113F}\u{11144}-\u{11147}\u{11150}-\u{11172}\u{11176}\u{11180}-\u{111BF}\u{111C1}-\u{111C4}\u{111CE}-\u{111DA}\u{111DC}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11234}\u{11237}\u{1123E}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A8}\u{112B0}-\u{112E8}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{11344}\u{11347}\u{11348}\u{1134B}\u{1134C}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113D1}\u{113D3}\u{11400}-\u{11441}\u{11443}-\u{11445}\u{11447}-\u{1144A}\u{11450}-\u{11459}\u{1145F}-\u{11461}\u{11480}-\u{114C1}\u{114C4}\u{114C5}\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115BE}\u{115D8}-\u{115DD}\u{11600}-\u{1163E}\u{11640}\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116B5}\u{116B8}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171D}-\u{1172A}\u{11730}-\u{1173B}\u{11740}-\u{11746}\u{11800}-\u{11838}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}\u{1193C}\u{1193F}-\u{11942}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119DF}\u{119E1}\u{119E3}\u{119E4}\u{11A00}-\u{11A32}\u{11A35}-\u{11A3E}\u{11A50}-\u{11A97}\u{11A9D}\u{11AB0}-\u{11AF8}\u{11BC0}-\u{11BE0}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C3E}\u{11C40}\u{11C50}-\u{11C6C}\u{11C72}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D41}\u{11D43}\u{11D46}\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF6}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F40}\u{11F50}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{12000}-\u{12399}\u{12400}-\u{1246E}\u{12480}-\u{12543}\u{12F90}-\u{12FF0}\u{13000}-\u{1342F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1612E}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A70}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16B00}-\u{16B2F}\u{16B40}-\u{16B43}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D6C}\u{16D70}-\u{16D79}\u{16E40}-\u{16E96}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9E}\u{1CCF0}-\u{1CCF9}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D7FF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E947}\u{1E94B}\u{1E950}-\u{1E959}\u{1EC71}-\u{1ECAB}\u{1ECAD}-\u{1ECAF}\u{1ECB1}-\u{1ECB4}\u{1ED01}-\u{1ED2D}\u{1ED2F}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10C}\u{1F130}-\u{1F149}\u{1F150}-\u{1F169}\u{1F170}-\u{1F189}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}]|$)/u,SEPARATORS=/[_.\- ]+/,LEADING_SEPARATORS=new RegExp("^"+SEPARATORS.source),SEPARATORS_AND_IDENTIFIER=new RegExp(SEPARATORS.source+IDENTIFIER.source,"gu"),NUMBERS_AND_IDENTIFIER=new RegExp("\\d+"+IDENTIFIER.source,"gu"),preserveCamelCase=(e,t,r)=>{let n=!1,i=!1,a=!1;for(let o=0;o<e.length;o++){const s=e[o];n&&UPPERCASE.test(s)?(e=e.slice(0,o)+"-"+e.slice(o),n=!1,a=i,i=!0,o++):i&&a&&LOWERCASE.test(s)?(e=e.slice(0,o-1)+"-"+e.slice(o-1),a=i,i=!1,n=!0):(n=t(s)===s&&r(s)!==s,a=i,i=r(s)===s&&t(s)!==s)}return e},preserveConsecutiveUppercase=(e,t)=>(LEADING_CAPITAL.lastIndex=0,e.replace(LEADING_CAPITAL,(e=>t(e)))),postProcess=(e,t)=>(SEPARATORS_AND_IDENTIFIER.lastIndex=0,NUMBERS_AND_IDENTIFIER.lastIndex=0,e.replace(SEPARATORS_AND_IDENTIFIER,((e,r)=>t(r))).replace(NUMBERS_AND_IDENTIFIER,(e=>t(e)))),camelCase=(e,t)=>{if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");if(t={pascalCase:!1,preserveConsecutiveUppercase:!1,...t},0===(e=Array.isArray(e)?e.map((e=>e.trim())).filter((e=>e.length)).join("-"):e.trim()).length)return"";const r=!1===t.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t.locale),n=!1===t.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(t.locale);if(1===e.length)return t.pascalCase?n(e):r(e);return e!==r(e)&&(e=preserveCamelCase(e,r,n)),e=e.replace(LEADING_SEPARATORS,""),e=t.preserveConsecutiveUppercase?preserveConsecutiveUppercase(e,r):r(e),t.pascalCase&&(e=n(e.charAt(0))+e.slice(1)),postProcess(e,n)};camelcase.exports=camelCase,camelcase.exports.default=camelCase;var camelCase$1=camelcase.exports,dist={},Layout$2={};class Layout$1{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,r){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function nameWithProperty$1(e,t){return t.property?e+"["+t.property+"]":e}function bindConstructorLayout(e,t){if("function"!=typeof e)throw new TypeError("Class must be constructor");if(e.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Layout$1))throw new TypeError("layout must be a Layout");if(t.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value:function(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(e,"decode",{value:function(e,r){return t.decode(e,r)},writable:!0})}Layout$2.Layout=Layout$1,Layout$2.nameWithProperty=nameWithProperty$1,Layout$2.bindConstructorLayout=bindConstructorLayout;class ExternalLayout$1 extends Layout$1{isCount(){throw new Error("ExternalLayout is abstract")}}class GreedyCount extends ExternalLayout$1{constructor(e,t){if(void 0===e&&(e=1),!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t){void 0===t&&(t=0);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}class OffsetLayout$1 extends ExternalLayout$1{constructor(e,t,r){if(!(e instanceof Layout$1))throw new TypeError("layout must be a Layout");if(void 0===t)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof UInt$1||this.layout instanceof UIntBE$1}decode(e,t){return void 0===t&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,r){return void 0===r&&(r=0),this.layout.encode(e,t,r+this.offset)}}class UInt$1 extends Layout$1{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeUIntLE(e,r,this.span),this.span}}class UIntBE$1 extends Layout$1{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeUIntBE(e,r,this.span),this.span}}class Int extends Layout$1{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readIntLE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeIntLE(e,r,this.span),this.span}}class IntBE extends Layout$1{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readIntBE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeIntBE(e,r,this.span),this.span}}const V2E32$1=Math.pow(2,32);function divmodInt64$1(e){const t=Math.floor(e/V2E32$1);return{hi32:t,lo32:e-t*V2E32$1}}function roundedInt64$1(e,t){return e*V2E32$1+t}class NearUInt64$1 extends Layout$1{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const r=e.readUInt32LE(t);return roundedInt64$1(e.readUInt32LE(t+4),r)}encode(e,t,r){void 0===r&&(r=0);const n=divmodInt64$1(e);return t.writeUInt32LE(n.lo32,r),t.writeUInt32LE(n.hi32,r+4),8}}class NearUInt64BE extends Layout$1{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);return roundedInt64$1(e.readUInt32BE(t),e.readUInt32BE(t+4))}encode(e,t,r){void 0===r&&(r=0);const n=divmodInt64$1(e);return t.writeUInt32BE(n.hi32,r),t.writeUInt32BE(n.lo32,r+4),8}}class NearInt64$1 extends Layout$1{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const r=e.readUInt32LE(t);return roundedInt64$1(e.readInt32LE(t+4),r)}encode(e,t,r){void 0===r&&(r=0);const n=divmodInt64$1(e);return t.writeUInt32LE(n.lo32,r),t.writeInt32LE(n.hi32,r+4),8}}class NearInt64BE extends Layout$1{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);return roundedInt64$1(e.readInt32BE(t),e.readUInt32BE(t+4))}encode(e,t,r){void 0===r&&(r=0);const n=divmodInt64$1(e);return t.writeInt32BE(n.hi32,r),t.writeUInt32BE(n.lo32,r+4),8}}class Float extends Layout$1{constructor(e){super(4,e)}decode(e,t){return void 0===t&&(t=0),e.readFloatLE(t)}encode(e,t,r){return void 0===r&&(r=0),t.writeFloatLE(e,r),4}}class FloatBE extends Layout$1{constructor(e){super(4,e)}decode(e,t){return void 0===t&&(t=0),e.readFloatBE(t)}encode(e,t,r){return void 0===r&&(r=0),t.writeFloatBE(e,r),4}}class Double extends Layout$1{constructor(e){super(8,e)}decode(e,t){return void 0===t&&(t=0),e.readDoubleLE(t)}encode(e,t,r){return void 0===r&&(r=0),t.writeDoubleLE(e,r),8}}class DoubleBE extends Layout$1{constructor(e){super(8,e)}decode(e,t){return void 0===t&&(t=0),e.readDoubleBE(t)}encode(e,t,r){return void 0===r&&(r=0),t.writeDoubleBE(e,r),8}}class Sequence extends Layout$1{constructor(e,t,r){if(!(e instanceof Layout$1))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof ExternalLayout$1&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(t instanceof ExternalLayout$1)&&0<e.span&&(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let r=0,n=this.count;if(n instanceof ExternalLayout$1&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(e,t+r),++i}return r}decode(e,t){void 0===t&&(t=0);const r=[];let n=0,i=this.count;for(i instanceof ExternalLayout$1&&(i=i.decode(e,t));n<i;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r){void 0===r&&(r=0);const n=this.elementLayout,i=e.reduce(((e,i)=>e+n.encode(i,t,r+e)),0);return this.count instanceof ExternalLayout$1&&this.count.encode(e.length,t,r),i}}class Structure$1 extends Layout$1{constructor(e,t,r){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof Layout$1),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===r&&(r=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(e,t);return t+=i,r+i}),0)}catch(e){throw new RangeError("indeterminate span")}return r}decode(e,t){void 0===t&&(t=0);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r){void 0===r&&(r=0);const n=r;let i=0,a=0;for(const n of this.fields){let o=n.span;if(a=0<o?o:0,void 0!==n.property){const i=e[n.property];void 0!==i&&(a=n.encode(i,t,r),0>o&&(o=n.getSpan(t,r)))}i=r,r+=o}return i+a-n}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class UnionDiscriminator$1{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class UnionLayoutDiscriminator$1 extends UnionDiscriminator$1{constructor(e,t){if(!(e instanceof ExternalLayout$1&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}class Union$1 extends Layout$1{constructor(e,t,r){const n=e instanceof UInt$1||e instanceof UIntBE$1;if(n)e=new UnionLayoutDiscriminator$1(new OffsetLayout$1(e));else if(e instanceof ExternalLayout$1&&e.isCount())e=new UnionLayoutDiscriminator$1(e);else if(!(e instanceof UnionDiscriminator$1))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof Layout$1))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&n&&(i+=e.layout.span)),super(i,r),this.discriminator=e,this.usesPrefixDiscriminator=n,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return a(e)},this.configGetSourceVariant=function(e){a=e.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(e.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(e,t){let r;void 0===t&&(t=0);const n=this.discriminator,i=n.decode(e,t);let a=this.registry[i];if(void 0===a){let o=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(o=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[a.property]=this.defaultLayout.decode(e,t+o)}else r=a.decode(e,t);return r}encode(e,t,r){void 0===r&&(r=0);const n=this.getSourceVariant(e);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=n.layout.span),n.encode(e[n.property],t,r),a+i.encode(e[i.property],t,r+a)}return n.encode(e,t,r)}addVariant(e,t,r){const n=new VariantLayout$1(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t){let r=e;return Buffer.isBuffer(e)&&(void 0===t&&(t=0),r=this.discriminator.decode(e,t)),this.registry[r]}}class VariantLayout$1 extends Layout$1{constructor(e,t,r,n){if(!(e instanceof Union$1))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof Layout$1))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof n)throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=r?r.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(e,t+r)}decode(e,t){const r=this.makeDestinationObject();if(void 0===t&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r){void 0===r&&(r=0);let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let i=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),i+=this.layout.getSpan(t,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function fixBitwiseResult(e){return 0>e&&(e+=4294967296),e}class BitStructure extends Layout$1{constructor(e,t,r){if(!(e instanceof UInt$1||e instanceof UIntBE$1))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===r&&(r=t,t=void 0),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let n=0;this._packedSetValue=function(e){return n=fixBitwiseResult(e),this},this._packedGetValue=function(){return n}}decode(e,t){const r=this.makeDestinationObject();void 0===t&&(t=0);const n=this.word.decode(e,t);this._packedSetValue(n);for(const e of this.fields)void 0!==e.property&&(r[e.property]=e.decode(n));return r}encode(e,t,r){void 0===r&&(r=0);const n=this.word.decode(t,r);this._packedSetValue(n);for(const t of this.fields)if(void 0!==t.property){const r=e[t.property];void 0!==r&&t.encode(r)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new BitField(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new Boolean$1(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}class BitField{constructor(e,t,r){if(!(e instanceof BitStructure))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const n=8*e.span,i=e.fields.reduce(((e,t)=>e+t.bits),0);if(t+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-t),this.wordMask=fixBitwiseResult(this.valueMask<<this.start),this.property=r}decode(){return fixBitwiseResult(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if(!Number.isInteger(e)||e!==fixBitwiseResult(e&this.valueMask))throw new TypeError(nameWithProperty$1("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=fixBitwiseResult(e<<this.start);this.container._packedSetValue(fixBitwiseResult(t&~this.wordMask)|r)}}class Boolean$1 extends BitField{constructor(e,t){super(e,1,t)}decode(e,t){return!!BitField.prototype.decode.call(this,e,t)}encode(e){return"boolean"==typeof e&&(e=+e),BitField.prototype.encode.call(this,e)}}class Blob$2 extends Layout$1{constructor(e,t){if(!(e instanceof ExternalLayout$1&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof ExternalLayout$1||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t){void 0===t&&(t=0);let r=this.span;return 0>r&&(r=this.length.decode(e,t)),e.slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof ExternalLayout$1&&(n=e.length),!Buffer.isBuffer(e)||n!==e.length)throw new TypeError(nameWithProperty$1("Blob.encode",this)+" requires (length "+n+") Buffer as src");if(r+n>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),r,n,"hex"),this.length instanceof ExternalLayout$1&&this.length.encode(n,t,r),n}}class CString extends Layout$1{constructor(e){super(-1,e)}getSpan(e,t){if(!Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");void 0===t&&(t=0);let r=t;for(;r<e.length&&0!==e[r];)r+=1;return 1+r-t}decode(e,t,r){void 0===t&&(t=0);let n=this.getSpan(e,t);return e.slice(t,t+n-1).toString("utf-8")}encode(e,t,r){void 0===r&&(r=0),"string"!=typeof e&&(e=e.toString());const n=new Buffer(e,"utf8"),i=n.length;if(r+i>t.length)throw new RangeError("encoding overruns Buffer");return n.copy(t,r),t[r+i]=0,i+1}}class UTF8 extends Layout$1{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t){if(!Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");return void 0===t&&(t=0),e.length-t}decode(e,t,r){void 0===t&&(t=0);let n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return e.slice(t,t+n).toString("utf-8")}encode(e,t,r){void 0===r&&(r=0),"string"!=typeof e&&(e=e.toString());const n=new Buffer(e,"utf8"),i=n.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>t.length)throw new RangeError("encoding overruns Buffer");return n.copy(t,r),i}}class Constant extends Layout$1{constructor(e,t){super(0,t),this.value=e}decode(e,t,r){return this.value}encode(e,t,r){return 0}}Layout$2.ExternalLayout=ExternalLayout$1,Layout$2.GreedyCount=GreedyCount,Layout$2.OffsetLayout=OffsetLayout$1,Layout$2.UInt=UInt$1,Layout$2.UIntBE=UIntBE$1,Layout$2.Int=Int,Layout$2.IntBE=IntBE,Layout$2.Float=Float,Layout$2.FloatBE=FloatBE,Layout$2.Double=Double,Layout$2.DoubleBE=DoubleBE,Layout$2.Sequence=Sequence,Layout$2.Structure=Structure$1,Layout$2.UnionDiscriminator=UnionDiscriminator$1,Layout$2.UnionLayoutDiscriminator=UnionLayoutDiscriminator$1,Layout$2.Union=Union$1,Layout$2.VariantLayout=VariantLayout$1,Layout$2.BitStructure=BitStructure,Layout$2.BitField=BitField,Layout$2.Boolean=Boolean$1,Layout$2.Blob=Blob$2,Layout$2.CString=CString,Layout$2.UTF8=UTF8,Layout$2.Constant=Constant,Layout$2.greedy=(e,t)=>new GreedyCount(e,t),Layout$2.offset=(e,t,r)=>new OffsetLayout$1(e,t,r),Layout$2.u8=e=>new UInt$1(1,e),Layout$2.u16=e=>new UInt$1(2,e),Layout$2.u24=e=>new UInt$1(3,e),Layout$2.u32=e=>new UInt$1(4,e),Layout$2.u40=e=>new UInt$1(5,e),Layout$2.u48=e=>new UInt$1(6,e),Layout$2.nu64=e=>new NearUInt64$1(e),Layout$2.u16be=e=>new UIntBE$1(2,e),Layout$2.u24be=e=>new UIntBE$1(3,e),Layout$2.u32be=e=>new UIntBE$1(4,e),Layout$2.u40be=e=>new UIntBE$1(5,e),Layout$2.u48be=e=>new UIntBE$1(6,e),Layout$2.nu64be=e=>new NearUInt64BE(e),Layout$2.s8=e=>new Int(1,e),Layout$2.s16=e=>new Int(2,e),Layout$2.s24=e=>new Int(3,e),Layout$2.s32=e=>new Int(4,e),Layout$2.s40=e=>new Int(5,e),Layout$2.s48=e=>new Int(6,e),Layout$2.ns64=e=>new NearInt64$1(e),Layout$2.s16be=e=>new IntBE(2,e),Layout$2.s24be=e=>new IntBE(3,e),Layout$2.s32be=e=>new IntBE(4,e),Layout$2.s40be=e=>new IntBE(5,e),Layout$2.s48be=e=>new IntBE(6,e),Layout$2.ns64be=e=>new NearInt64BE(e),Layout$2.f32=e=>new Float(e),Layout$2.f32be=e=>new FloatBE(e),Layout$2.f64=e=>new Double(e),Layout$2.f64be=e=>new DoubleBE(e),Layout$2.struct=(e,t,r)=>new Structure$1(e,t,r),Layout$2.bits=(e,t,r)=>new BitStructure(e,t,r),Layout$2.seq=(e,t,r)=>new Sequence(e,t,r),Layout$2.union=(e,t,r)=>new Union$1(e,t,r),Layout$2.unionLayoutDiscriminator=(e,t)=>new UnionLayoutDiscriminator$1(e,t),Layout$2.blob=(e,t)=>new Blob$2(e,t),Layout$2.cstr=e=>new CString(e),Layout$2.utf8=(e,t)=>new UTF8(e,t),Layout$2.const=(e,t)=>new Constant(e,t);var require$$1=getAugmentedNamespace(index_browser_esm);function bytes$1(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(r.length>0&&!r.includes(e.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function exists$2(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function output$1(e,t){bytes$1(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */!function(e){var t=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.map=e.array=e.rustEnum=e.str=e.vecU8=e.tagged=e.vec=e.bool=e.option=e.publicKey=e.i256=e.u256=e.i128=e.u128=e.i64=e.u64=e.struct=e.f64=e.f32=e.i32=e.u32=e.i16=e.u16=e.i8=e.u8=void 0;const r=Layout$2,n=require$$1,i=t(bn.exports);var a=Layout$2;Object.defineProperty(e,"u8",{enumerable:!0,get:function(){return a.u8}}),Object.defineProperty(e,"i8",{enumerable:!0,get:function(){return a.s8}}),Object.defineProperty(e,"u16",{enumerable:!0,get:function(){return a.u16}}),Object.defineProperty(e,"i16",{enumerable:!0,get:function(){return a.s16}}),Object.defineProperty(e,"u32",{enumerable:!0,get:function(){return a.u32}}),Object.defineProperty(e,"i32",{enumerable:!0,get:function(){return a.s32}}),Object.defineProperty(e,"f32",{enumerable:!0,get:function(){return a.f32}}),Object.defineProperty(e,"f64",{enumerable:!0,get:function(){return a.f64}}),Object.defineProperty(e,"struct",{enumerable:!0,get:function(){return a.struct}});class o extends r.Layout{constructor(e,t,n){super(e,n),this.blob=(0,r.blob)(e),this.signed=t}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=new i.default(this.blob.decode(e,t),10,"le");return this.signed?r.fromTwos(8*this.span).clone():r}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.signed&&(e=e.toTwos(8*this.span)),this.blob.encode(e.toArrayLike(Buffer,"le",this.span),t,r)}}function s(e){return new o(8,!1,e)}e.u64=s,e.i64=function(e){return new o(8,!0,e)},e.u128=function(e){return new o(16,!1,e)},e.i128=function(e){return new o(16,!0,e)},e.u256=function(e){return new o(32,!1,e)},e.i256=function(e){return new o(32,!0,e)};class u extends r.Layout{constructor(e,t,r,n){super(e.span,n),this.layout=e,this.decoder=t,this.encoder=r}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,r){return this.layout.encode(this.encoder(e),t,r)}getSpan(e,t){return this.layout.getSpan(e,t)}}e.publicKey=function(e){return new u((0,r.blob)(32),(e=>new n.PublicKey(e)),(e=>e.toBuffer()),e)};class c extends r.Layout{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=(0,r.u8)()}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null==e?this.discriminator.encode(0,t,r):(this.discriminator.encode(1,t,r),this.layout.encode(e,t,r+1)+1)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=this.discriminator.decode(e,t);if(0===r)return null;if(1===r)return this.layout.decode(e,t+1);throw new Error("Invalid option "+this.property)}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=this.discriminator.decode(e,t);if(0===r)return 1;if(1===r)return this.layout.getSpan(e,t+1)+1;throw new Error("Invalid option "+this.property)}}function d(e){if(0===e)return!1;if(1===e)return!0;throw new Error("Invalid bool: "+e)}function l(e){return e?1:0}function p(e){const t=(0,r.u32)("length"),n=(0,r.struct)([t,(0,r.blob)((0,r.offset)(t,-t.span),"data")]);return new u(n,(e=>{let{data:t}=e;return t}),(e=>({data:e})),e)}e.option=function(e,t){return new c(e,t)},e.bool=function(e){return new u((0,r.u8)(),d,l,e)},e.vec=function(e,t){const n=(0,r.u32)("length"),i=(0,r.struct)([n,(0,r.seq)(e,(0,r.offset)(n,-n.span),"values")]);return new u(i,(e=>{let{values:t}=e;return t}),(e=>({values:e})),t)},e.tagged=function(e,t,n){const i=(0,r.struct)([s("tag"),t.replicate("data")]);return new u(i,(function(t){let{tag:r,data:n}=t;if(!r.eq(e))throw new Error("Invalid tag, expected: "+e.toString("hex")+", got: "+r.toString("hex"));return n}),(t=>({tag:e,data:t})),n)},e.vecU8=p,e.str=function(e){return new u(p(),(e=>e.toString("utf-8")),(e=>Buffer.from(e,"utf-8")),e)},e.rustEnum=function(e,t,n){const i=(0,r.union)(null!=n?n:(0,r.u8)(),t);return e.forEach(((e,t)=>i.addVariant(t,e,e.property))),i},e.array=function(e,t,n){const i=(0,r.struct)([(0,r.seq)(e,t,"values")]);return new u(i,(e=>{let{values:t}=e;return t}),(e=>({values:e})),n)};class h extends r.Layout{constructor(e,t,r){super(e.span+t.span,r),this.keyLayout=e,this.valueLayout=t}decode(e,t){t=t||0;return[this.keyLayout.decode(e,t),this.valueLayout.decode(e,t+this.keyLayout.getSpan(e,t))]}encode(e,t,r){r=r||0;const n=this.keyLayout.encode(e[0],t,r);return n+this.valueLayout.encode(e[1],t,r+n)}getSpan(e,t){return this.keyLayout.getSpan(e,t)+this.valueLayout.getSpan(e,t)}}e.map=function(e,t,n){const i=(0,r.u32)("length"),a=(0,r.struct)([i,(0,r.seq)(new h(e,t),(0,r.offset)(i,-i.span),"values")]);return new u(a,(e=>{let{values:t}=e;return new Map(t)}),(e=>({values:Array.from(e.entries())})),n)}}(dist);const u8a=e=>e instanceof Uint8Array,createView$1=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),rotr$1=(e,t)=>e<<32-t|e>>>t,isLE$1=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];if(!isLE$1)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes$1(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function toBytes$1(e){if("string"==typeof e&&(e=utf8ToBytes$1(e)),!u8a(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class Hash$1{clone(){return this._cloneInto()}}function wrapConstructor$1(e){const t=t=>e().update(toBytes$1(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function setBigUint64$1(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),a=BigInt(4294967295),o=Number(r>>i&a),s=Number(r&a),u=n?4:0,c=n?0:4;e.setUint32(t+u,o,n),e.setUint32(t+c,s,n)}class SHA2$1 extends Hash$1{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView$1(this.buffer)}update(e){exists$2(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=toBytes$1(e)).length;for(let a=0;a<i;){const o=Math.min(n-this.pos,i-a);if(o!==n)r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=createView$1(e);for(;n<=i-a;a+=n)this.process(t,a)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){exists$2(this),output$1(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>n-a&&(this.process(r,0),a=0);for(let e=a;e<n;e++)t[e]=0;setBigUint64$1(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=createView$1(e),s=this.outputLen;if(s%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=s/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)o.setUint32(4*e,c[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:a,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=a,n%t&&e.buffer.set(r),e}}const Chi$1=(e,t,r)=>e&t^~e&r,Maj$1=(e,t,r)=>e&t^e&r^t&r,SHA256_K$1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV$1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$1=new Uint32Array(64);class SHA256$1 extends SHA2$1{constructor(){super(64,32,8,!1),this.A=0|IV$1[0],this.B=0|IV$1[1],this.C=0|IV$1[2],this.D=0|IV$1[3],this.E=0|IV$1[4],this.F=0|IV$1[5],this.G=0|IV$1[6],this.H=0|IV$1[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:a,G:o,H:s}=this;return[e,t,r,n,i,a,o,s]}set(e,t,r,n,i,a,o,s){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|o,this.H=0|s}process(e,t){for(let r=0;r<16;r++,t+=4)SHA256_W$1[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=SHA256_W$1[e-15],r=SHA256_W$1[e-2],n=rotr$1(t,7)^rotr$1(t,18)^t>>>3,i=rotr$1(r,17)^rotr$1(r,19)^r>>>10;SHA256_W$1[e]=i+SHA256_W$1[e-7]+n+SHA256_W$1[e-16]|0}let{A:r,B:n,C:i,D:a,E:o,F:s,G:u,H:c}=this;for(let e=0;e<64;e++){const t=c+(rotr$1(o,6)^rotr$1(o,11)^rotr$1(o,25))+Chi$1(o,s,u)+SHA256_K$1[e]+SHA256_W$1[e]|0,d=(rotr$1(r,2)^rotr$1(r,13)^rotr$1(r,22))+Maj$1(r,n,i)|0;c=u,u=s,s=o,o=a+t|0,a=i,i=n,n=r,r=t+d|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,s=s+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,i,a,o,s,u,c)}roundClean(){SHA256_W$1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256$2=wrapConstructor$1((()=>new SHA256$1)),Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;
/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function zero$1(e){let t=e.length;for(;--t>=0;)e[t]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array(2*(L_CODES$1+2));zero$1(static_ltree);const static_dtree=new Array(2*D_CODES$1);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);function StaticTreeDesc(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}zero$1(base_dist);const d_code=e=>e<256?_dist_code[e]:_dist_code[256+(e>>>7)],put_short=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},send_bits=(e,t,r)=>{e.bi_valid>Buf_size-r?(e.bi_buf|=t<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=t>>Buf_size-e.bi_valid,e.bi_valid+=r-Buf_size):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},send_code=(e,t,r)=>{send_bits(e,r[2*t],r[2*t+1])},bi_reverse=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},bi_flush=e=>{16===e.bi_valid?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},gen_bitlen=(e,t)=>{const r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,u=t.stat_desc.max_length;let c,d,l,p,h,f,m=0;for(p=0;p<=MAX_BITS$1;p++)e.bl_count[p]=0;for(r[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<HEAP_SIZE$1;c++)d=e.heap[c],p=r[2*r[2*d+1]+1]+1,p>u&&(p=u,m++),r[2*d+1]=p,d>n||(e.bl_count[p]++,h=0,d>=s&&(h=o[d-s]),f=r[2*d],e.opt_len+=f*(p+h),a&&(e.static_len+=f*(i[2*d+1]+h)));if(0!==m){do{for(p=u-1;0===e.bl_count[p];)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[u]--,m-=2}while(m>0);for(p=u;0!==p;p--)for(d=e.bl_count[p];0!==d;)l=e.heap[--c],l>n||(r[2*l+1]!==p&&(e.opt_len+=(p-r[2*l+1])*r[2*l],r[2*l+1]=p),d--)}},gen_codes=(e,t,r)=>{const n=new Array(MAX_BITS$1+1);let i,a,o=0;for(i=1;i<=MAX_BITS$1;i++)o=o+r[i-1]<<1,n[i]=o;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=bi_reverse(n[t]++,t))}},tr_static_init=()=>{let e,t,r,n,i;const a=new Array(MAX_BITS$1+1);for(r=0,n=0;n<LENGTH_CODES$1-1;n++)for(base_length[n]=r,e=0;e<1<<extra_lbits[n];e++)_length_code[r++]=n;for(_length_code[r-1]=n,i=0,n=0;n<16;n++)for(base_dist[n]=i,e=0;e<1<<extra_dbits[n];e++)_dist_code[i++]=n;for(i>>=7;n<D_CODES$1;n++)for(base_dist[n]=i<<7,e=0;e<1<<extra_dbits[n]-7;e++)_dist_code[256+i++]=n;for(t=0;t<=MAX_BITS$1;t++)a[t]=0;for(e=0;e<=143;)static_ltree[2*e+1]=8,e++,a[8]++;for(;e<=255;)static_ltree[2*e+1]=9,e++,a[9]++;for(;e<=279;)static_ltree[2*e+1]=7,e++,a[7]++;for(;e<=287;)static_ltree[2*e+1]=8,e++,a[8]++;for(gen_codes(static_ltree,L_CODES$1+1,a),e=0;e<D_CODES$1;e++)static_dtree[2*e+1]=5,static_dtree[2*e]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=e=>{let t;for(t=0;t<L_CODES$1;t++)e.dyn_ltree[2*t]=0;for(t=0;t<D_CODES$1;t++)e.dyn_dtree[2*t]=0;for(t=0;t<BL_CODES$1;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*END_BLOCK]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},bi_windup=e=>{e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},smaller=(e,t,r,n)=>{const i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]},pqdownheap=(e,t,r)=>{const n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&smaller(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!smaller(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},compress_block=(e,t,r)=>{let n,i,a,o,s=0;if(0!==e.sym_next)do{n=255&e.pending_buf[e.sym_buf+s++],n+=(255&e.pending_buf[e.sym_buf+s++])<<8,i=e.pending_buf[e.sym_buf+s++],0===n?send_code(e,i,t):(a=_length_code[i],send_code(e,a+LITERALS$1+1,t),o=extra_lbits[a],0!==o&&(i-=base_length[a],send_bits(e,i,o)),n--,a=d_code(n),send_code(e,a,r),o=extra_dbits[a],0!==o&&(n-=base_dist[a],send_bits(e,n,o)))}while(s<e.sym_next);send_code(e,END_BLOCK,t)},build_tree=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems;let o,s,u,c=-1;for(e.heap_len=0,e.heap_max=HEAP_SIZE$1,o=0;o<a;o++)0!==r[2*o]?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):r[2*o+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=c<2?++c:0,r[2*u]=1,e.depth[u]=0,e.opt_len--,i&&(e.static_len-=n[2*u+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)pqdownheap(e,r,o);u=a;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,r,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,r[2*u]=r[2*o]+r[2*s],e.depth[u]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,r[2*o+1]=r[2*s+1]=u,e.heap[1]=u++,pqdownheap(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,t),gen_codes(r,c,e.bl_count)},scan_tree=(e,t,r)=>{let n,i,a=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++s<u&&i===o||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*REP_3_6]++):s<=10?e.bl_tree[2*REPZ_3_10]++:e.bl_tree[2*REPZ_11_138]++,s=0,a=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4))},send_tree=(e,t,r)=>{let n,i,a=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++s<u&&i===o)){if(s<c)do{send_code(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(send_code(e,i,e.bl_tree),s--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,s-3,2)):s<=10?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,s-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,s-11,7));s=0,a=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4)}},build_bl_tree=e=>{let t;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),t=BL_CODES$1-1;t>=3&&0===e.bl_tree[2*bl_order[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t},send_all_trees=(e,t,r,n)=>{let i;for(send_bits(e,t-257,5),send_bits(e,r-1,5),send_bits(e,n-4,4),i=0;i<n;i++)send_bits(e,e.bl_tree[2*bl_order[i]+1],3);send_tree(e,e.dyn_ltree,t-1),send_tree(e,e.dyn_dtree,r-1)},detect_data_type=e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return Z_BINARY;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Z_TEXT;for(t=32;t<LITERALS$1;t++)if(0!==e.dyn_ltree[2*t])return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=e=>{static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)},_tr_stored_block$1=(e,t,r,n)=>{send_bits(e,(STORED_BLOCK<<1)+(n?1:0),3),bi_windup(e),put_short(e,r),put_short(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},_tr_align$1=e=>{send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)},_tr_flush_block$1=(e,t,r,n)=>{let i,a,o=0;e.level>0?(e.strm.data_type===Z_UNKNOWN$1&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),o=build_bl_tree(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=r+5,r+4<=i&&-1!==t?_tr_stored_block$1(e,t,r,n):e.strategy===Z_FIXED$1||a===i?(send_bits(e,(STATIC_TREES<<1)+(n?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(n?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),n&&bi_windup(e)},_tr_tally$1=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(_length_code[r]+LITERALS$1+1)]++,e.dyn_dtree[2*d_code(t)]++),e.sym_next===e.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(e,t,r,n)=>{let i=65535&e|0,a=e>>>16&65535|0,o=0;for(;0!==r;){o=r>2e3?2e3:r,r-=o;do{i=i+t[n++]|0,a=a+i|0}while(--o);i%=65521,a%=65521}return i|a<<16|0};var adler32_1=adler32;const makeTable=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t},crcTable=new Uint32Array(makeTable()),crc32=(e,t,r,n)=>{const i=crcTable,a=n+r;e^=-1;for(let r=n;r<a;r++)e=e>>>8^i[255&(e^t[r])];return-1^e};var crc32_1=crc32,messages$1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:_tr_init,_tr_stored_block:_tr_stored_block,_tr_flush_block:_tr_flush_block,_tr_tally:_tr_tally,_tr_align:_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH:Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED:Z_FILTERED,Z_HUFFMAN_ONLY:Z_HUFFMAN_ONLY,Z_RLE:Z_RLE,Z_FIXED:Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN:Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(e,t)=>(e.msg=messages$1[t],t),rank=e=>2*e-(e>4?9:0),zero=e=>{let t=e.length;for(;--t>=0;)e[t]=0},slide_hash=e=>{let t,r,n,i=e.w_size;t=e.hash_size,n=t;do{r=e.head[--n],e.head[n]=r>=i?r-i:0}while(--t);t=i,n=t;do{r=e.prev[--n],e.prev[n]=r>=i?r-i:0}while(--t)};let HASH_ZLIB=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,HASH=HASH_ZLIB;const flush_pending=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},flush_block_only=(e,t)=>{_tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,flush_pending(e.strm)},put_byte=(e,t)=>{e.pending_buf[e.pending++]=t},putShortMSB=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},read_buf=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=adler32_1(e.adler,t,i,r):2===e.state.wrap&&(e.adler=crc32_1(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},longest_match=(e,t)=>{let r,n,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match;const u=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0,c=e.window,d=e.w_mask,l=e.prev,p=e.strstart+MAX_MATCH;let h=c[a+o-1],f=c[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(r=t,c[r+o]===f&&c[r+o-1]===h&&c[r]===c[a]&&c[++r]===c[a+1]){a+=2,r++;do{}while(c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&a<p);if(n=MAX_MATCH-(p-a),a=p-MAX_MATCH,n>o){if(e.match_start=t,o=n,n>=s)break;h=c[a+o-1],f=c[a+o]}}}while((t=l[t&d])>u&&0!=--i);return o<=e.lookahead?o:e.lookahead},fill_window=e=>{const t=e.w_size;let r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-MIN_LOOKAHEAD)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),slide_hash(e),n+=t),0===e.strm.avail_in)break;if(r=read_buf(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=MIN_MATCH)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=HASH(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=HASH(e,e.ins_h,e.window[i+MIN_MATCH-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<MIN_MATCH)););}while(e.lookahead<MIN_LOOKAHEAD&&0!==e.strm.avail_in)},deflate_stored=(e,t)=>{let r,n,i,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>i&&(r=i),r<a&&(0===r&&t!==Z_FINISH$3||t===Z_NO_FLUSH$2||r!==n+e.strm.avail_in))break;o=t===Z_FINISH$3&&r===n+e.strm.avail_in?1:0,_tr_stored_block(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,flush_pending(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(read_buf(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===o);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?BS_FINISH_DONE:t!==Z_NO_FLUSH$2&&t!==Z_FINISH$3&&0===e.strm.avail_in&&e.strstart===e.block_start?BS_BLOCK_DONE:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(read_buf(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,a=i>e.w_size?e.w_size:i,n=e.strstart-e.block_start,(n>=a||(n||t===Z_FINISH$3)&&t!==Z_NO_FLUSH$2&&0===e.strm.avail_in&&n<=i)&&(r=n>i?i:n,o=t===Z_FINISH$3&&0===e.strm.avail_in&&r===n?1:0,_tr_stored_block(e,e.block_start,r,o),e.block_start+=r,flush_pending(e.strm)),o?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(e,t)=>{let r,n;for(;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$2)return BS_NEED_MORE;if(0===e.lookahead)break}if(r=0,e.lookahead>=MIN_MATCH&&(e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,r)),e.match_length>=MIN_MATCH)if(n=_tr_tally(e,e.strstart-e.match_start,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH){e.match_length--;do{e.strstart++,e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+1]);else n=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$3?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<MIN_LOOKAHEAD){if(fill_window(e),e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$2)return BS_NEED_MORE;if(0===e.lookahead)break}if(r=0,e.lookahead>=MIN_MATCH&&(e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=MIN_MATCH-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD&&(e.match_length=longest_match(e,r),e.match_length<=5&&(e.strategy===Z_FILTERED||e.match_length===MIN_MATCH&&e.strstart-e.match_start>4096)&&(e.match_length=MIN_MATCH-1)),e.prev_length>=MIN_MATCH&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-MIN_MATCH,n=_tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=MIN_MATCH-1,e.strstart++,n&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}else if(e.match_available){if(n=_tr_tally(e,0,e.window[e.strstart-1]),n&&flush_block_only(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return BS_NEED_MORE}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=_tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1,t===Z_FINISH$3?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(e,t)=>{let r,n,i,a;const o=e.window;for(;;){if(e.lookahead<=MAX_MATCH){if(fill_window(e),e.lookahead<=MAX_MATCH&&t===Z_NO_FLUSH$2)return BS_NEED_MORE;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=MIN_MATCH&&e.strstart>0&&(i=e.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){a=e.strstart+MAX_MATCH;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<a);e.match_length=MAX_MATCH-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=MIN_MATCH?(r=_tr_tally(e,1,e.match_length-MIN_MATCH),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$3?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(e,t)=>{let r;for(;;){if(0===e.lookahead&&(fill_window(e),0===e.lookahead)){if(t===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(e.match_length=0,r=_tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(flush_block_only(e,!1),0===e.strm.avail_out))return BS_NEED_MORE}return e.insert=0,t===Z_FINISH$3?(flush_block_only(e,!0),0===e.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):e.sym_next&&(flush_block_only(e,!1),0===e.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=e=>{e.window_size=2*e.w_size,zero(e.head),e.max_lazy_match=configuration_table[e.level].max_lazy,e.good_match=configuration_table[e.level].good_length,e.nice_match=configuration_table[e.level].nice_length,e.max_chain_length=configuration_table[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=MIN_MATCH-1,e.match_available=0,e.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*HEAP_SIZE),this.dyn_dtree=new Uint16Array(2*(2*D_CODES+1)),this.bl_tree=new Uint16Array(2*(2*BL_CODES+1)),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==INIT_STATE&&t.status!==GZIP_STATE&&t.status!==EXTRA_STATE&&t.status!==NAME_STATE&&t.status!==COMMENT_STATE&&t.status!==HCRC_STATE&&t.status!==BUSY_STATE&&t.status!==FINISH_STATE?1:0},deflateResetKeep=e=>{if(deflateStateCheck(e))return err(e,Z_STREAM_ERROR$2);e.total_in=e.total_out=0,e.data_type=Z_UNKNOWN;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?GZIP_STATE:t.wrap?INIT_STATE:BUSY_STATE,e.adler=2===t.wrap?0:1,t.last_flush=-2,_tr_init(t),Z_OK$3},deflateReset=e=>{const t=deflateResetKeep(e);return t===Z_OK$3&&lm_init(e.state),t},deflateSetHeader=(e,t)=>deflateStateCheck(e)||2!==e.state.wrap?Z_STREAM_ERROR$2:(e.state.gzhead=t,Z_OK$3),deflateInit2=(e,t,r,n,i,a)=>{if(!e)return Z_STREAM_ERROR$2;let o=1;if(t===Z_DEFAULT_COMPRESSION$1&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>MAX_MEM_LEVEL||r!==Z_DEFLATED$2||n<8||n>15||t<0||t>9||a<0||a>Z_FIXED||8===n&&1!==o)return err(e,Z_STREAM_ERROR$2);8===n&&(n=9);const s=new DeflateState;return e.state=s,s.strm=e,s.status=INIT_STATE,s.wrap=o,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+MIN_MATCH-1)/MIN_MATCH),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=a,s.method=r,deflateReset(e)},deflateInit=(e,t)=>deflateInit2(e,t,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(e,t)=>{if(deflateStateCheck(e)||t>Z_BLOCK$1||t<0)return e?err(e,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const r=e.state;if(!e.output||0!==e.avail_in&&!e.input||r.status===FINISH_STATE&&t!==Z_FINISH$3)return err(e,0===e.avail_out?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(flush_pending(e),0===e.avail_out)return r.last_flush=-1,Z_OK$3}else if(0===e.avail_in&&rank(t)<=rank(n)&&t!==Z_FINISH$3)return err(e,Z_BUF_ERROR$1);if(r.status===FINISH_STATE&&0!==e.avail_in)return err(e,Z_BUF_ERROR$1);if(r.status===INIT_STATE&&0===r.wrap&&(r.status=BUSY_STATE),r.status===INIT_STATE){let t=Z_DEFLATED$2+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=Z_HUFFMAN_ONLY||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=n<<6,0!==r.strstart&&(t|=PRESET_DICT),t+=31-t%31,putShortMSB(r,t),0!==r.strstart&&(putShortMSB(r,e.adler>>>16),putShortMSB(r,65535&e.adler)),e.adler=1,r.status=BUSY_STATE,flush_pending(e),0!==r.pending)return r.last_flush=-1,Z_OK$3}if(r.status===GZIP_STATE)if(e.adler=0,put_byte(r,31),put_byte(r,139),put_byte(r,8),r.gzhead)put_byte(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),put_byte(r,255&r.gzhead.time),put_byte(r,r.gzhead.time>>8&255),put_byte(r,r.gzhead.time>>16&255),put_byte(r,r.gzhead.time>>24&255),put_byte(r,9===r.level?2:r.strategy>=Z_HUFFMAN_ONLY||r.level<2?4:0),put_byte(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(put_byte(r,255&r.gzhead.extra.length),put_byte(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=crc32_1(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=EXTRA_STATE;else if(put_byte(r,0),put_byte(r,0),put_byte(r,0),put_byte(r,0),put_byte(r,0),put_byte(r,9===r.level?2:r.strategy>=Z_HUFFMAN_ONLY||r.level<2?4:0),put_byte(r,OS_CODE),r.status=BUSY_STATE,flush_pending(e),0!==r.pending)return r.last_flush=-1,Z_OK$3;if(r.status===EXTRA_STATE){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let i=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=crc32_1(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=i,flush_pending(e),0!==r.pending)return r.last_flush=-1,Z_OK$3;t=0,n-=i}let i=new Uint8Array(r.gzhead.extra);r.pending_buf.set(i.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=crc32_1(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=NAME_STATE}if(r.status===NAME_STATE){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=crc32_1(e.adler,r.pending_buf,r.pending-n,n)),flush_pending(e),0!==r.pending)return r.last_flush=-1,Z_OK$3;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,put_byte(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=crc32_1(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=COMMENT_STATE}if(r.status===COMMENT_STATE){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=crc32_1(e.adler,r.pending_buf,r.pending-n,n)),flush_pending(e),0!==r.pending)return r.last_flush=-1,Z_OK$3;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,put_byte(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=crc32_1(e.adler,r.pending_buf,r.pending-n,n))}r.status=HCRC_STATE}if(r.status===HCRC_STATE){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(flush_pending(e),0!==r.pending))return r.last_flush=-1,Z_OK$3;put_byte(r,255&e.adler),put_byte(r,e.adler>>8&255),e.adler=0}if(r.status=BUSY_STATE,flush_pending(e),0!==r.pending)return r.last_flush=-1,Z_OK$3}if(0!==e.avail_in||0!==r.lookahead||t!==Z_NO_FLUSH$2&&r.status!==FINISH_STATE){let n=0===r.level?deflate_stored(r,t):r.strategy===Z_HUFFMAN_ONLY?deflate_huff(r,t):r.strategy===Z_RLE?deflate_rle(r,t):configuration_table[r.level].func(r,t);if(n!==BS_FINISH_STARTED&&n!==BS_FINISH_DONE||(r.status=FINISH_STATE),n===BS_NEED_MORE||n===BS_FINISH_STARTED)return 0===e.avail_out&&(r.last_flush=-1),Z_OK$3;if(n===BS_BLOCK_DONE&&(t===Z_PARTIAL_FLUSH?_tr_align(r):t!==Z_BLOCK$1&&(_tr_stored_block(r,0,0,!1),t===Z_FULL_FLUSH$1&&(zero(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),flush_pending(e),0===e.avail_out))return r.last_flush=-1,Z_OK$3}return t!==Z_FINISH$3?Z_OK$3:r.wrap<=0?Z_STREAM_END$3:(2===r.wrap?(put_byte(r,255&e.adler),put_byte(r,e.adler>>8&255),put_byte(r,e.adler>>16&255),put_byte(r,e.adler>>24&255),put_byte(r,255&e.total_in),put_byte(r,e.total_in>>8&255),put_byte(r,e.total_in>>16&255),put_byte(r,e.total_in>>24&255)):(putShortMSB(r,e.adler>>>16),putShortMSB(r,65535&e.adler)),flush_pending(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?Z_OK$3:Z_STREAM_END$3)},deflateEnd=e=>{if(deflateStateCheck(e))return Z_STREAM_ERROR$2;const t=e.state.status;return e.state=null,t===BUSY_STATE?err(e,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(e,t)=>{let r=t.length;if(deflateStateCheck(e))return Z_STREAM_ERROR$2;const n=e.state,i=n.wrap;if(2===i||1===i&&n.status!==INIT_STATE||n.lookahead)return Z_STREAM_ERROR$2;if(1===i&&(e.adler=adler32_1(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===i&&(zero(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,fill_window(n);n.lookahead>=MIN_MATCH;){let e=n.strstart,t=n.lookahead-(MIN_MATCH-1);do{n.ins_h=HASH(n,n.ins_h,n.window[e+MIN_MATCH-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=MIN_MATCH-1,fill_window(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=MIN_MATCH-1,n.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,n.wrap=i,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo:deflateInfo};const _has=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var assign=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const t in r)_has(r,t)&&(e[t]=r[t])}}return e},flattenChunks=e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;const r=new Uint8Array(t);for(let t=0,n=0,i=e.length;t<i;t++){let i=e[t];r.set(i,n),n+=i.length}return r},common={assign:assign,flattenChunks:flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let e=0;e<256;e++)_utf8len[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,i,a,o=e.length,s=0;for(i=0;i<o;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<o&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<o&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t};const buf2binstring=(e,t)=>{if(t<65534&&e.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var buf2string=(e,t)=>{const r=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,i;const a=new Array(2*r);for(i=0,n=0;n<r;){let t=e[n++];if(t<128){a[i++]=t;continue}let o=_utf8len[t];if(o>4)a[i++]=65533,n+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&n<r;)t=t<<6|63&e[n++],o--;o>1?a[i++]=65533:t<65536?a[i++]=t:(t-=65536,a[i++]=55296|t>>10&1023,a[i++]=56320|1023&t)}}return buf2binstring(a,i)},utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+_utf8len[e[r]]>t?r:t},strings={string2buf:string2buf,buf2string:buf2string,utf8border:utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH:Z_SYNC_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(e){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let r=deflate_1$2.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Z_OK$2)throw new Error(messages$1[r]);if(t.header&&deflate_1$2.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?strings.string2buf(t.dictionary):"[object ArrayBuffer]"===toString$1.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=deflate_1$2.deflateSetDictionary(this.strm,e),r!==Z_OK$2)throw new Error(messages$1[r]);this._dict_set=!0}}Deflate$1.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?Z_FINISH$2:Z_NO_FLUSH$1,"string"==typeof e?r.input=strings.string2buf(e):"[object ArrayBuffer]"===toString$1.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(a===Z_SYNC_FLUSH||a===Z_FULL_FLUSH)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=deflate_1$2.deflate(r,a),i===Z_STREAM_END$2)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=deflate_1$2.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Z_OK$2;if(0!==r.avail_out){if(a>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},Deflate$1.prototype.onData=function(e){this.chunks.push(e)},Deflate$1.prototype.onEnd=function(e){e===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const BAD$1=16209,TYPE$1=16191;var inffast=function(e,t){let r,n,i,a,o,s,u,c,d,l,p,h,f,m,y,g,b,v,w,_,S,E,A,T;const I=e.state;r=e.next_in,A=e.input,n=r+(e.avail_in-5),i=e.next_out,T=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),s=I.dmax,u=I.wsize,c=I.whave,d=I.wnext,l=I.window,p=I.hold,h=I.bits,f=I.lencode,m=I.distcode,y=(1<<I.lenbits)-1,g=(1<<I.distbits)-1;e:do{h<15&&(p+=A[r++]<<h,h+=8,p+=A[r++]<<h,h+=8),b=f[p&y];t:for(;;){if(v=b>>>24,p>>>=v,h-=v,v=b>>>16&255,0===v)T[i++]=65535&b;else{if(!(16&v)){if(0==(64&v)){b=f[(65535&b)+(p&(1<<v)-1)];continue t}if(32&v){I.mode=TYPE$1;break e}e.msg="invalid literal/length code",I.mode=BAD$1;break e}w=65535&b,v&=15,v&&(h<v&&(p+=A[r++]<<h,h+=8),w+=p&(1<<v)-1,p>>>=v,h-=v),h<15&&(p+=A[r++]<<h,h+=8,p+=A[r++]<<h,h+=8),b=m[p&g];r:for(;;){if(v=b>>>24,p>>>=v,h-=v,v=b>>>16&255,!(16&v)){if(0==(64&v)){b=m[(65535&b)+(p&(1<<v)-1)];continue r}e.msg="invalid distance code",I.mode=BAD$1;break e}if(_=65535&b,v&=15,h<v&&(p+=A[r++]<<h,h+=8,h<v&&(p+=A[r++]<<h,h+=8)),_+=p&(1<<v)-1,_>s){e.msg="invalid distance too far back",I.mode=BAD$1;break e}if(p>>>=v,h-=v,v=i-a,_>v){if(v=_-v,v>c&&I.sane){e.msg="invalid distance too far back",I.mode=BAD$1;break e}if(S=0,E=l,0===d){if(S+=u-v,v<w){w-=v;do{T[i++]=l[S++]}while(--v);S=i-_,E=T}}else if(d<v){if(S+=u+d-v,v-=d,v<w){w-=v;do{T[i++]=l[S++]}while(--v);if(S=0,d<w){v=d,w-=v;do{T[i++]=l[S++]}while(--v);S=i-_,E=T}}}else if(S+=d-v,v<w){w-=v;do{T[i++]=l[S++]}while(--v);S=i-_,E=T}for(;w>2;)T[i++]=E[S++],T[i++]=E[S++],T[i++]=E[S++],w-=3;w&&(T[i++]=E[S++],w>1&&(T[i++]=E[S++]))}else{S=i-_;do{T[i++]=T[S++],T[i++]=T[S++],T[i++]=T[S++],w-=3}while(w>2);w&&(T[i++]=T[S++],w>1&&(T[i++]=T[S++]))}break}}break}}while(r<n&&i<o);w=h>>3,r-=w,h-=w<<3,p&=(1<<h)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<o?o-i+257:257-(i-o),I.hold=p,I.bits=h};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(e,t,r,n,i,a,o,s)=>{const u=s.bits;let c,d,l,p,h,f,m=0,y=0,g=0,b=0,v=0,w=0,_=0,S=0,E=0,A=0,T=null;const I=new Uint16Array(MAXBITS+1),$=new Uint16Array(MAXBITS+1);let C,R,k,x=null;for(m=0;m<=MAXBITS;m++)I[m]=0;for(y=0;y<n;y++)I[t[r+y]]++;for(v=u,b=MAXBITS;b>=1&&0===I[b];b--);if(v>b&&(v=b),0===b)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(g=1;g<b&&0===I[g];g++);for(v<g&&(v=g),S=1,m=1;m<=MAXBITS;m++)if(S<<=1,S-=I[m],S<0)return-1;if(S>0&&(e===CODES$1||1!==b))return-1;for($[1]=0,m=1;m<MAXBITS;m++)$[m+1]=$[m]+I[m];for(y=0;y<n;y++)0!==t[r+y]&&(o[$[t[r+y]]++]=y);if(e===CODES$1?(T=x=o,f=20):e===LENS$1?(T=lbase,x=lext,f=257):(T=dbase,x=dext,f=0),A=0,y=0,m=g,h=a,w=v,_=0,l=-1,E=1<<v,p=E-1,e===LENS$1&&E>ENOUGH_LENS$1||e===DISTS$1&&E>ENOUGH_DISTS$1)return 1;for(;;){C=m-_,o[y]+1<f?(R=0,k=o[y]):o[y]>=f?(R=x[o[y]-f],k=T[o[y]-f]):(R=96,k=0),c=1<<m-_,d=1<<w,g=d;do{d-=c,i[h+(A>>_)+d]=C<<24|R<<16|k|0}while(0!==d);for(c=1<<m-1;A&c;)c>>=1;if(0!==c?(A&=c-1,A+=c):A=0,y++,0==--I[m]){if(m===b)break;m=t[r+o[y]]}if(m>v&&(A&p)!==l){for(0===_&&(_=v),h+=g,w=m-_,S=1<<w;w+_<b&&(S-=I[w+_],!(S<=0));)w++,S<<=1;if(E+=1<<w,e===LENS$1&&E>ENOUGH_LENS$1||e===DISTS$1&&E>ENOUGH_DISTS$1)return 1;l=A&p,i[l]=v<<24|w<<16|h-a|0}}return 0!==A&&(i[h+A]=m-_<<24|64<<16|0),s.bits=v,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK:Z_BLOCK,Z_TREES:Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR:Z_BUF_ERROR,Z_DEFLATED:Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<HEAD||t.mode>SYNC?1:0},inflateResetKeep=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ENOUGH_LENS),t.distcode=t.distdyn=new Int32Array(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK$1},inflateReset=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)},inflateReset2=(e,t)=>{let r;if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR$1:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,inflateReset(e))},inflateInit2=(e,t)=>{if(!e)return Z_STREAM_ERROR$1;const r=new InflateState;e.state=r,r.strm=e,r.window=null,r.mode=HEAD;const n=inflateReset2(e,t);return n!==Z_OK$1&&(e.state=null),n},inflateInit=e=>inflateInit2(e,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=e=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inftrees(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inftrees(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5},updatewindow=(e,t,r,n)=>{let i;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(t.subarray(r-n,r-n+i),a.wnext),(n-=i)?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},inflate$2=(e,t)=>{let r,n,i,a,o,s,u,c,d,l,p,h,f,m,y,g,b,v,w,_,S,E,A=0;const T=new Uint8Array(4);let I,$;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(e)||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR$1;r=e.state,r.mode===TYPE&&(r.mode=TYPEDO),o=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,c=r.hold,d=r.bits,l=s,p=u,E=Z_OK$1;e:for(;;)switch(r.mode){case HEAD:if(0===r.wrap){r.mode=TYPEDO;break}for(;d<16;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(2&r.wrap&&35615===c){0===r.wbits&&(r.wbits=15),r.check=0,T[0]=255&c,T[1]=c>>>8&255,r.check=crc32_1(r.check,T,2,0),c=0,d=0,r.mode=FLAGS;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=BAD;break}if((15&c)!==Z_DEFLATED){e.msg="unknown compression method",r.mode=BAD;break}if(c>>>=4,d-=4,S=8+(15&c),0===r.wbits&&(r.wbits=S),S>15||S>r.wbits){e.msg="invalid window size",r.mode=BAD;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&c?DICTID:TYPE,c=0,d=0;break;case FLAGS:for(;d<16;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(r.flags=c,(255&r.flags)!==Z_DEFLATED){e.msg="unknown compression method",r.mode=BAD;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=BAD;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&4&r.wrap&&(T[0]=255&c,T[1]=c>>>8&255,r.check=crc32_1(r.check,T,2,0)),c=0,d=0,r.mode=TIME;case TIME:for(;d<32;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}r.head&&(r.head.time=c),512&r.flags&&4&r.wrap&&(T[0]=255&c,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,r.check=crc32_1(r.check,T,4,0)),c=0,d=0,r.mode=OS;case OS:for(;d<16;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&4&r.wrap&&(T[0]=255&c,T[1]=c>>>8&255,r.check=crc32_1(r.check,T,2,0)),c=0,d=0,r.mode=EXLEN;case EXLEN:if(1024&r.flags){for(;d<16;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&4&r.wrap&&(T[0]=255&c,T[1]=c>>>8&255,r.check=crc32_1(r.check,T,2,0)),c=0,d=0}else r.head&&(r.head.extra=null);r.mode=EXTRA;case EXTRA:if(1024&r.flags&&(h=r.length,h>s&&(h=s),h&&(r.head&&(S=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+h),S)),512&r.flags&&4&r.wrap&&(r.check=crc32_1(r.check,n,h,a)),s-=h,a+=h,r.length-=h),r.length))break e;r.length=0,r.mode=NAME;case NAME:if(2048&r.flags){if(0===s)break e;h=0;do{S=n[a+h++],r.head&&S&&r.length<65536&&(r.head.name+=String.fromCharCode(S))}while(S&&h<s);if(512&r.flags&&4&r.wrap&&(r.check=crc32_1(r.check,n,h,a)),s-=h,a+=h,S)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=COMMENT;case COMMENT:if(4096&r.flags){if(0===s)break e;h=0;do{S=n[a+h++],r.head&&S&&r.length<65536&&(r.head.comment+=String.fromCharCode(S))}while(S&&h<s);if(512&r.flags&&4&r.wrap&&(r.check=crc32_1(r.check,n,h,a)),s-=h,a+=h,S)break e}else r.head&&(r.head.comment=null);r.mode=HCRC;case HCRC:if(512&r.flags){for(;d<16;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(4&r.wrap&&c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=BAD;break}c=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=TYPE;break;case DICTID:for(;d<32;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}e.adler=r.check=zswap32(c),c=0,d=0,r.mode=DICT;case DICT:if(0===r.havedict)return e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,r.hold=c,r.bits=d,Z_NEED_DICT$1;e.adler=r.check=1,r.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(r.last){c>>>=7&d,d-=7&d,r.mode=CHECK;break}for(;d<3;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}switch(r.last=1&c,c>>>=1,d-=1,3&c){case 0:r.mode=STORED;break;case 1:if(fixedtables(r),r.mode=LEN_,t===Z_TREES){c>>>=2,d-=2;break e}break;case 2:r.mode=TABLE;break;case 3:e.msg="invalid block type",r.mode=BAD}c>>>=2,d-=2;break;case STORED:for(c>>>=7&d,d-=7&d;d<32;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=BAD;break}if(r.length=65535&c,c=0,d=0,r.mode=COPY_,t===Z_TREES)break e;case COPY_:r.mode=COPY;case COPY:if(h=r.length,h){if(h>s&&(h=s),h>u&&(h=u),0===h)break e;i.set(n.subarray(a,a+h),o),s-=h,a+=h,u-=h,o+=h,r.length-=h;break}r.mode=TYPE;break;case TABLE:for(;d<14;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(r.nlen=257+(31&c),c>>>=5,d-=5,r.ndist=1+(31&c),c>>>=5,d-=5,r.ncode=4+(15&c),c>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=BAD;break}r.have=0,r.mode=LENLENS;case LENLENS:for(;r.have<r.ncode;){for(;d<3;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}r.lens[C[r.have++]]=7&c,c>>>=3,d-=3}for(;r.have<19;)r.lens[C[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},E=inftrees(CODES,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,E){e.msg="invalid code lengths set",r.mode=BAD;break}r.have=0,r.mode=CODELENS;case CODELENS:for(;r.have<r.nlen+r.ndist;){for(;A=r.lencode[c&(1<<r.lenbits)-1],y=A>>>24,g=A>>>16&255,b=65535&A,!(y<=d);){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(b<16)c>>>=y,d-=y,r.lens[r.have++]=b;else{if(16===b){for($=y+2;d<$;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(c>>>=y,d-=y,0===r.have){e.msg="invalid bit length repeat",r.mode=BAD;break}S=r.lens[r.have-1],h=3+(3&c),c>>>=2,d-=2}else if(17===b){for($=y+3;d<$;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}c>>>=y,d-=y,S=0,h=3+(7&c),c>>>=3,d-=3}else{for($=y+7;d<$;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}c>>>=y,d-=y,S=0,h=11+(127&c),c>>>=7,d-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=BAD;break}for(;h--;)r.lens[r.have++]=S}}if(r.mode===BAD)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=BAD;break}if(r.lenbits=9,I={bits:r.lenbits},E=inftrees(LENS,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,E){e.msg="invalid literal/lengths set",r.mode=BAD;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},E=inftrees(DISTS,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,E){e.msg="invalid distances set",r.mode=BAD;break}if(r.mode=LEN_,t===Z_TREES)break e;case LEN_:r.mode=LEN;case LEN:if(s>=6&&u>=258){e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,r.hold=c,r.bits=d,inffast(e,p),o=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,c=r.hold,d=r.bits,r.mode===TYPE&&(r.back=-1);break}for(r.back=0;A=r.lencode[c&(1<<r.lenbits)-1],y=A>>>24,g=A>>>16&255,b=65535&A,!(y<=d);){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(g&&0==(240&g)){for(v=y,w=g,_=b;A=r.lencode[_+((c&(1<<v+w)-1)>>v)],y=A>>>24,g=A>>>16&255,b=65535&A,!(v+y<=d);){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}c>>>=v,d-=v,r.back+=v}if(c>>>=y,d-=y,r.back+=y,r.length=b,0===g){r.mode=LIT;break}if(32&g){r.back=-1,r.mode=TYPE;break}if(64&g){e.msg="invalid literal/length code",r.mode=BAD;break}r.extra=15&g,r.mode=LENEXT;case LENEXT:if(r.extra){for($=r.extra;d<$;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=DIST;case DIST:for(;A=r.distcode[c&(1<<r.distbits)-1],y=A>>>24,g=A>>>16&255,b=65535&A,!(y<=d);){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(0==(240&g)){for(v=y,w=g,_=b;A=r.distcode[_+((c&(1<<v+w)-1)>>v)],y=A>>>24,g=A>>>16&255,b=65535&A,!(v+y<=d);){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}c>>>=v,d-=v,r.back+=v}if(c>>>=y,d-=y,r.back+=y,64&g){e.msg="invalid distance code",r.mode=BAD;break}r.offset=b,r.extra=15&g,r.mode=DISTEXT;case DISTEXT:if(r.extra){for($=r.extra;d<$;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=BAD;break}r.mode=MATCH;case MATCH:if(0===u)break e;if(h=p-u,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=BAD;break}h>r.wnext?(h-=r.wnext,f=r.wsize-h):f=r.wnext-h,h>r.length&&(h=r.length),m=r.window}else m=i,f=o-r.offset,h=r.length;h>u&&(h=u),u-=h,r.length-=h;do{i[o++]=m[f++]}while(--h);0===r.length&&(r.mode=LEN);break;case LIT:if(0===u)break e;i[o++]=r.length,u--,r.mode=LEN;break;case CHECK:if(r.wrap){for(;d<32;){if(0===s)break e;s--,c|=n[a++]<<d,d+=8}if(p-=u,e.total_out+=p,r.total+=p,4&r.wrap&&p&&(e.adler=r.check=r.flags?crc32_1(r.check,i,p,o-p):adler32_1(r.check,i,p,o-p)),p=u,4&r.wrap&&(r.flags?c:zswap32(c))!==r.check){e.msg="incorrect data check",r.mode=BAD;break}c=0,d=0}r.mode=LENGTH;case LENGTH:if(r.wrap&&r.flags){for(;d<32;){if(0===s)break e;s--,c+=n[a++]<<d,d+=8}if(4&r.wrap&&c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=BAD;break}c=0,d=0}r.mode=DONE;case DONE:E=Z_STREAM_END$1;break e;case BAD:E=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;default:return Z_STREAM_ERROR$1}return e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,r.hold=c,r.bits=d,(r.wsize||p!==e.avail_out&&r.mode<BAD&&(r.mode<CHECK||t!==Z_FINISH$1))&&updatewindow(e,e.output,e.next_out,p-e.avail_out),l-=e.avail_in,p-=e.avail_out,e.total_in+=l,e.total_out+=p,r.total+=p,4&r.wrap&&p&&(e.adler=r.check=r.flags?crc32_1(r.check,i,p,e.next_out-p):adler32_1(r.check,i,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===TYPE?128:0)+(r.mode===LEN_||r.mode===COPY_?256:0),(0===l&&0===p||t===Z_FINISH$1)&&E===Z_OK$1&&(E=Z_BUF_ERROR),E},inflateEnd=e=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;let t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK$1},inflateGetHeader=(e,t)=>{if(inflateStateCheck(e))return Z_STREAM_ERROR$1;const r=e.state;return 0==(2&r.wrap)?Z_STREAM_ERROR$1:(r.head=t,t.done=!1,Z_OK$1)},inflateSetDictionary=(e,t)=>{const r=t.length;let n,i,a;return inflateStateCheck(e)?Z_STREAM_ERROR$1:(n=e.state,0!==n.wrap&&n.mode!==DICT?Z_STREAM_ERROR$1:n.mode===DICT&&(i=1,i=adler32_1(i,t,r,0),i!==n.check)?Z_DATA_ERROR$1:(a=updatewindow(e,t,r,r),a?(n.mode=MEM,Z_MEM_ERROR$1):(n.havedict=1,Z_OK$1)))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo:inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString$2=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH,Z_FINISH:Z_FINISH,Z_OK:Z_OK,Z_STREAM_END:Z_STREAM_END,Z_NEED_DICT:Z_NEED_DICT,Z_STREAM_ERROR:Z_STREAM_ERROR,Z_DATA_ERROR:Z_DATA_ERROR,Z_MEM_ERROR:Z_MEM_ERROR}=constants$2;function Inflate$1(e){this.options=common.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let r=inflate_1$2.inflateInit2(this.strm,t.windowBits);if(r!==Z_OK)throw new Error(messages$1[r]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=strings.string2buf(t.dictionary):"[object ArrayBuffer]"===toString$2.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=inflate_1$2.inflateSetDictionary(this.strm,t.dictionary),r!==Z_OK)))throw new Error(messages$1[r])}function inflate$1(e,t){const r=new Inflate$1(t);if(r.push(e),r.err)throw r.msg||messages$1[r.err];return r.result}function inflateRaw$1(e,t){return(t=t||{}).raw=!0,inflate$1(e,t)}Inflate$1.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(o=t===~~t?t:!0===t?Z_FINISH:Z_NO_FLUSH,"[object ArrayBuffer]"===toString$2.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=inflate_1$2.inflate(r,o),a===Z_NEED_DICT&&i&&(a=inflate_1$2.inflateSetDictionary(r,i),a===Z_OK?a=inflate_1$2.inflate(r,o):a===Z_DATA_ERROR&&(a=Z_NEED_DICT));r.avail_in>0&&a===Z_STREAM_END&&r.state.wrap>0&&0!==e[r.next_in];)inflate_1$2.inflateReset(r),a=inflate_1$2.inflate(r,o);switch(a){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(a),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(0===r.avail_out||a===Z_STREAM_END))if("string"===this.options.to){let e=strings.utf8border(r.output,r.next_out),t=r.next_out-e,i=strings.buf2string(r.output,e);r.next_out=t,r.avail_out=n-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(a!==Z_OK||0!==s){if(a===Z_STREAM_END)return a=inflate_1$2.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},Inflate$1.prototype.onData=function(e){this.chunks.push(e)},Inflate$1.prototype.onEnd=function(e){e===Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants:constants};const{Inflate:Inflate,inflate:inflate,inflateRaw:inflateRaw,ungzip:ungzip}=inflate_1$1;var inflate_1=inflate,eventemitter3={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new i(n,a||e,o),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=new Array(a);i<a;i++)o[i]=n[i].fn;return o},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var u,c,d=this._events[s],l=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),l){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,i),!0;case 5:return d.fn.call(d.context,t,n,i,a),!0;case 6:return d.fn.call(d.context,t,n,i,a,o),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];d.fn.apply(d.context,u)}else{var p,h=d.length;for(c=0;c<h;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),l){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,i);break;default:if(!u)for(p=1,u=new Array(l-1);p<l;p++)u[p-1]=arguments[p];d[c].fn.apply(d[c].context,u)}}return!0},s.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||n&&s.context!==n||o(this,a);else{for(var u=0,c=[],d=s.length;u<d;u++)(s[u].fn!==t||i&&!s[u].once||n&&s[u].context!==n)&&c.push(s[u]);c.length?this._events[a]=1===c.length?c[0]:c:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s}(eventemitter3);var EventEmitter$1=eventemitter3.exports;function chunks(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map(((r,n)=>e.slice(n*t,(n+1)*t)))}const isVersionedTransaction=e=>"version"in e;function decode$2$1(e){return new TextDecoder("utf-8").decode(e)}function encode$2$1(e){return(new TextEncoder).encode(e)}function encode$1$1(e){return bs58$1.encode(e)}function encode$4(e){return e.toString("base64")}function decode$4(e){return buffer.Buffer.from(e,"base64")}function parseIdlErrors(e){const t=new Map;return e.errors&&e.errors.forEach((e=>{var r;let n=null!==(r=e.msg)&&void 0!==r?r:e.name;t.set(e.code,n)})),t}function toInstruction(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(e.args.length!=r.length)throw new Error("Invalid argument length");const i={};let a=0;return e.args.forEach((e=>{i[e.name]=r[a],a+=1})),i}function validateAccounts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((e=>{if("accounts"in e)validateAccounts(e.accounts,t[e.name]);else if(void 0===t[e.name])throw new Error(`Invalid arguments: ${e.name} not provided.`)}))}function translateAddress(e){return e instanceof PublicKey?e:new PublicKey(e)}class StructError extends TypeError{constructor(e,t){let r;const{message:n,...i}=e,{path:a}=e;super(0===a.length?n:"At path: "+a.join(".")+" -- "+n),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var n;return null!=(n=r)?n:r=[e,...t()]}}}function isIterable(e){return isObject$2(e)&&"function"==typeof e[Symbol.iterator]}function isObject$2(e){return"object"==typeof e&&null!=e}function print(e){return"string"==typeof e?JSON.stringify(e):""+e}function shiftIterator(e){const{done:t,value:r}=e.next();return t?void 0:r}function toFailure(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:a}=t,{type:o}=r,{refinement:s,message:u="Expected a value of type `"+o+"`"+(s?" with refinement `"+s+"`":"")+", but received: `"+print(n)+"`"}=e;return{value:n,type:o,refinement:s,key:i[i.length-1],path:i,branch:a,...e,message:u}}function*toFailures(e,t,r,n){isIterable(e)||(e=[e]);for(const i of e){const e=toFailure(i,t,r,n);e&&(yield e)}}function*run(e,t,r){void 0===r&&(r={});const{path:n=[],branch:i=[e],coerce:a=!1,mask:o=!1}=r,s={path:n,branch:i};if(a&&(e=t.coercer(e,s),o&&"type"!==t.type&&isObject$2(t.schema)&&isObject$2(e)&&!Array.isArray(e)))for(const r in e)void 0===t.schema[r]&&delete e[r];let u=!0;for(const r of t.validator(e,s))u=!1,yield[r,void 0];for(let[r,c,d]of t.entries(e,s)){const t=run(c,d,{path:void 0===r?n:[...n,r],branch:void 0===r?i:[...i,c],coerce:a,mask:o});for(const n of t)n[0]?(u=!1,yield[n[0],void 0]):a&&(c=n[1],void 0===r?e=c:e instanceof Map?e.set(r,c):e instanceof Set?e.add(c):isObject$2(e)&&(e[r]=c))}if(u)for(const r of t.refiner(e,s))u=!1,yield[r,void 0];u&&(yield[void 0,e])}class Struct{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:t,schema:r,validator:n,refiner:i,coercer:a=(e=>e),entries:o=function*(){}}=e;this.type=t,this.schema=r,this.entries=o,this.coercer=a,this.validator=n?(e,t)=>toFailures(n(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>toFailures(i(e,t),t,this,e):()=>[]}assert(e){return assert$1(e,this)}create(e){return create$1(e,this)}is(e){return is(e,this)}mask(e){return mask(e,this)}validate(e,t){return void 0===t&&(t={}),validate(e,this,t)}}function assert$1(e,t){const r=validate(e,t);if(r[0])throw r[0]}function create$1(e,t){const r=validate(e,t,{coerce:!0});if(r[0])throw r[0];return r[1]}function mask(e,t){const r=validate(e,t,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function is(e,t){return!validate(e,t)[0]}function validate(e,t,r){void 0===r&&(r={});const n=run(e,t,r),i=shiftIterator(n);if(i[0]){return[new StructError(i[0],(function*(){for(const e of n)e[0]&&(yield e[0])})),void 0]}return[void 0,i[1]]}function define(e,t){return new Struct({type:e,schema:null,validator:t})}function any(){return define("any",(()=>!0))}function array(e){return new Struct({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: "+print(e)})}function boolean(){return define("boolean",(e=>"boolean"==typeof e))}function literal(e){const t=print(e),r=typeof e;return new Struct({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||"Expected the literal `"+t+"`, but received: "+print(r)})}function nullable(e){return new Struct({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function number$1(){return define("number",(e=>"number"==typeof e&&!isNaN(e)||"Expected a number, but received: "+print(e)))}function optional(e){return new Struct({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function string(){return define("string",(e=>"string"==typeof e||"Expected a string, but received: "+print(e)))}function type(e){const t=Object.keys(e);return new Struct({type:"type",schema:e,*entries(r){if(isObject$2(r))for(const n of t)yield[n,r[n],e[n]]},validator:e=>isObject$2(e)||"Expected an object, but received: "+print(e)})}function union$1(e){const t=e.map((e=>e.type)).join(" | ");return new Struct({type:"union",schema:null,coercer:(t,r)=>(e.find((e=>{const[r]=e.validate(t,{coerce:!0});return!r}))||unknown()).coercer(t,r),validator(r,n){const i=[];for(const t of e){const[...e]=run(r,t,n),[a]=e;if(!a[0])return[];for(const[t]of e)t&&i.push(t)}return["Expected the value to satisfy a union of `"+t+"`, but received: "+print(r),...i]}})}function unknown(){return define("unknown",(()=>!0))}function coerce$1(e,t,r){return new Struct({...e,coercer:(n,i)=>is(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}const GET_MULTIPLE_ACCOUNTS_LIMIT=99;async function getMultipleAccountsAndContext(e,t,r){if(t.length<=GET_MULTIPLE_ACCOUNTS_LIMIT)return await getMultipleAccountsAndContextCore(e,t,r);{const n=chunks(t,GET_MULTIPLE_ACCOUNTS_LIMIT);return(await Promise.all(n.map((t=>getMultipleAccountsAndContextCore(e,t,r))))).flat()}}async function getMultipleAccountsAndContextCore(e,t,r){const n=null!=r?r:e.commitment,{value:i,context:a}=await e.getMultipleAccountsInfoAndContext(t,n);return i.map(((e,r)=>null===e?null:{publicKey:t[r],account:e,context:a}))}async function simulateTransaction(e,t,r,n,i){var a;r&&r.length>0&&t.sign(...r);const o=t._compile(),s=o.serialize(),u=t._serialize(s).toString("base64"),c={encoding:"base64",commitment:null!=n?n:e.commitment};if(i){const e=(Array.isArray(i)?i:o.nonProgramIds()).map((e=>e.toBase58()));c.accounts={encoding:"base64",addresses:e}}r&&(c.sigVerify=!0);const d=[u,c],l=create$1(await e._rpcRequest("simulateTransaction",d),SimulatedTransactionResponseStruct);if("error"in l){let e;if("data"in l.error&&(e=null===(a=l.error.data)||void 0===a?void 0:a.logs,e&&Array.isArray(e))){const t="\n    ",r=t+e.join(t);console.error(l.error.message,r)}throw new SendTransactionError("failed to simulate transaction: "+l.error.message,e)}return l.result}function jsonRpcResult(e){return coerce$1(createRpcResult(e),UnknownRpcResult,(t=>"error"in t?t:{...t,result:create$1(t.result,e)}))}const UnknownRpcResult=createRpcResult(unknown());function createRpcResult(e){return union$1([type({jsonrpc:literal("2.0"),id:string(),result:e}),type({jsonrpc:literal("2.0"),id:string(),error:type({code:unknown(),message:string(),data:optional(any())})})])}function jsonRpcResultAndContext(e){return jsonRpcResult(type({context:type({slot:number$1()}),value:e}))}const SimulatedTransactionResponseStruct=jsonRpcResultAndContext(type({err:nullable(union$1([type({}),string()])),logs:nullable(array(string())),accounts:optional(nullable(array(nullable(type({executable:boolean(),owner:string(),lamports:number$1(),data:array(string()),rentEpoch:optional(number$1())}))))),unitsConsumed:optional(number$1())}));class AnchorProvider{constructor(e,t,r){this.connection=e,this.wallet=t,this.opts=r,this.publicKey=null==t?void 0:t.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,r){var n,i,a,o;if(void 0===r&&(r=this.opts),isVersionedTransaction(e))t&&e.sign(t);else if(e.feePayer=null!==(n=e.feePayer)&&void 0!==n?n:this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(r.preflightCommitment)).blockhash,t)for(const r of t)e.partialSign(r);const s=(e=await this.wallet.signTransaction(e)).serialize();try{return await sendAndConfirmRawTransaction(this.connection,s,r)}catch(t){if(t instanceof ConfirmError){const r=encode$1$1(isVersionedTransaction(e)?(null===(i=e.signatures)||void 0===i?void 0:i[0])||new Uint8Array:null!==(a=e.signature)&&void 0!==a?a:new Uint8Array),n=await this.connection.getTransaction(r,{commitment:"confirmed"});if(n){const e=null===(o=n.meta)||void 0===o?void 0:o.logMessages;throw e?new SendTransactionError(t.message,e):t}throw t}throw t}}async sendAll(e,t){var r,n,i;void 0===t&&(t=this.opts);const a=(await this.connection.getLatestBlockhash(t.preflightCommitment)).blockhash;let o=e.map((e=>{var t,r;if(isVersionedTransaction(e.tx)){let t=e.tx;return e.signers&&t.sign(e.signers),t}{let n=e.tx,i=null!==(t=e.signers)&&void 0!==t?t:[];return n.feePayer=null!==(r=n.feePayer)&&void 0!==r?r:this.wallet.publicKey,n.recentBlockhash=a,i.forEach((e=>{n.partialSign(e)})),n}}));const s=await this.wallet.signAllTransactions(o),u=[];for(let e=0;e<o.length;e+=1){const a=s[e],o=a.serialize();try{u.push(await sendAndConfirmRawTransaction(this.connection,o,t))}catch(e){if(e instanceof ConfirmError){const t=encode$1$1(isVersionedTransaction(a)?(null===(r=a.signatures)||void 0===r?void 0:r[0])||new Uint8Array:null!==(n=a.signature)&&void 0!==n?n:new Uint8Array),o=await this.connection.getTransaction(t,{commitment:"confirmed"});if(o){const t=null===(i=o.meta)||void 0===i?void 0:i.logMessages;throw t?new SendTransactionError(e.message,t):e}throw e}throw e}}return u}async simulate(e,t,r,n){let i,a=(await this.connection.getLatestBlockhash(null!=r?r:this.connection.commitment)).blockhash;if(isVersionedTransaction(e)?(t&&(e.sign(t),e=await this.wallet.signTransaction(e)),i=await this.connection.simulateTransaction(e,{commitment:r})):(e.feePayer=e.feePayer||this.wallet.publicKey,e.recentBlockhash=a,t&&(e=await this.wallet.signTransaction(e)),i=await simulateTransaction(this.connection,e,t,r,n)),i.value.err)throw new SimulateError(i.value);return i.value}}class SimulateError extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function sendAndConfirmRawTransaction(e,t,r){const n=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment},i=await e.sendRawTransaction(t,n),a=(await e.confirmTransaction(i,r&&r.commitment)).value;if(a.err)throw new ConfirmError(`Raw transaction ${i} failed (${JSON.stringify(a)})`);return i}class ConfirmError extends Error{constructor(e){super(e)}}function getProvider(){return AnchorProvider.local()}const _FEATURES=new Map;function isSet(e){return void 0!==_FEATURES.get(e)}class IdlError extends Error{constructor(e){super(e),this.name="IdlError"}}class ProgramErrorStack{constructor(e){this.stack=e}static parse(e){var t;const r=/^Program (\w*) invoke/,n=/^Program \w* success/,i=[];for(let a=0;a<e.length;a++){if(n.exec(e[a])){i.pop();continue}const o=null===(t=r.exec(e[a]))||void 0===t?void 0:t[1];o&&i.push(new PublicKey(o))}return new ProgramErrorStack(i)}}class AnchorError extends Error{constructor(e,t,r,n,i,a){super(r.join("\n").replace("Program log: ","")),this.errorLogs=r,this.logs=n,this.error={errorCode:e,errorMessage:t,comparedValues:a,origin:i},this._programErrorStack=ProgramErrorStack.parse(n)}static parse(e){if(!e)return null;const t=e.findIndex((e=>e.startsWith("Program log: AnchorError")));if(-1===t)return null;const r=e[t],n=[r];let i;if(t+1<e.length)if("Program log: Left:"===e[t+1]){const r=/^Program log: (.*)$/,a=r.exec(e[t+2])[1],o=r.exec(e[t+4])[1];i=[new PublicKey(a),new PublicKey(o)],n.push(...e.slice(t+1,t+5))}else if(e[t+1].startsWith("Program log: Left:")){const r=/^Program log: (Left|Right): (.*)$/,a=r.exec(e[t+1])[2],o=r.exec(e[t+2])[2];n.push(...e.slice(t+1,t+3)),i=[a,o]}const a=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),o=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),s=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r);if(a){const[t,r,o]=a.slice(1,4),s={code:t,number:parseInt(r)};return new AnchorError(s,o,n,e,void 0,i)}if(o){const[t,r,a,s,u]=o.slice(1,6),c={code:a,number:parseInt(s)},d={file:t,line:parseInt(r)};return new AnchorError(c,u,n,e,d,i)}if(s){const[t,r,a,o]=s.slice(1,5),u=t,c={code:r,number:parseInt(a)};return new AnchorError(c,o,n,e,u,i)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class ProgramError extends Error{constructor(e,t,r){super(),this.code=e,this.msg=t,this.logs=r,r&&(this._programErrorStack=ProgramErrorStack.parse(r))}static parse(e,t){const r=e.toString();let n,i;if(r.includes("custom program error:")){let e=r.split("custom program error: ");if(2!==e.length)return null;n=e[1]}else{const e=r.match(/"Custom":([0-9]+)}/g);if(!e||e.length>1)return null;n=e[0].match(/([0-9]+)/g)[0]}try{i=parseInt(n)}catch(e){return null}let a=t.get(i);return void 0!==a?new ProgramError(i,a,e.logs):(a=LangErrorMessage.get(i),void 0!==a?new ProgramError(i,a,e.logs):null)}get program(){var e;return null===(e=this._programErrorStack)||void 0===e?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return null===(e=this._programErrorStack)||void 0===e?void 0:e.stack}toString(){return this.msg}}function translateError(e,t){isSet("debug-logs")&&console.log("Translating error:",e);const r=AnchorError.parse(e.logs);if(r)return r;const n=ProgramError.parse(e,t);if(n)return n;if(e.logs){const t={get:function(t,r){return"programErrorStack"===r?t.programErrorStack.stack:"program"===r?t.programErrorStack.stack[e.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return e.programErrorStack=ProgramErrorStack.parse(e.logs),new Proxy(e,t)}return e}const LangErrorCode={InstructionMissing:100,InstructionFallbackNotFound:101,InstructionDidNotDeserialize:102,InstructionDidNotSerialize:103,IdlInstructionStub:1e3,IdlInstructionInvalidProgram:1001,ConstraintMut:2e3,ConstraintHasOne:2001,ConstraintSigner:2002,ConstraintRaw:2003,ConstraintOwner:2004,ConstraintRentExempt:2005,ConstraintSeeds:2006,ConstraintExecutable:2007,ConstraintState:2008,ConstraintAssociated:2009,ConstraintAssociatedInit:2010,ConstraintClose:2011,ConstraintAddress:2012,ConstraintZero:2013,ConstraintTokenMint:2014,ConstraintTokenOwner:2015,ConstraintMintMintAuthority:2016,ConstraintMintFreezeAuthority:2017,ConstraintMintDecimals:2018,ConstraintSpace:2019,ConstraintAccountIsNone:2020,RequireViolated:2500,RequireEqViolated:2501,RequireKeysEqViolated:2502,RequireNeqViolated:2503,RequireKeysNeqViolated:2504,RequireGtViolated:2505,RequireGteViolated:2506,AccountDiscriminatorAlreadySet:3e3,AccountDiscriminatorNotFound:3001,AccountDiscriminatorMismatch:3002,AccountDidNotDeserialize:3003,AccountDidNotSerialize:3004,AccountNotEnoughKeys:3005,AccountNotMutable:3006,AccountOwnedByWrongProgram:3007,InvalidProgramId:3008,InvalidProgramExecutable:3009,AccountNotSigner:3010,AccountNotSystemOwned:3011,AccountNotInitialized:3012,AccountNotProgramData:3013,AccountNotAssociatedTokenAccount:3014,AccountSysvarMismatch:3015,AccountReallocExceedsLimit:3016,AccountDuplicateReallocs:3017,DeclaredProgramIdMismatch:4100,Deprecated:5e3},LangErrorMessage=new Map([[LangErrorCode.InstructionMissing,"8 byte instruction identifier not provided"],[LangErrorCode.InstructionFallbackNotFound,"Fallback functions are not supported"],[LangErrorCode.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[LangErrorCode.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[LangErrorCode.IdlInstructionStub,"The program was compiled without idl instructions"],[LangErrorCode.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[LangErrorCode.ConstraintMut,"A mut constraint was violated"],[LangErrorCode.ConstraintHasOne,"A has one constraint was violated"],[LangErrorCode.ConstraintSigner,"A signer constraint was violated"],[LangErrorCode.ConstraintRaw,"A raw constraint was violated"],[LangErrorCode.ConstraintOwner,"An owner constraint was violated"],[LangErrorCode.ConstraintRentExempt,"A rent exemption constraint was violated"],[LangErrorCode.ConstraintSeeds,"A seeds constraint was violated"],[LangErrorCode.ConstraintExecutable,"An executable constraint was violated"],[LangErrorCode.ConstraintState,"Deprecated Error, feel free to replace with something else"],[LangErrorCode.ConstraintAssociated,"An associated constraint was violated"],[LangErrorCode.ConstraintAssociatedInit,"An associated init constraint was violated"],[LangErrorCode.ConstraintClose,"A close constraint was violated"],[LangErrorCode.ConstraintAddress,"An address constraint was violated"],[LangErrorCode.ConstraintZero,"Expected zero account discriminant"],[LangErrorCode.ConstraintTokenMint,"A token mint constraint was violated"],[LangErrorCode.ConstraintTokenOwner,"A token owner constraint was violated"],[LangErrorCode.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[LangErrorCode.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[LangErrorCode.ConstraintMintDecimals,"A mint decimals constraint was violated"],[LangErrorCode.ConstraintSpace,"A space constraint was violated"],[LangErrorCode.ConstraintAccountIsNone,"A required account for the constraint is None"],[LangErrorCode.RequireViolated,"A require expression was violated"],[LangErrorCode.RequireEqViolated,"A require_eq expression was violated"],[LangErrorCode.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[LangErrorCode.RequireNeqViolated,"A require_neq expression was violated"],[LangErrorCode.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[LangErrorCode.RequireGtViolated,"A require_gt expression was violated"],[LangErrorCode.RequireGteViolated,"A require_gte expression was violated"],[LangErrorCode.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[LangErrorCode.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[LangErrorCode.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[LangErrorCode.AccountDidNotDeserialize,"Failed to deserialize the account"],[LangErrorCode.AccountDidNotSerialize,"Failed to serialize the account"],[LangErrorCode.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[LangErrorCode.AccountNotMutable,"The given account is not mutable"],[LangErrorCode.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[LangErrorCode.InvalidProgramId,"Program ID was not as expected"],[LangErrorCode.InvalidProgramExecutable,"Program account is not executable"],[LangErrorCode.AccountNotSigner,"The given account did not sign"],[LangErrorCode.AccountNotSystemOwned,"The given account is not owned by the system program"],[LangErrorCode.AccountNotInitialized,"The program expected this account to be already initialized"],[LangErrorCode.AccountNotProgramData,"The given account is not a program data account"],[LangErrorCode.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[LangErrorCode.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[LangErrorCode.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[LangErrorCode.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[LangErrorCode.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[LangErrorCode.Deprecated,"The API being used is deprecated and should no longer be used"]]);var __assign$1=function(){return __assign$1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$1.apply(this,arguments)},__assign=function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign.apply(this,arguments)};function lowerCase(e){return e.toLowerCase()}var DEFAULT_SPLIT_REGEXP=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],DEFAULT_STRIP_REGEXP=/[^A-Z0-9]+/gi;function noCase(e,t){void 0===t&&(t={});for(var r=t.splitRegexp,n=void 0===r?DEFAULT_SPLIT_REGEXP:r,i=t.stripRegexp,a=void 0===i?DEFAULT_STRIP_REGEXP:i,o=t.transform,s=void 0===o?lowerCase:o,u=t.delimiter,c=void 0===u?" ":u,d=replace(replace(e,n,"$1\0$2"),a,"\0"),l=0,p=d.length;"\0"===d.charAt(l);)l++;for(;"\0"===d.charAt(p-1);)p--;return d.slice(l,p).split("\0").map(s).join(c)}function replace(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce((function(e,t){return e.replace(t,r)}),e)}function dotCase(e,t){return void 0===t&&(t={}),noCase(e,__assign({delimiter:"."},t))}function snakeCase(e,t){return void 0===t&&(t={}),dotCase(e,__assign$1({delimiter:"_"},t))}class IdlCoder{static fieldLayout(e,t){const r=void 0!==e.name?camelCase$1(e.name):void 0;switch(e.type){case"bool":return dist.bool(r);case"u8":return dist.u8(r);case"i8":return dist.i8(r);case"u16":return dist.u16(r);case"i16":return dist.i16(r);case"u32":return dist.u32(r);case"i32":return dist.i32(r);case"f32":return dist.f32(r);case"u64":return dist.u64(r);case"i64":return dist.i64(r);case"f64":return dist.f64(r);case"u128":return dist.u128(r);case"i128":return dist.i128(r);case"u256":return dist.u256(r);case"i256":return dist.i256(r);case"bytes":return dist.vecU8(r);case"string":return dist.str(r);case"publicKey":return dist.publicKey(r);default:if("vec"in e.type)return dist.vec(IdlCoder.fieldLayout({name:void 0,type:e.type.vec},t),r);if("option"in e.type)return dist.option(IdlCoder.fieldLayout({name:void 0,type:e.type.option},t),r);if("defined"in e.type){if(!t)throw new IdlError("User defined types not provided");const n=e.type.defined,i=t.filter((e=>e.name===n));if(1!==i.length)throw new IdlError(`Type not found: ${JSON.stringify(e)}`);return IdlCoder.typeDefLayout(i[0],t,r)}if("array"in e.type){let n=e.type.array[0],i=e.type.array[1],a=IdlCoder.fieldLayout({name:void 0,type:n},t);return dist.array(a,i,r)}throw new Error(`Not yet implemented: ${e}`)}}static typeDefLayout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;switch(e.type.kind){case"struct":{const n=e.type.fields.map((e=>IdlCoder.fieldLayout(e,t)));return dist.struct(n,r)}case"enum":{let n=e.type.variants.map((e=>{const r=camelCase$1(e.name);if(!e.fields)return dist.struct([],r);const n=e.fields.map(((e,r)=>(null==e?void 0:e.name)?IdlCoder.fieldLayout(e,t):IdlCoder.fieldLayout({type:e,name:r.toString()},t)));return dist.struct(n,r)}));return void 0!==r?dist.rustEnum(n).replicate(r):dist.rustEnum(n,r)}case"alias":return IdlCoder.fieldLayout({type:e.type.value,name:e.name},t)}}}const SIGHASH_GLOBAL_NAMESPACE="global";class BorshInstructionCoder{constructor(e){this.idl=e,this.ixLayout=BorshInstructionCoder.parseIxLayout(e);const t=new Map;e.instructions.forEach((e=>{const r=sighash(SIGHASH_GLOBAL_NAMESPACE,e.name);t.set(bs58$1.encode(r),{layout:this.ixLayout.get(e.name),name:e.name})})),this.sighashLayouts=t}encode(e,t){return this._encode(SIGHASH_GLOBAL_NAMESPACE,e,t)}_encode(e,t,r){const n=buffer.Buffer.alloc(1e3),i=camelCase$1(t),a=this.ixLayout.get(i);if(!a)throw new Error(`Unknown method: ${i}`);const o=a.encode(r,n),s=n.slice(0,o);return buffer.Buffer.concat([sighash(e,t),s])}static parseIxLayout(e){const t=e.instructions.map((t=>{let r=t.args.map((t=>{var r,n;return IdlCoder.fieldLayout(t,Array.from([...null!==(r=e.accounts)&&void 0!==r?r:[],...null!==(n=e.types)&&void 0!==n?n:[]]))}));const n=camelCase$1(t.name);return[n,dist.struct(r,n)]}));return new Map(t)}decode(e){"string"==typeof e&&(e="hex"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hex")?buffer.Buffer.from(e,"hex"):bs58$1.decode(e));let t=bs58$1.encode(e.slice(0,8)),r=e.slice(8);const n=this.sighashLayouts.get(t);return n?{data:n.layout.decode(r),name:n.name}:null}format(e,t){return InstructionFormatter.format(e,t,this.idl)}}class InstructionFormatter{static format(e,t,r){const n=r.instructions.filter((t=>e.name===t.name))[0];if(void 0===n)return console.error("Invalid instruction given"),null;const i=n.args.map((t=>({name:t.name,type:InstructionFormatter.formatIdlType(t.type),data:InstructionFormatter.formatIdlData(t,e.data[t.name],r.types)}))),a=InstructionFormatter.flattenIdlAccounts(n.accounts);return{args:i,accounts:t.map(((e,t)=>t<a.length?{name:a[t].name,...e}:{name:void 0,...e}))}}static formatIdlType(e){if("string"==typeof e)return e;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("defined"in e)return e.defined;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,r){if("string"==typeof e.type)return t.toString();if(e.type.hasOwnProperty("vec"))return"["+t.map((t=>this.formatIdlData({name:"",type:e.type.vec},t))).join(", ")+"]";if(e.type.hasOwnProperty("option"))return null===t?"null":this.formatIdlData({name:"",type:e.type.option},t,r);if(e.type.hasOwnProperty("defined")){if(void 0===r)throw new Error("User defined types not provided");const n=r.filter((t=>t.name===e.type.defined));if(1!==n.length)throw new Error(`Type not found: ${e.type.defined}`);return InstructionFormatter.formatIdlDataDefined(n[0],t,r)}return"unknown"}static formatIdlDataDefined(e,t,r){switch(e.type.kind){case"struct":{const n=e.type,i=Object.keys(t).map((e=>{const i=n.fields.find((t=>t.name===e));if(!i)throw new Error("Unable to find type");return e+": "+InstructionFormatter.formatIdlData(i,t[e],r)})).join(", ");return"{ "+i+" }"}case"enum":if(0===e.type.variants.length)return"{}";if(e.type.variants[0].name){const n=e.type.variants,i=Object.keys(t)[0],a=t[i],o=Object.keys(a).map((e=>{var t;const o=a[e],s=null===(t=n[i])||void 0===t?void 0:t.find((t=>t.name===e));if(!s)throw new Error("Unable to find variant");return e+": "+InstructionFormatter.formatIdlData(s,o,r)})).join(", "),s=camelCase$1(i,{pascalCase:!0});return 0===o.length?s:`${s} { ${o} }`}return"Tuple formatting not yet implemented";case"alias":return InstructionFormatter.formatIdlType(e.type.value)}}static flattenIdlAccounts(e,t){return e.map((e=>{const r=sentenceCase(e.name);if(e.hasOwnProperty("accounts")){const n=t?`${t} > ${r}`:r;return InstructionFormatter.flattenIdlAccounts(e.accounts,n)}return{...e,name:t?`${t} > ${r}`:r}})).flat()}}function sentenceCase(e){const t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}function sighash(e,t){let r=`${e}:${snakeCase(t)}`;return buffer.Buffer.from(sha256$2(r).slice(0,8))}function accountSize(e,t){switch(t.type.kind){case"struct":return t.type.fields.map((t=>typeSize(e,t.type))).reduce(((e,t)=>e+t),0);case"enum":{const r=t.type.variants.map((t=>t.fields?t.fields.map((t=>typeSize(e,"object"==typeof t&&"name"in t?t.type:t))).reduce(((e,t)=>e+t),0):0));return Math.max(...r)+1}case"alias":return typeSize(e,t.type.value)}}function typeSize(e,t){var r,n;switch(t){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"u256":case"i256":case"publicKey":return 32;default:if("vec"in t)return 1;if("option"in t)return 1+typeSize(e,t.option);if("coption"in t)return 4+typeSize(e,t.coption);if("defined"in t){const i=null!==(n=null===(r=e.types)||void 0===r?void 0:r.filter((e=>e.name===t.defined)))&&void 0!==n?n:[];if(1!==i.length)throw new IdlError(`Type not found: ${JSON.stringify(t)}`);return accountSize(e,i[0])}if("array"in t){let r=t.array[0],n=t.array[1];return typeSize(e,r)*n}throw new Error(`Invalid type ${JSON.stringify(t)}`)}}const DISCRIMINATOR_SIZE=8;function discriminator(e){return Buffer.from(sha256$2(e).slice(0,DISCRIMINATOR_SIZE))}class BorshAccountsCoder{constructor(e){if(void 0===e.accounts)return void(this.accountLayouts=new Map);const t=e.accounts.map((t=>[t.name,IdlCoder.typeDefLayout(t,e.types)]));this.accountLayouts=new Map(t),this.idl=e}async encode(e,t){const r=buffer.Buffer.alloc(1e3),n=this.accountLayouts.get(e);if(!n)throw new Error(`Unknown account: ${e}`);const i=n.encode(t,r);let a=r.slice(0,i),o=BorshAccountsCoder.accountDiscriminator(e);return buffer.Buffer.concat([o,a])}decode(e,t){if(BorshAccountsCoder.accountDiscriminator(e).compare(t.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeAny(e){const t=e.slice(0,8),r=Array.from(this.accountLayouts.keys()).find((e=>BorshAccountsCoder.accountDiscriminator(e).equals(t)));if(!r)throw new Error("Account descriminator not found");return this.decodeUnchecked(r,e)}decodeUnchecked(e,t){const r=t.subarray(DISCRIMINATOR_SIZE),n=this.accountLayouts.get(e);if(!n)throw new Error(`Unknown account: ${e}`);return n.decode(r)}memcmp(e,t){const r=BorshAccountsCoder.accountDiscriminator(e);return{offset:0,bytes:bs58$1.encode(t?buffer.Buffer.concat([r,t]):r)}}size(e){var t;return DISCRIMINATOR_SIZE+(null!==(t=accountSize(this.idl,e))&&void 0!==t?t:0)}static accountDiscriminator(e){return discriminator(`account:${camelCase$1(e,{pascalCase:!0,preserveConsecutiveUppercase:!0})}`)}}class BorshEventCoder{constructor(e){if(void 0===e.events)return void(this.layouts=new Map);const t=e.events.map((t=>{let r={name:t.name,type:{kind:"struct",fields:t.fields.map((e=>({name:e.name,type:e.type})))}};return[t.name,IdlCoder.typeDefLayout(r,e.types)]}));this.layouts=new Map(t),this.discriminators=new Map(void 0===e.events?[]:e.events.map((e=>[encode$4(eventDiscriminator(e.name)),e.name])))}decode(e){let t;try{t=decode$4(e)}catch(e){return null}const r=encode$4(t.slice(0,8)),n=this.discriminators.get(r);if(void 0===n)return null;const i=this.layouts.get(n);if(!i)throw new Error(`Unknown event: ${n}`);return{data:i.decode(t.slice(8)),name:n}}}function eventDiscriminator(e){return discriminator(`event:${e}`)}class BorshTypesCoder{constructor(e){if(void 0===e.types)return void(this.typeLayouts=new Map);const t=e.types.map((t=>[t.name,IdlCoder.typeDefLayout(t,e.types)]));this.typeLayouts=new Map(t),this.idl=e}encode(e,t){const r=buffer.Buffer.alloc(1e3),n=this.typeLayouts.get(e);if(!n)throw new Error(`Unknown type: ${e}`);const i=n.encode(t,r);return r.slice(0,i)}decode(e,t){const r=this.typeLayouts.get(e);if(!r)throw new Error(`Unknown type: ${e}`);return r.decode(t)}}class BorshCoder{constructor(e){this.instruction=new BorshInstructionCoder(e),this.accounts=new BorshAccountsCoder(e),this.events=new BorshEventCoder(e),this.types=new BorshTypesCoder(e)}}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class Layout{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,r){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var Layout_2=Layout;function nameWithProperty(e,t){return t.property?e+"["+t.property+"]":e}class ExternalLayout extends Layout{isCount(){throw new Error("ExternalLayout is abstract")}}class OffsetLayout extends ExternalLayout{constructor(e,t,r){if(!(e instanceof Layout))throw new TypeError("layout must be a Layout");if(void 0===t)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof UInt||this.layout instanceof UIntBE}decode(e,t){return void 0===t&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,r){return void 0===r&&(r=0),this.layout.encode(e,t,r+this.offset)}}class UInt extends Layout{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeUIntLE(e,r,this.span),this.span}}class UIntBE extends Layout{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,r){return void 0===r&&(r=0),t.writeUIntBE(e,r,this.span),this.span}}const V2E32=Math.pow(2,32);function divmodInt64(e){const t=Math.floor(e/V2E32);return{hi32:t,lo32:e-t*V2E32}}function roundedInt64(e,t){return e*V2E32+t}class NearUInt64 extends Layout{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const r=e.readUInt32LE(t);return roundedInt64(e.readUInt32LE(t+4),r)}encode(e,t,r){void 0===r&&(r=0);const n=divmodInt64(e);return t.writeUInt32LE(n.lo32,r),t.writeUInt32LE(n.hi32,r+4),8}}class NearInt64 extends Layout{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const r=e.readUInt32LE(t);return roundedInt64(e.readInt32LE(t+4),r)}encode(e,t,r){void 0===r&&(r=0);const n=divmodInt64(e);return t.writeUInt32LE(n.lo32,r),t.writeInt32LE(n.hi32,r+4),8}}class Structure extends Layout{constructor(e,t,r){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof Layout),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===r&&(r=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(e,t);return t+=i,r+i}),0)}catch(e){throw new RangeError("indeterminate span")}return r}decode(e,t){void 0===t&&(t=0);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r){void 0===r&&(r=0);const n=r;let i=0,a=0;for(const n of this.fields){let o=n.span;if(a=0<o?o:0,void 0!==n.property){const i=e[n.property];void 0!==i&&(a=n.encode(i,t,r),0>o&&(o=n.getSpan(t,r)))}i=r,r+=o}return i+a-n}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class UnionDiscriminator{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class UnionLayoutDiscriminator extends UnionDiscriminator{constructor(e,t){if(!(e instanceof ExternalLayout&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}class Union extends Layout{constructor(e,t,r){const n=e instanceof UInt||e instanceof UIntBE;if(n)e=new UnionLayoutDiscriminator(new OffsetLayout(e));else if(e instanceof ExternalLayout&&e.isCount())e=new UnionLayoutDiscriminator(e);else if(!(e instanceof UnionDiscriminator))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof Layout))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&n&&(i+=e.layout.span)),super(i,r),this.discriminator=e,this.usesPrefixDiscriminator=n,this.defaultLayout=t,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return a(e)},this.configGetSourceVariant=function(e){a=e.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(e.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(e,t){let r;void 0===t&&(t=0);const n=this.discriminator,i=n.decode(e,t);let a=this.registry[i];if(void 0===a){let o=0;a=this.defaultLayout,this.usesPrefixDiscriminator&&(o=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[a.property]=this.defaultLayout.decode(e,t+o)}else r=a.decode(e,t);return r}encode(e,t,r){void 0===r&&(r=0);const n=this.getSourceVariant(e);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=n.layout.span),n.encode(e[n.property],t,r),a+i.encode(e[i.property],t,r+a)}return n.encode(e,t,r)}addVariant(e,t,r){const n=new VariantLayout(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t){let r=e;return Buffer.isBuffer(e)&&(void 0===t&&(t=0),r=this.discriminator.decode(e,t)),this.registry[r]}}class VariantLayout extends Layout{constructor(e,t,r,n){if(!(e instanceof Union))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof Layout))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof n)throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=r?r.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(e,t+r)}decode(e,t){const r=this.makeDestinationObject();if(void 0===t&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r){void 0===r&&(r=0);let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let i=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),i+=this.layout.getSpan(t,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class Blob$1 extends Layout{constructor(e,t){if(!(e instanceof ExternalLayout&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof ExternalLayout||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t){void 0===t&&(t=0);let r=this.span;return 0>r&&(r=this.length.decode(e,t)),e.slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof ExternalLayout&&(n=e.length),!Buffer.isBuffer(e)||n!==e.length)throw new TypeError(nameWithProperty("Blob.encode",this)+" requires (length "+n+") Buffer as src");if(r+n>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),r,n,"hex"),this.length instanceof ExternalLayout&&this.length.encode(n,t,r),n}}var offset=(e,t,r)=>new OffsetLayout(e,t,r),u8=e=>new UInt(1,e),u32$1=e=>new UInt(4,e),nu64=e=>new NearUInt64(e),ns64=e=>new NearInt64(e),struct=(e,t,r)=>new Structure(e,t,r),union=(e,t,r)=>new Union(e,t,r),blob=(e,t)=>new Blob$1(e,t);class RustStringLayout extends Layout_2{constructor(e){super(-1,e),this.property=e,this.layout=struct([u32$1("length"),u32$1("lengthPadding"),blob(offset(u32$1(),-8),"chars")],this.property)}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null==e)return this.layout.span;const n={chars:Buffer.from(e,"utf8")};return this.layout.encode(n,t,r)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.layout.decode(e,t).chars.toString()}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return u32$1().span+u32$1().span+new BN(new Uint8Array(e).slice(t,t+4),10,"le").toNumber()}}function rustStringLayout(e){return new RustStringLayout(e)}function publicKey$2(e){return blob(32,e)}const LAYOUT=union(u32$1("instruction"));LAYOUT.addVariant(0,struct([ns64("lamports"),ns64("space"),publicKey$2("owner")]),"createAccount"),LAYOUT.addVariant(1,struct([publicKey$2("owner")]),"assign"),LAYOUT.addVariant(2,struct([ns64("lamports")]),"transfer"),LAYOUT.addVariant(3,struct([publicKey$2("base"),rustStringLayout("seed"),ns64("lamports"),ns64("space"),publicKey$2("owner")]),"createAccountWithSeed"),LAYOUT.addVariant(4,struct([publicKey$2("authorized")]),"advanceNonceAccount"),LAYOUT.addVariant(5,struct([ns64("lamports")]),"withdrawNonceAccount"),LAYOUT.addVariant(6,struct([publicKey$2("authorized")]),"initializeNonceAccount"),LAYOUT.addVariant(7,struct([publicKey$2("authorized")]),"authorizeNonceAccount"),LAYOUT.addVariant(8,struct([ns64("space")]),"allocate"),LAYOUT.addVariant(9,struct([publicKey$2("base"),rustStringLayout("seed"),ns64("space"),publicKey$2("owner")]),"allocateWithSeed"),LAYOUT.addVariant(10,struct([publicKey$2("base"),rustStringLayout("seed"),publicKey$2("owner")]),"assignWithSeed"),LAYOUT.addVariant(11,struct([ns64("lamports"),rustStringLayout("seed"),publicKey$2("owner")]),"transferWithSeed"),Math.max(...Object.values(LAYOUT.registry).map((e=>e.span)));class WrappedLayout$1 extends Layout_2{constructor(e,t,r,n){super(e.span,n),this.layout=e,this.decoder=t,this.encoder=r}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,r){return this.layout.encode(this.encoder(e),t,r)}getSpan(e,t){return this.layout.getSpan(e,t)}}function publicKey$1(e){return new WrappedLayout$1(blob(32),(e=>new PublicKey(e)),(e=>e.toBuffer()),e)}function associated(e){let t=[buffer.Buffer.from([97,110,99,104,111,114])];for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];n.forEach((e=>{t.push(e instanceof buffer.Buffer?e:translateAddress(e).toBuffer())}));const[a]=PublicKey.findProgramAddressSync(t,translateAddress(e));return a}struct([u32$1("version"),u32$1("state"),publicKey$1("authorizedPubkey"),publicKey$1("nonce"),struct([nu64("lamportsPerSignature")],"feeCalculator")]);const TOKEN_PROGRAM_ID=new PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),ASSOCIATED_PROGRAM_ID=new PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var browserPonyfill$1={exports:{}};function isIdlAccounts(e){return"accounts"in e}async function idlAddress(e){const t=(await PublicKey.findProgramAddress([],e))[0];return await PublicKey.createWithSeed(t,seed(),e)}function seed(){return"anchor:idl"}!function(e,t){var r="undefined"!=typeof self?self:commonjsGlobal,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in e,o="ArrayBuffer"in e;if(o)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function m(e){var t=new FileReader,r=f(t);return t.readAsArrayBuffer(e),r}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=f(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=c(e),t=d(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},p.prototype.delete=function(e){delete this.map[c(e)]},p.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},p.prototype.set=function(e,t){this.map[c(e)]=d(t)},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),l(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),l(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),l(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){var r=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=function(e){var t=e.toUpperCase();return b.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},g.call(v.prototype),g.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];_.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function E(e,r){return new Promise((function(n,a){var o=new v(e,r);if(o.signal&&o.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var e,t,r={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;n(new _(i,r))},s.onerror=function(){a(new TypeError("Network request failed"))},s.ontimeout=function(){a(new TypeError("Network request failed"))},s.onabort=function(){a(new t.DOMException("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),o.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",u)}),s.send(void 0===o._bodyInit?null:o._bodyInit)}))}E.polyfill=!0,e.fetch||(e.fetch=E,e.Headers=p,e.Request=v,e.Response=_),t.Headers=p,t.Request=v,t.Response=_,t.fetch=E,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(browserPonyfill$1,browserPonyfill$1.exports),browserPonyfill$1.exports,dist.rustEnum([dist.struct([],"uninitialized"),dist.struct([dist.option(dist.publicKey(),"authorityAddress")],"buffer"),dist.struct([dist.publicKey("programdataAddress")],"program"),dist.struct([dist.u64("slot"),dist.option(dist.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,dist.u32());const IDL_ACCOUNT_LAYOUT=dist.struct([dist.publicKey("authority"),dist.vecU8("data")]);function decodeIdlAccount(e){return IDL_ACCOUNT_LAYOUT.decode(e)}function splitArgsAndCtx(e,t){var r,n;let i={};const a=e.args?e.args.length:0;if(t.length>a){if(t.length!==a+1)throw new Error(`provided too many arguments ${t} to instruction ${null==e?void 0:e.name} expecting: ${null!==(n=null===(r=e.args)||void 0===r?void 0:r.map((e=>e.name)))&&void 0!==n?n:[]}`);i=t.pop()}return[t,i]}class InstructionNamespaceFactory{static build(e,t,r){if("_inner"===e.name)throw new IdlError("the _inner name is reserved");const n=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];const[s,u]=splitArgsAndCtx(e,[...a]);validateAccounts(e.accounts,u.accounts),validateInstruction(e,...a);const c=n.accounts(u.accounts);return void 0!==u.remainingAccounts&&c.push(...u.remainingAccounts),isSet("debug-logs")&&console.log("Outgoing account metas:",c),new TransactionInstruction({keys:c,programId:r,data:t(e.name,toInstruction(e,...s))})};return n.accounts=t=>InstructionNamespaceFactory.accountsArray(t,e.accounts,r,e.name),n}static accountsArray(e,t,r,n){return e?t.map((t=>{if(void 0!==("accounts"in t?t.accounts:void 0)){const i=e[t.name];return InstructionNamespaceFactory.accountsArray(i,t.accounts,r,n).flat()}{const i=t;let a;try{a=translateAddress(e[t.name])}catch(e){throw new Error(`Wrong input type for account "${t.name}" in the instruction accounts object${void 0!==n?' for instruction "'+n+'"':""}. Expected PublicKey or string.`)}const o=i.isOptional&&a.equals(r);return{pubkey:a,isWritable:i.isMut&&!o,isSigner:i.isSigner&&!o}}})).flat():[]}}function validateInstruction(e){}class TransactionFactory{static build(e,t){return function(){for(var r,n,i,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];const[,u]=splitArgsAndCtx(e,[...o]),c=new Transaction;if(u.preInstructions&&u.instructions)throw new Error("instructions is deprecated, use preInstructions");return null===(r=u.preInstructions)||void 0===r||r.forEach((e=>c.add(e))),null===(n=u.instructions)||void 0===n||n.forEach((e=>c.add(e))),c.add(t(...o)),null===(i=u.postInstructions)||void 0===i||i.forEach((e=>c.add(e))),c}}}class RpcFactory{static build(e,t,r,n){return async function(){for(var i,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];const u=t(...o),[,c]=splitArgsAndCtx(e,[...o]);if(void 0===n.sendAndConfirm)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await n.sendAndConfirm(u,null!==(i=c.signers)&&void 0!==i?i:[],c.options)}catch(e){throw translateError(e,r)}}}}class AccountFactory{static build(e,t,r,n){var i;const a={};return null===(i=e.accounts)||void 0===i||i.forEach((i=>{const o=camelCase$1(i.name);a[o]=new AccountClient(e,i,r,n,t)})),a}}class AccountClient{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}get idlAccount(){return this._idlAccount}constructor(e,t,r,n,i){this._idlAccount=t,this._programId=r,this._provider=null!=n?n:getProvider(),this._coder=null!=i?i:new BorshCoder(e),this._size=this._coder.accounts.size(t)}async fetchNullable(e,t){const{data:r}=await this.fetchNullableAndContext(e,t);return r}async fetchNullableAndContext(e,t){const r=await this.getAccountInfoAndContext(e,t),{value:n,context:i}=r;return{data:n&&0!==n.data.length?this._coder.accounts.decode(this._idlAccount.name,n.data):null,context:i}}async fetch(e,t){const{data:r}=await this.fetchNullableAndContext(e,t);if(null===r)throw new Error(`Account does not exist or has no data ${e.toString()}`);return r}async fetchAndContext(e,t){const{data:r,context:n}=await this.fetchNullableAndContext(e,t);if(null===r)throw new Error(`Account does not exist ${e.toString()}`);return{data:r,context:n}}async fetchMultiple(e,t){return(await this.fetchMultipleAndContext(e,t)).map((e=>e?e.data:null))}async fetchMultipleAndContext(e,t){return(await getMultipleAccountsAndContext(this._provider.connection,e.map((e=>translateAddress(e))),t)).map((e=>{if(null==e)return null;const{account:t,context:r}=e;return{data:this._coder.accounts.decode(this._idlAccount.name,t.data),context:r}}))}async all(e){const t=this.coder.accounts.memcmp(this._idlAccount.name,e instanceof Buffer?e:void 0),r=[];return null!=(null==t?void 0:t.offset)&&null!=(null==t?void 0:t.bytes)&&r.push({memcmp:{offset:t.offset,bytes:t.bytes}}),null!=(null==t?void 0:t.dataSize)&&r.push({dataSize:t.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...r,...Array.isArray(e)?e:[]]})).map((e=>{let{pubkey:t,account:r}=e;return{publicKey:t,account:this._coder.accounts.decode(this._idlAccount.name,r.data)}}))}subscribe(e,t){const r=subscriptions.get(e.toString());if(r)return r.ee;const n=new EventEmitter$1;e=translateAddress(e);const i=this._provider.connection.onAccountChange(e,(e=>{const t=this._coder.accounts.decode(this._idlAccount.name,e.data);n.emit("change",t)}),t);return subscriptions.set(e.toString(),{ee:n,listener:i}),n}async unsubscribe(e){let t=subscriptions.get(e.toString());t?subscriptions&&await this._provider.connection.removeAccountChangeListener(t.listener).then((()=>{subscriptions.delete(e.toString())})).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(e,t){const r=this.size;if(void 0===this._provider.publicKey)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return SystemProgram.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:e.publicKey,space:null!=t?t:r,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(null!=t?t:r),programId:this._programId})}async associated(){const e=await this.associatedAddress(...arguments);return await this.fetch(e)}async associatedAddress(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return await associated(this._programId,...t)}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(translateAddress(e),t)}async getAccountInfoAndContext(e,t){return await this._provider.connection.getAccountInfoAndContext(translateAddress(e),t)}}const subscriptions=new Map,PROGRAM_LOG="Program log: ",PROGRAM_DATA="Program data: ",PROGRAM_LOG_START_INDEX=PROGRAM_LOG.length,PROGRAM_DATA_START_INDEX=PROGRAM_DATA.length;class EventManager{constructor(e,t,r){this._programId=e,this._provider=t,this._eventParser=new EventParser(e,r),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var r;let n=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(e)||this._eventListeners.set(e,[]),this._eventListeners.set(e,(null!==(r=this._eventListeners.get(e))&&void 0!==r?r:[]).concat(n)),this._eventCallbacks.set(n,[e,t]),void 0!==this._onLogsSubscriptionId||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,((e,t)=>{if(!e.err)for(const r of this._eventParser.parseLogs(e.logs)){const n=this._eventListeners.get(r.name);n&&n.forEach((n=>{const i=this._eventCallbacks.get(n);if(i){const[,n]=i;n(r.data,t.slot,e.signature)}}))}}))),n}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[r]=t;let n=this._eventListeners.get(r);if(!n)throw new Error(`Event listeners don't exist for ${r}!`);if(this._eventCallbacks.delete(e),n=n.filter((t=>t!==e)),this._eventListeners.set(r,n),0===n.length&&this._eventListeners.delete(r),0===this._eventCallbacks.size){if(0!==this._eventListeners.size)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);void 0!==this._onLogsSubscriptionId&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}}class EventParser{constructor(e,t){this.coder=t,this.programId=e}parseLogs(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){const n=new LogScanner(e),i=new ExecutionContext;let a=n.next();for(;null!==a;){let[e,o,s]=t.handleLog(i,a,r);e&&(yield e),o&&i.push(o),s&&i.pop(),a=n.next()}}()}handleLog(e,t,r){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t,r):[null,...this.handleSystemLog(t)]}handleProgramLog(e,t){if(e.startsWith(PROGRAM_LOG)||e.startsWith(PROGRAM_DATA)){const r=e.startsWith(PROGRAM_LOG)?e.slice(PROGRAM_LOG_START_INDEX):e.slice(PROGRAM_DATA_START_INDEX),n=this.coder.events.decode(r);if(t&&null===n)throw new Error(`Unable to decode event ${r}`);return[n,null,!1]}return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return null!==t.match(/^Program (.*) success/g)?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class ExecutionContext{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}}class LogScanner{constructor(e){this.logs=e}next(){if(0===this.logs.length)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}class SimulateFactory{static build(e,t,r,n,i,a,o){return async function(){for(var s,u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];const l=t(...c),[,p]=splitArgsAndCtx(e,[...c]);let h;if(void 0===n.simulate)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{h=await n.simulate(l,p.signers,null===(s=p.options)||void 0===s?void 0:s.commitment)}catch(e){throw translateError(e,r)}if(void 0===h)throw new Error("Unable to simulate transaction");const f=h.logs;if(!f)throw new Error("Simulated logs not found");const m=[];if(o.events){let e=new EventParser(a,i);for(const t of e.parseLogs(f))m.push(t)}return{events:m,raw:f}}}}function uint64(e){return new WrappedLayout(blob(8),(e=>u64$1.fromBuffer(e)),(e=>e.toBuffer()),e)}function publicKey(e){return new WrappedLayout(blob(32),(e=>new PublicKey(e)),(e=>e.toBuffer()),e)}function coption(e,t){return new COptionLayout(e,t)}class WrappedLayout extends Layout_2{constructor(e,t,r,n){super(e.span,n),this.layout=e,this.decoder=t,this.encoder=r}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,r){return this.layout.encode(this.encoder(e),t,r)}getSpan(e,t){return this.layout.getSpan(e,t)}}class COptionLayout extends Layout_2{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=u32$1()}encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null==e?this.layout.span+this.discriminator.encode(0,t,r):(this.discriminator.encode(1,t,r),this.layout.encode(e,t,r+4)+4)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=this.discriminator.decode(e,t);if(0===r)return null;if(1===r)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.layout.getSpan(e,t+4)+4}}class u64$1 extends BN{toBuffer(){const e=super.toArray().reverse(),t=Buffer.from(e);if(8===t.length)return t;if(t.length>=8)throw new Error("u64 too large");const r=Buffer.alloc(8);return t.copy(r),r}static fromBuffer(e){if(8!==e.length)throw new Error(`Invalid buffer length: ${e.length}`);return new u64$1([...e].reverse().map((e=>`00${e.toString(16)}`.slice(-2))).join(""),16)}}const TOKEN_ACCOUNT_LAYOUT=struct([publicKey("mint"),publicKey("owner"),uint64("amount"),coption(publicKey(),"delegate"),(e=>{const t=union(u8("discriminator"),null,"state");return t.addVariant(0,struct([]),"uninitialized"),t.addVariant(1,struct([]),"initialized"),t.addVariant(2,struct([]),"frozen"),t})(),coption(uint64(),"isNative"),uint64("delegatedAmount"),coption(publicKey(),"closeAuthority")]);function decodeTokenAccount(e){return TOKEN_ACCOUNT_LAYOUT.decode(e)}class AccountsResolver{constructor(e,t,r,n,i,a,o,s){this._accounts=t,this._provider=r,this._programId=n,this._idlIx=i,this._idlTypes=o,this._customResolver=s,this._args=e,this._accountStore=new AccountStore(r,a,this._programId)}args(e){this._args=e}async resolve(){for(await this.resolveConst(this._idlIx.accounts),this._resolveEventCpi(this._idlIx.accounts);await this.resolvePdas(this._idlIx.accounts)+await this.resolveRelations(this._idlIx.accounts)+await this.resolveCustom()>0;);}async resolveCustom(){if(this._customResolver){const{accounts:e,resolved:t}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=e,t}return 0}resolveOptionalsHelper(e,t){const r={};for(const n of t){const t=n.name,i=e[t];void 0!==i&&(isPartialAccounts(i)?isIdlAccounts(n)?r[t]=this.resolveOptionalsHelper(i,n.accounts):r[t]=flattenPartialAccounts(i,!0):null!==i?r[t]=translateAddress(i):n.isOptional&&(r[t]=this._programId))}return r}resolveOptionals(e){Object.assign(this._accounts,this.resolveOptionalsHelper(e,this._idlIx.accounts))}get(e){const t=e.reduce(((e,t)=>e&&e[t]),this._accounts);if(t&&t.toBase58)return t}set(e,t){let r=this._accounts;e.forEach(((n,i)=>{i==e.length-1&&(r[n]=t),r[n]=r[n]||{},r=r[n]}))}async resolveConst(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let r=0;r<e.length;r+=1){const n=e[r],i=n.accounts;i&&await this.resolveConst(i,[...t,camelCase$1(n.name)]);const a=n,o=camelCase$1(n.name);if(a.isSigner&&!this.get([...t,o])){if(void 0===this._provider.wallet)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this.set([...t,o],this._provider.wallet.publicKey)}Reflect.has(AccountsResolver.CONST_ACCOUNTS,o)&&!this.get([...t,o])&&this.set([...t,o],AccountsResolver.CONST_ACCOUNTS[o])}}_resolveEventCpi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(const r in e){const n=e[r],i=n.accounts;i&&this._resolveEventCpi(i,[...t,camelCase$1(n.name)]);const a=+r+1;if(a===e.length)return;const o=camelCase$1(e[r].name),s=camelCase$1(e[a].name);if("eventAuthority"===o&&"program"===s){const e=[...t,o],r=[...t,s];return this.get(e)||this.set(e,PublicKey.findProgramAddressSync([Buffer.from("__event_authority")],this._programId)[0]),void(this.get(r)||this.set(r,this._programId))}}}async resolvePdas(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=0;for(let n=0;n<e.length;n+=1){const i=e[n],a=i.accounts;a&&(r+=await this.resolvePdas(a,[...t,camelCase$1(i.name)]));const o=i,s=camelCase$1(i.name);o.pda&&o.pda.seeds.length>0&&!this.get([...t,s])&&Boolean(await this.autoPopulatePda(o,t))&&(r+=1)}return r}async resolveRelations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=0;for(let n=0;n<e.length;n+=1){const i=e[n],a=i.accounts;a&&(r+=await this.resolveRelations(a,[...t,camelCase$1(i.name)]));const o=i.relations||[],s=camelCase$1(i.name),u=[...t,s],c=this.get(u);if(c){const e=o.filter((e=>!this.get([...t,camelCase$1(e)])));if(r+=e.length,e.length>0){const r=await this._accountStore.fetchAccount({publicKey:c});await Promise.all(e.map((async e=>{const n=camelCase$1(e);return this.set([...t,n],r[n]),r[n]})))}}}return r}async autoPopulatePda(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e.pda||!e.pda.seeds)throw new Error("Must have seeds");const r=await Promise.all(e.pda.seeds.map((e=>this.toBuffer(e,t))));if(r.some((e=>void 0===e)))return;const n=await this.parseProgramId(e,t);if(!n)return;const[i]=await PublicKey.findProgramAddress(r,n);this.set([...t,camelCase$1(e.name)],i)}async parseProgramId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r;if(!(null===(r=e.pda)||void 0===r?void 0:r.programId))return this._programId;switch(e.pda.programId.kind){case"const":return new PublicKey(this.toBufferConst(e.pda.programId.value));case"arg":return this.argValue(e.pda.programId);case"account":return await this.accountValue(e.pda.programId,t);default:throw new Error(`Unexpected program seed kind: ${e.pda.programId.kind}`)}}async toBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e,t);default:throw new Error(`Unexpected seed kind: ${e.kind}`)}}getType(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(t.length>0&&e.defined){const r=this._idlTypes.find((t=>t.name===e.defined));if(!r)throw new Error(`Cannot find type ${e.defined}`);const n=r.type.fields.find((e=>e.name===t[0]));return this.getType(n.type,t.slice(1))}return e}toBufferConst(e){return this.toBufferValue(this.getType(e.type,(e.path||"").split(".").slice(1)),e.value)}async toBufferArg(e){const t=this.argValue(e);if(void 0!==t)return this.toBufferValue(this.getType(e.type,(e.path||"").split(".").slice(1)),t)}argValue(e){const t=e.path.split("."),r=camelCase$1(t[0]),n=this._idlIx.args.findIndex((e=>e.name===r));if(-1===n)throw new Error(`Unable to find argument for seed: ${r}`);return t.slice(1).reduce(((e,t)=>(e||{})[t]),this._args[n])}async toBufferAccount(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=await this.accountValue(e,t);if(r)return this.toBufferValue(e.type,r)}async accountValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=e.path.split("."),n=r[0],i=this.get([...t,camelCase$1(n)]);if(null===i)throw new Error("fieldPubkey is null");if(1===r.length)return i;const a=await this._accountStore.fetchAccount({publicKey:i,name:e.account});return this.parseAccountValue(a,r.slice(1))}parseAccountValue(e,t){let r;for(;t.length>0;)r=e[camelCase$1(t[0])],t=t.slice(1);return r}toBufferValue(e,t){switch(e){case"u8":return Buffer.from([t]);case"u16":let r=Buffer.alloc(2);return r.writeUInt16LE(t),r;case"u32":let n=Buffer.alloc(4);return n.writeUInt32LE(t),n;case"u64":let i=Buffer.alloc(8);return i.writeBigUInt64LE(BigInt(t)),i;case"string":return Buffer.from(encode$2$1(t));case"publicKey":return t.toBuffer();default:if(e.array)return Buffer.from(t);throw new Error(`Unexpected seed type: ${e}`)}}}AccountsResolver.CONST_ACCOUNTS={associatedTokenProgram:ASSOCIATED_PROGRAM_ID,rent:SYSVAR_RENT_PUBKEY,systemProgram:SystemProgram.programId,tokenProgram:TOKEN_PROGRAM_ID,clock:SYSVAR_CLOCK_PUBKEY};class AccountStore{constructor(e,t,r){this._provider=e,this._programId=r,this._cache=new Map,this._idls={},this._idls[r.toBase58()]=t}async ensureIdl(e){if(!this._idls[e.toBase58()]){const t=await Program.fetchIdl(e,this._provider);if(t){const r=new Program(t,e,this._provider);this._idls[e.toBase58()]=r.account}}return this._idls[e.toBase58()]}async fetchAccount(e){let{publicKey:t,name:r,programId:n=this._programId}=e;const i=t.toString();if(!this._cache.has(i))if("TokenAccount"===r){const e=await this._provider.connection.getAccountInfo(t);if(null===e)throw new Error(`invalid account info for ${i}`);const r=decodeTokenAccount(e.data);this._cache.set(i,r)}else if(r){const e=await this.ensureIdl(n);if(e){const n=e[camelCase$1(r)];if(n){const e=await n.fetch(t);this._cache.set(i,e)}}}else{const e=await this._provider.connection.getAccountInfo(t);if(null===e)throw new Error(`invalid account info for ${i}`);const r=e.data,n=await this.ensureIdl(e.owner);if(n){const e=Object.values(n)[0];if(!e)throw new Error("No accounts for this program");const t=e.coder.accounts.decodeAny(r);this._cache.set(i,t)}}return this._cache.get(i)}}class MethodsBuilderFactory{static build(e,t,r,n,i,a,o,s,u,c,d){return function(){for(var l=arguments.length,p=new Array(l),h=0;h<l;h++)p[h]=arguments[h];return new MethodsBuilder(p,n,i,a,o,s,e,t,r,u,c,d)}}}function isPartialAccounts(e){return"object"==typeof e&&null!==e&&!("_bn"in e)}function flattenPartialAccounts(e,t){const r={};for(const n in e){const i=e[n];if(null!==i)r[n]=isPartialAccounts(i)?flattenPartialAccounts(i,!0):translateAddress(i);else if(t)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!")}return r}class MethodsBuilder{constructor(e,t,r,n,i,a,o,s,u,c,d,l){this._ixFn=t,this._txFn=r,this._rpcFn=n,this._simulateFn=i,this._viewFn=a,this._programId=s,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._autoResolveAccounts=!0,this._args=e,this._accountsResolver=new AccountsResolver(e,this._accounts,o,s,u,c,d,l)}args(e){this._args=e,this._accountsResolver.args(e)}async pubkeys(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._accounts}accounts(e){return this._autoResolveAccounts=!0,this._accountsResolver.resolveOptionals(e),this}accountsStrict(e){return this._autoResolveAccounts=!1,this._accountsResolver.resolveOptionals(e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e){return this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async rpc(e){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async rpcAndKeys(e){return{pubkeys:await this.pubkeys(),signature:await this.rpc(e)}}async view(e){if(this._autoResolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async prepare(){return{instruction:await this.instruction(),pubkeys:await this.pubkeys(),signers:await this._signers}}async transaction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class ViewFactory{static build(e,t,r,n){const i=t.accounts.find((e=>e.isMut)),a=!!t.returns;if(i||!a)return;return async function(){var i,a;let o=await r(...arguments);const s=`Program return: ${e} `;let u=o.raw.find((e=>e.startsWith(s)));if(!u)throw new Error("View expected return log");let c=decode$4(u.slice(s.length)),d=t.returns;if(!d)throw new Error("View expected return type");return IdlCoder.fieldLayout({type:d},Array.from([...null!==(i=n.accounts)&&void 0!==i?i:[],...null!==(a=n.types)&&void 0!==a?a:[]])).decode(c)}}}class NamespaceFactory{static build(e,t,r,n,i){const a={},o={},s={},u={},c={},d={},l=parseIdlErrors(e),p=e.accounts?AccountFactory.build(e,t,r,n):{};return e.instructions.forEach((h=>{const f=InstructionNamespaceFactory.build(h,((e,r)=>t.instruction.encode(e,r)),r),m=TransactionFactory.build(h,f),y=RpcFactory.build(h,m,l,n),g=SimulateFactory.build(h,m,l,n,t,r,e),b=ViewFactory.build(r,h,g,e),v=MethodsBuilderFactory.build(n,r,h,f,m,y,g,b,p,e.types||[],i&&i(h)),w=camelCase$1(h.name);o[w]=f,s[w]=m,a[w]=y,u[w]=g,c[w]=v,b&&(d[w]=b)})),[a,o,s,p,u,c,d]}}class Program{get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}constructor(e,t,r,n,i){t=translateAddress(t),r||(r=getProvider()),this._idl=e,this._provider=r,this._programId=t,this._coder=null!=n?n:new BorshCoder(e),this._events=new EventManager(this._programId,r,this._coder);const[a,o,s,u,c,d,l]=NamespaceFactory.build(e,this._coder,t,r,null!=i?i:()=>{});this.rpc=a,this.instruction=o,this.transaction=s,this.account=u,this.simulate=c,this.methods=d,this.views=l}static async at(e,t){const r=translateAddress(e),n=await Program.fetchIdl(r,t);if(!n)throw new Error(`IDL not found for program: ${e.toString()}`);return new Program(n,r,t)}static async fetchIdl(e,t){t=null!=t?t:getProvider();const r=translateAddress(e),n=await idlAddress(r),i=await t.connection.getAccountInfo(n);if(!i)return null;let a=decodeIdlAccount(i.data.slice(8));const o=inflate_1(a.data);return JSON.parse(decode$2$1(o))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}}new PublicKey("11111111111111111111111111111111");class PaymentRouterProgram{static async createPaymentRouterBalancePdaInstruction(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:PaymentRouterProgram.programId;const n=new Program(IDL,r);return await n.methods.createPaymentRouterBalancePda().accounts({paymentRouterPda:e,payer:t,systemProgram:SystemProgram.programId}).instruction()}static async createRouteInstruction(e){let{sender:t,senderOwner:r,paymentRouterPdaBump:n,recipients:i,amounts:a,totalAmount:o,tokenProgramId:s=TOKEN_PROGRAM_ID$1,programId:u=PaymentRouterProgram.programId}=e;const c=new Program(IDL,u,{});return await c.methods.route(n,a.map((e=>new BN(e.toString()))),new BN(o.toString())).accounts({sender:t,senderOwner:r,splToken:s}).remainingAccounts(i.map((e=>({pubkey:e,isSigner:!1,isWritable:!0})))).instruction()}}PaymentRouterProgram.programId=new PublicKey("paytYpX3LPN98TAeen6bFFeraGSuWnomZmCXjAsoqPa");const parseMint=(e,t)=>{const r=e instanceof PublicKey?e:t[e];if(!r)throw Error("Mint not configured");return r};class CustomInstructionError extends Error{constructor(e,t){super(JSON.stringify({InstructionError:[e,{Custom:t}]})),_defineProperty$3(this,"instructionIndex",void 0),_defineProperty$3(this,"code",void 0),this.instructionIndex=e,this.code=t}static parseSendTransactionError(e){var t,r;const n=JSON.parse(e.transactionError.message);if("number"==typeof(null==n||null===(t=n.InstructionError)||void 0===t||null===(r=t[1])||void 0===r?void 0:r.Custom))return new CustomInstructionError(n.InstructionError[0],n.InstructionError[1].Custom);throw new Error("Unable to parse custom transaction error")}}const getDefaultClaimableTokensConfig=e=>({programId:new PublicKey(e.solana.claimableTokensProgramAddress),mints:{wAUDIO:new PublicKey(e.solana.wAudioTokenMint),USDC:new PublicKey(e.solana.usdcTokenMint),BONK:new PublicKey(e.solana.bonkTokenMint)},logger:new Logger}),GetOrCreateUserBankSchema=z.object({ethWallet:z.string().optional(),mint:MintSchema,feePayer:PublicKeySchema.optional()}).strict();z.object({ethWallet:z.string().optional(),mint:MintSchema}).strict();const CreateTransferSchema=z.object({feePayer:PublicKeySchema.optional(),ethWallet:z.string().optional(),mint:MintSchema,destination:PublicKeySchema}),CreateSecpSchema=z.object({ethWallet:z.string().optional(),destination:PublicKeySchema,amount:z.bigint(),mint:MintSchema,instructionIndex:z.number().optional()}).strict();class ClaimableTokensError extends Error{constructor(e){var t;let{code:r,instructionName:n,cause:i}=e;super(null!==(t=ClaimableTokensErrorMessages[r])&&void 0!==t?t:`Unknown error: ${r}`,{cause:i}),_defineProperty$3(this,"name","ClaimableTokensError"),_defineProperty$3(this,"code",void 0),_defineProperty$3(this,"instructionName",void 0),_defineProperty$3(this,"customErrorName",void 0),this.code=r,this.instructionName=n,this.customErrorName=ClaimableTokensErrorCode[r]}}class ClaimableTokensClient{constructor(e){_defineProperty$3(this,"client",void 0),_defineProperty$3(this,"programId",void 0),_defineProperty$3(this,"preconfiguredMints",void 0),_defineProperty$3(this,"authorities",void 0),_defineProperty$3(this,"logger",void 0),_defineProperty$3(this,"audiusWalletClient",void 0),_defineProperty$3(this,"_pendingUserBankCreationPromises",{});const t=mergeConfigWithDefaults(e,getDefaultClaimableTokensConfig(productionConfig));this.client=t.solanaClient,this.programId=t.programId,this.preconfiguredMints=t.mints,this.authorities=Object.fromEntries(Object.entries(t.mints).map((e=>{let[r,n]=e;return[r,ClaimableTokensProgram.deriveAuthority({programId:t.programId,mint:n})]}))),this.audiusWalletClient=t.audiusWalletClient,this.logger=t.logger.createPrefixedLogger("[claimable-tokens-client]")}async getOrCreateUserBank(e){const t=await parseParams("getOrCreateUserBank",GetOrCreateUserBankSchema)(e),{ethWallet:r=await this.getDefaultWalletAddress(),feePayer:n}=t,i=parseMint(t.mint,this.preconfiguredMints),a=null!=n?n:await this.client.getFeePayer(),o=await this.deriveUserBank(t);if(this._pendingUserBankCreationPromises[o.toBase58()])return await this._pendingUserBankCreationPromises[o.toBase58()],{userBank:o,didExist:!0};this._pendingUserBankCreationPromises[o.toBase58()]=(async()=>{if(!await this.client.connection.getAccountInfo(o)){this.logger.debug(`User bank ${o} does not exist. Creating...`);const e=ClaimableTokensProgram.createAccountInstruction({ethAddress:r,payer:a,mint:i,authority:this.deriveAuthority(i),userBank:o,programId:this.programId}),{blockhash:t,lastValidBlockHeight:n}=await this.client.connection.getLatestBlockhash(),s=await this.client.buildTransaction({instructions:[e],recentBlockhash:t}),u=await this.sendTransaction(s);return await this.client.connection.confirmTransaction({blockhash:t,lastValidBlockHeight:n,signature:u},"finalized"),{userBank:o,didExist:!1}}return this.logger.debug(`User bank ${o} already exists.`),{userBank:o,didExist:!0}})();try{return await this._pendingUserBankCreationPromises[o.toBase58()]}catch(e){throw delete this._pendingUserBankCreationPromises[o.toBase58()],e}}async createTransferInstruction(e){const{feePayer:t,ethWallet:r=await this.getDefaultWalletAddress(),mint:n,destination:i}=await parseParams("createTransferInstruction",CreateTransferSchema)(e),a=parseMint(n,this.preconfiguredMints),o=null!=t?t:await this.client.getFeePayer(),s=await this.deriveUserBank({ethWallet:r,mint:a}),u=ClaimableTokensProgram.deriveNonce({ethAddress:r,authority:this.deriveAuthority(a),programId:this.programId});return ClaimableTokensProgram.createTransferInstruction({payer:o,sourceEthAddress:r,sourceUserBank:s,destination:i,nonceAccount:u,authority:this.deriveAuthority(a),programId:this.programId})}async createTransferSecpInstruction(e){const{ethWallet:t=(await this.audiusWalletClient.getAddresses())[0],destination:r,amount:n,mint:i,instructionIndex:a}=await parseParams("createTransferSecpInstruction",CreateSecpSchema)(e),o=parseMint(i,this.preconfiguredMints);let s=BigInt(0);const u=ClaimableTokensProgram.deriveNonce({ethAddress:t,authority:this.deriveAuthority(o),programId:this.programId}),c=await this.client.connection.getAccountInfo(u),d=null==c?void 0:c.data;if(d){s=ClaimableTokensProgram.layouts.nonceAccountData.decode(d).nonce}const l=ClaimableTokensProgram.createSignedTransferInstructionData({destination:r,amount:n,nonce:s}),[p,h]=await this.audiusWalletClient.sign({message:{raw:l}});return Secp256k1Program.createInstructionWithEthAddress({ethAddress:t,message:l,signature:p,recoveryId:h,instructionIndex:a})}async deriveUserBank(e){const{ethWallet:t=(await this.audiusWalletClient.getAddresses())[0],mint:r}=await parseParams("deriveUserBank",GetOrCreateUserBankSchema)(e),n=parseMint(r,this.preconfiguredMints);return await ClaimableTokensProgram.deriveUserBank({ethAddress:t,claimableTokensPDA:this.deriveAuthority(n)})}deriveAuthority(e){const t=this.authorities[e.toBase58()];return t||ClaimableTokensProgram.deriveAuthority({programId:this.programId,mint:e})}async sendTransaction(e,t){try{return await this.client.sendTransaction(e,t)}catch(t){if(t instanceof SendTransactionError)try{const n=CustomInstructionError.parseSendTransactionError(t);if(n){const i=(await this.client.getInstructions(e))[n.instructionIndex];if(i&&i.programId.equals(this.programId)){var r;const e=ClaimableTokensProgram.decodeInstruction(i);throw new ClaimableTokensError({code:n.code,instructionName:null!==(r=ClaimableTokensInstruction[e.data.instruction])&&void 0!==r?r:"Unknown",cause:t})}}}catch(e){if(e instanceof ClaimableTokensError)throw e;this.logger.warn("Failed to parse ClaimableTokensError error",e)}throw t}}async getDefaultWalletAddress(){const e=await this.audiusWalletClient.getAddresses();if(!e||!e[0])throw new Error('Failed to infer wallet address. Did you forget the "ethAddress" argument?');return e[0]}}const getDefaultRewardManagerClentConfig=e=>({programId:new PublicKey(e.solana.rewardManagerProgramAddress),rewardManagerState:new PublicKey(e.solana.rewardManagerStateAddress),rewardManagerLookupTable:new PublicKey(e.solana.rewardManagerLookupTableAddress),logger:new Logger}),CreateSenderInstructionSchema=z.object({manager:PublicKeySchema,sender:z.string(),operator:z.string(),feePayer:PublicKeySchema.optional()}),CreateSubmitAttestationInstructionSchema=z.object({challengeId:z.string(),specifier:z.string(),senderEthAddress:z.string(),feePayer:PublicKeySchema.optional()}),CreateSubmitAttestationSecpInstructionSchema=z.object({challengeId:z.string(),specifier:z.string(),recipientEthAddress:z.string(),senderEthAddress:z.string(),amount:z.bigint(),antiAbuseOracleEthAddress:z.string().optional(),senderSignature:z.string(),instructionIndex:z.number().optional()}),CreateEvaluateAttestationsInstructionSchema=z.object({challengeId:z.string(),specifier:z.string(),recipientEthAddress:z.string(),destinationUserBank:PublicKeySchema,antiAbuseOracleEthAddress:z.string(),amount:z.bigint(),feePayer:PublicKeySchema.optional()}),GetSubmittedAttestationsSchema=z.object({challengeId:z.string(),specifier:z.string()});class RewardManagerError extends Error{constructor(e){var t;let{code:r,instructionName:n,cause:i}=e;super(null!==(t=RewardManagerErrorMessages[r])&&void 0!==t?t:`Unknown error: ${r}`,{cause:i}),_defineProperty$3(this,"name","RewardManagerError"),_defineProperty$3(this,"code",void 0),_defineProperty$3(this,"instructionName",void 0),_defineProperty$3(this,"customErrorName",void 0),this.code=r,this.instructionName=n,this.customErrorName=RewardManagerErrorCode[r]}}class RewardManagerClient{constructor(e){_defineProperty$3(this,"lookupTable",void 0),_defineProperty$3(this,"client",void 0),_defineProperty$3(this,"programId",void 0),_defineProperty$3(this,"rewardManagerStateAccount",void 0),_defineProperty$3(this,"authority",void 0),_defineProperty$3(this,"rewardManagerState",null),_defineProperty$3(this,"logger",void 0);const t=mergeConfigWithDefaults(e,getDefaultRewardManagerClentConfig(productionConfig));this.lookupTable=t.rewardManagerLookupTable,this.client=t.solanaClient,this.programId=t.programId,this.rewardManagerStateAccount=t.rewardManagerState,this.authority=RewardManagerProgram.deriveAuthority({programId:t.programId,rewardManagerState:t.rewardManagerState}),this.logger=t.logger.createPrefixedLogger("[reward-manager-client]")}async createSenderInstruction(e){const t=await parseParams("createSenderInstruction",CreateSenderInstructionSchema)(e),{manager:r,sender:n,operator:i,feePayer:a}=t,o=null!=a?a:await this.client.getFeePayer(),s=RewardManagerProgram.deriveSender({ethAddress:n,programId:this.programId,authority:this.authority});return RewardManagerProgram.createSenderInstruction({operatorEthAddress:i,senderEthAddress:n,rewardManagerState:this.rewardManagerStateAccount,manager:r,authority:this.authority,payer:o,sender:s,rewardManagerProgramId:this.programId})}async createSubmitAttestationInstruction(e){const t=await parseParams("createSubmitAttestationInstruction",CreateSubmitAttestationInstructionSchema)(e),{challengeId:r,specifier:n,senderEthAddress:i,feePayer:a}=t,o=this.makeDisbursementId(r,n),s=null!=a?a:await this.client.getFeePayer(),u=RewardManagerProgram.deriveSender({ethAddress:i,programId:this.programId,authority:this.authority}),c=RewardManagerProgram.deriveAttestations({disbursementId:o,programId:this.programId,authority:this.authority});return RewardManagerProgram.createSubmitAttestationInstruction({disbursementId:o,attestations:c,rewardManagerState:this.rewardManagerStateAccount,authority:this.authority,payer:s,sender:u,rewardManagerProgramId:this.programId})}async createSubmitAttestationSecpInstruction(e){const t=await parseParams("createSubmitAttestationSecpInstruction",CreateSubmitAttestationSecpInstructionSchema)(e),{recipientEthAddress:r,challengeId:n,specifier:i,amount:a,senderEthAddress:o,senderSignature:s,instructionIndex:u,antiAbuseOracleEthAddress:c}=t,d=this.makeDisbursementId(n,i),{signature:l,recoveryId:p}=RewardManagerProgram.encodeSignature(s),h=RewardManagerProgram.encodeAttestation({disbursementId:d,recipientEthAddress:r,amount:a,antiAbuseOracleEthAddress:c});return Secp256k1Program.createInstructionWithEthAddress({ethAddress:o,message:h,signature:l,recoveryId:p,instructionIndex:u})}async createEvaluateAttestationsInstruction(e){const t=await parseParams("createEvaluateAttestationsInstruction",CreateEvaluateAttestationsInstructionSchema)(e),{challengeId:r,specifier:n,recipientEthAddress:i,destinationUserBank:a,antiAbuseOracleEthAddress:o,amount:s,feePayer:u}=t,c=this.makeDisbursementId(r,n),d=null!=u?u:await this.client.getFeePayer(),l=await this.getRewardManagerState(),p=RewardManagerProgram.deriveDisbursement({disbursementId:c,programId:this.programId,authority:this.authority}),h=RewardManagerProgram.deriveAttestations({disbursementId:c,programId:this.programId,authority:this.authority}),f=RewardManagerProgram.deriveSender({ethAddress:o,programId:this.programId,authority:this.authority});return RewardManagerProgram.createEvaluateAttestationsInstruction({disbursementId:c,recipientEthAddress:i,amount:s,attestations:h,rewardManagerState:this.rewardManagerStateAccount,authority:this.authority,rewardManagerTokenSource:l.tokenAccount,destinationUserBank:a,disbursementAccount:p,antiAbuseOracle:f,payer:d,rewardManagerProgramId:this.programId})}async getSubmittedAttestations(e){const t=await parseParams("getSubmittedAttestations",GetSubmittedAttestationsSchema)(e),{challengeId:r,specifier:n}=t,i=this.makeDisbursementId(r,n),a=RewardManagerProgram.deriveAttestations({disbursementId:i,programId:this.programId,authority:this.authority}),o=await this.client.connection.getAccountInfo(a);if(!o)return null;const s=(await this.getRewardManagerState()).minVotes+1;return RewardManagerProgram.decodeAttestationsAccountData(s,o.data)}makeDisbursementId(e,t){return`${e}:${t}`}async getRewardManagerState(){if(!this.rewardManagerState){const e=await this.client.connection.getAccountInfo(this.rewardManagerStateAccount);if(!e)throw new Error("Failed to get reward manager account state.");this.rewardManagerState=RewardManagerProgram.decodeRewardManagerState(e.data)}return this.rewardManagerState}async sendTransaction(e,t){try{return await this.client.sendTransaction(e,t)}catch(t){if(t instanceof SendTransactionError)try{const n=CustomInstructionError.parseSendTransactionError(t);if(n){const i=(await this.client.getInstructions(e))[n.instructionIndex];if(i&&i.programId.equals(this.programId)){var r;const e=RewardManagerProgram.decodeInstruction(i);throw new RewardManagerError({code:n.code,instructionName:null!==(r=RewardManagerInstruction[e.data.instruction])&&void 0!==r?r:"Unknown",cause:t})}}}catch(e){if(e instanceof RewardManagerError)throw e;this.logger.warn("Failed to parse RewardManagerError error",e)}throw t}}}new PublicKey("Memo1UhkJRfHyvLMcVucJwxXeuD728EqVDDwQDxFMNo");const MEMO_V2_PROGRAM_ID=new PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),getDefaultPaymentRouterClientConfig=e=>({programId:new PublicKey(e.solana.paymentRouterProgramAddress),mints:{USDC:new PublicKey(e.solana.usdcTokenMint),wAUDIO:new PublicKey(e.solana.wAudioTokenMint)}}),CreateTransferInstructionSchema=z.object({mint:MintSchema,total:z.bigint(),sourceWallet:PublicKeySchema}),CreateRouteInstructionSchema=z.object({mint:MintSchema,splits:z.array(z.object({wallet:PublicKeySchema,amount:z.bigint()})),total:z.bigint()}),CreateMemoInstructionSchema=z.object({contentType:z.enum(["track","album"]),contentId:HashId.or(z.number()),blockNumber:z.number(),buyerUserId:HashId.or(z.number()),accessType:z.enum(["stream","download"]),signer:PublicKeySchema.optional()}),CreatePurchaseContentInstructionsSchema=CreateTransferInstructionSchema.extend(CreateRouteInstructionSchema.shape).extend(CreateMemoInstructionSchema.shape),GetOrCreateProgramTokenAccountSchema=z.object({mint:MintSchema});class PaymentRouterClient{constructor(e){_defineProperty$3(this,"client",void 0),_defineProperty$3(this,"programId",void 0),_defineProperty$3(this,"programAccount",void 0),_defineProperty$3(this,"programAccountBumpSeed",void 0),_defineProperty$3(this,"mints",void 0),_defineProperty$3(this,"existingTokenAccounts",void 0);const t=mergeConfigWithDefaults(e,getDefaultPaymentRouterClientConfig(productionConfig));this.client=t.solanaClient,this.programId=t.programId;const[r,n]=PublicKey.findProgramAddressSync([(new TextEncoder).encode("payment_router")],this.programId);this.programAccount=r,this.programAccountBumpSeed=n,this.mints=t.mints,this.existingTokenAccounts={}}async createTransferInstruction(e){const t=await parseParams("createTransferInstruction",CreateTransferInstructionSchema)(e),r=parseMint(t.mint,this.mints),n=await this.getOrCreateProgramTokenAccount({mint:r}),i=t.sourceWallet,a=getAssociatedTokenAddressSync(r,i,!1),o=t.total;return createTransferInstruction(a,n.address,i,o)}async createRouteInstruction(e){const t=await parseParams("createRouteInstruction",CreateRouteInstructionSchema)(e),r=parseMint(t.mint,this.mints),n=await this.getOrCreateProgramTokenAccount({mint:r}),i=[],a=[];for(const e of t.splits)i.push(e.wallet),a.push(e.amount);const o=t.total;return PaymentRouterProgram.createRouteInstruction({sender:n.address,senderOwner:this.programAccount,paymentRouterPdaBump:this.programAccountBumpSeed,recipients:i,amounts:a,totalAmount:o,programId:this.programId})}async createPurchaseMemoInstruction(e){const{contentType:t,contentId:r,blockNumber:n,buyerUserId:i,accessType:a,signer:o}=await parseParams("createMemoInstructionSchema",CreateMemoInstructionSchema)(e),s=`${t}:${r}:${n}:${i}:${a}`;return new TransactionInstruction({keys:o?[{pubkey:o,isSigner:!0,isWritable:!0}]:[],programId:MEMO_V2_PROGRAM_ID,data:Buffer.from(s)})}async createPurchaseContentInstructions(e){const{mint:t,splits:r,total:n,contentId:i,contentType:a,blockNumber:o,buyerUserId:s,accessType:u,sourceWallet:c}=await parseParams("createPurchaseContentInstructions",CreatePurchaseContentInstructionsSchema)(e);return[await this.createTransferInstruction({total:n,mint:t,sourceWallet:c}),await this.createRouteInstruction({splits:r,total:n,mint:t}),await this.createPurchaseMemoInstruction({contentId:i,contentType:a,blockNumber:o,buyerUserId:s,accessType:u})]}async getOrCreateProgramTokenAccount(e){const t=await parseParams("getOrCreateProgramTokenAccount",GetOrCreateProgramTokenAccountSchema)(e),r=parseMint(t.mint,this.mints),n=this.existingTokenAccounts[r.toBase58()];if(n)return n;const i=getAssociatedTokenAddressSync(r,this.programAccount,!0);let a=null;try{a=await getAccount(this.client.connection,i),this.existingTokenAccounts[r.toBase58()]=a}catch(e){if(!(e instanceof TokenAccountNotFoundError))throw e;try{const e=createAssociatedTokenAccountIdempotentInstruction(await this.client.getFeePayer(),i,this.programAccount,r),{lastValidBlockHeight:t,blockhash:n}=await this.client.connection.getLatestBlockhash(),a=new TransactionMessage({payerKey:await this.client.getFeePayer(),recentBlockhash:n,instructions:[e]}),o=new VersionedTransaction(a.compileToV0Message()),s=await this.client.sendTransaction(o);await this.client.connection.confirmTransaction({signature:s,blockhash:n,lastValidBlockHeight:t},"finalized")}catch(e){}a=await getAccount(this.client.connection,i)}if(!a.mint.equals(r))throw new TokenInvalidMintError;if(!a.owner.equals(this.programAccount))throw new TokenInvalidOwnerError;return a}}var StemCategory;!function(e){e.INSTRUMENTAL="INSTRUMENTAL",e.LEAD_VOCALS="LEAD_VOCALS",e.MELODIC_LEAD="MELODIC_LEAD",e.PAD="PAD",e.SNARE="SNARE",e.KICK="KICK",e.HIHAT="HIHAT",e.PERCUSSION="PERCUSSION",e.SAMPLE="SAMPLE",e.BACKING_VOX="BACKING_VOX",e.BASS="BASS",e.OTHER="OTHER"}(StemCategory||(StemCategory={}));const MAX_DESCRIPTION_LENGTH=2500,messages={titleRequiredError:"Your track must have a name",artworkRequiredError:"Artwork is required",genreRequiredError:"Genre is required",genreAllError:'Genre cannot be set to "All Genres"'},EthCollectibleGatedConditions=z.object({chain:z.literal("eth"),address:z.string(),standard:z.union([z.literal("ERC721"),z.literal("ERC1155")]),name:z.string(),slug:z.string(),imageUrl:z.optional(z.string()),externalLink:z.optional(z.string()).nullable()}).strict(),SolCollectibleGatedConditions=z.object({chain:z.literal("sol"),address:z.string(),name:z.string(),imageUrl:z.optional(z.string()),externalLink:z.optional(z.string()).nullable()}).strict(),CollectibleGatedConditions=z.object({nftCollection:z.optional(z.union([EthCollectibleGatedConditions,SolCollectibleGatedConditions]))}).strict(),FollowGatedConditions=z.object({followUserId:z.number()}).strict(),TipGatedConditions=z.object({tipUserId:z.number()}).strict(),TokenGatedConditions=z.object({tokenGate:z.object({tokenMint:z.string(),tokenAmount:z.number()})}).strict(),USDCPurchaseConditions=z.object({usdcPurchase:z.object({price:z.number().positive(),splits:z.any()})}).strict(),UploadTrackMetadataSchema=z.object({trackId:z.optional(HashId),aiAttributionUserId:z.optional(HashId),description:z.optional(z.string().max(MAX_DESCRIPTION_LENGTH)),fieldVisibility:z.optional(z.object({mood:z.optional(z.boolean()),tags:z.optional(z.boolean()),genre:z.optional(z.boolean()),share:z.optional(z.boolean()),playCount:z.optional(z.boolean()),remixes:z.optional(z.boolean())})),genre:z.enum(Object.values(Genre)).nullable().refine((e=>null!==e),{message:messages.genreRequiredError}).refine((e=>e!==Genre.ALL),{message:messages.genreAllError}),isrc:z.optional(z.string().nullable()),isUnlisted:z.optional(z.boolean()),iswc:z.optional(z.string().nullable()),license:z.optional(z.string().nullable()),mood:z.optional(z.enum(Object.values(Mood))).nullable(),isStreamGated:z.optional(z.boolean()),streamConditions:z.optional(z.union([CollectibleGatedConditions,FollowGatedConditions,TipGatedConditions,USDCPurchaseConditions,TokenGatedConditions])).nullable(),isDownloadGated:z.optional(z.boolean()),downloadConditions:z.optional(z.union([CollectibleGatedConditions,FollowGatedConditions,TipGatedConditions,USDCPurchaseConditions,TokenGatedConditions])).nullable(),releaseDate:z.optional(z.date()),remixOf:z.optional(z.object({tracks:z.array(z.object({parentTrackId:HashId})).min(1)}).strict()),stemOf:z.optional(z.object({category:z.enum(Object.values(StemCategory)).default(StemCategory.OTHER),parentTrackId:HashId})),tags:z.optional(z.string()),title:z.string({required_error:messages.titleRequiredError}),duration:z.optional(z.number()),previewStartSeconds:z.optional(z.number()),placementHosts:z.optional(z.string()),audioUploadId:z.optional(z.string()),trackCid:z.optional(z.string()),previewCid:z.optional(z.string()),origFileCid:z.optional(z.string()),origFilename:z.optional(z.string()),isDownloadable:z.optional(z.boolean()),isOriginalAvailable:z.optional(z.boolean()),ddexReleaseIds:z.optional(z.record(z.string()).nullable()),ddexApp:z.optional(z.string()),artists:z.optional(z.array(DDEXResourceContributor)).nullable(),resourceContributors:z.optional(z.array(DDEXResourceContributor).nullable()),indirectResourceContributors:z.optional(z.array(DDEXResourceContributor).nullable()),rightsController:z.optional(DDEXRightsController.nullable()),copyrightLine:z.optional(DDEXCopyright.nullable()),producerCopyrightLine:z.optional(DDEXCopyright.nullable()),parentalWarningType:z.optional(z.string().nullable()),bpm:z.optional(z.number().nullable()),isCustomBpm:z.optional(z.boolean()),musicalKey:z.optional(z.string().nullable()),isCustomMusicalKey:z.optional(z.boolean()),audioAnalysisErrorCount:z.optional(z.number()),commentsDisabled:z.optional(z.boolean()),isScheduledRelease:z.optional(z.boolean())}),UploadTrackSchema=z.object({userId:HashId,coverArtFile:ImageFile,metadata:UploadTrackMetadataSchema.strict(),onProgress:z.optional(z.function()),trackFile:AudioFile}).strict(),UploadTrackFilesSchema=z.object({userId:HashId,coverArtFile:z.optional(ImageFile),metadata:UploadTrackMetadataSchema.extend({genre:z.optional(z.enum(Object.values(Genre)))}).strict(),onProgress:z.optional(z.function()),trackFile:AudioFile}).strict(),UpdateTrackSchema=z.object({userId:HashId,trackId:HashId,metadata:UploadTrackMetadataSchema.strict().partial(),generatePreview:z.optional(z.boolean()),coverArtFile:z.optional(ImageFile),onProgress:z.optional(z.function())}).strict(),DeleteTrackSchema=z.object({userId:HashId,trackId:HashId}).strict(),FavoriteTrackSchema=z.object({userId:HashId,trackId:HashId,metadata:z.optional(z.object({isSaveOfRepost:z.boolean()}).strict())}).strict(),UnfavoriteTrackSchema=z.object({userId:HashId,trackId:HashId}).strict(),RepostTrackSchema=z.object({userId:HashId,trackId:HashId,metadata:z.optional(z.object({isRepostOfRepost:z.boolean()}).strict())}).strict(),UnrepostTrackSchema=z.object({userId:HashId,trackId:HashId}).strict(),RecordTrackDownloadSchema=z.object({userId:HashId.optional(),trackId:HashId}).strict(),ShareTrackSchema=z.object({userId:HashId,trackId:HashId}).strict(),PurchaseTrackSchemaBase=z.object({userId:HashId,trackId:HashId,price:z.union([z.number().min(0),z.bigint().min(BigInt(0))]),extraAmount:z.union([z.number().min(0),z.bigint().min(BigInt(0))]).optional(),includeNetworkCut:z.boolean().optional()}),GetPurchaseTrackInstructionsSchema=z.object({}).merge(PurchaseTrackSchemaBase),PurchaseTrackSchema=z.object({walletAdapter:z.custom().optional(),wallet:PublicKeySchema.optional()}).merge(PurchaseTrackSchemaBase).strict(),CreatePlaylistMetadataSchema=z.object({description:z.optional(z.string().max(1e3)),playlistName:z.string(),isPrivate:z.optional(z.boolean()),coverArtCid:z.optional(z.string()),license:z.optional(z.string()),mood:z.optional(z.enum(Object.values(Mood))),releaseDate:z.optional(z.date()),ddexReleaseIds:z.optional(z.record(z.string()).nullable()),ddexApp:z.optional(z.string()),tags:z.optional(z.string()),upc:z.optional(z.string()),artists:z.optional(z.array(DDEXResourceContributor).nullable()),copyrightLine:z.optional(DDEXCopyright.nullable()),producerCopyrightLine:z.optional(DDEXCopyright.nullable()),parentalWarningType:z.optional(z.string().nullable()),isImageAutogenerated:z.optional(z.boolean()).nullable()}).strict(),CreatePlaylistSchema=z.object({playlistId:z.optional(HashId),coverArtFile:z.optional(ImageFile),metadata:CreatePlaylistMetadataSchema,onProgress:z.optional(z.function()),trackIds:z.optional(z.array(HashId)),userId:HashId}).strict(),UploadPlaylistMetadataSchema=CreatePlaylistMetadataSchema.extend({genre:z.enum(Object.values(Genre))}).strict(),PlaylistTrackMetadataSchema=UploadTrackMetadataSchema.partial({genre:!0,mood:!0,tags:!0}),UpdatePlaylistMetadataSchema=UploadPlaylistMetadataSchema.partial().merge(z.object({isPrivate:z.optional(z.boolean()),playlistContents:z.optional(z.array(z.object({timestamp:z.number(),metadataTimestamp:z.optional(z.number()),trackId:HashId}))),coverArtCid:z.optional(z.string())})).strict(),UpdatePlaylistSchema=z.object({userId:HashId,playlistId:HashId,coverArtFile:z.optional(ImageFile),metadata:UpdatePlaylistMetadataSchema,onProgress:z.optional(z.function())}).strict(),UploadPlaylistSchema=z.object({userId:HashId,coverArtFile:ImageFile,metadata:UploadPlaylistMetadataSchema,onProgress:z.optional(z.function()),trackMetadatas:z.array(PlaylistTrackMetadataSchema),trackFiles:z.array(AudioFile)}).strict(),PublishPlaylistSchema=z.object({userId:HashId,playlistId:HashId}).strict(),AddTrackToPlaylistSchema=z.object({userId:HashId,playlistId:HashId,trackId:HashId}).strict(),RemoveTrackFromPlaylistSchema=z.object({userId:HashId,playlistId:HashId,trackIndex:z.number()}).strict(),DeletePlaylistSchema=z.object({userId:HashId,playlistId:HashId}).strict(),FavoritePlaylistSchema=z.object({userId:HashId,playlistId:HashId,metadata:z.optional(z.object({isSaveOfRepost:z.boolean()}).strict())}).strict(),UnfavoritePlaylistSchema=z.object({userId:HashId,playlistId:HashId}).strict(),RepostPlaylistSchema=z.object({userId:HashId,playlistId:HashId,metadata:z.optional(z.object({isRepostOfRepost:z.boolean()}).strict())}).strict(),UnrepostPlaylistSchema=z.object({userId:HashId,playlistId:HashId}).strict(),SharePlaylistSchema=z.object({userId:HashId,playlistId:HashId}).strict(),getCurrentTimestamp=()=>Math.floor(Date.now()/1e3);class PlaylistsApi$1 extends PlaylistsApi$2{constructor(e,t,r,n){super(e),_defineProperty$3(this,"storage",void 0),_defineProperty$3(this,"entityManager",void 0),_defineProperty$3(this,"logger",void 0),_defineProperty$3(this,"trackUploadHelper",void 0),this.storage=t,this.entityManager=r,this.logger=n,this.trackUploadHelper=new TrackUploadHelper(e),this.logger=n.createPrefixedLogger("[playlists-api]")}async createPlaylist(e,t){const r=await parseParams("createPlaylist",CreatePlaylistSchema)(e);return await this.createPlaylistInternal(r,t)}async uploadPlaylist(e,t){const r=await parseParams("uploadPlaylist",UploadPlaylistSchema)(e);return await this.uploadPlaylistInternal(r,t)}async publishPlaylist(e,t){return await parseParams("publishPlaylist",PublishPlaylistSchema)(e),await this.fetchAndUpdatePlaylist({userId:e.userId,playlistId:e.playlistId,updateMetadata:e=>({...e,isPrivate:!1})},t)}async addTrackToPlaylist(e,t){return await parseParams("addTrackToPlaylist",AddTrackToPlaylistSchema)(e),await this.fetchAndUpdatePlaylist({userId:e.userId,playlistId:e.playlistId,updateMetadata:t=>{var r;return{...t,playlistContents:[...null!==(r=t.playlistContents)&&void 0!==r?r:[],{trackId:e.trackId,timestamp:getCurrentTimestamp()}]}}},t)}async removeTrackFromPlaylist(e,t){const{trackIndex:r}=await parseParams("removeTrackFromPlaylist",RemoveTrackFromPlaylistSchema)(e);return await this.fetchAndUpdatePlaylist({userId:e.userId,playlistId:e.playlistId,updateMetadata:e=>{if(!e.playlistContents||e.playlistContents.length<=r)throw new Error(`No track exists at index ${r}`);return e.playlistContents.splice(r,1),{...e,playlistContents:e.playlistContents}}},t)}async updatePlaylist(e,t){const r=await parseParams("updatePlaylist",UpdatePlaylistSchema)(e);return await this.updatePlaylistInternal(r,t)}async deletePlaylist(e,t){const{userId:r,playlistId:n}=await parseParams("deletePlaylist",DeletePlaylistSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.PLAYLIST,entityId:n,action:Action.DELETE,...t})}async favoritePlaylist(e,t){const{userId:r,playlistId:n,metadata:i}=await parseParams("favoritePlaylist",FavoritePlaylistSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.PLAYLIST,entityId:n,action:Action.SAVE,metadata:i&&JSON.stringify(snakecaseKeys(i)),...t})}async unfavoritePlaylist(e,t){const{userId:r,playlistId:n}=await parseParams("unfavoritePlaylist",UnfavoritePlaylistSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.PLAYLIST,entityId:n,action:Action.UNSAVE,...t})}async repostPlaylist(e,t){const{userId:r,playlistId:n,metadata:i}=await parseParams("respostPlaylist",RepostPlaylistSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.PLAYLIST,entityId:n,action:Action.REPOST,metadata:i&&JSON.stringify(snakecaseKeys(i)),...t})}async unrepostPlaylist(e,t){const{userId:r,playlistId:n}=await parseParams("unrepostPlaylist",UnrepostPlaylistSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.PLAYLIST,entityId:n,action:Action.UNREPOST,...t})}async sharePlaylist(e,t){const{userId:r,playlistId:n}=await parseParams("sharePlaylist",SharePlaylistSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.PLAYLIST,entityId:n,action:Action.SHARE,...t})}combineMetadata(e,t){const r=e;return r.mood||(r.mood=t.mood),t.tags&&(r.tags?r.tags=[...new Set([...r.tags.split(","),...t.tags.split(",")])].join(","):r.tags=t.tags),e}async fetchAndUpdatePlaylist(e,t){var r;let{userId:n,playlistId:i,updateMetadata:a}=e;const o=null===(r=(await this.getPlaylist({playlistId:i,userId:n})).data)||void 0===r?void 0:r[0];if(!o)throw new Error(`Could not fetch playlist: ${i}`);const s=Object.keys(UpdatePlaylistMetadataSchema.shape);return await this.updatePlaylist({userId:n,playlistId:i,metadata:a(lodash.exports.pick(o,s))},t)}async uploadPlaylistInternal(e,t){let{userId:r,coverArtFile:n,trackFiles:i,onProgress:a,metadata:o,trackMetadatas:s}=e;const[u,...c]=await Promise.all([retry3((async()=>await this.storage.uploadFile({file:n,onProgress:a,template:"img_square"})),(e=>{this.logger.info("Retrying uploadPlaylistCoverArt",e)})),...i.map((async(e,t)=>await retry3((async()=>await this.storage.uploadFile({file:e,onProgress:a,template:"audio",options:this.trackUploadHelper.extractMediorumUploadOptions(s[t])})),(e=>{this.logger.info("Retrying uploadTrackAudio",e)}))))]),d=await Promise.all(s.map((async(e,n)=>{const i=this.combineMetadata(this.trackUploadHelper.transformTrackUploadMetadata(e,r),o),a=c[n];if(!a)throw new Error(`Failed to upload track: ${i.title}`);const s=this.trackUploadHelper.populateTrackMetadataWithUploadResponse(i,a,u),d=await this.trackUploadHelper.generateId("track");return await this.entityManager.manageEntity({userId:r,entityType:EntityType.TRACK,entityId:d,action:Action.CREATE,metadata:JSON.stringify({cid:"",data:snakecaseKeys(s)}),...t}),d}))),l=await this.trackUploadHelper.generateId("playlist"),p=getCurrentTimestamp(),h={...o,isPrivate:!1,playlistContents:d.map((e=>({trackId:e,timestamp:p}))),playlistImageSizesMultihash:u.id};return{...await this.entityManager.manageEntity({userId:r,entityType:EntityType.PLAYLIST,entityId:l,action:Action.CREATE,metadata:JSON.stringify({cid:"",data:snakecaseKeys(h)}),...t}),playlistId:encodeHashId(l)}}async updatePlaylistInternal(e,t){let{userId:r,playlistId:n,coverArtFile:i,onProgress:a,metadata:o}=e;const s=i&&await retry3((async()=>await this.storage.uploadFile({file:i,onProgress:a,template:"img_square"})),(e=>{this.logger.info("Retrying uploadPlaylistCoverArt",e)})),u={...o,...s?{playlistImageSizesMultihash:s.id}:{}};return await this.entityManager.manageEntity({userId:r,entityType:EntityType.PLAYLIST,entityId:n,action:Action.UPDATE,metadata:JSON.stringify({cid:"",data:snakecaseKeys(u)}),...t})}async createPlaylistInternal(e,t){var r;let{userId:n,coverArtFile:i,metadata:a,onProgress:o,trackIds:s,playlistId:u}=e;const c=i&&await retry3((async()=>await this.storage.uploadFile({file:i,onProgress:o,template:"img_square"})),(e=>{this.logger.info("Retrying uploadPlaylistCoverArt",e)})),d=u||await this.generatePlaylistId(),l=getCurrentTimestamp(),p={...a,playlistContents:(null!=s?s:[]).map((e=>({trackId:e,timestamp:l}))),playlistImageSizesMultihash:null!==(r=null==c?void 0:c.id)&&void 0!==r?r:a.coverArtCid};return{...await this.entityManager.manageEntity({userId:n,entityType:EntityType.PLAYLIST,entityId:d,action:Action.CREATE,metadata:JSON.stringify({cid:"",data:snakecaseKeys(p)}),...t}),playlistId:encodeHashId(d)}}async generatePlaylistId(){return this.trackUploadHelper.generateId("playlist")}}z.object({userId:HashId.optional(),albumId:HashId}),z.object({userId:HashId.optional(),id:z.array(HashId)}),z.object({albumId:HashId});const CreateAlbumMetadataSchema=z.object({albumName:z.string(),isPrivate:z.optional(z.boolean()),description:z.optional(z.string().max(1e3)),license:z.optional(z.string()),releaseDate:z.optional(z.date()),ddexReleaseIds:z.optional(z.record(z.string()).nullable()),ddexApp:z.optional(z.string()),upc:z.optional(z.string()),artists:z.optional(z.array(DDEXResourceContributor).nullable()),copyrightLine:z.optional(DDEXCopyright.nullable()),producerCopyrightLine:z.optional(DDEXCopyright.nullable()),parentalWarningType:z.optional(z.string().nullable()),isStreamGated:z.optional(z.boolean()),streamConditions:z.optional(USDCPurchaseConditions).nullable(),isDownloadGated:z.optional(z.boolean()),downloadConditions:z.optional(USDCPurchaseConditions).nullable(),isScheduledRelease:z.optional(z.boolean())}).strict(),CreateAlbumSchema=z.object({albumId:z.optional(HashId),userId:HashId,coverArtFile:z.optional(ImageFile),metadata:CreateAlbumMetadataSchema,onProgress:z.optional(z.function()),trackIds:z.optional(z.array(HashId))}).strict(),UploadAlbumMetadataSchema=CreateAlbumMetadataSchema.extend({genre:z.enum(Object.values(Genre)),mood:z.optional(z.enum(Object.values(Mood))),tags:z.optional(z.string())}),AlbumTrackMetadataSchema=UploadTrackMetadataSchema.partial({genre:!0,mood:!0,tags:!0,isStreamGated:!0,streamConditions:!0,isDownloadable:!0,downloadConditions:!0}),UpdateAlbumMetadataSchema=UploadAlbumMetadataSchema.partial().merge(z.object({playlistContents:z.optional(z.array(z.object({timestamp:z.number(),metadataTimestamp:z.optional(z.number()),trackId:HashId})))})).strict(),UploadAlbumSchema=z.object({userId:HashId,coverArtFile:ImageFile,metadata:UploadAlbumMetadataSchema,onProgress:z.optional(z.function()),trackMetadatas:z.array(AlbumTrackMetadataSchema),trackFiles:z.array(AudioFile)}).strict(),UpdateAlbumSchema=z.object({userId:HashId,albumId:HashId,coverArtFile:z.optional(ImageFile),metadata:UpdateAlbumMetadataSchema,onProgress:z.optional(z.function())}).strict(),DeleteAlbumSchema=z.object({userId:HashId,albumId:HashId}).strict(),FavoriteAlbumSchema=z.object({userId:HashId,albumId:HashId,metadata:z.optional(z.object({isSaveOfRepost:z.boolean()}))}).strict(),UnfavoriteAlbumSchema=z.object({userId:HashId,albumId:HashId}).strict(),RepostAlbumSchema=z.object({userId:HashId,albumId:HashId,metadata:z.optional(z.object({isRepostOfRepost:z.boolean()}))}).strict(),UnrepostAlbumSchema=z.object({userId:HashId,albumId:HashId}).strict(),PurchaseAlbumSchemaBase=z.object({userId:HashId,albumId:HashId,price:z.union([z.number().min(0),z.bigint().min(BigInt(0))]),extraAmount:z.union([z.number().min(0),z.bigint().min(BigInt(0))]).optional(),includeNetworkCut:z.boolean().optional()}),GetPurchaseAlbumInstructionsSchema=z.object({}).merge(PurchaseAlbumSchemaBase),PurchaseAlbumSchema=z.object({walletAdapter:z.custom().optional(),wallet:PublicKeySchema.optional()}).merge(PurchaseAlbumSchemaBase).strict();class AlbumsApi{constructor(e,t,r,n,i,a,o,s){_defineProperty$3(this,"logger",void 0),_defineProperty$3(this,"claimableTokensClient",void 0),_defineProperty$3(this,"paymentRouterClient",void 0),_defineProperty$3(this,"solanaRelay",void 0),_defineProperty$3(this,"solanaClient",void 0),_defineProperty$3(this,"playlistsApi",void 0),this.logger=n,this.claimableTokensClient=i,this.paymentRouterClient=a,this.solanaRelay=o,this.solanaClient=s,this.playlistsApi=new PlaylistsApi$1(e,t,r,n)}async getAlbum(e){const{userId:t,albumId:r}=e;return await this.playlistsApi.getPlaylist({userId:t,playlistId:r})}async getBulkAlbums(e){const{userId:t,id:r}=e;return await this.playlistsApi.getBulkPlaylists({userId:t,id:r})}async getAlbumTracks(e){const{albumId:t}=e;return await this.playlistsApi.getPlaylistTracks({playlistId:t})}async createAlbum(e,t){const{metadata:r,...n}=await parseParams("createAlbum",CreateAlbumSchema)(e),{albumName:i,...a}=r,o=await this.playlistsApi.createPlaylistInternal({...n,playlistId:n.albumId,metadata:{...a,playlistName:i,isAlbum:!0}},t);return{...o,albumId:o.playlistId}}async uploadAlbum(e,t){const{metadata:r,...n}=await parseParams("uploadAlbum",UploadAlbumSchema)(e),{albumName:i,...a}=r,o=await this.playlistsApi.uploadPlaylistInternal({...n,metadata:{...a,playlistName:i,isAlbum:!0}},t);return{blockHash:o.blockHash,blockNumber:o.blockNumber,albumId:o.playlistId}}async updateAlbum(e,t){const{albumId:r,metadata:n,...i}=await parseParams("updateAlbum",UpdateAlbumSchema)(e),{albumName:a,...o}=n;return await this.playlistsApi.updatePlaylistInternal({...i,playlistId:r,metadata:{...o,playlistName:a}},t)}async deleteAlbum(e,t){return await parseParams("deleteAlbum",DeleteAlbumSchema)(e),await this.playlistsApi.deletePlaylist({userId:e.userId,playlistId:e.albumId},t)}async favoriteAlbum(e,t){const{metadata:r}=await parseParams("favoriteAlbum",FavoriteAlbumSchema)(e);return await this.playlistsApi.favoritePlaylist({userId:e.userId,playlistId:e.albumId,metadata:r},t)}async unfavoriteAlbum(e,t){return await parseParams("unfavoriteAlbum",UnfavoriteAlbumSchema)(e),await this.playlistsApi.unfavoritePlaylist({userId:e.userId,playlistId:e.albumId},t)}async repostAlbum(e,t){const{metadata:r}=await parseParams("repostAlbum",RepostAlbumSchema)(e);return await this.playlistsApi.repostPlaylist({userId:e.userId,playlistId:e.albumId,metadata:r},t)}async unrepostAlbum(e,t){return await parseParams("unrepostAlbum",UnrepostAlbumSchema)(e),await this.playlistsApi.unrepostPlaylist({userId:e.userId,playlistId:e.albumId},t)}async getPurchaseAlbumInstructions(e){var t;const{userId:r,albumId:n,price:i,extraAmount:a=0}=await parseParams("getPurchaseAlbumInstructions",GetPurchaseAlbumInstructionsSchema)(e);this.logger.debug("Fetching album...",{albumId:n});const{data:o}=await this.playlistsApi.getPlaylistAccessInfo({userId:e.userId,playlistId:e.albumId});if(!o)throw new Error("Album not found.");if(!o.isStreamGated)throw new Error("Attempted to purchase free album.");if(o.userId===e.userId)throw new Error("Attempted to purchase own album.");let s,u=[];if(!o.streamConditions||!instanceOfExtendedPurchaseGate(o.streamConditions))throw this.logger.debug(o.streamConditions),new Error("Album is not available for purchase.");if(s=o.streamConditions.usdcPurchase.price,u=o.streamConditions.usdcPurchase.splits,null!==(t=o.access)&&void 0!==t&&t.stream)throw new Error("Album already purchased");if(USDC(i).value<USDC(s/100).value)throw new Error("Track price increased.");const c=USDC(a).value,d=USDC(s/100).value+c;this.logger.debug("Purchase total:",d);const l=await prepareSplits({splits:u,extraAmount:c,claimableTokensClient:this.claimableTokensClient,logger:this.logger});this.logger.debug("Calculated splits:",l);const p=await this.paymentRouterClient.createRouteInstruction({splits:l,total:d,mint:"USDC"}),h=await this.paymentRouterClient.createPurchaseMemoInstruction({contentId:n,contentType:"album",blockNumber:o.blocknumber,buyerUserId:r,accessType:"stream"});let f;try{f=await this.solanaRelay.getLocationInstruction()}catch(e){this.logger.warn("Unable to compute location memo instruction")}return{instructions:{routeInstruction:p,memoInstruction:h,locationMemoInstruction:f},total:d}}async purchaseAlbum(e){const{wallet:t}=await parseParams("purchaseAlbum",PurchaseAlbumSchema)(e),{wallet:r,walletAdapter:n,...i}=e,{instructions:{routeInstruction:a,memoInstruction:o,locationMemoInstruction:s},total:u}=await this.getPurchaseAlbumInstructions(i);let c;const d="USDC";if(t){this.logger.debug("Using provided wallet to purchase...",{wallet:t.toBase58()});const e=await this.paymentRouterClient.createTransferInstruction({sourceWallet:t,total:u,mint:d});c=await this.solanaClient.buildTransaction({feePayer:t,instructions:[e,a,o,s].filter(Boolean)})}else{this.logger.debug(`Using userBank ${await this.claimableTokensClient.deriveUserBank({mint:"USDC"})} to purchase...`);const e=await this.paymentRouterClient.getOrCreateProgramTokenAccount({mint:d}),r=await this.claimableTokensClient.createTransferSecpInstruction({destination:e.address,mint:d,amount:u}),n=await this.claimableTokensClient.createTransferInstruction({destination:e.address,mint:d});c=await this.solanaClient.buildTransaction({feePayer:t,instructions:[r,n,a,o,s].filter(Boolean)})}if(e.walletAdapter){if(!e.walletAdapter.publicKey)throw new Error("Param walletAdapter was specified, but no wallet selected");return await e.walletAdapter.sendTransaction(c,this.solanaClient.connection)}return this.solanaClient.sendTransaction(c,{skipPreflight:!0})}}function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var events=EventEmitter;function isFunction$1(e){return"function"==typeof e}function isNumber$1(e){return"number"==typeof e}function isObject$1(e){return"object"==typeof e&&null!==e}function isUndefined$1(e){return void 0===e}
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function assertNumber(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function chain(){const e=(e,t)=>r=>e(t(r));for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const i=Array.from(r).reverse().reduce(((t,r)=>t?e(t,r.encode):r.encode),void 0),a=r.reduce(((t,r)=>t?e(t,r.decode):r.decode),void 0);return{encode:i,decode:a}}function alphabet(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(assertNumber(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}}function join(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function padding(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";if(assertNumber(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function normalize(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function convertRadix(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0;const i=[],a=Array.from(e);for(a.forEach((e=>{if(assertNumber(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,o=!0;for(let i=n;i<a.length;i++){const s=a[i],u=t*e+s;if(!Number.isSafeInteger(u)||t*e/t!==e||u-s!=t*e)throw new Error("convertRadix: carry overflow");if(e=u%r,a[i]=Math.floor(u/r),!Number.isSafeInteger(a[i])||a[i]*r+e!==u)throw new Error("convertRadix: carry overflow");o&&(a[i]?o=!1:n=i)}if(i.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber$1(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,r,n,i,a,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject$1(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(isUndefined$1(r=this._events[e]))return!1;if(isFunction$1(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(isObject$1(r))for(i=Array.prototype.slice.call(arguments,1),n=(o=r.slice()).length,a=0;a<n;a++)o[a].apply(this,i);return!0},EventEmitter.prototype.addListener=function(e,t){var r;if(!isFunction$1(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction$1(t.listener)?t.listener:t),this._events[e]?isObject$1(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject$1(this._events[e])&&!this._events[e].warned&&(r=isUndefined$1(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){if(!isFunction$1(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var r,n,i,a;if(!isFunction$1(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(r=this._events[e]).length,n=-1,r===t||isFunction$1(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject$1(r)){for(a=i;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(isFunction$1(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){return this._events&&this._events[e]?isFunction$1(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(isFunction$1(t))return 1;if(t)return t.length}return 0},EventEmitter.listenerCount=function(e,t){return e.listenerCount(t)};const gcd=(e,t)=>t?gcd(t,e%t):e,radix2carry=(e,t)=>e+(t-gcd(e,t));function convertRadix2(e,t,r,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(radix2carry(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${radix2carry(t,r)}`);let i=0,a=0;const o=2**r-1,s=[];for(const n of e){if(assertNumber(n),n>=2**t)throw new Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=r;a-=r)s.push((i>>a-r&o)>>>0);i&=2**a-1}if(i=i<<r-a&o,!n&&a>=t)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&a>0&&s.push(i>>>0),s}function radix(e){return assertNumber(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return convertRadix(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(convertRadix(t,e,256))}}}function radix2(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(assertNumber(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(radix2carry(8,e)>32||radix2carry(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return convertRadix2(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(convertRadix2(r,e,8,t))}}}function unsafeWrapper(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(){try{for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(null,r)}catch(e){}}}const base16=chain(radix2(4),alphabet("0123456789ABCDEF"),join("")),base32$1=chain(radix2(5),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),padding(5),join(""));chain(radix2(5),alphabet("0123456789ABCDEFGHIJKLMNOPQRSTUV"),padding(5),join("")),chain(radix2(5),alphabet("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),join(""),normalize((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))));const base64=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),padding(6),join("")),base64url=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),padding(6),join("")),genBase58=e=>chain(radix(58),alphabet(e),join("")),base58=genBase58("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");genBase58("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),genBase58("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const XMR_BLOCK_LEN=[0,2,3,5,6,7,9,10,11],base58xmr={encode(e){let t="";for(let r=0;r<e.length;r+=8){const n=e.subarray(r,r+8);t+=base58.encode(n).padStart(XMR_BLOCK_LEN[n.length],"1")}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=11){const n=e.slice(r,r+11),i=XMR_BLOCK_LEN.indexOf(n.length),a=base58.decode(n);for(let e=0;e<a.length-i;e++)if(0!==a[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(a.slice(a.length-i)))}return Uint8Array.from(t)}},BECH_ALPHABET=chain(alphabet("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),join("")),POLYMOD_GENERATORS=[996825010,642813549,513874426,1027748829,705979059];function bech32Polymod(e){const t=e>>25;let r=(33554431&e)<<5;for(let e=0;e<POLYMOD_GENERATORS.length;e++)1==(t>>e&1)&&(r^=POLYMOD_GENERATORS[e]);return r}function bechChecksum(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=e.length;let i=1;for(let t=0;t<n;t++){const r=e.charCodeAt(t);if(r<33||r>126)throw new Error(`Invalid prefix (${e})`);i=bech32Polymod(i)^r>>5}i=bech32Polymod(i);for(let t=0;t<n;t++)i=bech32Polymod(i)^31&e.charCodeAt(t);for(let e of t)i=bech32Polymod(i)^e;for(let e=0;e<6;e++)i=bech32Polymod(i);return i^=r,BECH_ALPHABET.encode(convertRadix2([i%2**30],30,5,!1))}function genBech32(e){const t="bech32"===e?1:734539939,r=radix2(5),n=r.decode,i=r.encode,a=unsafeWrapper(n);function o(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(e=n).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const a=e.slice(0,i),o=e.slice(i+1);if(o.length<6)throw new Error("Data must be at least 6 characters long");const s=BECH_ALPHABET.decode(o).slice(0,-6),u=bechChecksum(a,s,t);if(!o.endsWith(u))throw new Error(`Invalid checksum in ${e}: expected "${u}"`);return{prefix:a,words:s}}return{encode:function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:90;if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof r);const i=e.length+7+r.length;if(!1!==n&&i>n)throw new TypeError(`Length ${i} exceeds limit ${n}`);return`${e=e.toLowerCase()}1${BECH_ALPHABET.encode(r)}${bechChecksum(e,r,t)}`},decode:o,decodeToBytes:function(e){const{prefix:t,words:r}=o(e,!1);return{prefix:t,words:r,bytes:n(r)}},decodeUnsafe:unsafeWrapper(o),fromWords:n,fromWordsUnsafe:a,toWords:i}}genBech32("bech32"),genBech32("bech32m");const utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},hex=chain(radix2(4),alphabet("0123456789abcdef"),join(""),normalize((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}))),CODERS={utf8:utf8,hex:hex,base16:base16,base32:base32$1,base64:base64,base64url:base64url,base58:base58,base58xmr:base58xmr};Object.keys(CODERS).join(", ");var ws=null;"undefined"!=typeof WebSocket?ws=WebSocket:"undefined"!=typeof MozWebSocket?ws=MozWebSocket:"undefined"!=typeof global?ws=global.WebSocket||global.MozWebSocket:"undefined"!=typeof window?ws=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(ws=self.WebSocket||self.MozWebSocket);var WebSocket$1=ws;function createError$3(e){var t=new Error(e);return t.source="ulid",t}var ENCODING="0123456789ABCDEFGHJKMNPQRSTVWXYZ",ENCODING_LEN=ENCODING.length,TIME_MAX=Math.pow(2,48)-1,TIME_LEN=10,RANDOM_LEN=16;function randomChar(e){var t=Math.floor(e()*ENCODING_LEN);return t===ENCODING_LEN&&(t=ENCODING_LEN-1),ENCODING.charAt(t)}function encodeTime(e,t){if(isNaN(e))throw new Error(e+" must be a number");if(e>TIME_MAX)throw createError$3("cannot encode time greater than "+TIME_MAX);if(e<0)throw createError$3("time must be positive");if(!1===Number.isInteger(e))throw createError$3("time must be an integer");for(var r=void 0,n="";t>0;t--)r=e%ENCODING_LEN,n=ENCODING.charAt(r)+n,e=(e-r)/ENCODING_LEN;return n}function encodeRandom(e,t){for(var r="";e>0;e--)r=randomChar(t)+r;return r}function detectPrng(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];t||(t="undefined"!=typeof window?window:null);var r=t&&(t.crypto||t.msCrypto);if(r)return function(){var e=new Uint8Array(1);return r.getRandomValues(e),e[0]/255};try{var n=require("crypto");return function(){return n.randomBytes(1).readUInt8()/255}}catch(e){}if(e){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch(e){}return function(){return Math.random()}}throw createError$3("secure crypto unusable, insecure Math.random not allowed")}function factory(e){return e||(e=detectPrng()),function(t){return isNaN(t)&&(t=Date.now()),encodeTime(t,TIME_LEN)+encodeRandom(RANDOM_LEN,e)}}var ulid=factory();const cr=()=>"object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function concatBytes(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const n=t.reduce(((e,t)=>e+t.length),0),i=new Uint8Array(n);for(let e=0,r=0;e<t.length;e++){const n=t[e];i.set(n,r),r+=n.length}return i}const MD={e:"AES-GCM",i:{name:"AES-GCM",length:256}};function ensureBytes(e,t){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");if("number"==typeof t&&e.length!==t)throw new Error(`Uint8Array length ${t} expected`)}function ensureCrypto(){if(!cr())throw new Error("globalThis.crypto is not available: use nodejs 19+ or browser")}async function encrypt(e,t){ensureCrypto(),ensureBytes(e,32),ensureBytes(t);const r=utils$e.randomBytes(12),n=await cr().subtle.importKey("raw",e,MD.i,!0,["encrypt"]),i=await cr().subtle.encrypt({name:MD.e,iv:r},n,t);return concatBytes(r,new Uint8Array(i))}async function decrypt(e,t){ensureCrypto(),ensureBytes(e,32),ensureBytes(t);const r=t.slice(0,12),n=t.slice(12),i=await cr().subtle.importKey("raw",e,MD.i,!0,["decrypt"]),a=await cr().subtle.decrypt({name:MD.e,iv:r},i,n);return new Uint8Array(a)}const utils$e={randomBytes:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return cr().getRandomValues(new Uint8Array(e))},bytesToUtf8:e=>(new TextDecoder).decode(e),utf8ToBytes:e=>(new TextEncoder).encode(e),concatBytes:concatBytes};class CryptoUtils{static async encrypt(e,t){return await encrypt(e.slice(e.length-32),t)}static async encryptString(e,t){return await CryptoUtils.encrypt(e,(new TextEncoder).encode(t))}static async decrypt(e,t){return await decrypt(e.slice(e.length-32),t)}static async decryptString(e,t){return(new TextDecoder).decode(await CryptoUtils.decrypt(e,t))}}var ChatPermission,ChatBlastAudience;!function(e){e.ALL="all",e.TIPPEES="tippees",e.TIPPERS="tippers",e.FOLLOWEES="followees",e.FOLLOWERS="followers",e.VERIFIED="verified",e.NONE="none"}(ChatPermission||(ChatPermission={})),function(e){e.FOLLOWERS="follower_audience",e.TIPPERS="tipper_audience",e.REMIXERS="remixer_audience",e.CUSTOMERS="customer_audience",e.COIN_HOLDERS="coin_holder_audience"}(ChatBlastAudience||(ChatBlastAudience={}));const ChatGetAllRequestSchema=z.object({userId:z.string(),limit:z.optional(z.number()),before:z.optional(z.string()),after:z.optional(z.string())}),ChatGetRequestSchema=z.object({currentUserId:z.optional(z.string()),chatId:z.string()}),ChatGetMessagesRequestSchema=z.object({currentUserId:z.optional(z.string()),chatId:z.string(),isBlast:z.optional(z.boolean()),limit:z.optional(z.number()),before:z.optional(z.string()),after:z.optional(z.string())}),ChatGetUnreadCountRequestSchema=z.optional(z.object({currentUserId:z.optional(z.string())})),ChatGetBlockersRequestSchema=z.optional(z.object({currentUserId:z.optional(z.string())})),ChatCreateRequestSchema=z.object({currentUserId:z.optional(z.string()),userId:z.string(),invitedUserIds:z.array(z.string()).min(1)}),ChatInviteRequestSchema=z.object({currentUserId:z.optional(z.string()),chatId:z.string(),userId:z.string(),invitedUserIds:z.array(z.string()).min(1)}),ChatMessageRequestSchema=z.object({currentUserId:z.optional(z.string()),chatId:z.string(),messageId:z.optional(z.string()),message:z.string()}),ChatBlastMessageRequestSchema=z.object({currentUserId:z.optional(z.string()),blastId:z.string(),message:z.string(),audience:z.nativeEnum(ChatBlastAudience),audienceContentId:z.optional(z.string()),audienceContentType:z.optional(z.enum(["track","album"]))}),ChatReactRequestSchema=z.object({currentUserId:z.optional(z.string()),chatId:z.string(),messageId:z.string(),reaction:z.nullable(z.string())}),ChatReadRequestSchema=z.object({currentUserId:z.optional(z.string()),chatId:z.string()}),ChatBlockRequestSchema=z.object({currentUserId:z.optional(z.string()),userId:z.string()}),ChatDeleteRequestSchema=z.object({currentUserId:z.optional(z.string()),chatId:z.string()}),ChatPermitRequestSchema=z.object({currentUserId:z.optional(z.string()),permit:z.optional(z.nativeEnum(ChatPermission)),permitList:z.optional(z.array(z.nativeEnum(ChatPermission)).min(1)),allow:z.optional(z.boolean())});z.object({currentUserId:z.optional(z.string()),userIds:z.array(z.string()).min(1)});const ChatGetPermissionRequestSchema=z.object({currentUserId:z.optional(z.string()),userIds:z.array(z.string()).min(1)}),ChatUnfurlRequestSchema=z.object({urls:z.array(z.string()).min(1)}),GENERIC_MESSAGE_ERROR="Error: this message cannot be displayed";class ChatsApi extends BaseAPI$1{constructor(e,t,r){super(e),_defineProperty$3(this,"audiusWalletClient",void 0),_defineProperty$3(this,"logger",void 0),_defineProperty$3(this,"chatSecrets",{}),_defineProperty$3(this,"publicKeyCache",{}),_defineProperty$3(this,"eventEmitter",void 0),_defineProperty$3(this,"addEventListener",void 0),_defineProperty$3(this,"removeEventListener",void 0),this.audiusWalletClient=t,this.logger=r,this.eventEmitter=new events,this.addEventListener=this.eventEmitter.addListener.bind(this.eventEmitter),this.removeEventListener=this.eventEmitter.removeListener.bind(this.eventEmitter),this.logger=r.createPrefixedLogger("[chats-api]")}async listen(){await this.createWebsocket(this.configuration.basePath)}async get(e){const{chatId:t,currentUserId:r}=await parseParams("get",ChatGetRequestSchema)(e),n=await this.getRaw(t,r);return{...n,data:n.data?await this.decryptLastChatMessage(n.data):n.data}}async getAll(e){const{userId:t,limit:r,before:n,after:i}=await parseParams("getAll",ChatGetAllRequestSchema)(e);this.upgradeBlasts(t);const a={timestamp:(new Date).getTime()};r&&(a.limit=r),n&&(a.before=n),i&&(a.after=i),t&&(a.current_user_id=t);const o=await this.signAndSendRequest({method:"GET",headers:{},path:"/comms/chats",query:a}),s=await o.json(),u=await Promise.all(s.data.map((async e=>await this.decryptLastChatMessage(e))));return{...s,data:u}}async getMessages(e){const{currentUserId:t,chatId:r,isBlast:n,limit:i,before:a,after:o}=await parseParams("getMessages",ChatGetMessagesRequestSchema)(e);let s;if(!n)try{s=await this.getChatSecret(r)}catch(e){throw this.logger.error("[audius-sdk] Couldn't get chat secret",e),new Error("[audius-sdk] Couldn't get chat secret")}const u=`/comms/chats/${r}/messages`,c={timestamp:(new Date).getTime()};n&&(c.is_blast=n),i&&(c.limit=i),a&&(c.before=a),o&&(c.after=o),t&&(c.current_user_id=t);const d=await this.signAndSendRequest({method:"GET",headers:{},path:u,query:c}),l=await d.json(),p=await Promise.all(l.data.map((async e=>({...e,message:e.is_plaintext?e.message:await CryptoUtils.decryptString(s,base64.decode(e.message)).catch((t=>(this.logger.error("[audius-sdk]: Error: Couldn't decrypt chat message",e,t),GENERIC_MESSAGE_ERROR)))}))));return{...l,data:p}}async getBlasts(){const e={timestamp:(new Date).getTime()},t=await this.signAndSendRequest({method:"GET",path:"/comms/blasts",headers:{},query:e});return await t.json()}async getUnreadCount(e){const t=await parseParams("getUnreadCount",ChatGetUnreadCountRequestSchema)(e),r={timestamp:(new Date).getTime()};null!=t&&t.currentUserId&&(r.current_user_id=t.currentUserId);const n=await this.signAndSendRequest({method:"GET",path:"/comms/chats/unread",headers:{},query:r});return await n.json()}async getPermissions(e){const t={timestamp:(new Date).getTime()},{userIds:r,currentUserId:n}=await parseParams("getPermissions",ChatGetPermissionRequestSchema)(e);t.id=r,n&&(t.current_user_id=n);const i=await this.signAndSendRequest({method:"GET",path:"/comms/chats/permissions",headers:{},query:t});return await i.json()}async getBlockers(e){const t=await parseParams("getBlockers",ChatGetBlockersRequestSchema)(e),r={timestamp:(new Date).getTime()};null!=t&&t.currentUserId&&(r.current_user_id=t.currentUserId);const n=await this.signAndSendRequest({method:"GET",path:"/comms/chats/blockers",headers:{},query:r});return await n.json()}async getBlockees(e){const t=await parseParams("getBlockees",ChatGetBlockersRequestSchema)(e),r={timestamp:(new Date).getTime()};null!=t&&t.currentUserId&&(r.current_user_id=t.currentUserId);const n=await this.signAndSendRequest({method:"GET",path:"/comms/chats/blockees",headers:{},query:r});return await n.json()}async unfurl(e){const{urls:t}=await parseParams("unfurl",ChatUnfurlRequestSchema)(e),r={content:t},n=await this.request({method:"GET",path:"/comms/unfurl",query:r,headers:{}});return await n.json()}async create(e){const{currentUserId:t,userId:r,invitedUserIds:n}=await parseParams("create",ChatCreateRequestSchema)(e),i=[r,...n].sort().join(":"),a=utils$f.randomPrivateKey(),o=await this.createInvites(r,n,a);return await this.sendRpc({current_user_id:t,method:"chat.create",params:{chat_id:i,invites:o}})}async invite(e){const{currentUserId:t,chatId:r,userId:n,invitedUserIds:i}=await parseParams("invite",ChatInviteRequestSchema)(e),a=await this.getChatSecret(r),o=await this.createInvites(n,i,a);return await this.sendRpc({current_user_id:t,method:"chat.invite",params:{chat_id:r,invites:o}})}async message(e){const{currentUserId:t,chatId:r,message:n,messageId:i}=await parseParams("message",ChatMessageRequestSchema)(e),a=await this.getChatSecret(r),o=await CryptoUtils.encryptString(a,n),s=base64.encode(o);return await this.sendRpc({current_user_id:t,method:"chat.message",params:{chat_id:r,message_id:null!=i?i:ulid(),message:s}})}async messageBlast(e){const{currentUserId:t,blastId:r,message:n,audience:i,audienceContentId:a,audienceContentType:o}=await parseParams("messageBlast",ChatBlastMessageRequestSchema)(e);let s=o;return i===ChatBlastAudience.REMIXERS&&a&&(s="track"),await this.sendRpc({current_user_id:t,method:"chat.blast",params:{blast_id:null!=r?r:ulid(),audience:i,audience_content_id:a,audience_content_type:s,message:n}})}async react(e){const{currentUserId:t,chatId:r,messageId:n,reaction:i}=await parseParams("react",ChatReactRequestSchema)(e);return await this.sendRpc({current_user_id:t,method:"chat.react",params:{chat_id:r,message_id:n,reaction:i}})}async read(e){const{currentUserId:t,chatId:r}=await parseParams("read",ChatReadRequestSchema)(e);return await this.sendRpc({current_user_id:t,method:"chat.read",params:{chat_id:r}})}async block(e){const{currentUserId:t,userId:r}=await parseParams("block",ChatBlockRequestSchema)(e);return await this.sendRpc({current_user_id:t,method:"chat.block",params:{user_id:r}})}async unblock(e){const{currentUserId:t,userId:r}=await parseParams("unblock",ChatBlockRequestSchema)(e);return await this.sendRpc({current_user_id:t,method:"chat.unblock",params:{user_id:r}})}async delete(e){const{currentUserId:t,chatId:r}=await parseParams("delete",ChatDeleteRequestSchema)(e);return await this.sendRpc({current_user_id:t,method:"chat.delete",params:{chat_id:r}})}async permit(e){const{currentUserId:t,permit:r,permitList:n,allow:i}=await parseParams("permit",ChatPermitRequestSchema)(e);return await this.sendRpc({current_user_id:t,method:"chat.permit",params:{permit:null!=r?r:ChatPermission.ALL,permit_list:null!=n?n:[ChatPermission.ALL],allow:i}})}async createInvites(e,t,r){const n=[e,...t],i=n.map((e=>this.getPublicKey(e))),a=await Promise.all(i),o=a[0];if(!o)throw new Error(`Failed to fetch public key for user ${e}`);return await Promise.all(n.map((async(e,t)=>{const n=a[t];if(!n)throw new Error(`Failed to fetch public key for user ${e}`);const i=await this.createInviteCode(o,n,r);return{user_id:e,invite_code:base64.encode(i)}})))}async createInviteCode(e,t,r){const n=await this.audiusWalletClient.getSharedSecret({publicKey:t}),i=await CryptoUtils.encrypt(n,r),a=new Uint8Array(65+i.length);return a.set(e),a.set(i,65),a}async readInviteCode(e){const t=e.slice(0,65),r=e.slice(65),n=await this.audiusWalletClient.getSharedSecret({publicKey:t});return await CryptoUtils.decrypt(n,r)}async decryptLastChatMessage(e){if(e.last_message_is_plaintext)return e;let t="";try{const r=await this.getChatSecret(e.chat_id);e.last_message&&e.last_message.length>0&&(t=await CryptoUtils.decryptString(r,base64.decode(e.last_message)))}catch(r){this.logger.error("[audius-sdk]: Error: Couldn't decrypt last chat message",e,r),t=GENERIC_MESSAGE_ERROR}return{...e,last_message:t}}async getRaw(e,t){const r=`/comms/chats/${e}`,n={timestamp:(new Date).getTime()};t&&(n.current_user_id=t);const i=await this.signAndSendRequest({method:"GET",headers:{},path:r,query:n});return await i.json()}async getChatSecret(e){const t=this.chatSecrets[e];if(!t){const t=await this.getRaw(e),r=await this.readInviteCode(base64.decode(t.data.invite_code));return this.chatSecrets[e]=r,r}return t}async getPublicKey(e){this.publicKeyCache[e]||(this.publicKeyCache[e]=this.fetchPublicKey(e));const t=this.publicKeyCache[e];if(!t)throw new Error(`Public key cache is unexpectedly empty for user ${e}`);return await t}async fetchPublicKey(e){const t=await this.request({path:`/comms/pubkey/${e}`,method:"GET",headers:{}}),r=await t.json();return base64.decode(r.data)}async upgradeBlasts(e){const t=await this.getBlasts(),r=lodash.exports.uniqBy(t.data,"pending_chat_id");await Promise.all(r.map((async t=>{const r=encodeHashId(t.from_user_id);r&&await this.create({userId:e,invitedUserIds:[r]})})));for(const e of t.data){const t=encodeHashId(e.from_user_id);t&&this.eventEmitter.emit("message",{chatId:e.pending_chat_id,message:{message_id:e.blast_id+e.pending_chat_id,message:e.plaintext,sender_user_id:t,created_at:e.created_at,reactions:[],is_plaintext:!0,audience:e.audience}})}}async getSignatureHeader(e){const[t,r]=await this.audiusWalletClient.sign({message:e}),n=new Uint8Array(65);return n.set(t,0),n[64]=r,{"x-sig":base64.encode(n)}}async signAndSendRequest(e){const t="GET"===e.method?e.query?`${e.path}?${this.configuration.queryParamsStringify(e.query)}`:e.path:e.body;return await this.request({...e,headers:{...e.headers,...await this.getSignatureHeader(t)}})}async sendRpc(e){const t=JSON.stringify({...e,timestamp:(new Date).getTime()});return await this.signAndSendRequest({method:"POST",headers:{"Content-Type":"application/json"},path:"/comms/mutate",body:t}),e}async createWebsocket(e){const t=`/comms/chats/ws?timestamp=${(new Date).getTime()}`,r=await this.getSignatureHeader(t),n=`${e.replace(/http(s?)/g,"ws$1")}${t}&signature=${encodeURIComponent(r["x-sig"])}`,i=new WebSocket$1(n);return i.addEventListener("message",(e=>{(async()=>{const t=JSON.parse(e.data);if("chat.message"===t.rpc.method){const e=await this.getChatSecret(t.rpc.params.chat_id);this.eventEmitter.emit("message",{chatId:t.rpc.params.chat_id,message:{message_id:t.rpc.params.message_id,message:t.rpc.params.is_plaintext?t.rpc.params.message:await CryptoUtils.decryptString(e,base64.decode(t.rpc.params.message)).catch((e=>(this.logger.error("[audius-sdk]: Error: Couldn't decrypt websocket chat message",t,e),GENERIC_MESSAGE_ERROR))),sender_user_id:t.metadata.senderUserId,created_at:t.metadata.timestamp,reactions:[],is_plaintext:!!t.rpc.params.is_plaintext,audience:t.rpc.params.audience}})}else if("chat.react"===t.rpc.method)this.eventEmitter.emit("reaction",{chatId:t.rpc.params.chat_id,messageId:t.rpc.params.message_id,reaction:{reaction:t.rpc.params.reaction,user_id:t.metadata.senderUserId,created_at:t.metadata.timestamp}});else if("chat.blast"===t.rpc.method){const e=t.metadata.receiverUserId;await this.upgradeBlasts(e),this.eventEmitter.emit("blast",{audience:t.rpc.params.audience,audienceContentType:t.rpc.params.audience_content_type,audienceContentId:t.rpc.params.audience_content_id,message:{message_id:t.rpc.params.blast_id,message:t.rpc.params.message,sender_user_id:t.metadata.senderUserId,created_at:t.metadata.timestamp,reactions:[],is_plaintext:!0,audience:t.rpc.params.audience}})}})()})),i.addEventListener("open",(()=>{this.eventEmitter.emit("open")})),i.addEventListener("close",(()=>{this.eventEmitter.emit("close")})),i.addEventListener("error",(e=>{this.eventEmitter.emit("error",e)})),i}}class CommentsApi$1 extends CommentsApi$2{constructor(e,t,r){super(e),_defineProperty$3(this,"entityManager",void 0),_defineProperty$3(this,"logger",void 0),this.entityManager=t,this.logger=r}async generateCommentId(){const e=await this.getUnclaimedCommentID(),{data:t}=e;return t?decodeHashId(t):Math.floor(1e6*Math.random())}async postComment(e){const{userId:t,entityType:r=EntityType.TRACK,commentId:n}=e,i=null!=n?n:await this.generateCommentId();return await this.entityManager.manageEntity({userId:t,entityType:EntityType.COMMENT,entityId:i,action:Action.CREATE,metadata:JSON.stringify({cid:"",data:snakecaseKeys({entityType:r,...e})})}),this.logger.info("Successfully posted a comment"),encodeHashId(i)}async editComment(e){const{userId:t,entityId:r,trackId:n}=e;return await this.entityManager.manageEntity({userId:t,entityType:EntityType.COMMENT,entityId:r,action:Action.UPDATE,metadata:JSON.stringify({cid:"",data:snakecaseKeys({...e,entityId:n})})})}async deleteComment(e){const{userId:t,entityId:r}=e;return await this.entityManager.manageEntity({userId:t,entityType:EntityType.COMMENT,entityId:r,action:Action.DELETE,metadata:""})}async reactComment(e){const{userId:t,commentId:r,isLiked:n,trackId:i}=e;return await this.entityManager.manageEntity({userId:t,entityType:EntityType.COMMENT,entityId:r,action:n?Action.REACT:Action.UNREACT,metadata:JSON.stringify({cid:"",data:snakecaseKeys({entityId:i,entityType:EntityType.TRACK})})})}async pinComment(e){const{userId:t,entityId:r,trackId:n,isPin:i}=e;return await this.entityManager.manageEntity({userId:t,entityType:EntityType.COMMENT,entityId:r,action:i?Action.PIN:Action.UNPIN,metadata:JSON.stringify({cid:"",data:snakecaseKeys({entityId:n})})})}async reportComment(e,t){return await this.entityManager.manageEntity({userId:e,entityType:EntityType.COMMENT,entityId:t,action:Action.REPORT,metadata:""})}async muteUser(e,t,r){return await this.entityManager.manageEntity({userId:e,entityType:EntityType.USER,entityId:t,action:r?Action.UNMUTE:Action.MUTE,metadata:""})}async updateCommentNotificationSetting(e){return await this.entityManager.manageEntity({...e,metadata:""})}}const EthAddressSchema=z.custom((e=>z.string().startsWith("0x","Hex string must start with 0x").regex(/^0x[0-9a-fA-F]+$/,"Hex must only include hexadecimal characters 0-9, a-F").length(42,"Ethereum address must be 42 characters (including 0x").parse(e))),CreateDashboardWalletUser=z.object({wallet:EthAddressSchema,userId:HashId,walletSignature:z.object({message:z.string(),signature:z.string()}).optional(),userSignature:z.object({message:z.string(),signature:z.string()}).optional()}).refine((e=>!!e.userSignature||!!e.walletSignature),"Either `userSignature` or `walletSignature` is required. Use `userSignature` if SDK is authenticated with the wallet's sign methods, and use `walletSignature` if SDK is authenticated with the user's sign methods."),DeleteDashboardWalletUserSchema=z.object({userId:HashId,wallet:EthAddressSchema});class DashboardWalletUsersApi extends DashboardWalletUsersApi$1{constructor(e,t){super(e),_defineProperty$3(this,"entityManager",void 0),this.entityManager=t}async connectUserToDashboardWallet(e,t){const{wallet:r,userId:n,walletSignature:i,userSignature:a}=await parseParams("createDashboardWalletUser",CreateDashboardWalletUser)(e),o=i?{wallet_signature:{message:i.message,signature:i.signature}}:{user_signature:{message:a.message,signature:a.signature}};return{...await this.entityManager.manageEntity({userId:n,entityType:EntityType.DASHBOARD_WALLET_USER,entityId:0,action:Action.CREATE,metadata:JSON.stringify({wallet:r,...o}),...t})}}async disconnectUserFromDashboardWallet(e){const{userId:t,wallet:r}=await parseParams("deleteDashboardWalletUser",DeleteDashboardWalletUserSchema)(e);return await this.entityManager.manageEntity({userId:t,entityType:EntityType.DASHBOARD_WALLET_USER,entityId:0,action:Action.DELETE,metadata:JSON.stringify({wallet:r})})}}function generatePrivateKey(){return toHex(secp256k1$1.utils.randomPrivateKey())}function toAccount(e){if("string"==typeof e){if(!isAddress(e,{strict:!1}))throw new InvalidAddressError({address:e});return{address:e,type:"json-rpc"}}if(!isAddress(e.address,{strict:!1}))throw new InvalidAddressError({address:e.address});return{address:e.address,nonceManager:e.nonceManager,sign:e.sign,experimental_signAuthorization:e.experimental_signAuthorization,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:"custom",type:"local"}}async function sign$1(e){let{hash:t,privateKey:r,to:n="object"}=e;const{r:i,s:a,recovery:o}=secp256k1$1.sign(t.slice(2),r.slice(2)),s={r:numberToHex(i,{size:32}),s:numberToHex(a,{size:32}),v:o?28n:27n,yParity:o};return"bytes"===n||"hex"===n?serializeSignature({...s,to:n}):s}async function experimental_signAuthorization(e){const{contractAddress:t,chainId:r,nonce:n,privateKey:i,to:a="object"}=e,o=await sign$1({hash:hashAuthorization({contractAddress:t,chainId:r,nonce:n}),privateKey:i,to:a});return"object"===a?{contractAddress:t,chainId:r,nonce:n,...o}:o}async function signMessage(e){let{message:t,privateKey:r}=e;return await sign$1({hash:hashMessage(t),privateKey:r,to:"hex"})}async function signTransaction(e){const{privateKey:t,transaction:r,serializer:n=serializeTransaction}=e,i="eip4844"===r.type?{...r,sidecars:!1}:r,a=await sign$1({hash:keccak256(n(i)),privateKey:t});return n(r,a)}async function signTypedData(e){const{privateKey:t,...r}=e;return await sign$1({hash:hashTypedData(r),privateKey:t,to:"hex"})}function privateKeyToAccount(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{nonceManager:r}=t,n=toHex(secp256k1$1.getPublicKey(e.slice(2),!1)),i=toAccount({address:publicKeyToAddress(n),nonceManager:r,async sign(t){let{hash:r}=t;return sign$1({hash:r,privateKey:e,to:"hex"})},experimental_signAuthorization:async t=>experimental_signAuthorization({...t,privateKey:e}),async signMessage(t){let{message:r}=t;return signMessage({message:r,privateKey:e})},async signTransaction(t){let{serializer:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return signTransaction({privateKey:e,transaction:t,serializer:r})},signTypedData:async t=>signTypedData({...t,privateKey:e})});return{...i,publicKey:n,source:"privateKey"}}function privateKeyToAddress(e){return publicKeyToAddress(bytesToHex$4(secp256k1$1.getPublicKey(e.slice(2),!1)))}var browserPonyfill={exports:{}};!function(e,t){var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==commonjsGlobal$1&&commonjsGlobal$1,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==r&&r,n="URLSearchParams"in r,i="Symbol"in r&&"iterator"in Symbol,a="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in r,s="ArrayBuffer"in r;if(s)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function d(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function y(e){var t=new FileReader,r=m(t);return t.readAsArrayBuffer(e),r}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&a&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=f(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(y)}),this.text=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=m(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=d(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},h.prototype.delete=function(e){delete this.map[d(e)]},h.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},h.prototype.set=function(e,t){this.map[d(e)]=l(t)},h.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),p(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),p(e)},i&&(h.prototype[Symbol.iterator]=h.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=function(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var n=/([?&])_=[^&]*/;if(n.test(this.url))this.url=this.url.replace(n,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function _(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function S(e,t){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];S.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})},t.DOMException=r.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function A(e,n){return new Promise((function(i,o){var u=new w(e,n);if(u.signal&&u.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function d(){c.abort()}c.onload=function(){var e,t,r={status:c.status,statusText:c.statusText,headers:(e=c.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};r.url="responseURL"in c?c.responseURL:r.headers.get("X-Request-URL");var n="response"in c?c.response:c.responseText;setTimeout((function(){i(new S(n,r))}),0)},c.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},c.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},c.onabort=function(){setTimeout((function(){o(new t.DOMException("Aborted","AbortError"))}),0)},c.open(u.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(u.url),!0),"include"===u.credentials?c.withCredentials=!0:"omit"===u.credentials&&(c.withCredentials=!1),"responseType"in c&&(a?c.responseType="blob":s&&u.headers.get("Content-Type")&&-1!==u.headers.get("Content-Type").indexOf("application/octet-stream")&&(c.responseType="arraybuffer")),!n||"object"!=typeof n.headers||n.headers instanceof h?u.headers.forEach((function(e,t){c.setRequestHeader(t,e)})):Object.getOwnPropertyNames(n.headers).forEach((function(e){c.setRequestHeader(e,l(n.headers[e]))})),u.signal&&(u.signal.addEventListener("abort",d),c.onreadystatechange=function(){4===c.readyState&&u.signal.removeEventListener("abort",d)}),c.send(void 0===u._bodyInit?null:u._bodyInit)}))}A.polyfill=!0,r.fetch||(r.fetch=A,r.Headers=h,r.Request=w,r.Response=S),t.Headers=h,t.Request=w,t.Response=S,t.fetch=A}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=r.fetch?r:n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(browserPonyfill,browserPonyfill.exports);var crossFetch=browserPonyfill.exports;const fetch$1=(e,t)=>crossFetch(e,{...null!=t?t:{},credentials:"credentials"in Request.prototype?null==t?void 0:t.credentials:void 0}),GetAttestationSchema=z.object({handle:z.string(),challengeId:z.nativeEnum(ChallengeId),specifier:z.string(),amount:z.number()});class AntiAbuseOracle extends BaseAPI$1{constructor(e){let{antiAbuseOracleSelector:t}=e;super(new Configuration$1({basePath:"",fetchApi:fetch$1,middleware:[t.createMiddleware()]})),_defineProperty$3(this,"antiAbuseOracleSelector",void 0),this.antiAbuseOracleSelector=t}async getWalletAddress(){return(await this.antiAbuseOracleSelector.getSelectedService()).wallet}async getChallengeAttestation(e,t){const r=await this.getChallengeAttestationRaw(e,t);return await r.value()}async getChallengeAttestationRaw(e,t){const{handle:r,challengeId:n,specifier:i,amount:a}=await parseParams("getChallengeAttestation",GetAttestationSchema)(e),o=await this.request({path:`/attestation/${r}`,method:"POST",headers:{"Content-Type":"application/json"},body:{challengeId:n,challengeSpecifier:i,amount:a}},t);return new JSONApiResponse$1(o,(e=>({result:!!exists$3(e,"result")&&e.result,errorCode:exists$3(e,"errorCode")?e.errorCode:void 0})))}}const getPathFromUrl=e=>{const t=e.match(/^([a-z]+:\/\/)?(?:www\.)?([^/]+)?(.*)$/);if(null!=t&&t[3]){return t[3]}throw new Error("Invalid URL, couldn't get path.")},promiseAny=async e=>Promise.any?Promise.any(e):await Promise.all([...e].map((async e=>await new Promise(((t,r)=>{Promise.resolve(e).then(r,t)}))))).then((async e=>await Promise.reject(e)),(async e=>await Promise.resolve(e))),getDefaultAntiAbuseOracleSelectorConfig=e=>({registeredAddresses:e.network.antiAbuseOracleNodes.registeredAddresses,endpoints:e.network.antiAbuseOracleNodes.endpoints,logger:new Logger});class AntiAbuseOracleSelector{constructor(e){_defineProperty$3(this,"endpoints",void 0),_defineProperty$3(this,"registeredAddresses",void 0),_defineProperty$3(this,"logger",void 0),_defineProperty$3(this,"selectedNode",null);const t=mergeConfigWithDefaults(e,getDefaultAntiAbuseOracleSelectorConfig(productionConfig));this.endpoints=t.endpoints,this.registeredAddresses=t.registeredAddresses,this.logger=t.logger}createMiddleware(){return{pre:async e=>{let t=e.url;if(!t.startsWith("http")){t=`${(await this.getSelectedService()).endpoint}${e.url}`}return{url:t,init:e.init}},onError:async e=>{const t=getPathFromUrl(e.url);this.selectedNode=null;const r=await this.getSelectedService();return e.fetch(`${r.endpoint}${t}`,e.init)}}}async getSelectedService(){return this.selectedNode||(this.selectedNode=await this.select()),this.selectedNode}async select(){try{return await promiseAny(this.endpoints.map((async e=>{try{return await this.getNode(e)}catch(t){throw this.logger.warn(`Anti Abuse Oracle ${e} is unhealthy: ${t}`),t}})))}catch(e){throw new Error("All Anti Abuse Oracles are unhealthy")}}async getNode(e){const t=await fetch$1(`${e}/health_check`);if(t.ok){var r;const n=await t.json(),i=null!==(r=n.walletPubkey)&&void 0!==r?r:n.antiAbuseWalletPubkey;if(!this.registeredAddresses.includes(i))throw new Error(`Not registered: ${i}`);return{wallet:i,endpoint:e}}throw new Error(`Response failed with status ${t.status}`)}}async function getSharedSecret(e,t){let{account:r=e.account,publicKey:n}=t;if(!r)throw new Error("Account not found");const i="string"==typeof r?{address:r,type:"json-rpc"}:r;if("getSharedSecret"in i&&i.getSharedSecret)return i.getSharedSecret(n);throw new Error(`Account type '${i.type}' does not implement 'getSharedSecret' method.`)}async function sign(e,t){let{account:r=e.account,message:n}=t;if(!r)throw new Error("Account not found");const i="string"==typeof r?{address:r,type:"json-rpc"}:r,a="string"==typeof n?stringToHex(n):n.raw instanceof Uint8Array?toHex(n.raw):n.raw;if("signRaw"in i&&i.signRaw)return i.signRaw(a);throw new Error(`Account type '${i.type}' does not implement 'sign' method.`)}const localTransport=()=>({request:async e=>{let{method:t,params:r}=e;throw console.error("Local transport in use. RPC methods are not implemented.",{method:t,params:r}),new Error(`Method '${t}' not implemented on local transport.`)}});function number(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function bool(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function bytes(e){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(r.length>0&&!r.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${r}, not of length=${e.length}`)}function hash(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");number(e.outputLen),number(e.blockLen)}function exists$1(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function output(e,t){bytes(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const assert={number:number,bool:bool,bytes:bytes,hash:hash,exists:exists$1,output:output},U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&U32_MASK64),l:Number(e>>_32n&U32_MASK64)}:{h:0|Number(e>>_32n&U32_MASK64),l:0|Number(e&U32_MASK64)}}function split(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:a,l:o}=fromBig(e[i],t);[r[i],n[i]]=[a,o]}return[r,n]}const toBig=(e,t)=>BigInt(e>>>0)<<_32n|BigInt(t>>>0),shrSH=(e,t,r)=>e>>>r,shrSL=(e,t,r)=>e<<32-r|t>>>r,rotrSH=(e,t,r)=>e>>>r|t<<32-r,rotrSL=(e,t,r)=>e<<32-r|t>>>r,rotrBH=(e,t,r)=>e<<64-r|t>>>r-32,rotrBL=(e,t,r)=>e>>>r-32|t<<64-r,rotr32H=(e,t)=>t,rotr32L=(e,t)=>e,rotlSH=(e,t,r)=>e<<r|t>>>32-r,rotlSL=(e,t,r)=>t<<r|e>>>32-r,rotlBH=(e,t,r)=>t<<r-32|e>>>64-r,rotlBL=(e,t,r)=>e<<r-32|t>>>64-r;function add(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}const add3L=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5L=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),add5H=(e,t,r,n,i,a)=>t+r+n+i+a+(e/2**32|0)|0,u64={fromBig:fromBig,split:split,toBig:toBig,shrSH:shrSH,shrSL:shrSL,rotrSH:rotrSH,rotrSL:rotrSL,rotrBH:rotrBH,rotrBL:rotrBL,rotr32H:rotr32H,rotr32L:rotr32L,rotlSH:rotlSH,rotlSL:rotlSL,rotlBH:rotlBH,rotlBL:rotlBL,add:add,add3L:add3L,add3H:add3H,add4L:add4L,add4H:add4H,add5H:add5H,add5L:add5L},crypto$1="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),rotr=(e,t)=>e<<32-t|e>>>t,isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];if(!isLE)throw new Error("Non little-endian hardware is not supported");const hexes=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function bytesToHex(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=hexes[e[r]];return t}function utf8ToBytes(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function toBytes(e){if("string"==typeof e&&(e=utf8ToBytes(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}class Hash{clone(){return this._cloneInto()}}function wrapConstructor(e){const t=t=>e().update(toBytes(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function wrapConstructorWithOpts(e){const t=(t,r)=>e(r).update(toBytes(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}function randomBytes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(crypto$1&&"function"==typeof crypto$1.getRandomValues)return crypto$1.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const[SHA3_PI,SHA3_ROTL,_SHA3_IOTA]=[[],[],[]],_0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2),_7n=BigInt(7),_256n=BigInt(256),_0x71n=BigInt(113);for(let e=0,t=_1n,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],SHA3_PI.push(2*(5*n+r)),SHA3_ROTL.push((e+1)*(e+2)/2%64);let i=_0n;for(let e=0;e<7;e++)t=(t<<_1n^(t>>_7n)*_0x71n)%_256n,t&_2n&&(i^=_1n<<(_1n<<BigInt(e))-_1n);_SHA3_IOTA.push(i)}const[SHA3_IOTA_H,SHA3_IOTA_L]=u64.split(_SHA3_IOTA,!0),rotlH=(e,t,r)=>r>32?u64.rotlBH(e,t,r):u64.rotlSH(e,t,r),rotlL=(e,t,r)=>r>32?u64.rotlBL(e,t,r):u64.rotlSL(e,t,r);function keccakP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,a=r[i],o=r[i+1],s=rotlH(a,o,1)^r[n],u=rotlL(a,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=s,e[t+r+1]^=u}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=SHA3_ROTL[r],a=rotlH(t,i,n),o=rotlL(t,i,n),s=SHA3_PI[r];t=e[s],i=e[s+1],e[s]=a,e[s+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=SHA3_IOTA_H[n],e[1]^=SHA3_IOTA_L[n]}r.fill(0)}class Keccak extends Hash{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,assert.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=u32(this.state)}keccak(){keccakP(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){assert.exists(this);const{blockLen:t,state:r}=this,n=(e=toBytes(e)).length;for(let i=0;i<n;){const a=Math.min(t-this.pos,n-i);for(let t=0;t<a;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!=(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){assert.exists(this,!1),assert.bytes(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return assert.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(assert.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:a}=this;return e||(e=new Keccak(t,r,n,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=a,e.destroyed=this.destroyed,e}}const gen=(e,t,r)=>wrapConstructor((()=>new Keccak(t,e,r)));gen(6,144,28),gen(6,136,32),gen(6,104,48),gen(6,72,64),gen(1,144,28);const keccak_256=gen(1,136,32);gen(1,104,48),gen(1,72,64);const genShake=(e,t,r)=>wrapConstructorWithOpts((function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Keccak(t,e,void 0===n.dkLen?r:n.dkLen,!0)}));function privateKeyToAudiusAccount(e){return{...privateKeyToAccount(e),source:"custom",getSharedSecret:async t=>getSharedSecret$1(hexToBytes$3(e),t,!0),signRaw:async t=>sign$2(keccak_256(hexToBytes$3(t)),hexToBytes$3(e),{recovered:!0,der:!1})}}genShake(31,168,16),genShake(31,136,32);class HedgehogWalletNotFoundError extends Error{constructor(){super("Hedgehog wallet not found. Is the user logged in?")}}function audiusWalletActions(e){return{getAddresses:async()=>getAddresses(e),sign:t=>sign(e,t),signMessage:t=>signMessage$1(e,t),signTypedData:t=>signTypedData$1(e,t),getSharedSecret:t=>getSharedSecret(e,t)}}const ensureHex=e=>e.startsWith("0x")?e:`0x${e}`,createAppWalletClient=e=>{let{apiKey:t,apiSecret:r}=e;return r?createClient({name:"Audius App",type:"audius",account:privateKeyToAudiusAccount(ensureHex(r)),transport:custom$2(localTransport())}).extend(audiusWalletActions):createClient({name:"Audius Readonly App",type:"audius",account:{address:ensureHex(t),type:"local"},transport:custom$2(localTransport())}).extend(audiusWalletActions)},getNonce=async()=>"0x"+bytesToHex(randomBytes(32)),abi$b=[{constant:!0,inputs:[{name:"",type:"bytes32"}],name:"usedSignatures",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"_userId",type:"uint256"},{indexed:!1,name:"_signer",type:"address"},{indexed:!1,name:"_entityType",type:"string"},{indexed:!1,name:"_entityId",type:"uint256"},{indexed:!1,name:"_metadata",type:"string"},{indexed:!1,name:"_action",type:"string"}],name:"ManageEntity",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_userId",type:"uint256"},{indexed:!1,name:"_isVerified",type:"bool"}],name:"ManageIsVerified",type:"event"},{constant:!1,inputs:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_verifierAddress",type:"address"},{name:"_networkId",type:"uint256"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_userId",type:"uint256"},{name:"_entityType",type:"string"},{name:"_entityId",type:"uint256"},{name:"_action",type:"string"},{name:"_metadata",type:"string"},{name:"_nonce",type:"bytes32"},{name:"_subjectSig",type:"bytes"}],name:"manageEntity",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_userId",type:"uint256"},{name:"_isVerified",type:"bool"}],name:"manageIsVerified",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}];class EntityManager{}_defineProperty$3(EntityManager,"abi",abi$b),_defineProperty$3(EntityManager,"types",{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],ManageEntity:[{name:"userId",type:"uint"},{name:"entityType",type:"string"},{name:"entityId",type:"uint"},{name:"action",type:"string"},{name:"metadata",type:"string"},{name:"nonce",type:"bytes32"}]});const getDefaultEntityManagerConfig=e=>({contractAddress:e.acdc.entityManagerContractAddress,chainId:e.acdc.chainId,endpoint:e.network.apiEndpoint,logger:new Logger}),DEFAULT_GAS_LIMIT=2e6,CONFIRMATION_POLLING_INTERVAL=2e3,CONFIRMATION_TIMEOUT=45e3;class EntityManagerClient{constructor(e){_defineProperty$3(this,"audiusWalletClient",void 0),_defineProperty$3(this,"logger",void 0),_defineProperty$3(this,"chainId",void 0),_defineProperty$3(this,"contractAddress",void 0),_defineProperty$3(this,"endpoint",void 0);const t=mergeConfigWithDefaults(e,getDefaultEntityManagerConfig(productionConfig));this.audiusWalletClient=t.audiusWalletClient,this.chainId=t.chainId,this.contractAddress=t.contractAddress,this.logger=t.logger.createPrefixedLogger("[entity-manager]"),this.endpoint=t.endpoint}async manageEntity(e){let{userId:t,entityType:r,entityId:n,action:i,metadata:a="",confirmationTimeout:o=CONFIRMATION_TIMEOUT,skipConfirmation:s=!1}=e;const u=await getNonce(),c={domain:this.getDomain(),primaryType:"ManageEntity",message:{userId:t,entityType:r,entityId:n,action:i,metadata:a,nonce:u},types:EntityManager.types},[d]=await this.audiusWalletClient.getAddresses(),l=await this.audiusWalletClient.signTypedData(c),p=`${this.endpoint}/relay`;this.logger.info(`Making relay request to ${p}`);const h=await fetch$1(p,{method:"POST",headers:new browserPonyfill.exports.Headers({"Content-Type":"application/json"}),body:JSON.stringify({contractAddress:this.contractAddress,contractRegistryKey:"EntityManager",encodedABI:encodeFunctionData({abi:EntityManager.abi,args:[BigInt(t),r,BigInt(n),i,a,u,l],functionName:"manageEntity"}),gasLimit:DEFAULT_GAS_LIMIT,senderAddress:d})});if(h.ok){const e=await h.json();return s||await this.confirmWrite({blockHash:e.receipt.blockHash,blockNumber:e.receipt.blockNumber,confirmationTimeout:o}),{blockHash:e.receipt.blockHash,blockNumber:e.receipt.blockNumber}}throw 429===h.status&&this.logger.error("API Rate Limit Exceeded: You have exceeded the allowed number of requests for this action. Please wait and try again later. If you require a higher rate limit, please send an email to api@audius.co with your request, detailing the reasons and expected usage."),new ResponseError$1(h,"Response returned an error code")}async confirmWrite(e){let{blockHash:t,blockNumber:r,confirmationTimeout:n=CONFIRMATION_TIMEOUT,confirmationPollingInterval:i=CONFIRMATION_POLLING_INTERVAL}=e;this.logger.info(`Confirming write ${t} ${r}`);const a=async()=>{const e=`${this.endpoint}/block_confirmation?blocknumber=${r}&blockhash=${t}`,{data:{block_passed:n}}=await(await fetch$1(e)).json();return n?BlockConfirmation.CONFIRMED:BlockConfirmation.UNKNOWN};let o=await a();const s=Date.now();for(;o===BlockConfirmation.UNKNOWN;){if(Date.now()-s>n)throw new Error(`Could not confirm write within ${n}ms`);await new Promise((e=>setTimeout(e,i))),o=await a()}return this.logger.info("Write confirmed"),!0}decodeManageEntity(e){const t=decodeFunctionData({abi:EntityManager.abi,data:e});if("manageEntity"!==t.functionName)throw new Error("Expected manageEntity function");const[r,n,i,a,o,s,u]=t.args;if(!r||!n||!i&&i!==BigInt(0)||!a||!o&&""!==o||!s||!u)throw new Error("Missing complete manageEntity function data");return{userId:r,entityType:n,entityId:i,action:a,metadata:o,nonce:s,subjectSig:u}}getDomain(){return{name:"Entity Manager",chainId:BigInt(this.chainId),version:"1",verifyingContract:this.contractAddress}}async recoverSigner(e){const t=this.decodeManageEntity(e),{userId:r,entityType:n,entityId:i,action:a,metadata:o,nonce:s,subjectSig:u}=t;return await recoverTypedDataAddress({domain:this.getDomain(),primaryType:"ManageEntity",message:{userId:Number(r),entityType:n,entityId:Number(i),action:a,metadata:o,nonce:s},types:EntityManager.types,signature:u})}}var axios$2={exports:{}},bind$2=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray(e){return"[object Array]"===toString.call(e)}function isUndefined(e){return void 0===e}function isBuffer(e){return null!==e&&!isUndefined(e)&&null!==e.constructor&&!isUndefined(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isArrayBuffer(e){return"[object ArrayBuffer]"===toString.call(e)}function isFormData$1(e){return"undefined"!=typeof FormData&&e instanceof FormData}function isArrayBufferView(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function isString$1(e){return"string"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return null!==e&&"object"==typeof e}function isDate(e){return"[object Date]"===toString.call(e)}function isFile(e){return"[object File]"===toString.call(e)}function isBlob$1(e){return"[object Blob]"===toString.call(e)}function isFunction(e){return"[object Function]"===toString.call(e)}function isStream(e){return isObject(e)&&isFunction(e.pipe)}function isURLSearchParams(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function trim(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function forEach(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),isArray(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function merge(){var e={};function t(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=merge(e[r],t):e[r]=t}for(var r=0,n=arguments.length;r<n;r++)forEach(arguments[r],t);return e}function deepMerge(){var e={};function t(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=deepMerge(e[r],t):e[r]="object"==typeof t?deepMerge({},t):t}for(var r=0,n=arguments.length;r<n;r++)forEach(arguments[r],t);return e}function extend(e,t,r){return forEach(t,(function(t,n){e[n]=r&&"function"==typeof t?bind$1(t,r):t})),e}var utils$d={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData$1,isArrayBufferView:isArrayBufferView,isString:isString$1,isNumber:isNumber,isObject:isObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob$1,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,deepMerge:deepMerge,extend:extend,trim:trim},utils$c=utils$d;function encode$3(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$2=function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(utils$c.isURLSearchParams(t))n=t.toString();else{var i=[];utils$c.forEach(t,(function(e,t){null!=e&&(utils$c.isArray(e)?t+="[]":e=[e],utils$c.forEach(e,(function(e){utils$c.isDate(e)?e=e.toISOString():utils$c.isObject(e)&&(e=JSON.stringify(e)),i.push(encode$3(t)+"="+encode$3(e))})))})),n=i.join("&")}if(n){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e},utils$b=utils$d;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},InterceptorManager$1.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager$1.prototype.forEach=function(e){utils$b.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var InterceptorManager_1=InterceptorManager$1,utils$a=utils$d,transformData$1=function(e,t,r){return utils$a.forEach(r,(function(r){e=r(e,t)})),e},isCancel$1=function(e){return!(!e||!e.__CANCEL__)},utils$9=utils$d,normalizeHeaderName$1=function(e,t){utils$9.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))},enhanceError$1=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},enhanceError=enhanceError$1,createError$2=function(e,t,r,n,i){var a=new Error(e);return enhanceError(a,t,r,n,i)},createError$1=createError$2,settle$1=function(e,t,r){var n=r.config.validateStatus;!n||n(r.status)?e(r):t(createError$1("Request failed with status code "+r.status,r.config,null,r.request,r))},isAbsoluteURL$1=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},combineURLs$1=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function(e,t){return e&&!isAbsoluteURL(t)?combineURLs(e,t):t},utils$8=utils$d,ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders$1=function(e){var t,r,n,i={};return e?(utils$8.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=utils$8.trim(e.substr(0,n)).toLowerCase(),r=utils$8.trim(e.substr(n+1)),t){if(i[t]&&ignoreDuplicateOf.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}})),i):i},utils$7=utils$d,isURLSameOrigin$1=utils$7.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=utils$7.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},utils$6=utils$d,cookies=utils$6.isStandardBrowserEnv()?{write:function(e,t,r,n,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),utils$6.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),utils$6.isString(n)&&o.push("path="+n),utils$6.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},utils$5=utils$d,settle=settle$1,buildURL$1=buildURL$2,buildFullPath=buildFullPath$1,parseHeaders=parseHeaders$1,isURLSameOrigin=isURLSameOrigin$1,createError=createError$2,xhr=function(e){return new Promise((function(t,r){var n=e.data,i=e.headers;utils$5.isFormData(n)&&delete i["Content-Type"];var a=new XMLHttpRequest;if(e.auth){var o=e.auth.username||"",s=e.auth.password||"";i.Authorization="Basic "+btoa(o+":"+s)}var u=buildFullPath(e.baseURL,e.url);if(a.open(e.method.toUpperCase(),buildURL$1(u,e.params,e.paramsSerializer),!0),a.timeout=e.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in a?parseHeaders(a.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:n,config:e,request:a};settle(t,r,i),a=null}},a.onabort=function(){a&&(r(createError("Request aborted",e,"ECONNABORTED",a)),a=null)},a.onerror=function(){r(createError("Network Error",e,null,a)),a=null},a.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(createError(t,e,"ECONNABORTED",a)),a=null},utils$5.isStandardBrowserEnv()){var c=cookies,d=(e.withCredentials||isURLSameOrigin(u))&&e.xsrfCookieName?c.read(e.xsrfCookieName):void 0;d&&(i[e.xsrfHeaderName]=d)}if("setRequestHeader"in a&&utils$5.forEach(i,(function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete i[t]:a.setRequestHeader(t,e)})),utils$5.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),e.responseType)try{a.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&a.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){a&&(a.abort(),r(e),a=null)})),void 0===n&&(n=null),a.send(n)}))},utils$4=utils$d,normalizeHeaderName=normalizeHeaderName$1,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!utils$4.isUndefined(e)&&utils$4.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function getDefaultAdapter(){var e;return("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=xhr),e}var defaults$2={adapter:getDefaultAdapter(),transformRequest:[function(e,t){return normalizeHeaderName(t,"Accept"),normalizeHeaderName(t,"Content-Type"),utils$4.isFormData(e)||utils$4.isArrayBuffer(e)||utils$4.isBuffer(e)||utils$4.isStream(e)||utils$4.isFile(e)||utils$4.isBlob(e)?e:utils$4.isArrayBufferView(e)?e.buffer:utils$4.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):utils$4.isObject(e)?(setContentTypeIfUnset(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$4.forEach(["delete","get","head"],(function(e){defaults$2.headers[e]={}})),utils$4.forEach(["post","put","patch"],(function(e){defaults$2.headers[e]=utils$4.merge(DEFAULT_CONTENT_TYPE)}));var defaults_1=defaults$2,utils$3=utils$d,transformData=transformData$1,isCancel=isCancel$1,defaults$1=defaults_1;function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var dispatchRequest$1=function(e){return throwIfCancellationRequested(e),e.headers=e.headers||{},e.data=transformData(e.data,e.headers,e.transformRequest),e.headers=utils$3.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||defaults$1.adapter)(e).then((function(t){return throwIfCancellationRequested(e),t.data=transformData(t.data,t.headers,e.transformResponse),t}),(function(t){return isCancel(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=transformData(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},utils$2=utils$d,mergeConfig$2=function(e,t){t=t||{};var r={},n=["url","method","params","data"],i=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];utils$2.forEach(n,(function(e){void 0!==t[e]&&(r[e]=t[e])})),utils$2.forEach(i,(function(n){utils$2.isObject(t[n])?r[n]=utils$2.deepMerge(e[n],t[n]):void 0!==t[n]?r[n]=t[n]:utils$2.isObject(e[n])?r[n]=utils$2.deepMerge(e[n]):void 0!==e[n]&&(r[n]=e[n])})),utils$2.forEach(a,(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])}));var o=n.concat(i).concat(a),s=Object.keys(t).filter((function(e){return-1===o.indexOf(e)}));return utils$2.forEach(s,(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])})),r},utils$1=utils$d,buildURL=buildURL$2,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2;function Axios$1(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=mergeConfig$1(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[dispatchRequest,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},Axios$1.prototype.getUri=function(e){return e=mergeConfig$1(this.defaults,e),buildURL(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},utils$1.forEach(["delete","get","head","options"],(function(e){Axios$1.prototype[e]=function(t,r){return this.request(utils$1.merge(r||{},{method:e,url:t}))}})),utils$1.forEach(["post","put","patch"],(function(e){Axios$1.prototype[e]=function(t,r,n){return this.request(utils$1.merge(n||{},{method:e,url:t,data:r}))}}));var Axios_1=Axios$1;function Cancel$1(e){this.message=e}Cancel$1.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel$1.prototype.__CANCEL__=!0;var Cancel_1=Cancel$1,Cancel=Cancel_1;function CancelToken(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new Cancel(e),t(r.reason))}))}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var e;return{token:new CancelToken((function(t){e=t})),cancel:e}};var CancelToken_1=CancelToken,spread=function(e){return function(t){return e.apply(null,t)}},utils=utils$d,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(e){var t=new Axios(e),r=bind(Axios.prototype.request,t);return utils.extend(r,Axios.prototype,t),utils.extend(r,t),r}var axios$1=createInstance(defaults);axios$1.Axios=Axios,axios$1.create=function(e){return createInstance(mergeConfig(axios$1.defaults,e))},axios$1.Cancel=Cancel_1,axios$1.CancelToken=CancelToken_1,axios$1.isCancel=isCancel$1,axios$1.all=function(e){return Promise.all(e)},axios$1.spread=spread,axios$2.exports=axios$1,axios$2.exports.default=axios$1;var axios=axios$2.exports,browser$4="object"==typeof self?self.FormData:window.FormData;const wait=async e=>await new Promise((t=>setTimeout(t,e))),getDefaultStorageServiceConfig=e=>({logger:new Logger}),MAX_TRACK_TRANSCODE_TIMEOUT=36e5,MAX_TRACK_TRANSCODE_NO_PROGRESS_TIMEOUT=6e5,MAX_IMAGE_RESIZE_TIMEOUT_MS=3e5,POLL_STATUS_INTERVAL=3e3;class Storage{constructor(e){_defineProperty$3(this,"config",void 0),_defineProperty$3(this,"storageNodeSelector",void 0),_defineProperty$3(this,"logger",void 0),this.config=mergeConfigWithDefaults(e,getDefaultStorageServiceConfig()),this.storageNodeSelector=e.storageNodeSelector,this.logger=this.config.logger.createPrefixedLogger("[storage]")}async uploadFile(e){var t,r,n;let{file:i,onProgress:a,template:o,options:s={}}=e;const u=new browser$4;u.append("template",o),Object.keys(s).forEach((e=>{u.append(e,`${s[e]}`)}));const c="uri"in i?{...i,name:i.name?encodeURIComponent(i.name.replace(/[()]/g,"")):"blob"}:i;u.append("files",isNodeFile(c)?c.buffer:c,null!==(t=i.name)&&void 0!==t?t:"blob");let d=null;const l={method:"post",maxContentLength:1/0,data:u,headers:{...u.getBoundary?{"Content-Type":`multipart/form-data; boundary=${u.getBoundary()}`}:void 0},onUploadProgress:e=>{const t={upload:{loaded:e.loaded,total:e.total}};null==a||a("audio"===o?{audio:t}:{art:t})}};let p;for(let e=await this.storageNodeSelector.getSelectedNode();!this.storageNodeSelector.triedSelectingAllNodes();e=await this.storageNodeSelector.getSelectedNode(!0)){l.url=`${e}/uploads`;try{var h,f;if(d=await axios(l),(null===(h=d)||void 0===h||null===(f=h.data)||void 0===f?void 0:f.length)>0)break}catch(e){p=e}}if(null===(r=d)||void 0===r||null===(n=r.data)||void 0===n||!n.length){const e=`Error sending storagev2 upload request, tried all healthy storage nodes. Last error: ${p}`;throw this.logger.error(e),new Error(e)}return await this.pollProcessingStatus(d.data[0].id,o,a)}async generatePreview(e){let{cid:t,secondOffset:r}=e;const n=await this.storageNodeSelector.getSelectedNode();if(!n)throw new Error("No content node available");return(await axios({method:"post",url:`${n}/generate_preview/${t}/${r}`})).data.cid}async pollProcessingStatus(e,t,r){const n=Date.now();let i=Date.now(),a=0;const o="audio"===t?MAX_TRACK_TRANSCODE_TIMEOUT:MAX_IMAGE_RESIZE_TIMEOUT_MS;for(;Date.now()-n<o;){try{const n=await this.getProcessingStatus(e);if("audio"===t&&n.transcode_progress){if(n.transcode_progress>a)i=Date.now(),a=n.transcode_progress;else if(Date.now()-i>MAX_TRACK_TRANSCODE_NO_PROGRESS_TIMEOUT)throw new Error(`No transcoding progress increase for ${MAX_TRACK_TRANSCODE_NO_PROGRESS_TIMEOUT}ms. Progress stuck at ${a}. id=${e}`);null==r||r({audio:{transcode:{decimal:n.transcode_progress}}})}if("done"===(null==n?void 0:n.status))return n;if("error"===(null==n?void 0:n.status)||"error_retranscode_preview"===(null==n?void 0:n.status))throw new Error(`Upload failed: id=${e}, resp=${JSON.stringify(n)}`)}catch(e){var s,u,c;if(null!==(s=e.message)&&void 0!==s&&s.startsWith("Upload failed")||null!==(u=e.message)&&void 0!==u&&u.startsWith("No transcoding progress increase")||e.response&&422===(null===(c=e.response)||void 0===c?void 0:c.status))throw e;this.logger.error(`Failed to poll for processing status, ${e}`)}await wait(POLL_STATUS_INTERVAL)}throw new Error(`Upload took over ${o}ms. id=${e}`)}async getProcessingStatus(e){let t;for(let r=await this.storageNodeSelector.getSelectedNode();!this.storageNodeSelector.triedSelectingAllNodes();r=await this.storageNodeSelector.getSelectedNode(!0))try{const n=await fetch$1(`${r}/uploads/${e}`);if(n.ok)return await n.json();t=`HTTP error: ${n.status} ${n.statusText}, ${await n.text()}`}catch(e){t=e}const r=`Error sending storagev2 uploads polling request, tried all healthy storage nodes. Last error: ${t}`;throw this.logger.error(r),new Error(r)}}function setBigUint64(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),a=BigInt(4294967295),o=Number(r>>i&a),s=Number(r&a),u=n?4:0,c=n?0:4;e.setUint32(t+u,o,n),e.setUint32(t+c,s,n)}class SHA2 extends Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView(this.buffer)}update(e){assert.exists(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=toBytes(e)).length;for(let a=0;a<i;){const o=Math.min(n-this.pos,i-a);if(o!==n)r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=createView(e);for(;n<=i-a;a+=n)this.process(t,a)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){assert.exists(this),assert.output(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>n-a&&(this.process(r,0),a=0);for(let e=a;e<n;e++)t[e]=0;setBigUint64(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=createView(e),s=this.outputLen;if(s%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=s/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)o.setUint32(4*e,c[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:a,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=a,n%t&&e.buffer.set(r),e}}const Chi=(e,t,r)=>e&t^~e&r,Maj=(e,t,r)=>e&t^e&r^t&r,SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends SHA2{constructor(){super(64,32,8,!1),this.A=0|IV[0],this.B=0|IV[1],this.C=0|IV[2],this.D=0|IV[3],this.E=0|IV[4],this.F=0|IV[5],this.G=0|IV[6],this.H=0|IV[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:a,G:o,H:s}=this;return[e,t,r,n,i,a,o,s]}set(e,t,r,n,i,a,o,s){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|o,this.H=0|s}process(e,t){for(let r=0;r<16;r++,t+=4)SHA256_W[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=SHA256_W[e-15],r=SHA256_W[e-2],n=rotr(t,7)^rotr(t,18)^t>>>3,i=rotr(r,17)^rotr(r,19)^r>>>10;SHA256_W[e]=i+SHA256_W[e-7]+n+SHA256_W[e-16]|0}let{A:r,B:n,C:i,D:a,E:o,F:s,G:u,H:c}=this;for(let e=0;e<64;e++){const t=c+(rotr(o,6)^rotr(o,11)^rotr(o,25))+Chi(o,s,u)+SHA256_K[e]+SHA256_W[e]|0,d=(rotr(r,2)^rotr(r,13)^rotr(r,22))+Maj(r,n,i)|0;c=u,u=s,s=o,o=a+t|0,a=i,i=n,n=r,r=t+d|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,s=s+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,i,a,o,s,u,c)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class SHA224 extends SHA256{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const sha256$1=wrapConstructor((()=>new SHA256));wrapConstructor((()=>new SHA224));class NodeScore{constructor(e){_defineProperty$3(this,"node",void 0),_defineProperty$3(this,"score",void 0),this.node=e,this.score=0}}class RendezvousHash{constructor(){_defineProperty$3(this,"nodes",[]),this.add(...arguments)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(const e of t)this.nodes.push(new NodeScore(buffer.Buffer.from(e)))}getNodes(){return this.nodes.map((e=>e.node.toString()))}get(e){const t=this.getN(1,e)[0];return null!=t?t:""}getN(e,t){return this.rendezvous256(t).slice(0,e)}rendezvous256(e){const t=this.nodes.map((t=>{const r=t.node.toString();return[r,bytesToHex(sha256$1(`${r}${e}`))]}));return t.sort(((e,t)=>{const[r,n]=e,[i,a]=t;return n===a?r<i?-1:1:n<a?-1:1})),t.map((e=>e[0]))}}const getDefaultStorageNodeSelectorConfig=e=>({bootstrapNodes:e.network.storageNodes,endpoint:e.network.apiEndpoint,logger:new Logger}),isNodeHealthy=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console;try{var r;const n=await axios({baseURL:e,url:"/health_check",method:"get",timeout:3e3});if(200!==n.status)return t.warn(`isNodeHealthy: ${e} returned non-200 status ${n.status}`),!1;const i=n.data.data,a=((null===(r=i.transcodeStats)||void 0===r?void 0:r.AvgTranscodeTime)||0)>180;return i.diskHasSpace&&!a}catch(e){return t.error(`isNodeHealthy: Error checking health: ${e}`),!1}};class StorageNodeSelector{constructor(e){var t;_defineProperty$3(this,"config",void 0),_defineProperty$3(this,"logger",void 0),_defineProperty$3(this,"nodes",void 0),_defineProperty$3(this,"orderedNodes",void 0),_defineProperty$3(this,"selectedNode",void 0),_defineProperty$3(this,"selectionState",void 0),this.config=mergeConfigWithDefaults(e,getDefaultStorageNodeSelectorConfig(productionConfig)),this.logger=this.config.logger.createPrefixedLogger("[storage-node-selector]"),this.nodes=null!==(t=this.config.bootstrapNodes)&&void 0!==t?t:[],this.selectionState="healthy_only",this.updateAvailableStorageNodes(this.config.endpoint)}async updateAvailableStorageNodes(e){var t;this.logger.info("Updating list of available storage nodes");const r=`${e}/health_check`,n=await fetch(r);if(!n.ok)return void this.logger.warn("API health check did not respond successfully");const i=null===(t=(await n.json()).data.network)||void 0===t?void 0:t.content_nodes;i?(this.nodes=i,this.selectionState="healthy_only"):this.logger.warn("API health check did not contain any available content nodes")}async getSelectedNode(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.selectedNode&&!e?this.selectedNode:await this.select()}triedSelectingAllNodes(){return"failed_all"===this.selectionState}getNodes(e){return this.orderNodes(e)}async select(){var e;return"failed_all"===this.selectionState&&(this.selectionState="healthy_only"),this.selectedNode=null!==(e=await this.selectUntilEndOfList())&&void 0!==e?e:null,this.logger.info("Selected content node",this.selectedNode),this.selectedNode||(this.logger.info("Selected all healthy nodes. Returning null and starting over next time select() is called"),this.selectionState="failed_all"),this.selectedNode}async selectUntilEndOfList(){var e;if(null!==(e=this.orderedNodes)&&void 0!==e&&e.length||(this.orderedNodes=this.orderNodes((new Date).toString())),0===this.orderedNodes.length)return;let t,r=this.selectedNode?this.orderedNodes.indexOf(this.selectedNode):-1;for(;r!==this.orderedNodes.length-1;){r++;const e=this.orderedNodes[r];if(e&&await isNodeHealthy(e)){t=e;break}}return t}orderNodes(e){const t=this.nodes.map((e=>e.endpoint.toLowerCase()));return new RendezvousHash(...t).getN(this.nodes.length,e)}}const abi$a=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"}],name:"MinterAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"}],name:"MinterRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"}],name:"PauserAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"}],name:"PauserRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{constant:!0,inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"account",type:"address"}],name:"addMinter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"account",type:"address"}],name:"addPauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"isMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"isPauser",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceMinter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"renouncePauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"governance",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"sender",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}];class AudiusToken{}AudiusToken.abi=abi$a,AudiusToken.address="0x18aAA7115705e8be94bfFEBDE57Af9BFc265B998",AudiusToken.types={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]};const abi$9=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_claimer",type:"address"},{indexed:!0,internalType:"uint256",name:"_rewards",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_oldTotal",type:"uint256"},{indexed:!0,internalType:"uint256",name:"_newTotal",type:"uint256"}],name:"ClaimProcessed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newCommunityPoolAddress",type:"address"}],name:"CommunityPoolAddressUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_transferAddress",type:"address"},{indexed:!0,internalType:"uint256",name:"_amount",type:"uint256"}],name:"CommunityRewardsTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newDelegateManagerAddress",type:"address"}],name:"DelegateManagerAddressUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_amount",type:"uint256"}],name:"FundingAmountUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_blockDifference",type:"uint256"}],name:"FundingRoundBlockDiffUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newGovernanceAddress",type:"address"}],name:"GovernanceAddressUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_amount",type:"uint256"}],name:"RecurringCommunityFundingAmountUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_blockNumber",type:"uint256"},{indexed:!0,internalType:"uint256",name:"_roundNumber",type:"uint256"},{indexed:!0,internalType:"uint256",name:"_fundAmount",type:"uint256"}],name:"RoundInitiated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newServiceProviderFactoryAddress",type:"address"}],name:"ServiceProviderFactoryAddressUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newStakingAddress",type:"address"}],name:"StakingAddressUpdated",type:"event"},{constant:!1,inputs:[{internalType:"address",name:"_tokenAddress",type:"address"},{internalType:"address",name:"_governanceAddress",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getFundingRoundBlockDiff",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getLastFundedBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getFundsPerRound",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getTotalClaimedInRound",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getGovernanceAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getServiceProviderFactoryAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getDelegateManagerAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getStakingAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getCommunityPoolAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getRecurringCommunityFundingAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_governanceAddress",type:"address"}],name:"setGovernanceAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_stakingAddress",type:"address"}],name:"setStakingAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_serviceProviderFactoryAddress",type:"address"}],name:"setServiceProviderFactoryAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_delegateManagerAddress",type:"address"}],name:"setDelegateManagerAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"initiateRound",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_claimer",type:"address"},{internalType:"uint256",name:"_totalLockedForSP",type:"uint256"}],name:"processClaim",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_newAmount",type:"uint256"}],name:"updateFundingAmount",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_sp",type:"address"}],name:"claimPending",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_newFundingRoundBlockDiff",type:"uint256"}],name:"updateFundingRoundBlockDiff",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_newRecurringCommunityFundingAmount",type:"uint256"}],name:"updateRecurringCommunityFundingAmount",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_newCommunityPoolAddress",type:"address"}],name:"updateCommunityPoolAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],CLAIMS_MANAGER_CONTRACT_ADDRESS="0x44617F9dCEd9787C3B06a05B35B4C779a2AA1334";class ClaimsManager{constructor(e){let{address:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.getFundingRoundBlockDiff=()=>this.client.readContract({address:this.address,abi:abi$9,functionName:"getFundingRoundBlockDiff"}),this.getLastFundedBlock=()=>this.client.readContract({address:this.address,abi:abi$9,functionName:"getLastFundedBlock"}),this.getFundsPerRound=()=>this.client.readContract({address:this.address,abi:abi$9,functionName:"getFundsPerRound"}),this.getTotalClaimedInRound=()=>this.client.readContract({address:this.address,abi:abi$9,functionName:"getTotalClaimedInRound"}),this.getGovernanceAddress=()=>this.client.readContract({address:this.address,abi:abi$9,functionName:"getGovernanceAddress"}),this.getServiceProviderFactoryAddress=()=>this.client.readContract({address:this.address,abi:abi$9,functionName:"getServiceProviderFactoryAddress"}),this.getDelegateManagerAddress=()=>this.client.readContract({address:this.address,abi:abi$9,functionName:"getDelegateManagerAddress"}),this.getStakingAddress=()=>this.client.readContract({address:this.address,abi:abi$9,functionName:"getStakingAddress"}),this.claimPending=e=>{let{address:t}=e;return this.client.readContract({address:this.address,abi:abi$9,functionName:"claimPending",args:[t]})},this.client=e,this.address=null!=t?t:CLAIMS_MANAGER_CONTRACT_ADDRESS}}const abi$8=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_claimer",type:"address"},{indexed:!0,internalType:"uint256",name:"_rewards",type:"uint256"},{indexed:!0,internalType:"uint256",name:"_newTotal",type:"uint256"}],name:"Claim",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newClaimsManagerAddress",type:"address"}],name:"ClaimsManagerAddressUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newGovernanceAddress",type:"address"}],name:"GovernanceAddressUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_delegator",type:"address"},{indexed:!0,internalType:"address",name:"_serviceProvider",type:"address"},{indexed:!0,internalType:"uint256",name:"_increaseAmount",type:"uint256"}],name:"IncreaseDelegatedStake",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_maxDelegators",type:"uint256"}],name:"MaxDelegatorsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_minDelegationAmount",type:"uint256"}],name:"MinDelegationUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_removeDelegatorEvalDuration",type:"uint256"}],name:"RemoveDelegatorEvalDurationUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_removeDelegatorLockupDuration",type:"uint256"}],name:"RemoveDelegatorLockupDurationUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_serviceProvider",type:"address"},{indexed:!0,internalType:"address",name:"_delegator",type:"address"}],name:"RemoveDelegatorRequestCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_serviceProvider",type:"address"},{indexed:!0,internalType:"address",name:"_delegator",type:"address"},{indexed:!0,internalType:"uint256",name:"_unstakedAmount",type:"uint256"}],name:"RemoveDelegatorRequestEvaluated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_serviceProvider",type:"address"},{indexed:!0,internalType:"address",name:"_delegator",type:"address"},{indexed:!0,internalType:"uint256",name:"_lockupExpiryBlock",type:"uint256"}],name:"RemoveDelegatorRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_serviceProvider",type:"address"},{indexed:!0,internalType:"uint256",name:"_spMinDelegationAmount",type:"uint256"}],name:"SPMinDelegationAmountUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newServiceProviderFactoryAddress",type:"address"}],name:"ServiceProviderFactoryAddressUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_target",type:"address"},{indexed:!0,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!0,internalType:"uint256",name:"_newTotal",type:"uint256"}],name:"Slash",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newStakingAddress",type:"address"}],name:"StakingAddressUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_undelegateLockupDuration",type:"uint256"}],name:"UndelegateLockupDurationUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_delegator",type:"address"},{indexed:!0,internalType:"address",name:"_serviceProvider",type:"address"},{indexed:!0,internalType:"uint256",name:"_amount",type:"uint256"}],name:"UndelegateStakeRequestCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_delegator",type:"address"},{indexed:!0,internalType:"address",name:"_serviceProvider",type:"address"},{indexed:!0,internalType:"uint256",name:"_amount",type:"uint256"}],name:"UndelegateStakeRequestEvaluated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_delegator",type:"address"},{indexed:!0,internalType:"address",name:"_serviceProvider",type:"address"},{indexed:!0,internalType:"uint256",name:"_amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_lockupExpiryBlock",type:"uint256"}],name:"UndelegateStakeRequested",type:"event"},{constant:!1,inputs:[{internalType:"address",name:"_tokenAddress",type:"address"},{internalType:"address",name:"_governanceAddress",type:"address"},{internalType:"uint256",name:"_undelegateLockupDuration",type:"uint256"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_targetSP",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"delegateStake",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_target",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"requestUndelegateStake",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"cancelUndelegateStakeRequest",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"undelegateStake",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_serviceProvider",type:"address"}],name:"claimRewards",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"address",name:"_slashAddress",type:"address"}],name:"slash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_serviceProvider",type:"address"},{internalType:"address",name:"_delegator",type:"address"}],name:"requestRemoveDelegator",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_serviceProvider",type:"address"},{internalType:"address",name:"_delegator",type:"address"}],name:"cancelRemoveDelegatorRequest",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_serviceProvider",type:"address"},{internalType:"address",name:"_delegator",type:"address"}],name:"removeDelegator",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_serviceProvider",type:"address"},{internalType:"uint256",name:"_spMinDelegationAmount",type:"uint256"}],name:"updateSPMinDelegationAmount",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_duration",type:"uint256"}],name:"updateUndelegateLockupDuration",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_maxDelegators",type:"uint256"}],name:"updateMaxDelegators",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_minDelegationAmount",type:"uint256"}],name:"updateMinDelegationAmount",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_duration",type:"uint256"}],name:"updateRemoveDelegatorLockupDuration",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_duration",type:"uint256"}],name:"updateRemoveDelegatorEvalDuration",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_governanceAddress",type:"address"}],name:"setGovernanceAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_stakingAddress",type:"address"}],name:"setStakingAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_spFactory",type:"address"}],name:"setServiceProviderFactoryAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_claimsManagerAddress",type:"address"}],name:"setClaimsManagerAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_sp",type:"address"}],name:"getDelegatorsList",outputs:[{internalType:"address[]",name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_delegator",type:"address"}],name:"getTotalDelegatorStake",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_sp",type:"address"}],name:"getTotalDelegatedToServiceProvider",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_sp",type:"address"}],name:"getTotalLockedDelegationForServiceProvider",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_delegator",type:"address"},{internalType:"address",name:"_serviceProvider",type:"address"}],name:"getDelegatorStakeForServiceProvider",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_delegator",type:"address"}],name:"getPendingUndelegateRequest",outputs:[{internalType:"address",name:"target",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"lockupExpiryBlock",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_serviceProvider",type:"address"},{internalType:"address",name:"_delegator",type:"address"}],name:"getPendingRemoveDelegatorRequest",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_serviceProvider",type:"address"}],name:"getSPMinDelegationAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getUndelegateLockupDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getMaxDelegators",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getMinDelegationAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getRemoveDelegatorLockupDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getRemoveDelegatorEvalDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getGovernanceAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getServiceProviderFactoryAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getClaimsManagerAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getStakingAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"}];class DelegateManager{}DelegateManager.abi=abi$8,DelegateManager.address="0x4d7968ebfD390D5E7926Cb3587C39eFf2F9FB225";const abi$7=[{constant:!1,inputs:[],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_tokenAddress",type:"address"},{internalType:"address",name:"_governanceAddress",type:"address"},{internalType:"address",name:"_wormholeAddress",type:"address"},{internalType:"bytes32",name:"_recipient",type:"bytes32"},{internalType:"address[]",name:"_antiAbuseOracleAddresses",type:"address[]"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_governanceAddress",type:"address"}],name:"setGovernanceAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_recipient",type:"bytes32"}],name:"setRecipientAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address[]",name:"_antiAbuseOracleAddresses",type:"address[]"}],name:"setAntiAbuseOracleAddresses",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"arbiterFee",type:"uint256"},{internalType:"uint32",name:"_nonce",type:"uint32"}],name:"transferToSolana",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"token",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getGovernanceAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getRecipientAddress",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getAntiAbuseOracleAddresses",outputs:[{internalType:"address[]",name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"}],ETH_REWARDS_MANAGER_CONTRACT_ADDRESS="0x5aa6B99A2B461bA8E97207740f0A689C5C39C3b0";class EthRewardsManager{constructor(e){let{address:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.getAntiAbuseOracleAddresses=()=>this.client.readContract({address:this.address,abi:abi$7,functionName:"getAntiAbuseOracleAddresses"}),this.client=e,this.address=null!=t?t:ETH_REWARDS_MANAGER_CONTRACT_ADDRESS}}const abi$6=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_newExecutionDelay",type:"uint256"}],name:"ExecutionDelayUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_targetContractAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"_callValue",type:"uint256"},{indexed:!0,internalType:"string",name:"_functionSignature",type:"string"},{indexed:!0,internalType:"bytes",name:"_callData",type:"bytes"},{indexed:!1,internalType:"bytes",name:"_returnData",type:"bytes"}],name:"GuardianTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newGuardianAddress",type:"address"}],name:"GuardianshipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_newMaxInProgressProposals",type:"uint256"}],name:"MaxInProgressProposalsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_proposalId",type:"uint256"},{indexed:!0,internalType:"enum Governance.Outcome",name:"_outcome",type:"uint8"},{indexed:!1,internalType:"uint256",name:"_voteMagnitudeYes",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_voteMagnitudeNo",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_numVotes",type:"uint256"}],name:"ProposalOutcomeEvaluated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_proposalId",type:"uint256"},{indexed:!0,internalType:"address",name:"_proposer",type:"address"},{indexed:!1,internalType:"string",name:"_name",type:"string"},{indexed:!1,internalType:"string",name:"_description",type:"string"}],name:"ProposalSubmitted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_proposalId",type:"uint256"},{indexed:!0,internalType:"bool",name:"_success",type:"bool"},{indexed:!1,internalType:"bytes",name:"_returnData",type:"bytes"}],name:"ProposalTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_proposalId",type:"uint256"}],name:"ProposalVetoed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_proposalId",type:"uint256"},{indexed:!0,internalType:"address",name:"_voter",type:"address"},{indexed:!0,internalType:"enum Governance.Vote",name:"_vote",type:"uint8"},{indexed:!1,internalType:"uint256",name:"_voterStake",type:"uint256"}],name:"ProposalVoteSubmitted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_proposalId",type:"uint256"},{indexed:!0,internalType:"address",name:"_voter",type:"address"},{indexed:!0,internalType:"enum Governance.Vote",name:"_vote",type:"uint8"},{indexed:!1,internalType:"uint256",name:"_voterStake",type:"uint256"},{indexed:!1,internalType:"enum Governance.Vote",name:"_previousVote",type:"uint8"}],name:"ProposalVoteUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newRegistryAddress",type:"address"}],name:"RegistryAddressUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_newVotingPeriod",type:"uint256"}],name:"VotingPeriodUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_newVotingQuorumPercent",type:"uint256"}],name:"VotingQuorumPercentUpdated",type:"event"},{constant:!1,inputs:[{internalType:"address",name:"_registryAddress",type:"address"},{internalType:"uint256",name:"_votingPeriod",type:"uint256"},{internalType:"uint256",name:"_executionDelay",type:"uint256"},{internalType:"uint256",name:"_votingQuorumPercent",type:"uint256"},{internalType:"uint16",name:"_maxInProgressProposals",type:"uint16"},{internalType:"address",name:"_guardianAddress",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_targetContractRegistryKey",type:"bytes32"},{internalType:"uint256",name:"_callValue",type:"uint256"},{internalType:"string",name:"_functionSignature",type:"string"},{internalType:"bytes",name:"_callData",type:"bytes"},{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_description",type:"string"}],name:"submitProposal",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"},{internalType:"enum Governance.Vote",name:"_vote",type:"uint8"}],name:"submitVote",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"},{internalType:"enum Governance.Vote",name:"_vote",type:"uint8"}],name:"updateVote",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"}],name:"evaluateProposalOutcome",outputs:[{internalType:"enum Governance.Outcome",name:"",type:"uint8"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"}],name:"vetoProposal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_stakingAddress",type:"address"}],name:"setStakingAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_serviceProviderFactoryAddress",type:"address"}],name:"setServiceProviderFactoryAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_delegateManagerAddress",type:"address"}],name:"setDelegateManagerAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_votingPeriod",type:"uint256"}],name:"setVotingPeriod",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_votingQuorumPercent",type:"uint256"}],name:"setVotingQuorumPercent",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_registryAddress",type:"address"}],name:"setRegistryAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint16",name:"_newMaxInProgressProposals",type:"uint16"}],name:"setMaxInProgressProposals",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_newExecutionDelay",type:"uint256"}],name:"setExecutionDelay",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_targetContractRegistryKey",type:"bytes32"},{internalType:"uint256",name:"_callValue",type:"uint256"},{internalType:"string",name:"_functionSignature",type:"string"},{internalType:"bytes",name:"_callData",type:"bytes"}],name:"guardianExecuteTransaction",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_newGuardianAddress",type:"address"}],name:"transferGuardianship",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"}],name:"getProposalById",outputs:[{internalType:"uint256",name:"proposalId",type:"uint256"},{internalType:"address",name:"proposer",type:"address"},{internalType:"uint256",name:"submissionBlockNumber",type:"uint256"},{internalType:"bytes32",name:"targetContractRegistryKey",type:"bytes32"},{internalType:"address",name:"targetContractAddress",type:"address"},{internalType:"uint256",name:"callValue",type:"uint256"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"bytes",name:"callData",type:"bytes"},{internalType:"enum Governance.Outcome",name:"outcome",type:"uint8"},{internalType:"uint256",name:"voteMagnitudeYes",type:"uint256"},{internalType:"uint256",name:"voteMagnitudeNo",type:"uint256"},{internalType:"uint256",name:"numVotes",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"}],name:"getProposalTargetContractHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"_proposalId",type:"uint256"},{internalType:"address",name:"_voter",type:"address"}],name:"getVoteInfoByProposalAndVoter",outputs:[{internalType:"enum Governance.Vote",name:"vote",type:"uint8"},{internalType:"uint256",name:"voteMagnitude",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getGuardianAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getStakingAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getServiceProviderFactoryAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getDelegateManagerAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getVotingPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getVotingQuorumPercent",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getRegistryAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isGovernanceAddress",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[],name:"getMaxInProgressProposals",outputs:[{internalType:"uint16",name:"",type:"uint16"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getExecutionDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getInProgressProposals",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"inProgressProposalsAreUpToDate",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"}],GOVERNANCE_CONTRACT_ADDRESS="0x4DEcA517D6817B6510798b7328F2314d3003AbAC";class Governance{constructor(e){let{address:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.getVotingPeriod=()=>this.client.readContract({address:this.address,abi:abi$6,functionName:"getVotingPeriod"}),this.getVotingQuorumPercent=()=>this.client.readContract({address:this.address,abi:abi$6,functionName:"getVotingQuorumPercent"}),this.getExecutionDelay=()=>this.client.readContract({address:this.address,abi:abi$6,functionName:"getExecutionDelay"}),this.getProposalById=e=>{let{id:t}=e;return this.client.readContract({address:this.address,abi:abi$6,functionName:"getProposalById",args:[t]})},this.getProposalTargetContractHash=e=>{let{id:t}=e;return this.client.readContract({address:this.address,abi:abi$6,functionName:"getProposalTargetContractHash",args:[t]})},this.getInProgressProposals=()=>this.client.readContract({address:this.address,abi:abi$6,functionName:"getInProgressProposals"}),this.getVoteInfoByProposalAndVoter=e=>{let{id:t,voterAddress:r}=e;return this.client.readContract({address:this.address,abi:abi$6,functionName:"getVoteInfoByProposalAndVoter",args:[t,r]})},this.getProposalSubmittedEvents=e=>{let{fromBlock:t=BigInt(0),proposalId:r,proposer:n}=e;const i={};return r&&(i._proposalId=r),n&&(i._proposer=n),this.client.getContractEvents({address:this.address,abi:abi$6,eventName:"ProposalSubmitted",fromBlock:t,args:i})},this.getProposalOutcomeEvaluatedEvents=e=>{let{fromBlock:t=BigInt(0),proposalId:r}=e;const n={};return r&&(n._proposalId=r),this.client.getContractEvents({address:this.address,abi:abi$6,eventName:"ProposalOutcomeEvaluated",fromBlock:t,args:n})},this.getProposalVoteSubmittedEvents=e=>{let{fromBlock:t=BigInt(0),proposalId:r,voter:n}=e;const i={};return r&&(i._proposalId=r),n&&(i._voter=n),this.client.getContractEvents({address:this.address,abi:abi$6,eventName:"ProposalVoteSubmitted",fromBlock:t,args:i})},this.getProposalVoteUpdatedEvents=e=>{let{fromBlock:t=BigInt(0),proposalId:r,voter:n}=e;const i={};return r&&(i._proposalId=r),n&&(i._voter=n),this.client.getContractEvents({address:this.address,abi:abi$6,eventName:"ProposalVoteUpdated",fromBlock:t,args:i})},this.client=e,this.address=null!=t?t:GOVERNANCE_CONTRACT_ADDRESS}}const abi$5=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"_name",type:"bytes32"},{indexed:!0,internalType:"address",name:"_address",type:"address"}],name:"ContractAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"_name",type:"bytes32"},{indexed:!0,internalType:"address",name:"_address",type:"address"}],name:"ContractRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"_name",type:"bytes32"},{indexed:!0,internalType:"address",name:"_oldAddress",type:"address"},{indexed:!0,internalType:"address",name:"_newAddress",type:"address"}],name:"ContractUpgraded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{constant:!0,inputs:[],name:"isOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"sender",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_name",type:"bytes32"},{internalType:"address",name:"_address",type:"address"}],name:"addContract",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_name",type:"bytes32"}],name:"removeContract",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_name",type:"bytes32"},{internalType:"address",name:"_newAddress",type:"address"}],name:"upgradeContract",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_name",type:"bytes32"},{internalType:"uint256",name:"_version",type:"uint256"}],name:"getContract",outputs:[{internalType:"address",name:"contractAddr",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_name",type:"bytes32"}],name:"getContract",outputs:[{internalType:"address",name:"contractAddr",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_name",type:"bytes32"}],name:"getContractVersionCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],REGISTRY_CONTRACT_ADDRESS="0xd976d3b4f4e22a238c1A736b6612D22f17b6f64C";class Registry{constructor(e){let{address:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.getContract=e=>{let{registryKey:t}=e;return this.client.readContract({address:this.address,abi:abi$5,functionName:"getContract",args:[t]})},this.client=e,this.address=null!=t?t:REGISTRY_CONTRACT_ADDRESS}}const abi$4=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newClaimsManagerAddress",type:"address"}],name:"ClaimsManagerAddressUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_lockupDuration",type:"uint256"}],name:"DecreaseStakeLockupDurationUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"uint256",name:"_decreaseAmount",type:"uint256"},{indexed:!0,internalType:"uint256",name:"_lockupExpiryBlock",type:"uint256"}],name:"DecreaseStakeRequestCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"uint256",name:"_decreaseAmount",type:"uint256"},{indexed:!0,internalType:"uint256",name:"_newStakeAmount",type:"uint256"}],name:"DecreaseStakeRequestEvaluated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"uint256",name:"_decreaseAmount",type:"uint256"},{indexed:!0,internalType:"uint256",name:"_lockupExpiryBlock",type:"uint256"}],name:"DecreaseStakeRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newDelegateManagerAddress",type:"address"}],name:"DelegateManagerAddressUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"bytes32",name:"_serviceType",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"_spID",type:"uint256"},{indexed:!1,internalType:"address",name:"_updatedWallet",type:"address"}],name:"DelegateOwnerWalletUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"uint256",name:"_requestedCut",type:"uint256"},{indexed:!0,internalType:"uint256",name:"_finalCut",type:"uint256"}],name:"DeployerCutUpdateRequestCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"uint256",name:"_updatedCut",type:"uint256"}],name:"DeployerCutUpdateRequestEvaluated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"uint256",name:"_updatedCut",type:"uint256"},{indexed:!0,internalType:"uint256",name:"_lockupExpiryBlock",type:"uint256"}],name:"DeployerCutUpdateRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_spID",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"_serviceType",type:"bytes32"},{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!1,internalType:"string",name:"_endpoint",type:"string"},{indexed:!1,internalType:"uint256",name:"_unstakeAmount",type:"uint256"}],name:"DeregisteredServiceProvider",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"_serviceType",type:"bytes32"},{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!1,internalType:"string",name:"_oldEndpoint",type:"string"},{indexed:!1,internalType:"string",name:"_newEndpoint",type:"string"},{indexed:!0,internalType:"uint256",name:"_spID",type:"uint256"}],name:"EndpointUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newGovernanceAddress",type:"address"}],name:"GovernanceAddressUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"uint256",name:"_increaseAmount",type:"uint256"},{indexed:!0,internalType:"uint256",name:"_newStakeAmount",type:"uint256"}],name:"IncreasedStake",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_spID",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"_serviceType",type:"bytes32"},{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!1,internalType:"string",name:"_endpoint",type:"string"},{indexed:!1,internalType:"uint256",name:"_stakeAmount",type:"uint256"}],name:"RegisteredServiceProvider",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newServiceTypeManagerAddress",type:"address"}],name:"ServiceTypeManagerAddressUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_newStakingAddress",type:"address"}],name:"StakingAddressUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"_lockupDuration",type:"uint256"}],name:"UpdateDeployerCutLockupDurationUpdated",type:"event"},{constant:!1,inputs:[],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_governanceAddress",type:"address"},{internalType:"address",name:"_claimsManagerAddress",type:"address"},{internalType:"uint256",name:"_decreaseStakeLockupDuration",type:"uint256"},{internalType:"uint256",name:"_deployerCutLockupDuration",type:"uint256"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_serviceType",type:"bytes32"},{internalType:"string",name:"_endpoint",type:"string"},{internalType:"uint256",name:"_stakeAmount",type:"uint256"},{internalType:"address",name:"_delegateOwnerWallet",type:"address"}],name:"register",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_serviceType",type:"bytes32"},{internalType:"string",name:"_endpoint",type:"string"}],name:"deregister",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_increaseStakeAmount",type:"uint256"}],name:"increaseStake",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_decreaseStakeAmount",type:"uint256"}],name:"requestDecreaseStake",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_account",type:"address"}],name:"cancelDecreaseStakeRequest",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"decreaseStake",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_serviceType",type:"bytes32"},{internalType:"string",name:"_endpoint",type:"string"},{internalType:"address",name:"_updatedDelegateOwnerWallet",type:"address"}],name:"updateDelegateOwnerWallet",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_serviceType",type:"bytes32"},{internalType:"string",name:"_oldEndpoint",type:"string"},{internalType:"string",name:"_newEndpoint",type:"string"}],name:"updateEndpoint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_serviceProvider",type:"address"},{internalType:"uint256",name:"_cut",type:"uint256"}],name:"requestUpdateDeployerCut",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_serviceProvider",type:"address"}],name:"cancelUpdateDeployerCut",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_serviceProvider",type:"address"}],name:"updateDeployerCut",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_serviceProvider",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"updateServiceProviderStake",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_duration",type:"uint256"}],name:"updateDecreaseStakeLockupDuration",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_duration",type:"uint256"}],name:"updateDeployerCutLockupDuration",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getServiceProviderDeployerCutBase",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getDeployerCutLockupDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_serviceType",type:"bytes32"}],name:"getTotalServiceTypeProviders",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"string",name:"_endpoint",type:"string"}],name:"getServiceProviderIdFromEndpoint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_ownerAddress",type:"address"},{internalType:"bytes32",name:"_serviceType",type:"bytes32"}],name:"getServiceProviderIdsFromAddress",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_serviceType",type:"bytes32"},{internalType:"uint256",name:"_serviceId",type:"uint256"}],name:"getServiceEndpointInfo",outputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"string",name:"endpoint",type:"string"},{internalType:"uint256",name:"blockNumber",type:"uint256"},{internalType:"address",name:"delegateOwnerWallet",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_serviceProvider",type:"address"}],name:"getServiceProviderDetails",outputs:[{internalType:"uint256",name:"deployerStake",type:"uint256"},{internalType:"uint256",name:"deployerCut",type:"uint256"},{internalType:"bool",name:"validBounds",type:"bool"},{internalType:"uint256",name:"numberOfEndpoints",type:"uint256"},{internalType:"uint256",name:"minAccountStake",type:"uint256"},{internalType:"uint256",name:"maxAccountStake",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_serviceProvider",type:"address"}],name:"getPendingDecreaseStakeRequest",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"lockupExpiryBlock",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_serviceProvider",type:"address"}],name:"getPendingUpdateDeployerCutRequest",outputs:[{internalType:"uint256",name:"newDeployerCut",type:"uint256"},{internalType:"uint256",name:"lockupExpiryBlock",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getDecreaseStakeLockupDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_serviceProvider",type:"address"}],name:"validateAccountStakeBalance",outputs:[],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getGovernanceAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getStakingAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getDelegateManagerAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getServiceTypeManagerAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getClaimsManagerAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_governanceAddress",type:"address"}],name:"setGovernanceAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"setStakingAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"setDelegateManagerAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"setServiceTypeManagerAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"setClaimsManagerAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],SERVICE_PROVIDER_FACTORY_CONTRACT_ADDRESS="0xD17A9bc90c582249e211a4f4b16721e7f65156c8";class ServiceProviderFactory{constructor(e){let{address:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.getTotalServiceTypeProviders=e=>{let{serviceType:t}=e;return this.client.readContract({address:this.address,abi:abi$4,functionName:"getTotalServiceTypeProviders",args:[t]})},this.getServiceEndpointInfo=e=>{let{serviceType:t,index:r}=e;return this.client.readContract({address:this.address,abi:abi$4,functionName:"getServiceEndpointInfo",args:[t,r]})},this.client=e,this.address=null!=t?t:SERVICE_PROVIDER_FACTORY_CONTRACT_ADDRESS}}const abi$3=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"_serviceType",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"_serviceTypeMin",type:"uint256"},{indexed:!0,internalType:"uint256",name:"_serviceTypeMax",type:"uint256"}],name:"ServiceTypeAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"_serviceType",type:"bytes32"}],name:"ServiceTypeRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"_serviceType",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"_serviceVersion",type:"bytes32"}],name:"SetServiceVersion",type:"event"},{constant:!1,inputs:[],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_governanceAddress",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getGovernanceAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_governanceAddress",type:"address"}],name:"setGovernanceAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_serviceType",type:"bytes32"},{internalType:"uint256",name:"_serviceTypeMin",type:"uint256"},{internalType:"uint256",name:"_serviceTypeMax",type:"uint256"}],name:"addServiceType",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_serviceType",type:"bytes32"}],name:"removeServiceType",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_serviceType",type:"bytes32"}],name:"getServiceTypeInfo",outputs:[{internalType:"bool",name:"isValid",type:"bool"},{internalType:"uint256",name:"minStake",type:"uint256"},{internalType:"uint256",name:"maxStake",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getValidServiceTypes",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_serviceType",type:"bytes32"}],name:"serviceTypeIsValid",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"bytes32",name:"_serviceType",type:"bytes32"},{internalType:"bytes32",name:"_serviceVersion",type:"bytes32"}],name:"setServiceVersion",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_serviceType",type:"bytes32"},{internalType:"uint256",name:"_versionIndex",type:"uint256"}],name:"getVersion",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_serviceType",type:"bytes32"}],name:"getCurrentVersion",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_serviceType",type:"bytes32"}],name:"getNumberOfVersions",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"_serviceType",type:"bytes32"},{internalType:"bytes32",name:"_serviceVersion",type:"bytes32"}],name:"serviceVersionIsValid",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"}],SERVICE_TYPE_MANAGER_CONTRACT_ADDRESS="0x9EfB0f4F38aFbb4b0984D00C126E97E21b8417C5";class ServiceTypeManager{constructor(e){let{address:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.getGovernanceAddress=()=>this.client.readContract({address:this.address,abi:abi$3,functionName:"getGovernanceAddress"}),this.getServiceTypeInfo=e=>{let{serviceType:t}=e;return this.client.readContract({address:this.address,abi:abi$3,functionName:"getServiceTypeInfo",args:[t]})},this.getValidServiceTypes=()=>this.client.readContract({address:this.address,abi:abi$3,functionName:"getValidServiceTypes"}),this.serviceTypeIsValid=e=>{let{serviceType:t}=e;return this.client.readContract({address:this.address,abi:abi$3,functionName:"serviceTypeIsValid",args:[t]})},this.getVersion=e=>{let{serviceType:t,versionIndex:r}=e;return this.client.readContract({address:this.address,abi:abi$3,functionName:"getVersion",args:[t,r]})},this.getCurrentVersion=e=>{let{serviceType:t}=e;return this.client.readContract({address:this.address,abi:abi$3,functionName:"getCurrentVersion",args:[t]})},this.getNumberOfVersions=e=>{let{serviceType:t}=e;return this.client.readContract({address:this.address,abi:abi$3,functionName:"getNumberOfVersions",args:[t]})},this.setGovernanceAddress=null,this.addServiceType=null,this.removeServiceType=null,this.setServiceVersion=null,this.serviceVersionIsValid=null,this.client=e,this.address=null!=t?t:SERVICE_TYPE_MANAGER_CONTRACT_ADDRESS}}const abi$2=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"total",type:"uint256"}],name:"Slashed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"total",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"total",type:"uint256"}],name:"Unstaked",type:"event"},{constant:!1,inputs:[{internalType:"address",name:"_tokenAddress",type:"address"},{internalType:"address",name:"_governanceAddress",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_governanceAddress",type:"address"}],name:"setGovernanceAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_claimsManager",type:"address"}],name:"setClaimsManagerAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_spFactory",type:"address"}],name:"setServiceProviderFactoryAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_delegateManager",type:"address"}],name:"setDelegateManagerAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"address",name:"_stakerAccount",type:"address"}],name:"stakeRewards",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"address",name:"_stakerAccount",type:"address"}],name:"updateClaimHistory",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"address",name:"_slashAddress",type:"address"}],name:"slash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_accountAddress",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"stakeFor",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_accountAddress",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"unstakeFor",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_accountAddress",type:"address"},{internalType:"address",name:"_delegatorAddress",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"delegateStakeFor",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_accountAddress",type:"address"},{internalType:"address",name:"_delegatorAddress",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"undelegateStakeFor",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"token",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"supportsHistory",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_accountAddress",type:"address"}],name:"lastStakedFor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_accountAddress",type:"address"}],name:"lastClaimedFor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_accountAddress",type:"address"},{internalType:"uint256",name:"_blockNumber",type:"uint256"}],name:"totalStakedForAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"_blockNumber",type:"uint256"}],name:"totalStakedAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getGovernanceAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getClaimsManagerAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getServiceProviderFactoryAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getDelegateManagerAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_accountAddress",type:"address"}],name:"isStaker",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_accountAddress",type:"address"}],name:"totalStakedFor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalStaked",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];class Staking{}Staking.abi=abi$2,Staking.address="0xe6D97B2099F142513be7A2a068bE040656Ae4591";const abi$1=[{constant:!1,inputs:[{internalType:"address",name:"_governanceAddress",type:"address"},{internalType:"address",name:"_initialNotifierWallet",type:"address"},{internalType:"string",name:"_initialNotiferEndpoint",type:"string"},{internalType:"string",name:"_initialNotiferEmail",type:"string"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_wallet",type:"address"},{internalType:"string",name:"_endpoint",type:"string"},{internalType:"string",name:"_email",type:"string"}],name:"registerNotifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_wallet",type:"address"}],name:"deregisterNotifier",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getLatestNotifierID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"_ID",type:"uint256"}],name:"getNotifierForID",outputs:[{internalType:"address",name:"wallet",type:"address"},{internalType:"string",name:"endpoint",type:"string"},{internalType:"string",name:"email",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_wallet",type:"address"}],name:"getNotifierForWallet",outputs:[{internalType:"uint256",name:"ID",type:"uint256"},{internalType:"string",name:"endpoint",type:"string"},{internalType:"string",name:"email",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"string",name:"_endpoint",type:"string"}],name:"getNotifierForEndpoint",outputs:[{internalType:"uint256",name:"ID",type:"uint256"},{internalType:"address",name:"wallet",type:"address"},{internalType:"string",name:"email",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"string",name:"_email",type:"string"}],name:"getNotifierForEmail",outputs:[{internalType:"uint256",name:"ID",type:"uint256"},{internalType:"address",name:"wallet",type:"address"},{internalType:"string",name:"endpoint",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getGovernanceAddress",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_governanceAddress",type:"address"}],name:"setGovernanceAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],TRUSTED_NOTIFIER_MANAGER_CONTRACT_ADDRESS="0x6f08105c8CEef2BC5653640fcdbBE1e7bb519D39";class TrustedNotifierManager{constructor(e){let{address:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.getLatestNotifierID=()=>this.client.readContract({address:this.address,abi:abi$1,functionName:"getLatestNotifierID"}),this.getNotifierForID=e=>{let{id:t}=e;return this.client.readContract({address:this.address,abi:abi$1,functionName:"getNotifierForID",args:[t]})},this.getNotifierForWallet=e=>{let{address:t}=e;return this.client.readContract({address:this.address,abi:abi$1,functionName:"getNotifierForWallet",args:[t]})},this.getNotifierForEndpoint=e=>{let{endpoint:t}=e;return this.client.readContract({address:this.address,abi:abi$1,functionName:"getNotifierForEndpoint",args:[t]})},this.getNotifierForEmail=e=>{let{email:t}=e;return this.client.readContract({address:this.address,abi:abi$1,functionName:"getNotifierForEmail",args:[t]})},this.client=e,this.address=null!=t?t:TRUSTED_NOTIFIER_MANAGER_CONTRACT_ADDRESS}}const abi=[{constant:!0,inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"TRANSFER_TOKENS_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"nonces",outputs:[{internalType:"uint32",name:"",type:"uint32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_tokenAddress",type:"address"},{internalType:"address",name:"_wormholeAddress",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint16",name:"recipientChain",type:"uint16"},{internalType:"bytes32",name:"recipient",type:"bytes32"},{internalType:"uint256",name:"arbiterFee",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"transferTokens",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}];class AudiusWormhole{}AudiusWormhole.abi=abi,AudiusWormhole.address="0x6E7a1F7339bbB62b23D44797b63e4258d283E095",AudiusWormhole.types={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],TransferTokens:[{name:"from",type:"address"},{name:"amount",type:"uint256"},{name:"recipientChain",type:"uint16"},{name:"recipient",type:"bytes32"},{name:"artbiterFee",type:"uint256"},{name:"nonce",type:"uint32"},{name:"deadline",type:"uint256"}]};class EthereumContract{constructor(e){_defineProperty$3(this,"client",void 0),this.client=createPublicClient({chain:mainnet,transport:http(e.rpcEndpoint)})}}class ServiceTypeManagerClient extends EthereumContract{constructor(e){super(e),_defineProperty$3(this,"discoveryNodeServiceType",void 0),_defineProperty$3(this,"contentNodeServiceType",void 0),_defineProperty$3(this,"contract",void 0),_defineProperty$3(this,"getDiscoveryNodeVersion",(async()=>hexToString(await this.contract.getCurrentVersion({serviceType:this.discoveryNodeServiceType}),{size:32}))),_defineProperty$3(this,"getContentNodeVersion",(async()=>hexToString(await this.contract.getCurrentVersion({serviceType:this.contentNodeServiceType}),{size:32}))),this.discoveryNodeServiceType=e.discoveryNodeServiceType,this.contentNodeServiceType=e.contentNodeServiceType,this.contract=new ServiceTypeManager(this.client,{address:e.addresses.serviceTypeManagerAddress})}}const getDefaultEthereumClientConfig=e=>({rpcEndpoint:e.ethereum.rpcEndpoint,addresses:e.ethereum.addresses,client:createPublicClient({chain:mainnet,transport:http(e.ethereum.rpcEndpoint)})}),getDefaultServiceTypeManagerConfig=e=>({discoveryNodeServiceType:"0x646973636f766572792d6e6f6465000000000000000000000000000000000000",contentNodeServiceType:"0x636f6e74656e742d6e6f64650000000000000000000000000000000000000000",...getDefaultEthereumClientConfig(e)});class ServiceProviderFactoryClient extends EthereumContract{constructor(e){super(e),_defineProperty$3(this,"discoveryNodeServiceType",void 0),_defineProperty$3(this,"contentNodeServiceType",void 0),_defineProperty$3(this,"contract",void 0),_defineProperty$3(this,"getDiscoveryNodes",(async()=>{const e=await this.contract.getTotalServiceTypeProviders({serviceType:this.discoveryNodeServiceType}),t=await Promise.all(lodash.exports.range(1,Number(e)+1).map((async e=>await this.contract.getServiceEndpointInfo({serviceType:this.discoveryNodeServiceType,index:BigInt(e)}))));return t.filter((e=>{let[t,r]=e;return""!==r}))})),_defineProperty$3(this,"getContentNodes",(async()=>{const e=await this.contract.getTotalServiceTypeProviders({serviceType:this.contentNodeServiceType}),t=await Promise.all(lodash.exports.range(1,Number(e)+1).map((async e=>await this.contract.getServiceEndpointInfo({serviceType:this.contentNodeServiceType,index:BigInt(e)}))));return t.filter((e=>{let[t,r]=e;return""!==r}))})),this.discoveryNodeServiceType=e.discoveryNodeServiceType,this.contentNodeServiceType=e.contentNodeServiceType,this.contract=new ServiceProviderFactory(this.client,{address:e.addresses.serviceProviderFactoryAddress})}}const getDefaultServiceProviderFactoryConfig=e=>({discoveryNodeServiceType:"0x646973636f766572792d6e6f6465000000000000000000000000000000000000",contentNodeServiceType:"0x636f6e74656e742d6e6f64650000000000000000000000000000000000000000",...getDefaultEthereumClientConfig(e)});class EthRewardsManagerClient extends EthereumContract{constructor(e){super(e),_defineProperty$3(this,"contract",void 0),this.contract=new EthRewardsManager(this.client,{address:e.addresses.ethRewardsManagerAddress})}}const getDefaultEthRewardsManagerConfig=e=>({...getDefaultEthereumClientConfig(e)}),GasFeeSchema=z.union([z.object({gasPrice:z.bigint().optional()}),z.object({maxFeePerGas:z.bigint().optional(),maxPriorityFeePerGas:z.bigint().optional()})]).and(z.object({gas:z.bigint().optional()})),BalanceOfSchema=z.object({account:EthAddressSchema}),PermitSchema=GasFeeSchema.and(z.object({args:z.object({owner:EthAddressSchema.optional(),spender:EthAddressSchema,value:z.bigint(),deadline:z.bigint().optional()}),account:z.custom().optional()})),ONE_HOUR_IN_MS=36e5;class AudiusTokenClient{constructor(e){_defineProperty$3(this,"contractAddress",void 0),_defineProperty$3(this,"audiusWalletClient",void 0),_defineProperty$3(this,"walletClient",void 0),_defineProperty$3(this,"publicClient",void 0),this.audiusWalletClient=e.audiusWalletClient,this.walletClient=e.ethWalletClient,this.publicClient=e.ethPublicClient,this.contractAddress=e.address}async permit(e){const{args:{owner:t=(await this.audiusWalletClient.getAddresses())[0],spender:r,value:n,deadline:i=BigInt(Date.now()+ONE_HOUR_IN_MS)},...a}=await parseParams("permit",PermitSchema)(e);if(void 0===t)throw new Error('Parameter "owner" could not be derived from wallet client.');const o=await this.publicClient.readContract({address:this.contractAddress,abi:AudiusToken.abi,functionName:"nonces",args:[t]}),s={primaryType:"Permit",domain:await this.domain(),message:{owner:t,spender:r,value:n,nonce:o,deadline:i},types:AudiusToken.types},u=await this.audiusWalletClient.signTypedData(s),{r:c,s:d,v:l}=parseSignature(u),{request:p}=await this.publicClient.simulateContract({address:this.contractAddress,abi:AudiusToken.abi,functionName:"permit",args:[t,r,n,i,Number(l),c,d],...a});return await this.walletClient.writeContract(p)}async balanceOf(e){const{account:t}=await parseParams("balanceOf",BalanceOfSchema)(e),r=await this.publicClient.readContract({address:this.contractAddress,abi:AudiusToken.abi,functionName:"balanceOf",args:[t]});return BigInt(r)}async domain(){return{name:await this.publicClient.readContract({abi:AudiusToken.abi,address:this.contractAddress,functionName:"name"}),chainId:BigInt(await this.publicClient.getChainId()),verifyingContract:this.contractAddress,version:"1"}}}const getDefaultAudiusTokenConfig=e=>({address:e.ethereum.addresses.audiusTokenAddress});class ClaimsManagerClient extends EthereumContract{constructor(e){super(e),_defineProperty$3(this,"contract",void 0),this.contract=new ClaimsManager(this.client)}}const getDefaultClaimsManagerConfig=e=>({...getDefaultEthereumClientConfig(e)});class DelegateManagerClient{constructor(e){_defineProperty$3(this,"contractAddress",void 0),_defineProperty$3(this,"publicClient",void 0),_defineProperty$3(this,"getIncreaseDelegatedStakeEvents",(e=>{let{fromBlock:t=BigInt(0),delegator:r,serviceProvider:n,increaseAmount:i}=e;const a={};return r&&(a._delegator=r),n&&(a._serviceProvider=n),i&&(a._increaseAmount=i),this.publicClient.getContractEvents({address:this.contractAddress,abi:DelegateManager.abi,eventName:"IncreaseDelegatedStake",fromBlock:t,args:a})})),_defineProperty$3(this,"getUndelegateStakeRequestedEvents",(e=>{let{fromBlock:t=BigInt(0),delegator:r,serviceProvider:n}=e;const i={};return r&&(i._delegator=r),n&&(i._serviceProvider=n),this.publicClient.getContractEvents({address:this.contractAddress,abi:DelegateManager.abi,eventName:"UndelegateStakeRequested",fromBlock:t,args:i})})),_defineProperty$3(this,"getUndelegateStakeRequestEvaluatedEvents",(e=>{let{fromBlock:t=BigInt(0),delegator:r,serviceProvider:n}=e;const i={};return r&&(i._delegator=r),n&&(i._serviceProvider=n),this.publicClient.getContractEvents({address:this.contractAddress,abi:DelegateManager.abi,eventName:"UndelegateStakeRequestEvaluated",fromBlock:t,args:i})})),_defineProperty$3(this,"getUndelegateStakeRequestCancelledEvents",(e=>{let{fromBlock:t=BigInt(0),delegator:r,serviceProvider:n}=e;const i={};return r&&(i._delegator=r),n&&(i._serviceProvider=n),this.publicClient.getContractEvents({address:this.contractAddress,abi:DelegateManager.abi,eventName:"UndelegateStakeRequestCancelled",fromBlock:t,args:i})})),_defineProperty$3(this,"getRemoveDelegatorRequestedEvents",(e=>{let{fromBlock:t=BigInt(0),delegator:r,serviceProvider:n}=e;const i={};return r&&(i._delegator=r),n&&(i._serviceProvider=n),this.publicClient.getContractEvents({address:this.contractAddress,abi:DelegateManager.abi,eventName:"RemoveDelegatorRequested",fromBlock:t,args:i})})),_defineProperty$3(this,"getRemoveDelegatorEvaluatedEvents",(e=>{let{fromBlock:t=BigInt(0),delegator:r,serviceProvider:n,unstakedAmount:i}=e;const a={};return r&&(a._delegator=r),n&&(a._serviceProvider=n),i&&(a._unstakedAmount=i),this.publicClient.getContractEvents({address:this.contractAddress,abi:DelegateManager.abi,eventName:"RemoveDelegatorRequestEvaluated",fromBlock:t,args:a})})),_defineProperty$3(this,"getRemoveDelegatorCancelledEvents",(e=>{let{fromBlock:t=BigInt(0),delegator:r,serviceProvider:n}=e;const i={};return r&&(i._delegator=r),n&&(i._serviceProvider=n),this.publicClient.getContractEvents({address:this.contractAddress,abi:DelegateManager.abi,eventName:"RemoveDelegatorRequestCancelled",fromBlock:t,args:i})})),_defineProperty$3(this,"getClaimEvents",(e=>{let{fromBlock:t=BigInt(0),claimer:r}=e;const n={};return r&&(n._claimer=r),this.publicClient.getContractEvents({address:this.contractAddress,abi:DelegateManager.abi,eventName:"Claim",fromBlock:t,args:n})})),_defineProperty$3(this,"getSlashEvents",(e=>{let{fromBlock:t=BigInt(0),target:r}=e;const n={};return r&&(n._target=r),this.publicClient.getContractEvents({address:this.contractAddress,abi:DelegateManager.abi,eventName:"Slash",fromBlock:t,args:n})})),_defineProperty$3(this,"getDelegatorsList",(e=>{let{serviceProviderAddress:t}=e;return this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getDelegatorsList",args:[t]})})),_defineProperty$3(this,"getTotalDelegatedToServiceProvider",(e=>{let{serviceProviderAddress:t}=e;return this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getTotalDelegatedToServiceProvider",args:[t]})})),_defineProperty$3(this,"getTotalLockedDelegationForServiceProvider",(e=>{let{serviceProviderAddress:t}=e;return this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getTotalLockedDelegationForServiceProvider",args:[t]})})),_defineProperty$3(this,"getTotalDelegatorStake",(e=>{let{delegatorAddress:t}=e;return this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getTotalDelegatorStake",args:[t]})})),_defineProperty$3(this,"getDelegatorStakeForServiceProvider",(e=>{let{delegatorAddress:t,serviceProviderAddress:r}=e;return this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getDelegatorStakeForServiceProvider",args:[t,r]})})),_defineProperty$3(this,"getPendingRemoveDelegatorRequest",(e=>{let{delegatorAddress:t,serviceProviderAddress:r}=e;return this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getPendingRemoveDelegatorRequest",args:[r,t]})})),_defineProperty$3(this,"getPendingUndelegateRequest",(e=>{let{delegatorAddress:t}=e;return this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getPendingUndelegateRequest",args:[t]})})),_defineProperty$3(this,"getUndelegateLockupDuration",(()=>this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getUndelegateLockupDuration"}))),_defineProperty$3(this,"getMaxDelegators",(()=>this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getMaxDelegators"}))),_defineProperty$3(this,"getMinDelegationAmount",(()=>this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getMinDelegationAmount"}))),_defineProperty$3(this,"getRemoveDelegatorLockupDuration",(()=>this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getRemoveDelegatorLockupDuration"}))),_defineProperty$3(this,"getRemoveDelegatorEvalDuration",(()=>this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getRemoveDelegatorEvalDuration"}))),_defineProperty$3(this,"getGovernanceAddress",(()=>this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getGovernanceAddress"}))),_defineProperty$3(this,"getServiceProviderFactoryAddress",(()=>this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getServiceProviderFactoryAddress"}))),_defineProperty$3(this,"getClaimsManagerAddress",(()=>this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getClaimsManagerAddress"}))),_defineProperty$3(this,"getStakingAddress",(()=>this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getStakingAddress"}))),_defineProperty$3(this,"getSPMinDelegationAmount",(e=>{let{serviceProviderAddress:t}=e;return this.publicClient.readContract({address:this.contractAddress,abi:DelegateManager.abi,functionName:"getSPMinDelegationAmount",args:[t]})})),this.contractAddress=e.address,this.publicClient=e.ethPublicClient}}const getDefaultDelegateManagerConfig=e=>({address:e.ethereum.addresses.delegateManagerAddress});class StakingClient{constructor(e){_defineProperty$3(this,"contractAddress",void 0),_defineProperty$3(this,"publicClient",void 0),_defineProperty$3(this,"token",(()=>this.publicClient.readContract({address:this.contractAddress,abi:Staking.abi,functionName:"token"}))),_defineProperty$3(this,"totalStaked",(()=>this.publicClient.readContract({address:this.contractAddress,abi:Staking.abi,functionName:"totalStaked"}))),_defineProperty$3(this,"supportsHistory",(()=>this.publicClient.readContract({address:this.contractAddress,abi:Staking.abi,functionName:"supportsHistory"}))),_defineProperty$3(this,"totalStakedFor",(e=>{let{account:t}=e;return this.publicClient.readContract({address:this.contractAddress,abi:Staking.abi,functionName:"totalStakedFor",args:[t]})})),_defineProperty$3(this,"totalStakedAt",(e=>{let{blockNumber:t}=e;return this.publicClient.readContract({address:this.contractAddress,abi:Staking.abi,functionName:"totalStakedAt",args:[t]})})),_defineProperty$3(this,"totalStakedForAt",(e=>{let{account:t,blockNumber:r}=e;return this.publicClient.readContract({address:this.contractAddress,abi:Staking.abi,functionName:"totalStakedForAt",args:[t,r]})})),_defineProperty$3(this,"isStaker",(e=>{let{account:t}=e;return this.publicClient.readContract({address:this.contractAddress,abi:Staking.abi,functionName:"isStaker",args:[t]})})),_defineProperty$3(this,"lastClaimedFor",(e=>{let{account:t}=e;return this.publicClient.readContract({address:this.contractAddress,abi:Staking.abi,functionName:"lastClaimedFor",args:[t]})})),_defineProperty$3(this,"getDelegateManagerAddress",(()=>this.publicClient.readContract({address:this.contractAddress,abi:Staking.abi,functionName:"getDelegateManagerAddress"}))),_defineProperty$3(this,"getClaimsManagerAddress",(()=>this.publicClient.readContract({address:this.contractAddress,abi:Staking.abi,functionName:"getClaimsManagerAddress"}))),_defineProperty$3(this,"getServiceProviderFactoryAddress",(()=>this.publicClient.readContract({address:this.contractAddress,abi:Staking.abi,functionName:"getServiceProviderFactoryAddress"}))),_defineProperty$3(this,"getGovernanceAddress",(()=>this.publicClient.readContract({address:this.contractAddress,abi:Staking.abi,functionName:"getGovernanceAddress"}))),this.contractAddress=e.address,this.publicClient=e.ethPublicClient}}const getDefaultStakingConfig=e=>({address:e.ethereum.addresses.stakingAddress});class TrustedNotifierManagerClient extends EthereumContract{constructor(e){super(e),_defineProperty$3(this,"contract",void 0),this.contract=new TrustedNotifierManager(this.client)}}const getDefaultTrustedNotifierManagerConfig=e=>({...getDefaultEthereumClientConfig(e)}),range=e=>[...Array(e).keys()],zip=e=>range(e[0].length).map((t=>range(e.length).map((r=>e[r][t]))));function isMappableKey(e){return["string","number","symbol","bigint","boolean"].includes(typeof e)}const isRecursiveTuple=e=>2===e.length&&!Array.isArray(e[0])&&Array.isArray(e[1]),cartesianRightRecursive=e=>0===e.length?[]:Array.isArray(e[0])?e.map((e=>{let[t,r]=e;return Array.isArray(r)?(isRecursiveTuple(r)?cartesianRightRecursive(r):r).map((e=>[t,e].flat())):[[t,r]]})).flat():isRecursiveTuple(e)?cartesianRightRecursive(e[1]).map((t=>[e[0],t])):e,toMapping=(e,t)=>{const r=cartesianRightRecursive(e);if(0===r.length)throw new Error("Invalid mapping: empty");const n=void 0===t?[range(r[0].length-1),[r[0].length-1]]:t.map((e=>"number"==typeof e?[e]:e));let i=[],a=!0;const o=(e,t)=>{const r=Array.from(new Set(e[0]).values()),n=new Map(r.map((e=>[e,[]])));for(const[t,r]of e[0].entries())n.get(r).push(t);if(1===e.length){const e=Object.fromEntries(r.map((e=>[e,n.get(e).map((e=>1===t[e].length?t[e][0]:t[e]))])));if(a){for(const t of n.values())if(t.length>1)return a=!1,e;i.push(e)}return e}const s=zip(e.slice(1));return Object.fromEntries(r.map((e=>{const r=n.get(e),i=zip(r.map((e=>s[e]))),a=r.map((e=>t[e]));return[e,o(i,a)]})))},s=zip(r),[u,c]=n.map((e=>e.map((e=>(e=>{const t=s[e];if(void 0===t)throw new Error(`Invalid shape: column ${e} does not exist`);return t})(e)))));if(0===u.length)throw new Error("Invalid shape: empty key set");if(0===c.length)throw new Error("Invalid shape: empty value set");for(const e of u)for(const t of e)if(!isMappableKey(t))throw new Error(`Invalid key: ${t} in ${e}`);const d=o(u,zip(c));if(a)for(const e of i)for(const t of Object.keys(e))e[t]=e[t][0];return d};function constMap(e,t){const r=toMapping(e,t),n=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>{var r;return e&&null!==(r=e[t.toString()])&&void 0!==r?r:void 0}),r)};return Object.assign(n,{has:function(){return void 0!==n(...arguments)},get:function(){return n(...arguments)},subMap:e=>r[e.toString()]})}const chainIdAndChainEntries=[[1,"Solana"],[2,"Ethereum"],[3,"Terra"],[4,"Bsc"],[5,"Polygon"],[6,"Avalanche"],[7,"Oasis"],[8,"Algorand"],[9,"Aurora"],[10,"Fantom"],[11,"Karura"],[12,"Acala"],[13,"Klaytn"],[14,"Celo"],[15,"Near"],[16,"Moonbeam"],[17,"Neon"],[18,"Terra2"],[19,"Injective"],[20,"Osmosis"],[21,"Sui"],[22,"Aptos"],[23,"Arbitrum"],[24,"Optimism"],[25,"Gnosis"],[26,"Pythnet"],[28,"Xpla"],[29,"Btc"],[30,"Base"],[32,"Sei"],[33,"Rootstock"],[34,"Scroll"],[35,"Mantle"],[36,"Blast"],[37,"Xlayer"],[38,"Linea"],[39,"Berachain"],[40,"Seievm"],[43,"Snaxchain"],[44,"Unichain"],[45,"Worldchain"],[3104,"Wormchain"],[4e3,"Cosmoshub"],[4001,"Evmos"],[4002,"Kujira"],[4003,"Neutron"],[4004,"Celestia"],[4005,"Stargaze"],[4006,"Seda"],[4007,"Dymension"],[4008,"Provenance"],[10002,"Sepolia"],[10003,"ArbitrumSepolia"],[10004,"BaseSepolia"],[10005,"OptimismSepolia"],[10006,"Holesky"],[10007,"PolygonSepolia"],[10008,"MonadDevnet"]],[chainIds,chains]=zip(chainIdAndChainEntries),chainToChainId=constMap(chainIdAndChainEntries,[1,0]),chainIdToChain=constMap(chainIdAndChainEntries),isChain=e=>chainToChainId.has(e),isChainId=e=>chainIdToChain.has(e),toChainId=e=>{switch(typeof e){case"string":if(isChain(e))return chainToChainId(e);break;case"number":if(isChainId(e))return e}throw Error(`Cannot convert to ChainId: ${e}`)},HexSchema=z.custom((e=>z.string().startsWith("0x","Hex string must start with 0x").regex(/^0x[0-9a-fA-F]+$/,"Hex must only include hexadecimal characters 0-9, a-F").parse(e))),TransferTokensSchema=GasFeeSchema.and(z.object({args:z.object({from:EthAddressSchema.optional(),amount:z.bigint(),recipientChain:z.enum(chains).transform(toChainId),recipient:HexSchema,deadline:z.bigint().optional(),arbiterFee:z.bigint().optional()}),account:z.custom().optional()})),ONE_HOUR_IN_S=3600;class AudiusWormholeClient{constructor(e){_defineProperty$3(this,"contractAddress",void 0),_defineProperty$3(this,"audiusWalletClient",void 0),_defineProperty$3(this,"walletClient",void 0),_defineProperty$3(this,"publicClient",void 0),this.audiusWalletClient=e.audiusWalletClient,this.walletClient=e.ethWalletClient,this.publicClient=e.ethPublicClient,this.contractAddress=e.address}async transferTokens(e){const{args:{from:t=(await this.audiusWalletClient.getAddresses())[0],amount:r,recipientChain:n,recipient:i,deadline:a=BigInt(Math.round(Date.now()/1e3)+ONE_HOUR_IN_S),arbiterFee:o=BigInt(0)},...s}=await parseParams("transferTokens",TransferTokensSchema)(e);if(void 0===t)throw new Error('Parameter "from" could not be derived from wallet client.');const u=await this.publicClient.readContract({address:this.contractAddress,abi:AudiusWormhole.abi,functionName:"nonces",args:[t]}),c={primaryType:"TransferTokens",domain:await this.domain(),message:{from:t,amount:r,recipientChain:n,recipient:i,artbiterFee:o,deadline:a,nonce:u},types:AudiusWormhole.types},d=await this.audiusWalletClient.signTypedData(c),{r:l,s:p,v:h}=parseSignature(d),{request:f}=await this.publicClient.simulateContract({address:this.contractAddress,abi:AudiusWormhole.abi,functionName:"transferTokens",args:[t,r,n,i,o,a,Number(h),l,p],...s});return await this.walletClient.writeContract(f)}async domain(){return{name:"AudiusWormholeClient",chainId:BigInt(await this.publicClient.getChainId()),verifyingContract:this.contractAddress,version:"1"}}}const getDefaultWormholeConfig=e=>({address:e.ethereum.addresses.audiusWormholeAddress});class RegistryClient extends EthereumContract{constructor(e){super(e),_defineProperty$3(this,"contract",void 0),this.contract=new Registry(this.client)}}const getDefaultRegistryConfig=e=>({...getDefaultEthereumClientConfig(e)});class GovernanceClient extends EthereumContract{constructor(e){super(e),_defineProperty$3(this,"contract",void 0),this.contract=new Governance(this.client)}}const getDefaultGovernanceConfig=e=>({...getDefaultEthereumClientConfig(e)}),BASE_PATH="/v1/full".replace(/\/+$/,"");class Configuration{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_defineProperty$3(this,"configuration",void 0),this.configuration=e}set config(e){this.configuration=e}get basePath(){return null!=this.configuration.basePath?this.configuration.basePath:BASE_PATH}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||querystring}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){const e=this.configuration.apiKey;if(e)return"function"==typeof e?e:()=>e}get accessToken(){const e=this.configuration.accessToken;if(e)return"function"==typeof e?e:async()=>e}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}}const DefaultConfig=new Configuration;class BaseAPI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DefaultConfig;_defineProperty$3(this,"configuration",void 0),_defineProperty$3(this,"middleware",void 0),_defineProperty$3(this,"fetchApi",(async(e,t)=>{let r,n={url:e,init:t};for(const e of this.middleware)e.pre&&(n=await e.pre({fetch:this.fetchApi,...n})||n);try{r=await(this.configuration.fetchApi||fetch)(n.url,n.init)}catch(e){for(const t of this.middleware)t.onError&&(r=await t.onError({fetch:this.fetchApi,url:n.url,init:n.init,error:e,response:r?r.clone():void 0})||r);if(void 0===r)throw e instanceof Error?new FetchError(e,"The request failed and the interceptors did not return an alternative response"):e}for(const e of this.middleware)e.post&&(r=await e.post({fetch:this.fetchApi,url:n.url,init:n.init,response:r.clone()})||r);return r})),this.configuration=e,this.middleware=e.middleware}withMiddleware(){const e=this.clone();return e.middleware=e.middleware.concat(...arguments),e}withPreMiddleware(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t.map((e=>({pre:e})));return this.withMiddleware(...n)}withPostMiddleware(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t.map((e=>({post:e})));return this.withMiddleware(...n)}async request(e,t){const{url:r,init:n}=await this.createFetchParams(e,t),i=await this.fetchApi(r,n);if(i&&i.status>=200&&i.status<300)return i;throw new ResponseError(i,"Response returned an error code")}async createFetchParams(e,t){let r=this.configuration.basePath+e.path;void 0!==e.query&&0!==Object.keys(e.query).length&&(r+="?"+this.configuration.queryParamsStringify(e.query));const n=Object.assign({},this.configuration.headers,e.headers);Object.keys(n).forEach((e=>void 0===n[e]?delete n[e]:{}));const i="function"==typeof t?t:async()=>t,a={method:e.method,headers:n,body:e.body,credentials:this.configuration.credentials},o={...a,...await i({init:a,context:e})};return{url:r,init:{...o,body:isFormData(o.body)||o.body instanceof URLSearchParams||isBlob(o.body)||isString(o.body)?o.body:JSON.stringify(o.body)}}}clone(){const e=new(0,this.constructor)(this.configuration);return e.middleware=this.middleware.slice(),e}}function isBlob(e){return"undefined"!=typeof Blob&&e instanceof Blob}function isFormData(e){return"undefined"!=typeof FormData&&e instanceof FormData}function isString(e){return"string"==typeof e}class ResponseError extends Error{constructor(e,t){super(t),_defineProperty$3(this,"response",void 0),_defineProperty$3(this,"name","ResponseError"),this.response=e}}class FetchError extends Error{constructor(e,t){super(t,{cause:e}),_defineProperty$3(this,"name","FetchError")}}class RequiredError extends Error{constructor(e,t){super(t),_defineProperty$3(this,"field",void 0),_defineProperty$3(this,"name","RequiredError"),this.field=e}}const COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"\t",pipes:"|"};function exists(e,t){const r=e[t];return null!=r}function querystring(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(e).sort().map((r=>querystringSingleKey(r,e[r],t))).filter((e=>e.length>0)).join("&")}function querystringSingleKey(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const n=r+(r.length?`[${e}]`:e);if(t instanceof Array){const e=t.map((e=>encodeURIComponent(String(e)))).join(`&${encodeURIComponent(n)}=`);return`${encodeURIComponent(n)}=${e}`}if(t instanceof Set){return querystringSingleKey(e,Array.from(t),r)}return t instanceof Date?`${encodeURIComponent(n)}=${encodeURIComponent(t.toISOString())}`:t instanceof Object?querystring(t,n):`${encodeURIComponent(n)}=${encodeURIComponent(String(t))}`}class JSONApiResponse{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;_defineProperty$3(this,"raw",void 0),_defineProperty$3(this,"transformer",void 0),this.raw=e,this.transformer=t}async value(){return this.transformer(await this.raw.json())}}function AccessFromJSON(e){return AccessFromJSONTyped(e)}function AccessFromJSONTyped(e,t){return null==e?e:{stream:e.stream,download:e.download}}function FollowGateFromJSONTyped(e,t){return null==e?e:{followUserId:e.follow_user_id}}function NftCollectionFromJSON(e){return NftCollectionFromJSONTyped(e)}function NftCollectionFromJSONTyped(e,t){return null==e?e:{chain:e.chain,standard:exists(e,"standard")?e.standard:void 0,address:e.address,name:e.name,imageUrl:exists(e,"imageUrl")?e.imageUrl:void 0,externalLink:exists(e,"externalLink")?e.externalLink:void 0}}function NftGateFromJSONTyped(e,t){return null==e?e:{nftCollection:NftCollectionFromJSON(e.nft_collection)}}function UsdcGateFromJSON(e){return UsdcGateFromJSONTyped(e)}function UsdcGateFromJSONTyped(e,t){return null==e?e:{splits:e.splits,price:e.price}}function PurchaseGateFromJSONTyped(e,t){return null==e?e:{usdcPurchase:UsdcGateFromJSON(e.usdc_purchase)}}function TipGateFromJSONTyped(e,t){return null==e?e:{tipUserId:e.tip_user_id}}function ExtendedTokenGateFromJSON(e){return ExtendedTokenGateFromJSONTyped(e)}function ExtendedTokenGateFromJSONTyped(e,t){return null==e?e:{tokenMint:e.token_mint,tokenAmount:e.token_amount}}function TokenGateFromJSONTyped(e,t){return null==e?e:{tokenGate:ExtendedTokenGateFromJSON(e.token_gate)}}function AccessGateFromJSON(e){return AccessGateFromJSONTyped(e)}function AccessGateFromJSONTyped(e,t){return null==e?e:{...FollowGateFromJSONTyped(e),...NftGateFromJSONTyped(e),...PurchaseGateFromJSONTyped(e),...TipGateFromJSONTyped(e),...TokenGateFromJSONTyped(e)}}function AccountCollectionUserFromJSON(e){return AccountCollectionUserFromJSONTyped(e)}function AccountCollectionUserFromJSONTyped(e,t){return null==e?e:{id:e.id,handle:e.handle,isDeactivated:exists(e,"is_deactivated")?e.is_deactivated:void 0}}function AccountCollectionFromJSON(e){return AccountCollectionFromJSONTyped(e)}function AccountCollectionFromJSONTyped(e,t){return null==e?e:{id:e.id,isAlbum:e.is_album,name:e.name,permalink:e.permalink,user:AccountCollectionUserFromJSON(e.user)}}function PlaylistLibraryFromJSON(e){return PlaylistLibraryFromJSONTyped(e)}function PlaylistLibraryFromJSONTyped(e,t){return null==e?e:{contents:exists(e,"contents")?e.contents:void 0}}function CoverPhotoFromJSON(e){return CoverPhotoFromJSONTyped(e)}function CoverPhotoFromJSONTyped(e,t){return null==e?e:{_640x:exists(e,"640x")?e["640x"]:void 0,_2000x:exists(e,"2000x")?e["2000x"]:void 0}}function CoverPhotoFullFromJSON(e){return CoverPhotoFullFromJSONTyped(e)}function CoverPhotoFullFromJSONTyped(e,t){return null==e?e:{_640x:exists(e,"640x")?e["640x"]:void 0,_2000x:exists(e,"2000x")?e["2000x"]:void 0,mirrors:exists(e,"mirrors")?e.mirrors:void 0}}function ProfilePictureFromJSON(e){return ProfilePictureFromJSONTyped(e)}function ProfilePictureFromJSONTyped(e,t){return null==e?e:{_150x150:exists(e,"150x150")?e["150x150"]:void 0,_480x480:exists(e,"480x480")?e["480x480"]:void 0,_1000x1000:exists(e,"1000x1000")?e["1000x1000"]:void 0}}function ProfilePictureFullFromJSON(e){return ProfilePictureFullFromJSONTyped(e)}function ProfilePictureFullFromJSONTyped(e,t){return null==e?e:{_150x150:exists(e,"150x150")?e["150x150"]:void 0,_480x480:exists(e,"480x480")?e["480x480"]:void 0,_1000x1000:exists(e,"1000x1000")?e["1000x1000"]:void 0,mirrors:exists(e,"mirrors")?e.mirrors:void 0}}function UserFullArtistCoinBadgeFromJSON(e){return UserFullArtistCoinBadgeFromJSONTyped(e)}function UserFullArtistCoinBadgeFromJSONTyped(e,t){return null==e?e:{mint:exists(e,"mint")?e.mint:void 0,logoUri:exists(e,"logo_uri")?e.logo_uri:void 0,ticker:exists(e,"ticker")?e.ticker:void 0}}function UserFullFromJSON(e){return UserFullFromJSONTyped(e)}function UserFullFromJSONTyped(e,t){return null==e?e:{albumCount:e.album_count,artistPickTrackId:exists(e,"artist_pick_track_id")?e.artist_pick_track_id:void 0,artistCoinBadge:UserFullArtistCoinBadgeFromJSON(e.artist_coin_badge),bio:exists(e,"bio")?e.bio:void 0,coverPhoto:exists(e,"cover_photo")?CoverPhotoFullFromJSON(e.cover_photo):void 0,followeeCount:e.followee_count,followerCount:e.follower_count,handle:e.handle,id:e.id,isVerified:e.is_verified,twitterHandle:exists(e,"twitter_handle")?e.twitter_handle:void 0,instagramHandle:exists(e,"instagram_handle")?e.instagram_handle:void 0,tiktokHandle:exists(e,"tiktok_handle")?e.tiktok_handle:void 0,verifiedWithTwitter:e.verified_with_twitter,verifiedWithInstagram:e.verified_with_instagram,verifiedWithTiktok:e.verified_with_tiktok,website:exists(e,"website")?e.website:void 0,donation:exists(e,"donation")?e.donation:void 0,location:exists(e,"location")?e.location:void 0,name:e.name,playlistCount:e.playlist_count,profilePicture:exists(e,"profile_picture")?ProfilePictureFullFromJSON(e.profile_picture):void 0,repostCount:e.repost_count,trackCount:e.track_count,isDeactivated:e.is_deactivated,isAvailable:e.is_available,ercWallet:e.erc_wallet,splWallet:e.spl_wallet,splUsdcWallet:e.spl_usdc_wallet,splUsdcPayoutWallet:exists(e,"spl_usdc_payout_wallet")?e.spl_usdc_payout_wallet:void 0,supporterCount:e.supporter_count,supportingCount:e.supporting_count,totalAudioBalance:e.total_audio_balance,wallet:e.wallet,balance:e.balance,associatedWalletsBalance:e.associated_wallets_balance,totalBalance:e.total_balance,waudioBalance:e.waudio_balance,associatedSolWalletsBalance:e.associated_sol_wallets_balance,blocknumber:e.blocknumber,createdAt:e.created_at,isStorageV2:e.is_storage_v2,creatorNodeEndpoint:exists(e,"creator_node_endpoint")?e.creator_node_endpoint:void 0,currentUserFolloweeFollowCount:e.current_user_followee_follow_count,doesCurrentUserFollow:e.does_current_user_follow,doesCurrentUserSubscribe:e.does_current_user_subscribe,doesFollowCurrentUser:e.does_follow_current_user,handleLc:e.handle_lc,updatedAt:e.updated_at,coverPhotoSizes:exists(e,"cover_photo_sizes")?e.cover_photo_sizes:void 0,coverPhotoCids:exists(e,"cover_photo_cids")?CoverPhotoFromJSON(e.cover_photo_cids):void 0,coverPhotoLegacy:exists(e,"cover_photo_legacy")?e.cover_photo_legacy:void 0,profilePictureSizes:exists(e,"profile_picture_sizes")?e.profile_picture_sizes:void 0,profilePictureCids:exists(e,"profile_picture_cids")?ProfilePictureFromJSON(e.profile_picture_cids):void 0,profilePictureLegacy:exists(e,"profile_picture_legacy")?e.profile_picture_legacy:void 0,hasCollectibles:e.has_collectibles,playlistLibrary:exists(e,"playlist_library")?PlaylistLibraryFromJSON(e.playlist_library):void 0,allowAiAttribution:e.allow_ai_attribution,profileType:exists(e,"profile_type")?e.profile_type:void 0}}function AccountFullFromJSON(e){return AccountFullFromJSONTyped(e)}function AccountFullFromJSONTyped(e,t){return null==e?e:{user:UserFullFromJSON(e.user),playlists:e.playlists.map(AccountCollectionFromJSON),playlistLibrary:exists(e,"playlist_library")?PlaylistLibraryFromJSON(e.playlist_library):void 0,trackSaveCount:e.track_save_count}}function ActivityFullFromJSON(e){return ActivityFullFromJSONTyped(e,!1)}function ActivityFullFromJSONTyped(e,t){if(null==e)return e;if(!t){if("collection_activity_full"===e._class)return CollectionActivityFullFromJSONTyped(e,!0);if("collection_activity_full_without_tracks"===e._class)return CollectionActivityFullWithoutTracksFromJSONTyped(e,!0);if("track_activity_full"===e._class)return TrackActivityFullFromJSONTyped(e,!0)}return{timestamp:e.timestamp,itemType:e.item_type,item:e.item,_class:e.class}}function AlbumBacklinkFromJSON(e){return AlbumBacklinkFromJSONTyped(e)}function AlbumBacklinkFromJSONTyped(e,t){return null==e?e:{playlistId:e.playlist_id,playlistName:e.playlist_name,permalink:e.permalink}}function FavoriteFromJSON(e){return FavoriteFromJSONTyped(e)}function FavoriteFromJSONTyped(e,t){return null==e?e:{favoriteItemId:e.favorite_item_id,favoriteType:e.favorite_type,userId:e.user_id,createdAt:e.created_at}}function PlaylistAddedTimestampFromJSON(e){return PlaylistAddedTimestampFromJSONTyped(e)}function PlaylistAddedTimestampFromJSONTyped(e,t){return null==e?e:{metadataTimestamp:e.metadata_timestamp,timestamp:e.timestamp,trackId:e.track_id}}function PlaylistArtworkFromJSON(e){return PlaylistArtworkFromJSONTyped(e)}function PlaylistArtworkFromJSONTyped(e,t){return null==e?e:{_150x150:exists(e,"150x150")?e["150x150"]:void 0,_480x480:exists(e,"480x480")?e["480x480"]:void 0,_1000x1000:exists(e,"1000x1000")?e["1000x1000"]:void 0}}function PlaylistArtworkFullFromJSON(e){return PlaylistArtworkFullFromJSONTyped(e)}function PlaylistArtworkFullFromJSONTyped(e,t){return null==e?e:{_150x150:exists(e,"150x150")?e["150x150"]:void 0,_480x480:exists(e,"480x480")?e["480x480"]:void 0,_1000x1000:exists(e,"1000x1000")?e["1000x1000"]:void 0,mirrors:exists(e,"mirrors")?e.mirrors:void 0}}function RepostFromJSON(e){return RepostFromJSONTyped(e)}function RepostFromJSONTyped(e,t){return null==e?e:{repostItemId:e.repost_item_id,repostType:e.repost_type,userId:e.user_id}}function CoverArtFromJSON(e){return CoverArtFromJSONTyped(e)}function CoverArtFromJSONTyped(e,t){return null==e?e:{_150x150:exists(e,"150x150")?e["150x150"]:void 0,_480x480:exists(e,"480x480")?e["480x480"]:void 0,_1000x1000:exists(e,"1000x1000")?e["1000x1000"]:void 0}}function FieldVisibilityFromJSON(e){return FieldVisibilityFromJSONTyped(e)}function FieldVisibilityFromJSONTyped(e,t){return null==e?e:{mood:e.mood,tags:e.tags,genre:e.genre,share:e.share,playCount:e.play_count,remixes:e.remixes}}function FullRemixFromJSON(e){return FullRemixFromJSONTyped(e)}function FullRemixFromJSONTyped(e,t){return null==e?e:{parentTrackId:e.parent_track_id,user:UserFullFromJSON(e.user),hasRemixAuthorReposted:e.has_remix_author_reposted,hasRemixAuthorSaved:e.has_remix_author_saved}}function FullRemixParentFromJSON(e){return FullRemixParentFromJSONTyped(e)}function FullRemixParentFromJSONTyped(e,t){return null==e?e:{tracks:exists(e,"tracks")?e.tracks.map(FullRemixFromJSON):void 0}}function StemParentFromJSON(e){return StemParentFromJSONTyped(e)}function StemParentFromJSONTyped(e,t){return null==e?e:{category:e.category,parentTrackId:e.parent_track_id}}function TrackArtworkFullFromJSON(e){return TrackArtworkFullFromJSONTyped(e)}function TrackArtworkFullFromJSONTyped(e,t){return null==e?e:{_150x150:exists(e,"150x150")?e["150x150"]:void 0,_480x480:exists(e,"480x480")?e["480x480"]:void 0,_1000x1000:exists(e,"1000x1000")?e["1000x1000"]:void 0,mirrors:exists(e,"mirrors")?e.mirrors:void 0}}function TrackSegmentFromJSON(e){return TrackSegmentFromJSONTyped(e)}function TrackSegmentFromJSONTyped(e,t){return null==e?e:{duration:e.duration,multihash:e.multihash}}function UrlWithMirrorsFromJSON(e){return UrlWithMirrorsFromJSONTyped(e)}function UrlWithMirrorsFromJSONTyped(e,t){return null==e?e:{url:exists(e,"url")?e.url:void 0,mirrors:e.mirrors}}function TrackFullFromJSON(e){return TrackFullFromJSONTyped(e)}function TrackFullFromJSONTyped(e,t){return null==e?e:{artwork:TrackArtworkFullFromJSON(e.artwork),description:exists(e,"description")?e.description:void 0,genre:e.genre,id:e.id,trackCid:exists(e,"track_cid")?e.track_cid:void 0,previewCid:exists(e,"preview_cid")?e.preview_cid:void 0,origFileCid:exists(e,"orig_file_cid")?e.orig_file_cid:void 0,origFilename:exists(e,"orig_filename")?e.orig_filename:void 0,isOriginalAvailable:e.is_original_available,mood:exists(e,"mood")?e.mood:void 0,releaseDate:exists(e,"release_date")?e.release_date:void 0,remixOf:FullRemixParentFromJSON(e.remix_of),repostCount:e.repost_count,favoriteCount:e.favorite_count,commentCount:e.comment_count,tags:exists(e,"tags")?e.tags:void 0,title:e.title,user:UserFullFromJSON(e.user),duration:e.duration,isDownloadable:e.is_downloadable,playCount:e.play_count,permalink:e.permalink,isStreamable:exists(e,"is_streamable")?e.is_streamable:void 0,ddexApp:exists(e,"ddex_app")?e.ddex_app:void 0,playlistsContainingTrack:exists(e,"playlists_containing_track")?e.playlists_containing_track:void 0,pinnedCommentId:exists(e,"pinned_comment_id")?e.pinned_comment_id:void 0,albumBacklink:exists(e,"album_backlink")?AlbumBacklinkFromJSON(e.album_backlink):void 0,access:AccessFromJSON(e.access),blocknumber:e.blocknumber,createDate:exists(e,"create_date")?e.create_date:void 0,coverArtSizes:e.cover_art_sizes,coverArtCids:exists(e,"cover_art_cids")?CoverArtFromJSON(e.cover_art_cids):void 0,createdAt:e.created_at,creditsSplits:exists(e,"credits_splits")?e.credits_splits:void 0,isrc:exists(e,"isrc")?e.isrc:void 0,license:exists(e,"license")?e.license:void 0,iswc:exists(e,"iswc")?e.iswc:void 0,fieldVisibility:FieldVisibilityFromJSON(e.field_visibility),followeeReposts:e.followee_reposts.map(RepostFromJSON),hasCurrentUserReposted:e.has_current_user_reposted,isScheduledRelease:e.is_scheduled_release,isUnlisted:e.is_unlisted,hasCurrentUserSaved:e.has_current_user_saved,followeeFavorites:e.followee_favorites.map(FavoriteFromJSON),routeId:e.route_id,stemOf:exists(e,"stem_of")?StemParentFromJSON(e.stem_of):void 0,trackSegments:e.track_segments.map(TrackSegmentFromJSON),updatedAt:e.updated_at,userId:e.user_id,isDelete:e.is_delete,coverArt:exists(e,"cover_art")?e.cover_art:void 0,isAvailable:e.is_available,aiAttributionUserId:exists(e,"ai_attribution_user_id")?e.ai_attribution_user_id:void 0,allowedApiKeys:exists(e,"allowed_api_keys")?e.allowed_api_keys:void 0,audioUploadId:exists(e,"audio_upload_id")?e.audio_upload_id:void 0,previewStartSeconds:exists(e,"preview_start_seconds")?e.preview_start_seconds:void 0,bpm:exists(e,"bpm")?e.bpm:void 0,isCustomBpm:exists(e,"is_custom_bpm")?e.is_custom_bpm:void 0,musicalKey:exists(e,"musical_key")?e.musical_key:void 0,isCustomMusicalKey:exists(e,"is_custom_musical_key")?e.is_custom_musical_key:void 0,audioAnalysisErrorCount:exists(e,"audio_analysis_error_count")?e.audio_analysis_error_count:void 0,commentsDisabled:exists(e,"comments_disabled")?e.comments_disabled:void 0,ddexReleaseIds:exists(e,"ddex_release_ids")?e.ddex_release_ids:void 0,artists:exists(e,"artists")?e.artists:void 0,resourceContributors:exists(e,"resource_contributors")?e.resource_contributors:void 0,indirectResourceContributors:exists(e,"indirect_resource_contributors")?e.indirect_resource_contributors:void 0,rightsController:exists(e,"rights_controller")?e.rights_controller:void 0,copyrightLine:exists(e,"copyright_line")?e.copyright_line:void 0,producerCopyrightLine:exists(e,"producer_copyright_line")?e.producer_copyright_line:void 0,parentalWarningType:exists(e,"parental_warning_type")?e.parental_warning_type:void 0,isStreamGated:e.is_stream_gated,streamConditions:exists(e,"stream_conditions")?AccessGateFromJSON(e.stream_conditions):void 0,isDownloadGated:e.is_download_gated,downloadConditions:exists(e,"download_conditions")?AccessGateFromJSON(e.download_conditions):void 0,coverOriginalSongTitle:exists(e,"cover_original_song_title")?e.cover_original_song_title:void 0,coverOriginalArtist:exists(e,"cover_original_artist")?e.cover_original_artist:void 0,isOwnedByUser:e.is_owned_by_user,stream:UrlWithMirrorsFromJSON(e.stream),download:UrlWithMirrorsFromJSON(e.download),preview:UrlWithMirrorsFromJSON(e.preview)}}function PlaylistFullWithoutTracksFromJSON(e){return PlaylistFullWithoutTracksFromJSONTyped(e)}function PlaylistFullWithoutTracksFromJSONTyped(e,t){return null==e?e:{artwork:exists(e,"artwork")?PlaylistArtworkFullFromJSON(e.artwork):void 0,description:exists(e,"description")?e.description:void 0,permalink:e.permalink,id:e.id,isAlbum:e.is_album,isImageAutogenerated:e.is_image_autogenerated,playlistName:e.playlist_name,playlistContents:e.playlist_contents.map(PlaylistAddedTimestampFromJSON),repostCount:e.repost_count,favoriteCount:e.favorite_count,totalPlayCount:e.total_play_count,user:UserFullFromJSON(e.user),ddexApp:exists(e,"ddex_app")?e.ddex_app:void 0,access:AccessFromJSON(e.access),upc:exists(e,"upc")?e.upc:void 0,trackCount:e.track_count,blocknumber:e.blocknumber,createdAt:e.created_at,followeeReposts:e.followee_reposts.map(RepostFromJSON),followeeFavorites:e.followee_favorites.map(FavoriteFromJSON),hasCurrentUserReposted:e.has_current_user_reposted,hasCurrentUserSaved:e.has_current_user_saved,isDelete:e.is_delete,isPrivate:e.is_private,updatedAt:e.updated_at,addedTimestamps:e.added_timestamps.map(PlaylistAddedTimestampFromJSON),userId:e.user_id,tracks:exists(e,"tracks")?e.tracks.map(TrackFullFromJSON):void 0,coverArt:exists(e,"cover_art")?e.cover_art:void 0,coverArtSizes:exists(e,"cover_art_sizes")?e.cover_art_sizes:void 0,coverArtCids:exists(e,"cover_art_cids")?PlaylistArtworkFromJSON(e.cover_art_cids):void 0,isStreamGated:e.is_stream_gated,streamConditions:exists(e,"stream_conditions")?AccessGateFromJSON(e.stream_conditions):void 0,isScheduledRelease:e.is_scheduled_release,releaseDate:exists(e,"release_date")?e.release_date:void 0,ddexReleaseIds:exists(e,"ddex_release_ids")?e.ddex_release_ids:void 0,artists:exists(e,"artists")?e.artists:void 0,copyrightLine:exists(e,"copyright_line")?e.copyright_line:void 0,producerCopyrightLine:exists(e,"producer_copyright_line")?e.producer_copyright_line:void 0,parentalWarningType:exists(e,"parental_warning_type")?e.parental_warning_type:void 0}}function VersionMetadataFromJSON(e){return VersionMetadataFromJSONTyped(e)}function VersionMetadataFromJSONTyped(e,t){return null==e?e:{service:e.service,version:e.version}}function AlbumsResponseFullFromJSON(e){return AlbumsResponseFullFromJSONTyped(e)}function AlbumsResponseFullFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(PlaylistFullWithoutTracksFromJSON):void 0}}function AnnouncementNotificationActionDataFromJSON(e){return AnnouncementNotificationActionDataFromJSONTyped(e)}function AnnouncementNotificationActionDataFromJSONTyped(e,t){return null==e?e:{title:e.title,pushBody:e.push_body,shortDescription:e.short_description,longDescription:e.long_description}}function AnnouncementNotificationActionFromJSON(e){return AnnouncementNotificationActionFromJSONTyped(e)}function AnnouncementNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:AnnouncementNotificationActionDataFromJSON(e.data)}}function AnnouncementNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(AnnouncementNotificationActionFromJSON)}}function ApproveManagerRequestNotificationActionDataFromJSON(e){return ApproveManagerRequestNotificationActionDataFromJSONTyped(e)}function ApproveManagerRequestNotificationActionDataFromJSONTyped(e,t){return null==e?e:{userId:e.user_id,granteeUserId:e.grantee_user_id,granteeAddress:e.grantee_address}}function ApproveManagerRequestNotificationActionFromJSON(e){return ApproveManagerRequestNotificationActionFromJSONTyped(e)}function ApproveManagerRequestNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:ApproveManagerRequestNotificationActionDataFromJSON(e.data)}}function ApproveManagerRequestNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(ApproveManagerRequestNotificationActionFromJSON)}}function ArtistRemixContestEndedNotificationActionDataFromJSON(e){return ArtistRemixContestEndedNotificationActionDataFromJSONTyped(e)}function ArtistRemixContestEndedNotificationActionDataFromJSONTyped(e,t){return null==e?e:{entityId:e.entity_id}}function ArtistRemixContestEndedNotificationActionFromJSON(e){return ArtistRemixContestEndedNotificationActionFromJSONTyped(e)}function ArtistRemixContestEndedNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:ArtistRemixContestEndedNotificationActionDataFromJSON(e.data)}}function ArtistRemixContestEndedNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(ArtistRemixContestEndedNotificationActionFromJSON)}}function ArtistRemixContestEndingSoonNotificationActionDataFromJSON(e){return ArtistRemixContestEndingSoonNotificationActionDataFromJSONTyped(e)}function ArtistRemixContestEndingSoonNotificationActionDataFromJSONTyped(e,t){return null==e?e:{entityUserId:e.entity_user_id,entityId:e.entity_id}}function ArtistRemixContestEndingSoonNotificationActionFromJSON(e){return ArtistRemixContestEndingSoonNotificationActionFromJSONTyped(e)}function ArtistRemixContestEndingSoonNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:ArtistRemixContestEndingSoonNotificationActionDataFromJSON(e.data)}}function ArtistRemixContestEndingSoonNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(ArtistRemixContestEndingSoonNotificationActionFromJSON)}}function ArtistRemixContestSubmissionsNotificationActionDataFromJSON(e){return ArtistRemixContestSubmissionsNotificationActionDataFromJSONTyped(e)}function ArtistRemixContestSubmissionsNotificationActionDataFromJSONTyped(e,t){return null==e?e:{eventId:e.event_id,milestone:e.milestone,entityId:e.entity_id}}function ArtistRemixContestSubmissionsNotificationActionFromJSON(e){return ArtistRemixContestSubmissionsNotificationActionFromJSONTyped(e)}function ArtistRemixContestSubmissionsNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:ArtistRemixContestSubmissionsNotificationActionDataFromJSON(e.data)}}function ArtistRemixContestSubmissionsNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(ArtistRemixContestSubmissionsNotificationActionFromJSON)}}function BestSellingItemFromJSON(e){return BestSellingItemFromJSONTyped(e)}function BestSellingItemFromJSONTyped(e,t){return null==e?e:{contentId:e.content_id,contentType:exists(e,"content_type")?e.content_type:void 0,title:e.title,ownerId:e.owner_id}}function PlaylistFullFromJSON(e){return PlaylistFullFromJSONTyped(e)}function PlaylistFullFromJSONTyped(e,t){return null==e?e:{artwork:exists(e,"artwork")?PlaylistArtworkFullFromJSON(e.artwork):void 0,description:exists(e,"description")?e.description:void 0,permalink:e.permalink,id:e.id,isAlbum:e.is_album,isImageAutogenerated:e.is_image_autogenerated,playlistName:e.playlist_name,playlistContents:e.playlist_contents.map(PlaylistAddedTimestampFromJSON),repostCount:e.repost_count,favoriteCount:e.favorite_count,totalPlayCount:e.total_play_count,user:UserFullFromJSON(e.user),ddexApp:exists(e,"ddex_app")?e.ddex_app:void 0,access:AccessFromJSON(e.access),upc:exists(e,"upc")?e.upc:void 0,trackCount:e.track_count,blocknumber:e.blocknumber,createdAt:e.created_at,followeeReposts:e.followee_reposts.map(RepostFromJSON),followeeFavorites:e.followee_favorites.map(FavoriteFromJSON),hasCurrentUserReposted:e.has_current_user_reposted,hasCurrentUserSaved:e.has_current_user_saved,isDelete:e.is_delete,isPrivate:e.is_private,updatedAt:e.updated_at,addedTimestamps:e.added_timestamps.map(PlaylistAddedTimestampFromJSON),userId:e.user_id,tracks:exists(e,"tracks")?e.tracks.map(TrackFullFromJSON):void 0,coverArt:exists(e,"cover_art")?e.cover_art:void 0,coverArtSizes:exists(e,"cover_art_sizes")?e.cover_art_sizes:void 0,coverArtCids:exists(e,"cover_art_cids")?PlaylistArtworkFromJSON(e.cover_art_cids):void 0,isStreamGated:e.is_stream_gated,streamConditions:exists(e,"stream_conditions")?AccessGateFromJSON(e.stream_conditions):void 0,isScheduledRelease:e.is_scheduled_release,releaseDate:exists(e,"release_date")?e.release_date:void 0,ddexReleaseIds:exists(e,"ddex_release_ids")?e.ddex_release_ids:void 0,artists:exists(e,"artists")?e.artists:void 0,copyrightLine:exists(e,"copyright_line")?e.copyright_line:void 0,producerCopyrightLine:exists(e,"producer_copyright_line")?e.producer_copyright_line:void 0,parentalWarningType:exists(e,"parental_warning_type")?e.parental_warning_type:void 0}}function RelatedFromJSON(e){return RelatedFromJSONTyped(e)}function RelatedFromJSONTyped(e,t){return null==e?e:{users:exists(e,"users")?e.users.map(UserFullFromJSON):void 0,tracks:exists(e,"tracks")?e.tracks.map(TrackFullFromJSON):void 0,playlists:exists(e,"playlists")?e.playlists.map(PlaylistFullFromJSON):void 0}}function BestSellingFullResponseFromJSON(e){return BestSellingFullResponseFromJSONTyped(e)}function BestSellingFullResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(BestSellingItemFromJSON):void 0,related:exists(e,"related")?RelatedFromJSON(e.related):void 0}}function ChallengeRewardNotificationActionDataFromJSON(e){return ChallengeRewardNotificationActionDataFromJSONTyped(e)}function ChallengeRewardNotificationActionDataFromJSONTyped(e,t){return null==e?e:{amount:e.amount,specifier:e.specifier,challengeId:e.challenge_id,listenStreak:exists(e,"listen_streak")?e.listen_streak:void 0}}function ChallengeRewardNotificationActionFromJSON(e){return ChallengeRewardNotificationActionFromJSONTyped(e)}function ChallengeRewardNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:ChallengeRewardNotificationActionDataFromJSON(e.data)}}function ChallengeRewardNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(ChallengeRewardNotificationActionFromJSON)}}function CidDataFromJSON(e){return CidDataFromJSONTyped(e)}function CidDataFromJSONTyped(e,t){return null==e?e:{collectibles:exists(e,"collectibles")?e.collectibles:void 0,associatedSolWallets:exists(e,"associated_sol_wallets")?e.associated_sol_wallets:void 0,associatedWallets:exists(e,"associated_wallets")?e.associated_wallets:void 0}}function DataAndTypeFromJSON(e){return DataAndTypeFromJSONTyped(e)}function DataAndTypeFromJSONTyped(e,t){return null==e?e:{type:exists(e,"type")?e.type:void 0,data:exists(e,"data")?CidDataFromJSON(e.data):void 0}}function CidDataResponseFromJSON(e){return CidDataResponseFromJSONTyped(e)}function CidDataResponseFromJSONTyped(e,t){return null==e?e:{data:exists(e,"data")?DataAndTypeFromJSON(e.data):void 0}}function ClaimableRewardNotificationActionDataFromJSON(e){return ClaimableRewardNotificationActionDataFromJSONTyped(e)}function ClaimableRewardNotificationActionDataFromJSONTyped(e,t){return null==e?e:{amount:e.amount,specifier:e.specifier,challengeId:e.challenge_id}}function ClaimableRewardNotificationActionFromJSON(e){return ClaimableRewardNotificationActionFromJSONTyped(e)}function ClaimableRewardNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:ClaimableRewardNotificationActionDataFromJSON(e.data)}}function ClaimableRewardNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(ClaimableRewardNotificationActionFromJSON)}}function CollectionActivityFullFromJSONTyped(e,t){return null==e?e:{...ActivityFullFromJSONTyped(e,t),itemType:e.item_type,item:PlaylistFullFromJSON(e.item)}}function CollectionActivityFullWithoutTracksFromJSON(e){return CollectionActivityFullWithoutTracksFromJSONTyped(e,!1)}function CollectionActivityFullWithoutTracksFromJSONTyped(e,t){return null==e?e:{...ActivityFullFromJSONTyped(e,t),itemType:e.item_type,item:PlaylistFullWithoutTracksFromJSON(e.item)}}function CollectionLibraryResponseFullFromJSON(e){return CollectionLibraryResponseFullFromJSONTyped(e)}function CollectionLibraryResponseFullFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(CollectionActivityFullWithoutTracksFromJSON):void 0}}function CommentMentionFromJSON(e){return CommentMentionFromJSONTyped(e)}function CommentMentionFromJSONTyped(e,t){return null==e?e:{userId:e.user_id,handle:e.handle}}function ReplyCommentFromJSON(e){return ReplyCommentFromJSONTyped(e)}function ReplyCommentFromJSONTyped(e,t){return null==e?e:{id:e.id,entityId:e.entity_id,entityType:e.entity_type,userId:e.user_id,message:e.message,mentions:exists(e,"mentions")?e.mentions.map(CommentMentionFromJSON):void 0,trackTimestampS:exists(e,"track_timestamp_s")?e.track_timestamp_s:void 0,reactCount:e.react_count,isEdited:e.is_edited,isCurrentUserReacted:exists(e,"is_current_user_reacted")?e.is_current_user_reacted:void 0,isArtistReacted:exists(e,"is_artist_reacted")?e.is_artist_reacted:void 0,createdAt:e.created_at,updatedAt:exists(e,"updated_at")?e.updated_at:void 0,parentCommentId:exists(e,"parent_comment_id")?e.parent_comment_id:void 0}}function CommentFromJSON(e){return CommentFromJSONTyped(e)}function CommentFromJSONTyped(e,t){return null==e?e:{id:e.id,entityId:e.entity_id,entityType:e.entity_type,userId:exists(e,"user_id")?e.user_id:void 0,message:e.message,mentions:exists(e,"mentions")?e.mentions.map(CommentMentionFromJSON):void 0,trackTimestampS:exists(e,"track_timestamp_s")?e.track_timestamp_s:void 0,reactCount:e.react_count,replyCount:e.reply_count,isEdited:e.is_edited,isCurrentUserReacted:exists(e,"is_current_user_reacted")?e.is_current_user_reacted:void 0,isArtistReacted:exists(e,"is_artist_reacted")?e.is_artist_reacted:void 0,isTombstone:exists(e,"is_tombstone")?e.is_tombstone:void 0,isMuted:exists(e,"is_muted")?e.is_muted:void 0,createdAt:e.created_at,updatedAt:exists(e,"updated_at")?e.updated_at:void 0,replies:exists(e,"replies")?e.replies.map(ReplyCommentFromJSON):void 0,parentCommentId:exists(e,"parent_comment_id")?e.parent_comment_id:void 0}}function CommentMentionNotificationActionDataFromJSON(e){return CommentMentionNotificationActionDataFromJSONTyped(e)}function CommentMentionNotificationActionDataFromJSONTyped(e,t){return null==e?e:{type:e.type,entityId:e.entity_id,entityUserId:e.entity_user_id,commentUserId:e.comment_user_id,commentId:exists(e,"comment_id")?e.comment_id:void 0}}function CommentMentionNotificationActionFromJSON(e){return CommentMentionNotificationActionFromJSONTyped(e)}function CommentMentionNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:CommentMentionNotificationActionDataFromJSON(e.data)}}function CommentMentionNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(CommentMentionNotificationActionFromJSON)}}function CommentNotificationActionDataFromJSON(e){return CommentNotificationActionDataFromJSONTyped(e)}function CommentNotificationActionDataFromJSONTyped(e,t){return null==e?e:{type:e.type,entityId:e.entity_id,commentUserId:e.comment_user_id,commentId:exists(e,"comment_id")?e.comment_id:void 0}}function CommentNotificationActionFromJSON(e){return CommentNotificationActionFromJSONTyped(e)}function CommentNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:CommentNotificationActionDataFromJSON(e.data)}}function CommentNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(CommentNotificationActionFromJSON)}}function CommentReactionNotificationActionDataFromJSON(e){return CommentReactionNotificationActionDataFromJSONTyped(e)}function CommentReactionNotificationActionDataFromJSONTyped(e,t){return null==e?e:{type:e.type,entityId:e.entity_id,entityUserId:e.entity_user_id,reacterUserId:e.reacter_user_id,commentId:exists(e,"comment_id")?e.comment_id:void 0}}function CommentReactionNotificationActionFromJSON(e){return CommentReactionNotificationActionFromJSONTyped(e)}function CommentReactionNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:CommentReactionNotificationActionDataFromJSON(e.data)}}function CommentReactionNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(CommentReactionNotificationActionFromJSON)}}function CommentRepliesResponseFromJSON(e){return CommentRepliesResponseFromJSONTyped(e)}function CommentRepliesResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(ReplyCommentFromJSON):void 0,related:exists(e,"related")?RelatedFromJSON(e.related):void 0}}function CommentResponseFromJSON(e){return CommentResponseFromJSONTyped(e)}function CommentResponseFromJSONTyped(e,t){return null==e?e:{data:exists(e,"data")?e.data.map(CommentFromJSON):void 0}}function CommentThreadNotificationActionDataFromJSON(e){return CommentThreadNotificationActionDataFromJSONTyped(e)}function CommentThreadNotificationActionDataFromJSONTyped(e,t){return null==e?e:{type:e.type,entityId:e.entity_id,entityUserId:e.entity_user_id,commentUserId:e.comment_user_id,commentId:exists(e,"comment_id")?e.comment_id:void 0}}function CommentThreadNotificationActionFromJSON(e){return CommentThreadNotificationActionFromJSONTyped(e)}function CommentThreadNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:CommentThreadNotificationActionDataFromJSON(e.data)}}function CommentThreadNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(CommentThreadNotificationActionFromJSON)}}function CosignNotificationActionDataFromJSON(e){return CosignNotificationActionDataFromJSONTyped(e)}function CosignNotificationActionDataFromJSONTyped(e,t){return null==e?e:{parentTrackId:e.parent_track_id,trackId:e.track_id,trackOwnerId:e.track_owner_id}}function CosignNotificationActionFromJSON(e){return CosignNotificationActionFromJSONTyped(e)}function CosignNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:CosignNotificationActionDataFromJSON(e.data)}}function CosignNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(CosignNotificationActionFromJSON)}}function CreatePlaylistNotificationActionDataFromJSONTyped(e,t){return null==e?e:{isAlbum:e.is_album,playlistId:e.playlist_id}}function CreateTrackNotificationActionDataFromJSONTyped(e,t){return null==e?e:{trackId:e.track_id}}function CreateNotificationActionDataFromJSON(e){return CreateNotificationActionDataFromJSONTyped(e)}function CreateNotificationActionDataFromJSONTyped(e,t){return null==e?e:{...CreatePlaylistNotificationActionDataFromJSONTyped(e),...CreateTrackNotificationActionDataFromJSONTyped(e)}}function CreateNotificationActionFromJSON(e){return CreateNotificationActionFromJSONTyped(e)}function CreateNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:CreateNotificationActionDataFromJSON(e.data)}}function CreateNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(CreateNotificationActionFromJSON)}}function FanRemixContestEndedNotificationActionDataFromJSON(e){return FanRemixContestEndedNotificationActionDataFromJSONTyped(e)}function FanRemixContestEndedNotificationActionDataFromJSONTyped(e,t){return null==e?e:{entityUserId:e.entity_user_id,entityId:e.entity_id}}function FanRemixContestEndedNotificationActionFromJSON(e){return FanRemixContestEndedNotificationActionFromJSONTyped(e)}function FanRemixContestEndedNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:FanRemixContestEndedNotificationActionDataFromJSON(e.data)}}function FanRemixContestEndedNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(FanRemixContestEndedNotificationActionFromJSON)}}function FanRemixContestEndingSoonNotificationActionDataFromJSON(e){return FanRemixContestEndingSoonNotificationActionDataFromJSONTyped(e)}function FanRemixContestEndingSoonNotificationActionDataFromJSONTyped(e,t){return null==e?e:{entityUserId:e.entity_user_id,entityId:e.entity_id}}function FanRemixContestEndingSoonNotificationActionFromJSON(e){return FanRemixContestEndingSoonNotificationActionFromJSONTyped(e)}function FanRemixContestEndingSoonNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:FanRemixContestEndingSoonNotificationActionDataFromJSON(e.data)}}function FanRemixContestEndingSoonNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(FanRemixContestEndingSoonNotificationActionFromJSON)}}function FanRemixContestStartedNotificationActionDataFromJSON(e){return FanRemixContestStartedNotificationActionDataFromJSONTyped(e)}function FanRemixContestStartedNotificationActionDataFromJSONTyped(e,t){return null==e?e:{entityUserId:e.entity_user_id,entityId:e.entity_id}}function FanRemixContestStartedNotificationActionFromJSON(e){return FanRemixContestStartedNotificationActionFromJSONTyped(e)}function FanRemixContestStartedNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:FanRemixContestStartedNotificationActionDataFromJSON(e.data)}}function FanRemixContestStartedNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(FanRemixContestStartedNotificationActionFromJSON)}}function FanRemixContestWinnersSelectedNotificationActionDataFromJSON(e){return FanRemixContestWinnersSelectedNotificationActionDataFromJSONTyped(e)}function FanRemixContestWinnersSelectedNotificationActionDataFromJSONTyped(e,t){return null==e?e:{entityUserId:e.entity_user_id,entityId:e.entity_id}}function FanRemixContestWinnersSelectedNotificationActionFromJSON(e){return FanRemixContestWinnersSelectedNotificationActionFromJSONTyped(e)}function FanRemixContestWinnersSelectedNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:FanRemixContestWinnersSelectedNotificationActionDataFromJSON(e.data)}}function FanRemixContestWinnersSelectedNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(FanRemixContestWinnersSelectedNotificationActionFromJSON)}}function FollowNotificationActionDataFromJSON(e){return FollowNotificationActionDataFromJSONTyped(e)}function FollowNotificationActionDataFromJSONTyped(e,t){return null==e?e:{followerUserId:e.follower_user_id,followeeUserId:e.followee_user_id}}function FollowNotificationActionFromJSON(e){return FollowNotificationActionFromJSONTyped(e)}function FollowNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:FollowNotificationActionDataFromJSON(e.data)}}function FollowNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(FollowNotificationActionFromJSON)}}function FollowingResponseFromJSON(e){return FollowingResponseFromJSONTyped(e)}function FollowingResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(UserFullFromJSON):void 0}}function FollowingResponseFullFromJSON(e){return FollowingResponseFullFromJSONTyped(e)}function FollowingResponseFullFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(UserFullFromJSON):void 0}}function UserSubscribersFromJSON(e){return UserSubscribersFromJSONTyped(e)}function UserSubscribersFromJSONTyped(e,t){return null==e?e:{userId:e.user_id,subscriberIds:exists(e,"subscriber_ids")?e.subscriber_ids:void 0}}function FullBulkSubscribersResponseFromJSON(e){return FullBulkSubscribersResponseFromJSONTyped(e)}function FullBulkSubscribersResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(UserSubscribersFromJSON):void 0}}function FullFollowersResponseFromJSON(e){return FullFollowersResponseFromJSONTyped(e)}function FullFollowersResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(UserFullFromJSON):void 0}}function FullSupportingFromJSON(e){return FullSupportingFromJSONTyped(e)}function FullSupportingFromJSONTyped(e,t){return null==e?e:{rank:e.rank,amount:e.amount,receiver:UserFullFromJSON(e.receiver)}}function FullGetSupportedUsersFromJSON(e){return FullGetSupportedUsersFromJSONTyped(e)}function FullGetSupportedUsersFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(FullSupportingFromJSON):void 0}}function FullSupporterFromJSON(e){return FullSupporterFromJSONTyped(e)}function FullSupporterFromJSONTyped(e,t){return null==e?e:{rank:e.rank,amount:e.amount,sender:UserFullFromJSON(e.sender)}}function FullGetSupporterFromJSON(e){return FullGetSupporterFromJSONTyped(e)}function FullGetSupporterFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?FullSupporterFromJSON(e.data):void 0}}function FullGetSupportersFromJSON(e){return FullGetSupportersFromJSONTyped(e)}function FullGetSupportersFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(FullSupporterFromJSON):void 0}}function FullGetSupportingFromJSON(e){return FullGetSupportingFromJSONTyped(e)}function FullGetSupportingFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?FullSupportingFromJSON(e.data):void 0}}function FullMutualFollowersResponseFromJSON(e){return FullMutualFollowersResponseFromJSONTyped(e)}function FullMutualFollowersResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(UserFullFromJSON):void 0}}function FullPlaylistResponseFromJSON(e){return FullPlaylistResponseFromJSONTyped(e)}function FullPlaylistResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(PlaylistFullFromJSON):void 0}}function FullPlaylistTracksResponseFromJSON(e){return FullPlaylistTracksResponseFromJSONTyped(e)}function FullPlaylistTracksResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(TrackFullFromJSON):void 0}}function FullPurchasersResponseFromJSON(e){return FullPurchasersResponseFromJSONTyped(e)}function FullPurchasersResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(UserFullFromJSON):void 0}}function FullRemixersResponseFromJSON(e){return FullRemixersResponseFromJSONTyped(e)}function FullRemixersResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(UserFullFromJSON):void 0}}function FullRepostsFromJSON(e){return FullRepostsFromJSONTyped(e)}function FullRepostsFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(ActivityFullFromJSON):void 0}}function FullSubscribersResponseFromJSON(e){return FullSubscribersResponseFromJSONTyped(e)}function FullSubscribersResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(UserFullFromJSON):void 0}}function SupporterReferenceFromJSON(e){return SupporterReferenceFromJSONTyped(e)}function SupporterReferenceFromJSONTyped(e,t){return null==e?e:{userId:e.user_id}}function FullTipFromJSON(e){return FullTipFromJSONTyped(e)}function FullTipFromJSONTyped(e,t){return null==e?e:{amount:e.amount,sender:UserFullFromJSON(e.sender),receiver:UserFullFromJSON(e.receiver),createdAt:e.created_at,slot:e.slot,followeeSupporters:e.followee_supporters.map(SupporterReferenceFromJSON),txSignature:e.tx_signature}}function FullTopListenerFromJSON(e){return FullTopListenerFromJSONTyped(e)}function FullTopListenerFromJSONTyped(e,t){return null==e?e:{data:exists(e,"data")?e.data.map(FullTopListenerFromJSON):void 0}}function FullTrackResponseFromJSON(e){return FullTrackResponseFromJSONTyped(e)}function FullTrackResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?TrackFullFromJSON(e.data):void 0}}function FullTracksFromJSON(e){return FullTracksFromJSONTyped(e)}function FullTracksFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(TrackFullFromJSON):void 0}}function FullTracksResponseFromJSON(e){return FullTracksResponseFromJSONTyped(e)}function FullTracksResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(TrackFullFromJSON):void 0}}function FullTrendingPlaylistsResponseFromJSON(e){return FullTrendingPlaylistsResponseFromJSONTyped(e)}function FullTrendingPlaylistsResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(PlaylistFullFromJSON):void 0}}function FullUserResponseFromJSON(e){return FullUserResponseFromJSONTyped(e)}function FullUserResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(UserFullFromJSON):void 0}}function GetTipsResponseFromJSON(e){return GetTipsResponseFromJSONTyped(e)}function GetTipsResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(FullTipFromJSON):void 0}}function GrantFromJSON(e){return GrantFromJSONTyped(e)}function GrantFromJSONTyped(e,t){return null==e?e:{granteeAddress:e.grantee_address,userId:e.user_id,isRevoked:e.is_revoked,isApproved:e.is_approved,createdAt:e.created_at,updatedAt:e.updated_at}}function TrackActivityFullFromJSON(e){return TrackActivityFullFromJSONTyped(e,!1)}function TrackActivityFullFromJSONTyped(e,t){return null==e?e:{...ActivityFullFromJSONTyped(e,t),itemType:e.item_type,item:TrackFullFromJSON(e.item)}}function HistoryResponseFullFromJSON(e){return HistoryResponseFullFromJSONTyped(e)}function HistoryResponseFullFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(TrackActivityFullFromJSON):void 0}}function ListenStreakReminderNotificationActionDataFromJSON(e){return ListenStreakReminderNotificationActionDataFromJSONTyped(e)}function ListenStreakReminderNotificationActionDataFromJSONTyped(e,t){return null==e?e:{streak:e.streak}}function ListenStreakReminderNotificationActionFromJSON(e){return ListenStreakReminderNotificationActionFromJSONTyped(e)}function ListenStreakReminderNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:ListenStreakReminderNotificationActionDataFromJSON(e.data)}}function ListenStreakReminderNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(ListenStreakReminderNotificationActionFromJSON)}}function ManagedUserFromJSON(e){return ManagedUserFromJSONTyped(e)}function ManagedUserFromJSONTyped(e,t){return null==e?e:{user:UserFullFromJSON(e.user),grant:GrantFromJSON(e.grant)}}function ManagedUsersResponseFromJSON(e){return ManagedUsersResponseFromJSONTyped(e)}function ManagedUsersResponseFromJSONTyped(e,t){return null==e?e:{data:exists(e,"data")?e.data.map(ManagedUserFromJSON):void 0}}function UserManagerFromJSON(e){return UserManagerFromJSONTyped(e)}function UserManagerFromJSONTyped(e,t){return null==e?e:{manager:UserFullFromJSON(e.manager),grant:GrantFromJSON(e.grant)}}function ManagersResponseFromJSON(e){return ManagersResponseFromJSONTyped(e)}function ManagersResponseFromJSONTyped(e,t){return null==e?e:{data:exists(e,"data")?e.data.map(UserManagerFromJSON):void 0}}function PlaylistMilestoneNotificationActionDataFromJSONTyped(e,t){return null==e?e:{type:e.type,threshold:e.threshold,playlistId:e.playlist_id,isAlbum:e.is_album}}function TrackMilestoneNotificationActionDataFromJSONTyped(e,t){return null==e?e:{type:e.type,threshold:e.threshold,trackId:e.track_id}}function UserMilestoneNotificationActionDataFromJSONTyped(e,t){return null==e?e:{type:e.type,threshold:e.threshold,userId:e.user_id}}function MilestoneNotificationActionDataFromJSON(e){return MilestoneNotificationActionDataFromJSONTyped(e)}function MilestoneNotificationActionDataFromJSONTyped(e,t){return null==e?e:{...PlaylistMilestoneNotificationActionDataFromJSONTyped(e),...TrackMilestoneNotificationActionDataFromJSONTyped(e),...UserMilestoneNotificationActionDataFromJSONTyped(e)}}function MilestoneNotificationActionFromJSON(e){return MilestoneNotificationActionFromJSONTyped(e)}function MilestoneNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:MilestoneNotificationActionDataFromJSON(e.data)}}function MilestoneNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(MilestoneNotificationActionFromJSON)}}function ReactionNotificationActionDataFromJSON(e){return ReactionNotificationActionDataFromJSONTyped(e)}function ReactionNotificationActionDataFromJSONTyped(e,t){return null==e?e:{reactedTo:e.reacted_to,reactionType:e.reaction_type,reactionValue:e.reaction_value,receiverUserId:e.receiver_user_id,senderUserId:e.sender_user_id,senderWallet:e.sender_wallet,tipAmount:e.tip_amount}}function ReactionNotificationActionFromJSON(e){return ReactionNotificationActionFromJSONTyped(e)}function ReactionNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:ReactionNotificationActionDataFromJSON(e.data)}}function ReactionNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(ReactionNotificationActionFromJSON)}}function ReceiveTipNotificationActionDataFromJSON(e){return ReceiveTipNotificationActionDataFromJSONTyped(e)}function ReceiveTipNotificationActionDataFromJSONTyped(e,t){return null==e?e:{amount:e.amount,senderUserId:e.sender_user_id,receiverUserId:e.receiver_user_id,tipTxSignature:e.tip_tx_signature,reactionValue:e.reaction_value}}function ReceiveTipNotificationActionFromJSON(e){return ReceiveTipNotificationActionFromJSONTyped(e)}function ReceiveTipNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:ReceiveTipNotificationActionDataFromJSON(e.data)}}function ReceiveTipNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(ReceiveTipNotificationActionFromJSON)}}function RemixNotificationActionDataFromJSON(e){return RemixNotificationActionDataFromJSONTyped(e)}function RemixNotificationActionDataFromJSONTyped(e,t){return null==e?e:{parentTrackId:e.parent_track_id,trackId:e.track_id}}function RemixNotificationActionFromJSON(e){return RemixNotificationActionFromJSONTyped(e)}function RemixNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:RemixNotificationActionDataFromJSON(e.data)}}function RemixNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(RemixNotificationActionFromJSON)}}function RepostNotificationActionDataFromJSON(e){return RepostNotificationActionDataFromJSONTyped(e)}function RepostNotificationActionDataFromJSONTyped(e,t){return null==e?e:{type:e.type,userId:e.user_id,repostItemId:e.repost_item_id}}function RepostNotificationActionFromJSON(e){return RepostNotificationActionFromJSONTyped(e)}function RepostNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:RepostNotificationActionDataFromJSON(e.data)}}function RepostNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(RepostNotificationActionFromJSON)}}function RepostOfRepostNotificationActionDataFromJSON(e){return RepostOfRepostNotificationActionDataFromJSONTyped(e)}function RepostOfRepostNotificationActionDataFromJSONTyped(e,t){return null==e?e:{type:e.type,userId:e.user_id,repostOfRepostItemId:e.repost_of_repost_item_id}}function RepostOfRepostNotificationActionFromJSON(e){return RepostOfRepostNotificationActionFromJSONTyped(e)}function RepostOfRepostNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:RepostOfRepostNotificationActionDataFromJSON(e.data)}}function RepostOfRepostNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(RepostOfRepostNotificationActionFromJSON)}}function RequestManagerNotificationActionDataFromJSON(e){return RequestManagerNotificationActionDataFromJSONTyped(e)}function RequestManagerNotificationActionDataFromJSONTyped(e,t){return null==e?e:{userId:e.user_id,granteeUserId:e.grantee_user_id,granteeAddress:e.grantee_address}}function RequestManagerNotificationActionFromJSON(e){return RequestManagerNotificationActionFromJSONTyped(e)}function RequestManagerNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:RequestManagerNotificationActionDataFromJSON(e.data)}}function RequestManagerNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(RequestManagerNotificationActionFromJSON)}}function SaveNotificationActionDataFromJSON(e){return SaveNotificationActionDataFromJSONTyped(e)}function SaveNotificationActionDataFromJSONTyped(e,t){return null==e?e:{type:e.type,userId:e.user_id,saveItemId:e.save_item_id}}function SaveNotificationActionFromJSON(e){return SaveNotificationActionFromJSONTyped(e)}function SaveNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:SaveNotificationActionDataFromJSON(e.data)}}function SaveNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(SaveNotificationActionFromJSON)}}function SaveOfRepostNotificationActionDataFromJSON(e){return SaveOfRepostNotificationActionDataFromJSONTyped(e)}function SaveOfRepostNotificationActionDataFromJSONTyped(e,t){return null==e?e:{type:e.type,userId:e.user_id,saveOfRepostItemId:e.save_of_repost_item_id}}function SaveOfRepostNotificationActionFromJSON(e){return SaveOfRepostNotificationActionFromJSONTyped(e)}function SaveOfRepostNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:SaveOfRepostNotificationActionDataFromJSON(e.data)}}function SaveOfRepostNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(SaveOfRepostNotificationActionFromJSON)}}function SendTipNotificationActionDataFromJSON(e){return SendTipNotificationActionDataFromJSONTyped(e)}function SendTipNotificationActionDataFromJSONTyped(e,t){return null==e?e:{amount:e.amount,senderUserId:e.sender_user_id,receiverUserId:e.receiver_user_id,tipTxSignature:e.tip_tx_signature}}function SendTipNotificationActionFromJSON(e){return SendTipNotificationActionFromJSONTyped(e)}function SendTipNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:SendTipNotificationActionDataFromJSON(e.data)}}function SendTipNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(SendTipNotificationActionFromJSON)}}function SupporterDethronedNotificationActionDataFromJSON(e){return SupporterDethronedNotificationActionDataFromJSONTyped(e)}function SupporterDethronedNotificationActionDataFromJSONTyped(e,t){return null==e?e:{dethronedUserId:e.dethroned_user_id,senderUserId:e.sender_user_id,receiverUserId:e.receiver_user_id}}function SupporterDethronedNotificationActionFromJSON(e){return SupporterDethronedNotificationActionFromJSONTyped(e)}function SupporterDethronedNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:SupporterDethronedNotificationActionDataFromJSON(e.data)}}function SupporterDethronedNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(SupporterDethronedNotificationActionFromJSON)}}function SupporterRankUpNotificationActionDataFromJSON(e){return SupporterRankUpNotificationActionDataFromJSONTyped(e)}function SupporterRankUpNotificationActionDataFromJSONTyped(e,t){return null==e?e:{rank:e.rank,senderUserId:e.sender_user_id,receiverUserId:e.receiver_user_id}}function SupporterRankUpNotificationActionFromJSON(e){return SupporterRankUpNotificationActionFromJSONTyped(e)}function SupporterRankUpNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:SupporterRankUpNotificationActionDataFromJSON(e.data)}}function SupporterRankUpNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(SupporterRankUpNotificationActionFromJSON)}}function TastemakerNotificationActionDataFromJSON(e){return TastemakerNotificationActionDataFromJSONTyped(e)}function TastemakerNotificationActionDataFromJSONTyped(e,t){return null==e?e:{tastemakerItemOwnerId:e.tastemaker_item_owner_id,tastemakerItemId:e.tastemaker_item_id,action:e.action,tastemakerItemType:e.tastemaker_item_type,tastemakerUserId:e.tastemaker_user_id}}function TastemakerNotificationActionFromJSON(e){return TastemakerNotificationActionFromJSONTyped(e)}function TastemakerNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:TastemakerNotificationActionDataFromJSON(e.data)}}function TastemakerNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(TastemakerNotificationActionFromJSON)}}function TierChangeNotificationActionDataFromJSON(e){return TierChangeNotificationActionDataFromJSONTyped(e)}function TierChangeNotificationActionDataFromJSONTyped(e,t){return null==e?e:{newTier:e.new_tier,currentValue:e.current_value,newTierValue:e.new_tier_value}}function TierChangeNotificationActionFromJSON(e){return TierChangeNotificationActionFromJSONTyped(e)}function TierChangeNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:TierChangeNotificationActionDataFromJSON(e.data)}}function TierChangeNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(TierChangeNotificationActionFromJSON)}}function TrackAddedToPlaylistNotificationActionDataFromJSON(e){return TrackAddedToPlaylistNotificationActionDataFromJSONTyped(e)}function TrackAddedToPlaylistNotificationActionDataFromJSONTyped(e,t){return null==e?e:{trackId:e.track_id,playlistId:e.playlist_id,playlistOwnerId:e.playlist_owner_id}}function TrackAddedToPlaylistNotificationActionFromJSON(e){return TrackAddedToPlaylistNotificationActionFromJSONTyped(e)}function TrackAddedToPlaylistNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:TrackAddedToPlaylistNotificationActionDataFromJSON(e.data)}}function TrackAddedToPlaylistNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(TrackAddedToPlaylistNotificationActionFromJSON)}}function TrackAddedToPurchasedAlbumNotificationActionDataFromJSON(e){return TrackAddedToPurchasedAlbumNotificationActionDataFromJSONTyped(e)}function TrackAddedToPurchasedAlbumNotificationActionDataFromJSONTyped(e,t){return null==e?e:{trackId:e.track_id,playlistId:e.playlist_id,playlistOwnerId:e.playlist_owner_id}}function TrackAddedToPurchasedAlbumNotificationActionFromJSON(e){return TrackAddedToPurchasedAlbumNotificationActionFromJSONTyped(e)}function TrackAddedToPurchasedAlbumNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:TrackAddedToPurchasedAlbumNotificationActionDataFromJSON(e.data)}}function TrackAddedToPurchasedAlbumNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(TrackAddedToPurchasedAlbumNotificationActionFromJSON)}}function TrendingNotificationActionDataFromJSON(e){return TrendingNotificationActionDataFromJSONTyped(e)}function TrendingNotificationActionDataFromJSONTyped(e,t){return null==e?e:{rank:e.rank,genre:e.genre,trackId:e.track_id,timeRange:e.time_range}}function TrendingNotificationActionFromJSON(e){return TrendingNotificationActionFromJSONTyped(e)}function TrendingNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:TrendingNotificationActionDataFromJSON(e.data)}}function TrendingNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(TrendingNotificationActionFromJSON)}}function TrendingPlaylistNotificationActionDataFromJSON(e){return TrendingPlaylistNotificationActionDataFromJSONTyped(e)}function TrendingPlaylistNotificationActionDataFromJSONTyped(e,t){return null==e?e:{rank:e.rank,genre:e.genre,playlistId:e.playlist_id,timeRange:e.time_range}}function TrendingPlaylistNotificationActionFromJSON(e){return TrendingPlaylistNotificationActionFromJSONTyped(e)}function TrendingPlaylistNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:TrendingPlaylistNotificationActionDataFromJSON(e.data)}}function TrendingPlaylistNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(TrendingPlaylistNotificationActionFromJSON)}}function TrendingUndergroundNotificationActionDataFromJSON(e){return TrendingUndergroundNotificationActionDataFromJSONTyped(e)}function TrendingUndergroundNotificationActionDataFromJSONTyped(e,t){return null==e?e:{rank:e.rank,genre:e.genre,trackId:e.track_id,timeRange:e.time_range}}function TrendingUndergroundNotificationActionFromJSON(e){return TrendingUndergroundNotificationActionFromJSONTyped(e)}function TrendingUndergroundNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:TrendingUndergroundNotificationActionDataFromJSON(e.data)}}function TrendingUndergroundNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(TrendingUndergroundNotificationActionFromJSON)}}function UsdcPurchaseBuyerNotificationActionDataFromJSON(e){return UsdcPurchaseBuyerNotificationActionDataFromJSONTyped(e)}function UsdcPurchaseBuyerNotificationActionDataFromJSONTyped(e,t){return null==e?e:{contentType:e.content_type,buyerUserId:e.buyer_user_id,sellerUserId:e.seller_user_id,amount:e.amount,extraAmount:e.extra_amount,contentId:e.content_id}}function UsdcPurchaseBuyerNotificationActionFromJSON(e){return UsdcPurchaseBuyerNotificationActionFromJSONTyped(e)}function UsdcPurchaseBuyerNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:UsdcPurchaseBuyerNotificationActionDataFromJSON(e.data)}}function UsdcPurchaseBuyerNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(UsdcPurchaseBuyerNotificationActionFromJSON)}}function UsdcPurchaseSellerNotificationActionDataFromJSON(e){return UsdcPurchaseSellerNotificationActionDataFromJSONTyped(e)}function UsdcPurchaseSellerNotificationActionDataFromJSONTyped(e,t){return null==e?e:{contentType:e.content_type,buyerUserId:e.buyer_user_id,sellerUserId:e.seller_user_id,amount:e.amount,extraAmount:e.extra_amount,contentId:e.content_id}}function UsdcPurchaseSellerNotificationActionFromJSON(e){return UsdcPurchaseSellerNotificationActionFromJSONTyped(e)}function UsdcPurchaseSellerNotificationActionFromJSONTyped(e,t){return null==e?e:{specifier:e.specifier,type:e.type,timestamp:e.timestamp,data:UsdcPurchaseSellerNotificationActionDataFromJSON(e.data)}}function UsdcPurchaseSellerNotificationFromJSONTyped(e,t){return null==e?e:{type:e.type,groupId:e.group_id,isSeen:e.is_seen,seenAt:exists(e,"seen_at")?e.seen_at:void 0,actions:e.actions.map(UsdcPurchaseSellerNotificationActionFromJSON)}}function NotificationFromJSON(e){return NotificationFromJSONTyped(e)}function NotificationFromJSONTyped(e,t){if(null==e)return e;switch(e.type){case"announcement":return{...AnnouncementNotificationFromJSONTyped(e),type:"announcement"};case"approve_manager_request":return{...ApproveManagerRequestNotificationFromJSONTyped(e),type:"approve_manager_request"};case"artist_remix_contest_ended":return{...ArtistRemixContestEndedNotificationFromJSONTyped(e),type:"artist_remix_contest_ended"};case"artist_remix_contest_ending_soon":return{...ArtistRemixContestEndingSoonNotificationFromJSONTyped(e),type:"artist_remix_contest_ending_soon"};case"artist_remix_contest_submissions":return{...ArtistRemixContestSubmissionsNotificationFromJSONTyped(e),type:"artist_remix_contest_submissions"};case"challenge_reward":return{...ChallengeRewardNotificationFromJSONTyped(e),type:"challenge_reward"};case"claimable_reward":return{...ClaimableRewardNotificationFromJSONTyped(e),type:"claimable_reward"};case"comment":return{...CommentNotificationFromJSONTyped(e),type:"comment"};case"comment_mention":return{...CommentMentionNotificationFromJSONTyped(e),type:"comment_mention"};case"comment_reaction":return{...CommentReactionNotificationFromJSONTyped(e),type:"comment_reaction"};case"comment_thread":return{...CommentThreadNotificationFromJSONTyped(e),type:"comment_thread"};case"cosign":return{...CosignNotificationFromJSONTyped(e),type:"cosign"};case"create":return{...CreateNotificationFromJSONTyped(e),type:"create"};case"fan_remix_contest_ended":return{...FanRemixContestEndedNotificationFromJSONTyped(e),type:"fan_remix_contest_ended"};case"fan_remix_contest_ending_soon":return{...FanRemixContestEndingSoonNotificationFromJSONTyped(e),type:"fan_remix_contest_ending_soon"};case"fan_remix_contest_started":return{...FanRemixContestStartedNotificationFromJSONTyped(e),type:"fan_remix_contest_started"};case"fan_remix_contest_winners_selected":return{...FanRemixContestWinnersSelectedNotificationFromJSONTyped(e),type:"fan_remix_contest_winners_selected"};case"follow":return{...FollowNotificationFromJSONTyped(e),type:"follow"};case"listen_streak_reminder":return{...ListenStreakReminderNotificationFromJSONTyped(e),type:"listen_streak_reminder"};case"milestone":return{...MilestoneNotificationFromJSONTyped(e),type:"milestone"};case"reaction":return{...ReactionNotificationFromJSONTyped(e),type:"reaction"};case"remix":return{...RemixNotificationFromJSONTyped(e),type:"remix"};case"repost":return{...RepostNotificationFromJSONTyped(e),type:"repost"};case"repost_of_repost":return{...RepostOfRepostNotificationFromJSONTyped(e),type:"repost_of_repost"};case"request_manager":return{...RequestManagerNotificationFromJSONTyped(e),type:"request_manager"};case"save":return{...SaveNotificationFromJSONTyped(e),type:"save"};case"save_of_repost":return{...SaveOfRepostNotificationFromJSONTyped(e),type:"save_of_repost"};case"supporter_dethroned":return{...SupporterDethronedNotificationFromJSONTyped(e),type:"supporter_dethroned"};case"supporter_rank_up":return{...SupporterRankUpNotificationFromJSONTyped(e),type:"supporter_rank_up"};case"supporting_rank_up":return{...SupporterRankUpNotificationFromJSONTyped(e),type:"supporting_rank_up"};case"tastemaker":return{...TastemakerNotificationFromJSONTyped(e),type:"tastemaker"};case"tier_change":return{...TierChangeNotificationFromJSONTyped(e),type:"tier_change"};case"tip_receive":return{...ReceiveTipNotificationFromJSONTyped(e),type:"tip_receive"};case"tip_send":return{...SendTipNotificationFromJSONTyped(e),type:"tip_send"};case"track_added_to_playlist":return{...TrackAddedToPlaylistNotificationFromJSONTyped(e),type:"track_added_to_playlist"};case"track_added_to_purchased_album":return{...TrackAddedToPurchasedAlbumNotificationFromJSONTyped(e),type:"track_added_to_purchased_album"};case"trending":return{...TrendingNotificationFromJSONTyped(e),type:"trending"};case"trending_playlist":return{...TrendingPlaylistNotificationFromJSONTyped(e),type:"trending_playlist"};case"trending_underground":return{...TrendingUndergroundNotificationFromJSONTyped(e),type:"trending_underground"};case"usdc_purchase_buyer":return{...UsdcPurchaseBuyerNotificationFromJSONTyped(e),type:"usdc_purchase_buyer"};case"usdc_purchase_seller":return{...UsdcPurchaseSellerNotificationFromJSONTyped(e),type:"usdc_purchase_seller"};default:throw new Error(`No variant of Notification exists with 'type=${e.type}'`)}}function NotificationsFromJSON(e){return NotificationsFromJSONTyped(e)}function NotificationsFromJSONTyped(e,t){return null==e?e:{notifications:exists(e,"notifications")?e.notifications.map(NotificationFromJSON):void 0,unreadCount:e.unread_count}}function NotificationsResponseFromJSON(e){return NotificationsResponseFromJSONTyped(e)}function NotificationsResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?NotificationsFromJSON(e.data):void 0}}function PlaylistFeedItemFromJSONTyped(e,t){return null==e?e:{type:e.type,item:PlaylistFullFromJSON(e.item)}}function PlaylistUpdateFromJSON(e){return PlaylistUpdateFromJSONTyped(e)}function PlaylistUpdateFromJSONTyped(e,t){return null==e?e:{playlistId:e.playlist_id,updatedAt:e.updated_at,lastSeenAt:exists(e,"last_seen_at")?e.last_seen_at:void 0}}function PlaylistUpdatesFromJSON(e){return PlaylistUpdatesFromJSONTyped(e)}function PlaylistUpdatesFromJSONTyped(e,t){return null==e?e:{playlistUpdates:exists(e,"playlist_updates")?e.playlist_updates.map(PlaylistUpdateFromJSON):void 0}}function PlaylistUpdatesResponseFromJSON(e){return PlaylistUpdatesResponseFromJSONTyped(e)}function PlaylistUpdatesResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?PlaylistUpdatesFromJSON(e.data):void 0}}function PlaylistsResponseFullFromJSON(e){return PlaylistsResponseFullFromJSONTyped(e)}function PlaylistsResponseFullFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(PlaylistFullWithoutTracksFromJSON):void 0}}function PurchaseSplitFromJSON(e){return PurchaseSplitFromJSONTyped(e)}function PurchaseSplitFromJSONTyped(e,t){return null==e?e:{userId:exists(e,"user_id")?e.user_id:void 0,payoutWallet:e.payout_wallet,amount:e.amount}}function PurchaseFromJSON(e){return PurchaseFromJSONTyped(e)}function PurchaseFromJSONTyped(e,t){return null==e?e:{slot:e.slot,signature:e.signature,sellerUserId:e.seller_user_id,buyerUserId:e.buyer_user_id,amount:e.amount,extraAmount:e.extra_amount,contentType:e.content_type,contentId:e.content_id,createdAt:e.created_at,updatedAt:e.updated_at,access:e.access,splits:e.splits.map(PurchaseSplitFromJSON)}}function PurchasersCountResponseFromJSON(e){return PurchasersCountResponseFromJSONTyped(e)}function PurchasersCountResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data:void 0}}function PurchasesCountResponseFromJSON(e){return PurchasesCountResponseFromJSONTyped(e)}function PurchasesCountResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data:void 0}}function PurchasesResponseFromJSON(e){return PurchasesResponseFromJSONTyped(e)}function PurchasesResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(PurchaseFromJSON):void 0}}function ReactionFromJSON(e){return ReactionFromJSONTyped(e)}function ReactionFromJSONTyped(e,t){return null==e?e:{reactionValue:e.reaction_value,reactionType:e.reaction_type,senderUserId:e.sender_user_id,reactedTo:e.reacted_to}}function ReactionsFromJSON(e){return ReactionsFromJSONTyped(e)}function ReactionsFromJSONTyped(e,t){return null==e?e:{data:exists(e,"data")?e.data.map(ReactionFromJSON):void 0}}function RelatedArtistResponseFullFromJSON(e){return RelatedArtistResponseFullFromJSONTyped(e)}function RelatedArtistResponseFullFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(UserFullFromJSON):void 0}}function RemixablesResponseFromJSON(e){return RemixablesResponseFromJSONTyped(e)}function RemixablesResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(TrackFullFromJSON):void 0}}function RemixersCountResponseFromJSON(e){return RemixersCountResponseFromJSONTyped(e)}function RemixersCountResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data:void 0}}function RemixesResponseFromJSON(e){return RemixesResponseFromJSONTyped(e)}function RemixesResponseFromJSONTyped(e,t){return null==e?e:{count:e.count,tracks:exists(e,"tracks")?e.tracks.map(TrackFullFromJSON):void 0}}function RemixesResponseFullFromJSON(e){return RemixesResponseFullFromJSONTyped(e)}function RemixesResponseFullFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?RemixesResponseFromJSON(e.data):void 0}}function RemixingResponseFromJSON(e){return RemixingResponseFromJSONTyped(e)}function RemixingResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(TrackFullFromJSON):void 0}}function SearchPlaylistFullFromJSON(e){return SearchPlaylistFullFromJSONTyped(e)}function SearchPlaylistFullFromJSONTyped(e,t){return null==e?e:{artwork:exists(e,"artwork")?PlaylistArtworkFullFromJSON(e.artwork):void 0,description:exists(e,"description")?e.description:void 0,permalink:e.permalink,id:e.id,isAlbum:e.is_album,isImageAutogenerated:e.is_image_autogenerated,playlistName:e.playlist_name,playlistContents:e.playlist_contents.map(PlaylistAddedTimestampFromJSON),repostCount:e.repost_count,favoriteCount:e.favorite_count,totalPlayCount:e.total_play_count,user:UserFullFromJSON(e.user),ddexApp:exists(e,"ddex_app")?e.ddex_app:void 0,access:AccessFromJSON(e.access),upc:exists(e,"upc")?e.upc:void 0,trackCount:e.track_count,blocknumber:e.blocknumber,createdAt:e.created_at,followeeReposts:exists(e,"followee_reposts")?e.followee_reposts.map(RepostFromJSON):void 0,followeeFavorites:exists(e,"followee_favorites")?e.followee_favorites.map(FavoriteFromJSON):void 0,hasCurrentUserReposted:e.has_current_user_reposted,hasCurrentUserSaved:e.has_current_user_saved,isDelete:e.is_delete,isPrivate:e.is_private,updatedAt:e.updated_at,addedTimestamps:e.added_timestamps.map(PlaylistAddedTimestampFromJSON),userId:e.user_id,tracks:exists(e,"tracks")?e.tracks.map(TrackFullFromJSON):void 0,coverArt:exists(e,"cover_art")?e.cover_art:void 0,coverArtSizes:exists(e,"cover_art_sizes")?e.cover_art_sizes:void 0,coverArtCids:exists(e,"cover_art_cids")?PlaylistArtworkFromJSON(e.cover_art_cids):void 0,isStreamGated:e.is_stream_gated,streamConditions:exists(e,"stream_conditions")?AccessGateFromJSON(e.stream_conditions):void 0,isScheduledRelease:e.is_scheduled_release,releaseDate:exists(e,"release_date")?e.release_date:void 0,ddexReleaseIds:exists(e,"ddex_release_ids")?e.ddex_release_ids:void 0,artists:exists(e,"artists")?e.artists:void 0,copyrightLine:exists(e,"copyright_line")?e.copyright_line:void 0,producerCopyrightLine:exists(e,"producer_copyright_line")?e.producer_copyright_line:void 0,parentalWarningType:exists(e,"parental_warning_type")?e.parental_warning_type:void 0}}function SearchTrackFullFromJSON(e){return SearchTrackFullFromJSONTyped(e)}function SearchTrackFullFromJSONTyped(e,t){return null==e?e:{artwork:TrackArtworkFullFromJSON(e.artwork),description:exists(e,"description")?e.description:void 0,genre:e.genre,id:e.id,trackCid:exists(e,"track_cid")?e.track_cid:void 0,previewCid:exists(e,"preview_cid")?e.preview_cid:void 0,origFileCid:exists(e,"orig_file_cid")?e.orig_file_cid:void 0,origFilename:exists(e,"orig_filename")?e.orig_filename:void 0,isOriginalAvailable:e.is_original_available,mood:exists(e,"mood")?e.mood:void 0,releaseDate:exists(e,"release_date")?e.release_date:void 0,remixOf:FullRemixParentFromJSON(e.remix_of),repostCount:e.repost_count,favoriteCount:e.favorite_count,commentCount:e.comment_count,tags:exists(e,"tags")?e.tags:void 0,title:e.title,user:UserFullFromJSON(e.user),duration:e.duration,isDownloadable:e.is_downloadable,playCount:e.play_count,permalink:e.permalink,isStreamable:exists(e,"is_streamable")?e.is_streamable:void 0,ddexApp:exists(e,"ddex_app")?e.ddex_app:void 0,playlistsContainingTrack:exists(e,"playlists_containing_track")?e.playlists_containing_track:void 0,pinnedCommentId:exists(e,"pinned_comment_id")?e.pinned_comment_id:void 0,albumBacklink:exists(e,"album_backlink")?AlbumBacklinkFromJSON(e.album_backlink):void 0,access:AccessFromJSON(e.access),blocknumber:e.blocknumber,createDate:exists(e,"create_date")?e.create_date:void 0,coverArtSizes:e.cover_art_sizes,coverArtCids:exists(e,"cover_art_cids")?CoverArtFromJSON(e.cover_art_cids):void 0,createdAt:e.created_at,creditsSplits:exists(e,"credits_splits")?e.credits_splits:void 0,isrc:exists(e,"isrc")?e.isrc:void 0,license:exists(e,"license")?e.license:void 0,iswc:exists(e,"iswc")?e.iswc:void 0,fieldVisibility:FieldVisibilityFromJSON(e.field_visibility),followeeReposts:exists(e,"followee_reposts")?e.followee_reposts.map(RepostFromJSON):void 0,hasCurrentUserReposted:e.has_current_user_reposted,isScheduledRelease:e.is_scheduled_release,isUnlisted:e.is_unlisted,hasCurrentUserSaved:e.has_current_user_saved,followeeFavorites:exists(e,"followee_favorites")?e.followee_favorites.map(FavoriteFromJSON):void 0,routeId:e.route_id,stemOf:exists(e,"stem_of")?StemParentFromJSON(e.stem_of):void 0,trackSegments:e.track_segments.map(TrackSegmentFromJSON),updatedAt:e.updated_at,userId:e.user_id,isDelete:e.is_delete,coverArt:exists(e,"cover_art")?e.cover_art:void 0,isAvailable:e.is_available,aiAttributionUserId:exists(e,"ai_attribution_user_id")?e.ai_attribution_user_id:void 0,allowedApiKeys:exists(e,"allowed_api_keys")?e.allowed_api_keys:void 0,audioUploadId:exists(e,"audio_upload_id")?e.audio_upload_id:void 0,previewStartSeconds:exists(e,"preview_start_seconds")?e.preview_start_seconds:void 0,bpm:exists(e,"bpm")?e.bpm:void 0,isCustomBpm:exists(e,"is_custom_bpm")?e.is_custom_bpm:void 0,musicalKey:exists(e,"musical_key")?e.musical_key:void 0,isCustomMusicalKey:exists(e,"is_custom_musical_key")?e.is_custom_musical_key:void 0,audioAnalysisErrorCount:exists(e,"audio_analysis_error_count")?e.audio_analysis_error_count:void 0,commentsDisabled:exists(e,"comments_disabled")?e.comments_disabled:void 0,ddexReleaseIds:exists(e,"ddex_release_ids")?e.ddex_release_ids:void 0,artists:exists(e,"artists")?e.artists:void 0,resourceContributors:exists(e,"resource_contributors")?e.resource_contributors:void 0,indirectResourceContributors:exists(e,"indirect_resource_contributors")?e.indirect_resource_contributors:void 0,rightsController:exists(e,"rights_controller")?e.rights_controller:void 0,copyrightLine:exists(e,"copyright_line")?e.copyright_line:void 0,producerCopyrightLine:exists(e,"producer_copyright_line")?e.producer_copyright_line:void 0,parentalWarningType:exists(e,"parental_warning_type")?e.parental_warning_type:void 0,isStreamGated:e.is_stream_gated,streamConditions:exists(e,"stream_conditions")?AccessGateFromJSON(e.stream_conditions):void 0,isDownloadGated:e.is_download_gated,downloadConditions:exists(e,"download_conditions")?AccessGateFromJSON(e.download_conditions):void 0,coverOriginalSongTitle:exists(e,"cover_original_song_title")?e.cover_original_song_title:void 0,coverOriginalArtist:exists(e,"cover_original_artist")?e.cover_original_artist:void 0,isOwnedByUser:e.is_owned_by_user,stream:UrlWithMirrorsFromJSON(e.stream),download:UrlWithMirrorsFromJSON(e.download),preview:UrlWithMirrorsFromJSON(e.preview)}}function SearchModelFromJSON(e){return SearchModelFromJSONTyped(e)}function SearchModelFromJSONTyped(e,t){return null==e?e:{users:e.users.map(UserFullFromJSON),followedUsers:exists(e,"followed_users")?e.followed_users.map(UserFullFromJSON):void 0,tracks:e.tracks.map(SearchTrackFullFromJSON),savedTracks:exists(e,"saved_tracks")?e.saved_tracks.map(SearchTrackFullFromJSON):void 0,playlists:e.playlists.map(SearchPlaylistFullFromJSON),savedPlaylists:exists(e,"saved_playlists")?e.saved_playlists.map(SearchPlaylistFullFromJSON):void 0,albums:e.albums.map(SearchPlaylistFullFromJSON),savedAlbums:exists(e,"saved_albums")?e.saved_albums.map(SearchPlaylistFullFromJSON):void 0}}function SearchAutocompleteResponseFromJSON(e){return SearchAutocompleteResponseFromJSONTyped(e)}function SearchAutocompleteResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?SearchModelFromJSON(e.data):void 0}}function SearchFullResponseFromJSON(e){return SearchFullResponseFromJSONTyped(e)}function SearchFullResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?SearchModelFromJSON(e.data):void 0}}function StemFullFromJSON(e){return StemFullFromJSONTyped(e)}function StemFullFromJSONTyped(e,t){return null==e?e:{id:e.id,parentId:e.parent_id,category:e.category,cid:e.cid,userId:e.user_id,blocknumber:e.blocknumber,origFilename:e.orig_filename}}function StemsResponseFromJSON(e){return StemsResponseFromJSONTyped(e)}function StemsResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(StemFullFromJSON):void 0}}function TopGenreUsersResponseFullFromJSON(e){return TopGenreUsersResponseFullFromJSONTyped(e)}function TopGenreUsersResponseFullFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(UserFullFromJSON):void 0}}function TopUsersResponseFullFromJSON(e){return TopUsersResponseFullFromJSONTyped(e)}function TopUsersResponseFullFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(UserFullFromJSON):void 0}}function TrackCommentsResponseFullFromJSON(e){return TrackCommentsResponseFullFromJSONTyped(e)}function TrackCommentsResponseFullFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(CommentFromJSON):void 0,related:exists(e,"related")?RelatedFromJSON(e.related):void 0}}function TrackFavoritesResponseFullFromJSON(e){return TrackFavoritesResponseFullFromJSONTyped(e)}function TrackFavoritesResponseFullFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(UserFullFromJSON):void 0}}function TrackFeedItemFromJSONTyped(e,t){return null==e?e:{type:e.type,item:TrackFullFromJSON(e.item)}}function TrackIdFromJSON(e){return TrackIdFromJSONTyped(e)}function TrackIdFromJSONTyped(e,t){return null==e?e:{id:e.id}}function TrackLibraryResponseFullFromJSON(e){return TrackLibraryResponseFullFromJSONTyped(e)}function TrackLibraryResponseFullFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(TrackActivityFullFromJSON):void 0}}function TrackRepostsResponseFullFromJSON(e){return TrackRepostsResponseFullFromJSONTyped(e)}function TrackRepostsResponseFullFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(UserFullFromJSON):void 0}}function TransactionDetailsFromJSON(e){return TransactionDetailsFromJSONTyped(e)}function TransactionDetailsFromJSONTyped(e,t){return null==e?e:{transactionDate:e.transaction_date,transactionType:e.transaction_type,method:e.method,signature:e.signature,userBank:e.user_bank,change:e.change,balance:e.balance,metadata:e.metadata}}function TransactionHistoryCountResponseFromJSON(e){return TransactionHistoryCountResponseFromJSONTyped(e)}function TransactionHistoryCountResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data:void 0}}function TransactionHistoryResponseFromJSON(e){return TransactionHistoryResponseFromJSONTyped(e)}function TransactionHistoryResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(TransactionDetailsFromJSON):void 0}}function TrendingTimesIdsFromJSON(e){return TrendingTimesIdsFromJSONTyped(e)}function TrendingTimesIdsFromJSONTyped(e,t){return null==e?e:{week:exists(e,"week")?e.week.map(TrackIdFromJSON):void 0,month:exists(e,"month")?e.month.map(TrackIdFromJSON):void 0,year:exists(e,"year")?e.year.map(TrackIdFromJSON):void 0}}function TrendingIdsResponseFromJSON(e){return TrendingIdsResponseFromJSONTyped(e)}function TrendingIdsResponseFromJSONTyped(e,t){return null==e?e:{data:exists(e,"data")?TrendingTimesIdsFromJSON(e.data):void 0}}function UserAccountResponseFullFromJSON(e){return UserAccountResponseFullFromJSONTyped(e)}function UserAccountResponseFullFromJSONTyped(e,t){return null==e?e:{data:exists(e,"data")?AccountFullFromJSON(e.data):void 0}}function UserCommentsResponseFullFromJSON(e){return UserCommentsResponseFullFromJSONTyped(e)}function UserCommentsResponseFullFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(CommentFromJSON):void 0,related:exists(e,"related")?RelatedFromJSON(e.related):void 0}}function UserFeedItemFromJSON(e){return UserFeedItemFromJSONTyped(e)}function UserFeedItemFromJSONTyped(e,t){if(null==e)return e;switch(e.type){case"playlist":return{...PlaylistFeedItemFromJSONTyped(e),type:"playlist"};case"track":return{...TrackFeedItemFromJSONTyped(e),type:"track"};default:throw new Error(`No variant of UserFeedItem exists with 'type=${e.type}'`)}}function UserFeedResponseFromJSON(e){return UserFeedResponseFromJSONTyped(e)}function UserFeedResponseFromJSONTyped(e,t){return null==e?e:{latestChainBlock:e.latest_chain_block,latestIndexedBlock:e.latest_indexed_block,latestChainSlotPlays:e.latest_chain_slot_plays,latestIndexedSlotPlays:e.latest_indexed_slot_plays,signature:e.signature,timestamp:e.timestamp,version:VersionMetadataFromJSON(e.version),data:exists(e,"data")?e.data.map(UserFeedItemFromJSON):void 0}}class CidDataApi extends BaseAPI{async getMetadataRaw(e,t){if(null===e.metadataId||void 0===e.metadataId)throw new RequiredError("metadataId","Required parameter params.metadataId was null or undefined when calling getMetadata.");const r=await this.request({path:"/cid_data/{metadata_id}".replace("{metadata_id}",encodeURIComponent(String(e.metadataId))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse(r,(e=>CidDataResponseFromJSON(e)))}async getMetadata(e,t){const r=await this.getMetadataRaw(e,t);return await r.value()}}class CommentsApi extends BaseAPI{async getCommentRaw(e,t){if(null===e.commentId||void 0===e.commentId)throw new RequiredError("commentId","Required parameter params.commentId was null or undefined when calling getComment.");const r=await this.request({path:"/comments/{comment_id}".replace("{comment_id}",encodeURIComponent(String(e.commentId))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse(r,(e=>CommentResponseFromJSON(e)))}async getComment(e,t){const r=await this.getCommentRaw(e,t);return await r.value()}async getCommentRepliesRaw(e,t){if(null===e.commentId||void 0===e.commentId)throw new RequiredError("commentId","Required parameter params.commentId was null or undefined when calling getCommentReplies.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/comments/{comment_id}/replies".replace("{comment_id}",encodeURIComponent(String(e.commentId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>CommentRepliesResponseFromJSON(e)))}async getCommentReplies(e,t){const r=await this.getCommentRepliesRaw(e,t);return await r.value()}}class ExploreApi extends BaseAPI{async getFullBestSellingRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.type&&(r.type=e.type);const n=await this.request({path:"/explore/best-selling",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>BestSellingFullResponseFromJSON(e)))}async getFullBestSelling(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getFullBestSellingRaw(e,t);return await r.value()}}class NotificationsApi$1 extends BaseAPI{async getNotificationsRaw(e,t){if(null===e.userId||void 0===e.userId)throw new RequiredError("userId","Required parameter params.userId was null or undefined when calling getNotifications.");const r={};void 0!==e.timestamp&&(r.timestamp=e.timestamp),void 0!==e.groupId&&(r.group_id=e.groupId),void 0!==e.limit&&(r.limit=e.limit),e.types&&(r.types=e.types);const n=await this.request({path:"/notifications/{user_id}".replace("{user_id}",encodeURIComponent(String(e.userId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>NotificationsResponseFromJSON(e)))}async getNotifications(e,t){const r=await this.getNotificationsRaw(e,t);return await r.value()}async getPlaylistUpdatesRaw(e,t){if(null===e.userId||void 0===e.userId)throw new RequiredError("userId","Required parameter params.userId was null or undefined when calling getPlaylistUpdates.");const r=await this.request({path:"/notifications/{user_id}/playlist_updates".replace("{user_id}",encodeURIComponent(String(e.userId))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse(r,(e=>PlaylistUpdatesResponseFromJSON(e)))}async getPlaylistUpdates(e,t){const r=await this.getPlaylistUpdatesRaw(e,t);return await r.value()}}class PlaylistsApi extends BaseAPI{async getBulkPlaylistsRaw(e,t){const r={};void 0!==e.userId&&(r.user_id=e.userId),e.id&&(r.id=e.id),e.upc&&(r.upc=e.upc);const n=await this.request({path:"/playlists",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullPlaylistResponseFromJSON(e)))}async getBulkPlaylists(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getBulkPlaylistsRaw(e,t);return await r.value()}async getPlaylistRaw(e,t){if(null===e.playlistId||void 0===e.playlistId)throw new RequiredError("playlistId","Required parameter params.playlistId was null or undefined when calling getPlaylist.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/playlists/{playlist_id}".replace("{playlist_id}",encodeURIComponent(String(e.playlistId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullPlaylistResponseFromJSON(e)))}async getPlaylist(e,t){const r=await this.getPlaylistRaw(e,t);return await r.value()}async getPlaylistByHandleAndSlugRaw(e,t){if(null===e.handle||void 0===e.handle)throw new RequiredError("handle","Required parameter params.handle was null or undefined when calling getPlaylistByHandleAndSlug.");if(null===e.slug||void 0===e.slug)throw new RequiredError("slug","Required parameter params.slug was null or undefined when calling getPlaylistByHandleAndSlug.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/playlists/by_permalink/{handle}/{slug}".replace("{handle}",encodeURIComponent(String(e.handle))).replace("{slug}",encodeURIComponent(String(e.slug))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullPlaylistResponseFromJSON(e)))}async getPlaylistByHandleAndSlug(e,t){const r=await this.getPlaylistByHandleAndSlugRaw(e,t);return await r.value()}async getPlaylistTracksRaw(e,t){if(null===e.playlistId||void 0===e.playlistId)throw new RequiredError("playlistId","Required parameter params.playlistId was null or undefined when calling getPlaylistTracks.");const r=await this.request({path:"/playlists/{playlist_id}/tracks".replace("{playlist_id}",encodeURIComponent(String(e.playlistId))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse(r,(e=>FullPlaylistTracksResponseFromJSON(e)))}async getPlaylistTracks(e,t){const r=await this.getPlaylistTracksRaw(e,t);return await r.value()}async getTrendingPlaylistsRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.time&&(r.time=e.time),void 0!==e.type&&(r.type=e.type),void 0!==e.omitTracks&&(r.omit_tracks=e.omitTracks);const n=await this.request({path:"/playlists/trending",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTrendingPlaylistsResponseFromJSON(e)))}async getTrendingPlaylists(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getTrendingPlaylistsRaw(e,t);return await r.value()}async getTrendingPlaylistsWithVersionRaw(e,t){if(null===e.version||void 0===e.version)throw new RequiredError("version","Required parameter params.version was null or undefined when calling getTrendingPlaylistsWithVersion.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.time&&(r.time=e.time);const n=await this.request({path:"/playlists/trending/{version}".replace("{version}",encodeURIComponent(String(e.version))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTrendingPlaylistsResponseFromJSON(e)))}async getTrendingPlaylistsWithVersion(e,t){const r=await this.getTrendingPlaylistsWithVersionRaw(e,t);return await r.value()}async getUsersFromPlaylistFavoritesRaw(e,t){if(null===e.playlistId||void 0===e.playlistId)throw new RequiredError("playlistId","Required parameter params.playlistId was null or undefined when calling getUsersFromPlaylistFavorites.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/playlists/{playlist_id}/favorites".replace("{playlist_id}",encodeURIComponent(String(e.playlistId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FollowingResponseFromJSON(e)))}async getUsersFromPlaylistFavorites(e,t){const r=await this.getUsersFromPlaylistFavoritesRaw(e,t);return await r.value()}async getUsersFromPlaylistRepostsRaw(e,t){if(null===e.playlistId||void 0===e.playlistId)throw new RequiredError("playlistId","Required parameter params.playlistId was null or undefined when calling getUsersFromPlaylistReposts.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/playlists/{playlist_id}/reposts".replace("{playlist_id}",encodeURIComponent(String(e.playlistId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FollowingResponseFromJSON(e)))}async getUsersFromPlaylistReposts(e,t){const r=await this.getUsersFromPlaylistRepostsRaw(e,t);return await r.value()}}class ReactionsApi extends BaseAPI{async bulkGetReactionsRaw(e,t){if(null===e.reactedToIds||void 0===e.reactedToIds)throw new RequiredError("reactedToIds","Required parameter params.reactedToIds was null or undefined when calling bulkGetReactions.");const r={};void 0!==e.type&&(r.type=e.type),e.reactedToIds&&(r.reacted_to_ids=e.reactedToIds.join(COLLECTION_FORMATS.csv));const n=await this.request({path:"/reactions",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>ReactionsFromJSON(e)))}async bulkGetReactions(e,t){const r=await this.bulkGetReactionsRaw(e,t);return await r.value()}}class SearchApi extends BaseAPI{async searchRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.query&&(r.query=e.query),void 0!==e.kind&&(r.kind=e.kind),void 0!==e.includePurchaseable&&(r.includePurchaseable=e.includePurchaseable),e.genre&&(r.genre=e.genre),e.mood&&(r.mood=e.mood),void 0!==e.isVerified&&(r.is_verified=e.isVerified),void 0!==e.hasDownloads&&(r.has_downloads=e.hasDownloads),void 0!==e.isPurchaseable&&(r.is_purchaseable=e.isPurchaseable),e.key&&(r.key=e.key),void 0!==e.bpmMin&&(r.bpm_min=e.bpmMin),void 0!==e.bpmMax&&(r.bpm_max=e.bpmMax),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod);const n=await this.request({path:"/search/full",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>SearchFullResponseFromJSON(e)))}async search(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.searchRaw(e,t);return await r.value()}async searchAutocompleteRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.query&&(r.query=e.query),void 0!==e.kind&&(r.kind=e.kind),void 0!==e.includePurchaseable&&(r.includePurchaseable=e.includePurchaseable),e.genre&&(r.genre=e.genre),e.mood&&(r.mood=e.mood),void 0!==e.isVerified&&(r.is_verified=e.isVerified),void 0!==e.hasDownloads&&(r.has_downloads=e.hasDownloads),void 0!==e.isPurchaseable&&(r.is_purchaseable=e.isPurchaseable),e.key&&(r.key=e.key),void 0!==e.bpmMin&&(r.bpm_min=e.bpmMin),void 0!==e.bpmMax&&(r.bpm_max=e.bpmMax),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod);const n=await this.request({path:"/search/autocomplete",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>SearchAutocompleteResponseFromJSON(e)))}async searchAutocomplete(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.searchAutocompleteRaw(e,t);return await r.value()}async searchTagsRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.query&&(r.query=e.query),void 0!==e.kind&&(r.kind=e.kind),void 0!==e.includePurchaseable&&(r.includePurchaseable=e.includePurchaseable),e.genre&&(r.genre=e.genre),e.mood&&(r.mood=e.mood),void 0!==e.isVerified&&(r.is_verified=e.isVerified),void 0!==e.hasDownloads&&(r.has_downloads=e.hasDownloads),void 0!==e.isPurchaseable&&(r.is_purchaseable=e.isPurchaseable),e.key&&(r.key=e.key),void 0!==e.bpmMin&&(r.bpm_min=e.bpmMin),void 0!==e.bpmMax&&(r.bpm_max=e.bpmMax),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod);const n=await this.request({path:"/search/tags",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>SearchFullResponseFromJSON(e)))}async searchTags(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.searchTagsRaw(e,t);return await r.value()}}class TipsApi extends BaseAPI{async getTipsRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.receiverMinFollowers&&(r.receiver_min_followers=e.receiverMinFollowers),void 0!==e.receiverIsVerified&&(r.receiver_is_verified=e.receiverIsVerified),void 0!==e.currentUserFollows&&(r.current_user_follows=e.currentUserFollows),void 0!==e.uniqueBy&&(r.unique_by=e.uniqueBy),void 0!==e.minSlot&&(r.min_slot=e.minSlot),void 0!==e.maxSlot&&(r.max_slot=e.maxSlot),e.txSignatures&&(r.tx_signatures=e.txSignatures.join(COLLECTION_FORMATS.csv));const n=await this.request({path:"/tips",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>GetTipsResponseFromJSON(e)))}async getTips(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getTipsRaw(e,t);return await r.value()}}class TracksApi$1 extends BaseAPI{async getBestNewReleasesRaw(e,t){if(null===e.window||void 0===e.window)throw new RequiredError("window","Required parameter params.window was null or undefined when calling getBestNewReleases.");const r={};void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.window&&(r.window=e.window),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.withUsers&&(r.with_users=e.withUsers);const n=await this.request({path:"/tracks/best_new_releases",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getBestNewReleases(e,t){const r=await this.getBestNewReleasesRaw(e,t);return await r.value()}async getBulkTracksRaw(e,t){const r={};void 0!==e.userId&&(r.user_id=e.userId),e.permalink&&(r.permalink=e.permalink),e.id&&(r.id=e.id),e.isrc&&(r.isrc=e.isrc);const n=await this.request({path:"/tracks",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getBulkTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getBulkTracksRaw(e,t);return await r.value()}async getFeelingLuckyTracksRaw(e,t){const r={};void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.withUsers&&(r.with_users=e.withUsers),void 0!==e.minFollowers&&(r.min_followers=e.minFollowers);const n=await this.request({path:"/tracks/feeling-lucky",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getFeelingLuckyTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getFeelingLuckyTracksRaw(e,t);return await r.value()}async getMostLovedTracksRaw(e,t){const r={};void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.withUsers&&(r.with_users=e.withUsers);const n=await this.request({path:"/tracks/most_loved",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getMostLovedTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getMostLovedTracksRaw(e,t);return await r.value()}async getMostSharedTracksRaw(e,t){const r={};void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.offset&&(r.offset=e.offset),void 0!==e.timeRange&&(r.time_range=e.timeRange);const n=await this.request({path:"/tracks/most-shared",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getMostSharedTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getMostSharedTracksRaw(e,t);return await r.value()}async getRecentPremiumTracksRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/tracks/recent-premium",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getRecentPremiumTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getRecentPremiumTracksRaw(e,t);return await r.value()}async getRecommendedTracksRaw(e,t){const r={};void 0!==e.limit&&(r.limit=e.limit),void 0!==e.genre&&(r.genre=e.genre),void 0!==e.time&&(r.time=e.time),e.exclusionList&&(r.exclusion_list=e.exclusionList),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/tracks/recommended",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getRecommendedTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getRecommendedTracksRaw(e,t);return await r.value()}async getRecommendedTracksWithVersionRaw(e,t){if(null===e.version||void 0===e.version)throw new RequiredError("version","Required parameter params.version was null or undefined when calling getRecommendedTracksWithVersion.");const r={};void 0!==e.limit&&(r.limit=e.limit),void 0!==e.genre&&(r.genre=e.genre),void 0!==e.time&&(r.time=e.time),e.exclusionList&&(r.exclusion_list=e.exclusionList),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/tracks/recommended/{version}".replace("{version}",encodeURIComponent(String(e.version))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getRecommendedTracksWithVersion(e,t){const r=await this.getRecommendedTracksWithVersionRaw(e,t);return await r.value()}async getRemixableTracksRaw(e,t){const r={};void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.withUsers&&(r.with_users=e.withUsers);const n=await this.request({path:"/tracks/remixables",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>RemixablesResponseFromJSON(e)))}async getRemixableTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getRemixableTracksRaw(e,t);return await r.value()}async getTrackRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError("trackId","Required parameter params.trackId was null or undefined when calling getTrack.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/tracks/{track_id}".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTrackResponseFromJSON(e)))}async getTrack(e,t){const r=await this.getTrackRaw(e,t);return await r.value()}async getTrackCommentsRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError("trackId","Required parameter params.trackId was null or undefined when calling getTrackComments.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod);const n=await this.request({path:"/tracks/{track_id}/comments".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>TrackCommentsResponseFullFromJSON(e)))}async getTrackComments(e,t){const r=await this.getTrackCommentsRaw(e,t);return await r.value()}async getTrackRemixParentsRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError("trackId","Required parameter params.trackId was null or undefined when calling getTrackRemixParents.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/tracks/{track_id}/remixing".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>RemixingResponseFromJSON(e)))}async getTrackRemixParents(e,t){const r=await this.getTrackRemixParentsRaw(e,t);return await r.value()}async getTrackRemixesRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError("trackId","Required parameter params.trackId was null or undefined when calling getTrackRemixes.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.onlyCosigns&&(r.only_cosigns=e.onlyCosigns),void 0!==e.onlyContestEntries&&(r.only_contest_entries=e.onlyContestEntries);const n=await this.request({path:"/tracks/{track_id}/remixes".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>RemixesResponseFullFromJSON(e)))}async getTrackRemixes(e,t){const r=await this.getTrackRemixesRaw(e,t);return await r.value()}async getTrackStemsRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError("trackId","Required parameter params.trackId was null or undefined when calling getTrackStems.");const r=await this.request({path:"/tracks/{track_id}/stems".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:{}},t);return new JSONApiResponse(r,(e=>StemsResponseFromJSON(e)))}async getTrackStems(e,t){const r=await this.getTrackStemsRaw(e,t);return await r.value()}async getTrackTopListenersRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError("trackId","Required parameter params.trackId was null or undefined when calling getTrackTopListeners.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/tracks/{track_id}/top_listeners".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTopListenerFromJSON(e)))}async getTrackTopListeners(e,t){const r=await this.getTrackTopListenersRaw(e,t);return await r.value()}async getTracksWithRecentCommentsRaw(e,t){const r={};void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.offset&&(r.offset=e.offset);const n=await this.request({path:"/tracks/recent-comments",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getTracksWithRecentComments(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getTracksWithRecentCommentsRaw(e,t);return await r.value()}async getTrendingTrackIDsRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.genre&&(r.genre=e.genre);const n=await this.request({path:"/tracks/trending/ids",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>TrendingIdsResponseFromJSON(e)))}async getTrendingTrackIDs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getTrendingTrackIDsRaw(e,t);return await r.value()}async getTrendingTracksRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.genre&&(r.genre=e.genre),void 0!==e.time&&(r.time=e.time);const n=await this.request({path:"/tracks/trending",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getTrendingTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getTrendingTracksRaw(e,t);return await r.value()}async getTrendingTracksIDsWithVersionRaw(e,t){if(null===e.version||void 0===e.version)throw new RequiredError("version","Required parameter params.version was null or undefined when calling getTrendingTracksIDsWithVersion.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.genre&&(r.genre=e.genre);const n=await this.request({path:"/tracks/trending/ids/{version}".replace("{version}",encodeURIComponent(String(e.version))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>TrendingIdsResponseFromJSON(e)))}async getTrendingTracksIDsWithVersion(e,t){const r=await this.getTrendingTracksIDsWithVersionRaw(e,t);return await r.value()}async getTrendingTracksWithVersionRaw(e,t){if(null===e.version||void 0===e.version)throw new RequiredError("version","Required parameter params.version was null or undefined when calling getTrendingTracksWithVersion.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.genre&&(r.genre=e.genre),void 0!==e.time&&(r.time=e.time);const n=await this.request({path:"/tracks/trending/{version}".replace("{version}",encodeURIComponent(String(e.version))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getTrendingTracksWithVersion(e,t){const r=await this.getTrendingTracksWithVersionRaw(e,t);return await r.value()}async getTrendingUSDCPurchaseTracksRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.genre&&(r.genre=e.genre),void 0!==e.time&&(r.time=e.time);const n=await this.request({path:"/tracks/usdc-purchase",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getTrendingUSDCPurchaseTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getTrendingUSDCPurchaseTracksRaw(e,t);return await r.value()}async getTrendingUSDCPurchaseTracksWithVersionRaw(e,t){if(null===e.version||void 0===e.version)throw new RequiredError("version","Required parameter params.version was null or undefined when calling getTrendingUSDCPurchaseTracksWithVersion.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.genre&&(r.genre=e.genre),void 0!==e.time&&(r.time=e.time);const n=await this.request({path:"/tracks/usdc-purchase/{version}".replace("{version}",encodeURIComponent(String(e.version))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getTrendingUSDCPurchaseTracksWithVersion(e,t){const r=await this.getTrendingUSDCPurchaseTracksWithVersionRaw(e,t);return await r.value()}async getUnderTheRadarTracksRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.filter&&(r.filter=e.filter),void 0!==e.tracksOnly&&(r.tracks_only=e.tracksOnly),void 0!==e.withUsers&&(r.with_users=e.withUsers);const n=await this.request({path:"/tracks/under_the_radar",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getUnderTheRadarTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getUnderTheRadarTracksRaw(e,t);return await r.value()}async getUndergroundTrendingTracksRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/tracks/trending/underground",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getUndergroundTrendingTracks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getUndergroundTrendingTracksRaw(e,t);return await r.value()}async getUndergroundTrendingTracksWithVersionRaw(e,t){if(null===e.version||void 0===e.version)throw new RequiredError("version","Required parameter params.version was null or undefined when calling getUndergroundTrendingTracksWithVersion.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/tracks/trending/underground/{version}".replace("{version}",encodeURIComponent(String(e.version))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksResponseFromJSON(e)))}async getUndergroundTrendingTracksWithVersion(e,t){const r=await this.getUndergroundTrendingTracksWithVersionRaw(e,t);return await r.value()}async getUsersFromFavoritesRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError("trackId","Required parameter params.trackId was null or undefined when calling getUsersFromFavorites.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/tracks/{track_id}/favorites".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>TrackFavoritesResponseFullFromJSON(e)))}async getUsersFromFavorites(e,t){const r=await this.getUsersFromFavoritesRaw(e,t);return await r.value()}async getUsersFromRepostsRaw(e,t){if(null===e.trackId||void 0===e.trackId)throw new RequiredError("trackId","Required parameter params.trackId was null or undefined when calling getUsersFromReposts.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/tracks/{track_id}/reposts".replace("{track_id}",encodeURIComponent(String(e.trackId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>TrackRepostsResponseFullFromJSON(e)))}async getUsersFromReposts(e,t){const r=await this.getUsersFromRepostsRaw(e,t);return await r.value()}}class TransactionsApi extends BaseAPI{async getAudioTransactionHistoryRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/transactions",method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>TransactionHistoryResponseFromJSON(e)))}async getAudioTransactionHistory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getAudioTransactionHistoryRaw(e,t);return await r.value()}async getAudioTransactionHistoryCountRaw(e,t){const r={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(r["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(r["Encoded-Data-Signature"]=String(e.encodedDataSignature));const n=await this.request({path:"/transactions/count",method:"GET",headers:r,query:{}},t);return new JSONApiResponse(n,(e=>TransactionHistoryCountResponseFromJSON(e)))}async getAudioTransactionHistoryCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getAudioTransactionHistoryCountRaw(e,t);return await r.value()}}class UsersApi$1 extends BaseAPI{async bulkGetSubscribersRaw(e,t){if(null===e.ids||void 0===e.ids)throw new RequiredError("ids","Required parameter params.ids was null or undefined when calling bulkGetSubscribers.");const r={};e.ids&&(r.ids=e.ids.join(COLLECTION_FORMATS.csv));const n=await this.request({path:"/users/subscribers",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullBulkSubscribersResponseFromJSON(e)))}async bulkGetSubscribers(e,t){const r=await this.bulkGetSubscribersRaw(e,t);return await r.value()}async bulkGetSubscribersViaJSONRequestRaw(e,t){if(null===e.ids||void 0===e.ids)throw new RequiredError("ids","Required parameter params.ids was null or undefined when calling bulkGetSubscribersViaJSONRequest.");const r={};e.ids&&(r.ids=e.ids.join(COLLECTION_FORMATS.csv));const n=await this.request({path:"/users/subscribers",method:"POST",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullBulkSubscribersResponseFromJSON(e)))}async bulkGetSubscribersViaJSONRequest(e,t){const r=await this.bulkGetSubscribersViaJSONRequestRaw(e,t);return await r.value()}async getAIAttributedTracksByUserHandleRaw(e,t){if(null===e.handle||void 0===e.handle)throw new RequiredError("handle","Required parameter params.handle was null or undefined when calling getAIAttributedTracksByUserHandle.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.sort&&(r.sort=e.sort),void 0!==e.query&&(r.query=e.query),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection),void 0!==e.filterTracks&&(r.filter_tracks=e.filterTracks);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/handle/{handle}/tracks/ai_attributed".replace("{handle}",encodeURIComponent(String(e.handle))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>FullTracksFromJSON(e)))}async getAIAttributedTracksByUserHandle(e,t){const r=await this.getAIAttributedTracksByUserHandleRaw(e,t);return await r.value()}async getAlbumsByUserRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getAlbumsByUser.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.query&&(r.query=e.query);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/albums".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>AlbumsResponseFullFromJSON(e)))}async getAlbumsByUser(e,t){const r=await this.getAlbumsByUserRaw(e,t);return await r.value()}async getAudioTransactionCountRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getAudioTransactionCount.");const r={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(r["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(r["Encoded-Data-Signature"]=String(e.encodedDataSignature));const n=await this.request({path:"/users/{id}/transactions/audio/count".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:r,query:{}},t);return new JSONApiResponse(n,(e=>TransactionHistoryCountResponseFromJSON(e)))}async getAudioTransactionCount(e,t){const r=await this.getAudioTransactionCountRaw(e,t);return await r.value()}async getAudioTransactionsRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getAudioTransactions.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/transactions/audio".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>TransactionHistoryResponseFromJSON(e)))}async getAudioTransactions(e,t){const r=await this.getAudioTransactionsRaw(e,t);return await r.value()}async getBulkUsersRaw(e,t){const r={};void 0!==e.userId&&(r.user_id=e.userId),e.id&&(r.id=e.id);const n=await this.request({path:"/users",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullUserResponseFromJSON(e)))}async getBulkUsers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getBulkUsersRaw(e,t);return await r.value()}async getFavoritesRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getFavorites.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.query&&(r.query=e.query),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection);const n=await this.request({path:"/users/{id}/favorites/tracks".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>TrackLibraryResponseFullFromJSON(e)))}async getFavorites(e,t){const r=await this.getFavoritesRaw(e,t);return await r.value()}async getFollowersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getFollowers.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/followers".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullFollowersResponseFromJSON(e)))}async getFollowers(e,t){const r=await this.getFollowersRaw(e,t);return await r.value()}async getFollowingRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getFollowing.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/following".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FollowingResponseFullFromJSON(e)))}async getFollowing(e,t){const r=await this.getFollowingRaw(e,t);return await r.value()}async getManagedUsersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getManagedUsers.");const r={};void 0!==e.isApproved&&(r.is_approved=e.isApproved),void 0!==e.isRevoked&&(r.is_revoked=e.isRevoked);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/managed_users".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>ManagedUsersResponseFromJSON(e)))}async getManagedUsers(e,t){const r=await this.getManagedUsersRaw(e,t);return await r.value()}async getManagersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getManagers.");const r={};void 0!==e.isApproved&&(r.is_approved=e.isApproved),void 0!==e.isRevoked&&(r.is_revoked=e.isRevoked);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/managers".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>ManagersResponseFromJSON(e)))}async getManagers(e,t){const r=await this.getManagersRaw(e,t);return await r.value()}async getMutedUsersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getMutedUsers.");const r={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(r["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(r["Encoded-Data-Signature"]=String(e.encodedDataSignature));const n=await this.request({path:"/users/{id}/muted".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:r,query:{}},t);return new JSONApiResponse(n,(e=>FullUserResponseFromJSON(e)))}async getMutedUsers(e,t){const r=await this.getMutedUsersRaw(e,t);return await r.value()}async getMutualFollowersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getMutualFollowers.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/mutuals".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullMutualFollowersResponseFromJSON(e)))}async getMutualFollowers(e,t){const r=await this.getMutualFollowersRaw(e,t);return await r.value()}async getPlaylistsByUserRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getPlaylistsByUser.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.query&&(r.query=e.query);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/playlists".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>PlaylistsResponseFullFromJSON(e)))}async getPlaylistsByUser(e,t){const r=await this.getPlaylistsByUserRaw(e,t);return await r.value()}async getPurchasersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getPurchasers.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.contentType&&(r.content_type=e.contentType),void 0!==e.contentId&&(r.content_id=e.contentId);const n=await this.request({path:"/users/{id}/purchasers".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullPurchasersResponseFromJSON(e)))}async getPurchasers(e,t){const r=await this.getPurchasersRaw(e,t);return await r.value()}async getPurchasersCountRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getPurchasersCount.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.contentType&&(r.content_type=e.contentType),void 0!==e.contentId&&(r.content_id=e.contentId);const n=await this.request({path:"/users/{id}/purchasers/count".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>PurchasersCountResponseFromJSON(e)))}async getPurchasersCount(e,t){const r=await this.getPurchasersCountRaw(e,t);return await r.value()}async getPurchasesRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getPurchases.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection),e.contentIds&&(r.content_ids=e.contentIds);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/purchases".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>PurchasesResponseFromJSON(e)))}async getPurchases(e,t){const r=await this.getPurchasesRaw(e,t);return await r.value()}async getPurchasesCountRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getPurchasesCount.");const r={};void 0!==e.userId&&(r.user_id=e.userId),e.contentIds&&(r.content_ids=e.contentIds);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/purchases/count".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>PurchasesCountResponseFromJSON(e)))}async getPurchasesCount(e,t){const r=await this.getPurchasesCountRaw(e,t);return await r.value()}async getRelatedUsersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getRelatedUsers.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.filterFollowed&&(r.filter_followed=e.filterFollowed);const n=await this.request({path:"/users/{id}/related".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>RelatedArtistResponseFullFromJSON(e)))}async getRelatedUsers(e,t){const r=await this.getRelatedUsersRaw(e,t);return await r.value()}async getRemixersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getRemixers.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.trackId&&(r.track_id=e.trackId);const n=await this.request({path:"/users/{id}/remixers".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullRemixersResponseFromJSON(e)))}async getRemixers(e,t){const r=await this.getRemixersRaw(e,t);return await r.value()}async getRemixersCountRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getRemixersCount.");const r={};void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.trackId&&(r.track_id=e.trackId);const n=await this.request({path:"/users/{id}/remixers/count".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>RemixersCountResponseFromJSON(e)))}async getRemixersCount(e,t){const r=await this.getRemixersCountRaw(e,t);return await r.value()}async getRepostsRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getReposts.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/reposts".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullRepostsFromJSON(e)))}async getReposts(e,t){const r=await this.getRepostsRaw(e,t);return await r.value()}async getRepostsByHandleRaw(e,t){if(null===e.handle||void 0===e.handle)throw new RequiredError("handle","Required parameter params.handle was null or undefined when calling getRepostsByHandle.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/handle/{handle}/reposts".replace("{handle}",encodeURIComponent(String(e.handle))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullRepostsFromJSON(e)))}async getRepostsByHandle(e,t){const r=await this.getRepostsByHandleRaw(e,t);return await r.value()}async getSalesRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getSales.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection),e.contentIds&&(r.content_ids=e.contentIds);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/sales".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>PurchasesResponseFromJSON(e)))}async getSales(e,t){const r=await this.getSalesRaw(e,t);return await r.value()}async getSalesCountRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getSalesCount.");const r={};void 0!==e.userId&&(r.user_id=e.userId),e.contentIds&&(r.content_ids=e.contentIds);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/sales/count".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>PurchasesCountResponseFromJSON(e)))}async getSalesCount(e,t){const r=await this.getSalesCountRaw(e,t);return await r.value()}async getSubscribersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getSubscribers.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/subscribers".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullSubscribersResponseFromJSON(e)))}async getSubscribers(e,t){const r=await this.getSubscribersRaw(e,t);return await r.value()}async getSupportedUsersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getSupportedUsers.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/supporting".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullGetSupportedUsersFromJSON(e)))}async getSupportedUsers(e,t){const r=await this.getSupportedUsersRaw(e,t);return await r.value()}async getSupporterRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getSupporter.");if(null===e.supporterUserId||void 0===e.supporterUserId)throw new RequiredError("supporterUserId","Required parameter params.supporterUserId was null or undefined when calling getSupporter.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/supporters/{supporter_user_id}".replace("{id}",encodeURIComponent(String(e.id))).replace("{supporter_user_id}",encodeURIComponent(String(e.supporterUserId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullGetSupporterFromJSON(e)))}async getSupporter(e,t){const r=await this.getSupporterRaw(e,t);return await r.value()}async getSupportersRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getSupporters.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/supporters".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullGetSupportersFromJSON(e)))}async getSupporters(e,t){const r=await this.getSupportersRaw(e,t);return await r.value()}async getSupportingRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getSupporting.");if(null===e.supportedUserId||void 0===e.supportedUserId)throw new RequiredError("supportedUserId","Required parameter params.supportedUserId was null or undefined when calling getSupporting.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/supporting/{supported_user_id}".replace("{id}",encodeURIComponent(String(e.id))).replace("{supported_user_id}",encodeURIComponent(String(e.supportedUserId))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullGetSupportingFromJSON(e)))}async getSupporting(e,t){const r=await this.getSupportingRaw(e,t);return await r.value()}async getTopUsersRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/top",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>TopUsersResponseFullFromJSON(e)))}async getTopUsers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getTopUsersRaw(e,t);return await r.value()}async getTopUsersInGenreRaw(e,t){const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),e.genre&&(r.genre=e.genre);const n=await this.request({path:"/users/genre/top",method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>TopGenreUsersResponseFullFromJSON(e)))}async getTopUsersInGenre(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=await this.getTopUsersInGenreRaw(e,t);return await r.value()}async getTracksByUserRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getTracksByUser.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.sort&&(r.sort=e.sort),void 0!==e.query&&(r.query=e.query),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection),void 0!==e.filterTracks&&(r.filter_tracks=e.filterTracks);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/tracks".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>FullTracksFromJSON(e)))}async getTracksByUser(e,t){const r=await this.getTracksByUserRaw(e,t);return await r.value()}async getTracksByUserHandleRaw(e,t){if(null===e.handle||void 0===e.handle)throw new RequiredError("handle","Required parameter params.handle was null or undefined when calling getTracksByUserHandle.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.sort&&(r.sort=e.sort),void 0!==e.query&&(r.query=e.query),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection),void 0!==e.filterTracks&&(r.filter_tracks=e.filterTracks);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/handle/{handle}/tracks".replace("{handle}",encodeURIComponent(String(e.handle))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>FullTracksFromJSON(e)))}async getTracksByUserHandle(e,t){const r=await this.getTracksByUserHandleRaw(e,t);return await r.value()}async getUSDCTransactionCountRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getUSDCTransactionCount.");const r={};e.type&&(r.type=e.type),void 0!==e.includeSystemTransactions&&(r.include_system_transactions=e.includeSystemTransactions),void 0!==e.method&&(r.method=e.method);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/transactions/usdc/count".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>TransactionHistoryCountResponseFromJSON(e)))}async getUSDCTransactionCount(e,t){const r=await this.getUSDCTransactionCountRaw(e,t);return await r.value()}async getUSDCTransactionsRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getUSDCTransactions.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection),e.type&&(r.type=e.type),void 0!==e.includeSystemTransactions&&(r.include_system_transactions=e.includeSystemTransactions),void 0!==e.method&&(r.method=e.method);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/transactions/usdc".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>TransactionHistoryResponseFromJSON(e)))}async getUSDCTransactions(e,t){const r=await this.getUSDCTransactionsRaw(e,t);return await r.value()}async getUserRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getUser.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullUserResponseFromJSON(e)))}async getUser(e,t){const r=await this.getUserRaw(e,t);return await r.value()}async getUserAccountRaw(e,t){if(null===e.wallet||void 0===e.wallet)throw new RequiredError("wallet","Required parameter params.wallet was null or undefined when calling getUserAccount.");const r={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(r["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(r["Encoded-Data-Signature"]=String(e.encodedDataSignature));const n=await this.request({path:"/users/account/{wallet}".replace("{wallet}",encodeURIComponent(String(e.wallet))),method:"GET",headers:r,query:{}},t);return new JSONApiResponse(n,(e=>UserAccountResponseFullFromJSON(e)))}async getUserAccount(e,t){const r=await this.getUserAccountRaw(e,t);return await r.value()}async getUserByHandleRaw(e,t){if(null===e.handle||void 0===e.handle)throw new RequiredError("handle","Required parameter params.handle was null or undefined when calling getUserByHandle.");const r={};void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/handle/{handle}".replace("{handle}",encodeURIComponent(String(e.handle))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullUserResponseFromJSON(e)))}async getUserByHandle(e,t){const r=await this.getUserByHandleRaw(e,t);return await r.value()}async getUserCommentsRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getUserComments.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId);const n=await this.request({path:"/users/{id}/comments".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>UserCommentsResponseFullFromJSON(e)))}async getUserComments(e,t){const r=await this.getUserCommentsRaw(e,t);return await r.value()}async getUserFeedRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getUserFeed.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.filter&&(r.filter=e.filter),void 0!==e.tracksOnly&&(r.tracks_only=e.tracksOnly),void 0!==e.withUsers&&(r.with_users=e.withUsers),e.followeeUserId&&(r.followee_user_id=e.followeeUserId);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/feed".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>UserFeedResponseFromJSON(e)))}async getUserFeed(e,t){const r=await this.getUserFeedRaw(e,t);return await r.value()}async getUserLibraryAlbumsRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getUserLibraryAlbums.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.query&&(r.query=e.query),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection),void 0!==e.type&&(r.type=e.type),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/library/albums".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>CollectionLibraryResponseFullFromJSON(e)))}async getUserLibraryAlbums(e,t){const r=await this.getUserLibraryAlbumsRaw(e,t);return await r.value()}async getUserLibraryPlaylistsRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getUserLibraryPlaylists.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.query&&(r.query=e.query),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection),void 0!==e.type&&(r.type=e.type),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/library/playlists".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>CollectionLibraryResponseFullFromJSON(e)))}async getUserLibraryPlaylists(e,t){const r=await this.getUserLibraryPlaylistsRaw(e,t);return await r.value()}async getUserLibraryTracksRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getUserLibraryTracks.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.query&&(r.query=e.query),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection),void 0!==e.type&&(r.type=e.type);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/library/tracks".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>TrackLibraryResponseFullFromJSON(e)))}async getUserLibraryTracks(e,t){const r=await this.getUserLibraryTracksRaw(e,t);return await r.value()}async getUserRecommendedTracksRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getUserRecommendedTracks.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.userId&&(r.user_id=e.userId),void 0!==e.timeRange&&(r.time_range=e.timeRange);const n=await this.request({path:"/users/{id}/recommended-tracks".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:r},t);return new JSONApiResponse(n,(e=>FullTracksFromJSON(e)))}async getUserRecommendedTracks(e,t){const r=await this.getUserRecommendedTracksRaw(e,t);return await r.value()}async getUsersTrackHistoryRaw(e,t){if(null===e.id||void 0===e.id)throw new RequiredError("id","Required parameter params.id was null or undefined when calling getUsersTrackHistory.");const r={};void 0!==e.offset&&(r.offset=e.offset),void 0!==e.limit&&(r.limit=e.limit),void 0!==e.query&&(r.query=e.query),void 0!==e.sortMethod&&(r.sort_method=e.sortMethod),void 0!==e.sortDirection&&(r.sort_direction=e.sortDirection),void 0!==e.userId&&(r.user_id=e.userId);const n={};void 0!==e.encodedDataMessage&&null!==e.encodedDataMessage&&(n["Encoded-Data-Message"]=String(e.encodedDataMessage)),void 0!==e.encodedDataSignature&&null!==e.encodedDataSignature&&(n["Encoded-Data-Signature"]=String(e.encodedDataSignature));const i=await this.request({path:"/users/{id}/history/tracks".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:n,query:r},t);return new JSONApiResponse(i,(e=>HistoryResponseFullFromJSON(e)))}async getUsersTrackHistory(e,t){const r=await this.getUsersTrackHistoryRaw(e,t);return await r.value()}}const ipApi="https://ipapi.co/json/",getLocation=async function(){let{logger:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const e=await fetch(ipApi),{city:t,region:r,country_name:n}=await e.json();return{city:t,region:r,country:n}}catch(t){return null==e||e.error(t),null}};class TracksApi extends TracksApi$2{constructor(e,t,r,n,i,a,o,s){super(e),_defineProperty$3(this,"storage",void 0),_defineProperty$3(this,"entityManager",void 0),_defineProperty$3(this,"logger",void 0),_defineProperty$3(this,"claimableTokensClient",void 0),_defineProperty$3(this,"paymentRouterClient",void 0),_defineProperty$3(this,"solanaRelay",void 0),_defineProperty$3(this,"solanaClient",void 0),_defineProperty$3(this,"trackUploadHelper",void 0),this.storage=t,this.entityManager=r,this.logger=n,this.claimableTokensClient=i,this.paymentRouterClient=a,this.solanaRelay=o,this.solanaClient=s,this.trackUploadHelper=new TrackUploadHelper(e),this.logger=n.createPrefixedLogger("[tracks-api]")}async getTrackStreamUrl(e){if(null===e.trackId||void 0===e.trackId)throw new RequiredError$1("trackId","Required parameter params.trackId was null or undefined when calling getTrack.");const t=new URLSearchParams;e.userId&&t.append("user_id",e.userId),void 0!==e.preview&&t.append("preview",String(e.preview)),e.userSignature&&t.append("user_signature",e.userSignature),e.userData&&t.append("user_data",e.userData),e.nftAccessSignature&&t.append("nft_access_signature",e.nftAccessSignature),void 0!==e.skipPlayCount&&t.append("skip_play_count",String(e.skipPlayCount)),e.apiKey&&t.append("api_key",e.apiKey),void 0!==e.skipCheck&&t.append("skip_check",String(e.skipCheck)),void 0!==e.noRedirect&&t.append("no_redirect",String(e.noRedirect));const r="/tracks/{track_id}/stream".replace("{track_id}",encodeURIComponent(String(e.trackId))),n=t.toString();return`${this.configuration.basePath}${r}${n?"?"+n:""}`}async getTrackDownloadUrl(e){if(null===e.trackId||void 0===e.trackId)throw new RequiredError$1("trackId","Required parameter params.trackId was null or undefined when calling getTrack.");const t=new URLSearchParams;e.userId&&t.append("user_id",e.userId),e.userSignature&&t.append("user_signature",e.userSignature),e.userData&&t.append("user_data",e.userData),e.nftAccessSignature&&t.append("nft_access_signature",e.nftAccessSignature),e.filename&&t.append("filename",e.filename);const r="/tracks/{track_id}/download".replace("{track_id}",encodeURIComponent(String(e.trackId))),n=t.toString();return`${this.configuration.basePath}${r}${n?"?"+n:""}`}async uploadTrackFiles(e){this.logger.info("Parsing inputs");const{userId:t,trackFile:r,coverArtFile:n,metadata:i,onProgress:a}=await parseParams("uploadTrackFiles",UploadTrackFilesSchema)(e);this.logger.info("Transforming metadata");const o=this.trackUploadHelper.transformTrackUploadMetadata(i,t);this.logger.info("Uploading track audio and cover art");const[s,u]=await Promise.all([n?retry3((async()=>await this.storage.uploadFile({file:n,onProgress:a,template:"img_square"})),(e=>{this.logger.info("Retrying uploadTrackCoverArt",e)})):Promise.resolve(void 0),retry3((async()=>await this.storage.uploadFile({file:r,onProgress:a,template:"audio",options:this.trackUploadHelper.extractMediorumUploadOptions(o)})),(e=>{this.logger.info("Retrying uploadTrackAudio",e)}))]);return this.trackUploadHelper.populateTrackMetadataWithUploadResponse(o,u,s)}async writeTrackToChain(e,t,r){var n;this.logger.info("Writing metadata to chain");const i=t.trackId||await this.trackUploadHelper.generateId("track"),a=null!==(n=decodeHashId(e))&&void 0!==n?n:void 0;if(!a)throw new Error("writeTrackToChain: userId could not be decoded");const o=await this.entityManager.manageEntity({userId:a,entityType:EntityType.TRACK,entityId:i,action:Action.CREATE,metadata:JSON.stringify({cid:"",data:{...snakecaseKeys(t),download_conditions:t.downloadConditions&&snakecaseKeys(t.downloadConditions),stream_conditions:t.streamConditions&&snakecaseKeys(t.streamConditions),stem_of:t.stemOf&&snakecaseKeys(t.stemOf)}}),...r});return this.logger.info("Successfully uploaded track"),{...o,trackId:encodeHashId(i)}}async uploadTrack(e,t){await parseParams("uploadTrack",UploadTrackSchema)(e);const r=await this.uploadTrackFiles(e);return this.writeTrackToChain(e.userId,r,t)}async updateTrack(e,t){const{userId:r,trackId:n,coverArtFile:i,metadata:a,onProgress:o,generatePreview:s}=await parseParams("updateTrack",UpdateTrackSchema)(e),u=this.trackUploadHelper.transformTrackUploadMetadata(a,r),c=i&&await retry3((async()=>await this.storage.uploadFile({file:i,onProgress:o,template:"img_square"})),(e=>{this.logger.info("Retrying uploadTrackCoverArt",e)})),d={...u,...c?{coverArtSizes:c.id}:{}};if(s){if(void 0===d.previewStartSeconds)throw new Error("No track preview start time specified");if(!d.audioUploadId)throw new Error("Missing required audio_upload_id");const e=await retry3((async()=>await this.storage.generatePreview({cid:d.trackCid,secondOffset:d.previewStartSeconds})),(e=>{this.logger.info("Retrying generatePreview",e)}));d.previewCid=e}return await this.entityManager.manageEntity({userId:r,entityType:EntityType.TRACK,entityId:n,action:Action.UPDATE,metadata:JSON.stringify({cid:"",data:{...snakecaseKeys(d),download_conditions:d.downloadConditions&&snakecaseKeys(d.downloadConditions),stream_conditions:d.streamConditions&&snakecaseKeys(d.streamConditions),stem_of:u.stemOf&&snakecaseKeys(u.stemOf)}}),...t})}async deleteTrack(e,t){const{userId:r,trackId:n}=await parseParams("deleteTrack",DeleteTrackSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.TRACK,entityId:n,action:Action.DELETE,...t})}async favoriteTrack(e,t){const{userId:r,trackId:n,metadata:i}=await parseParams("favoriteTrack",FavoriteTrackSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.TRACK,entityId:n,action:Action.SAVE,metadata:i&&JSON.stringify(snakecaseKeys(i)),...t})}async unfavoriteTrack(e,t){const{userId:r,trackId:n}=await parseParams("unfavoriteTrack",UnfavoriteTrackSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.TRACK,entityId:n,action:Action.UNSAVE,...t})}async shareTrack(e,t){const{userId:r,trackId:n}=await parseParams("shareTrack",ShareTrackSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.TRACK,entityId:n,action:Action.SHARE,...t})}async repostTrack(e,t){const{userId:r,trackId:n,metadata:i}=await parseParams("respostTrack",RepostTrackSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.TRACK,entityId:n,action:Action.REPOST,metadata:i&&JSON.stringify(snakecaseKeys(i)),...t})}async unrepostTrack(e,t){const{userId:r,trackId:n}=await parseParams("unrepostTrack",UnrepostTrackSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.TRACK,entityId:n,action:Action.UNREPOST,...t})}async recordTrackDownload(e,t){const{userId:r,trackId:n}=await parseParams("downloadTrack",RecordTrackDownloadSchema)(e),i=await getLocation({logger:this.logger});return await this.entityManager.manageEntity({userId:r,entityType:EntityType.TRACK,entityId:n,action:Action.DOWNLOAD,metadata:i?JSON.stringify({cid:"",data:{city:i.city,region:i.region,country:i.country}}):void 0,...t})}async getPurchaseTrackInstructions(e){var t,r;const{userId:n,trackId:i,price:a,extraAmount:o=0}=await parseParams("getPurchaseTrackInstructions",GetPurchaseTrackInstructionsSchema)(e);this.logger.debug("Fetching track purchase info...",{trackId:i});const{data:s}=await this.getTrackAccessInfo({trackId:e.trackId,userId:e.userId});if(!s)throw new Error("Track not found.");if(!s.isStreamGated&&!s.isDownloadGated)throw new Error("Attempted to purchase free track.");if(s.userId===e.userId)throw new Error("Attempted to purchase own track.");let u,c=[],d="stream";if(s.streamConditions&&instanceOfExtendedPurchaseGate(s.streamConditions))u=s.streamConditions.usdcPurchase.price,c=s.streamConditions.usdcPurchase.splits;else{if(!s.downloadConditions||!instanceOfExtendedPurchaseGate(s.downloadConditions))throw new Error("Track is not available for purchase.");u=s.downloadConditions.usdcPurchase.price,c=s.downloadConditions.usdcPurchase.splits,d="download"}if("download"===d&&null!==(t=s.access)&&void 0!==t&&t.download||"stream"===d&&null!==(r=s.access)&&void 0!==r&&r.stream)throw new Error("Track already purchased");if(USDC(a).value<USDC(u/100).value)throw new Error("Track price increased.");const l=USDC(o).value,p=USDC(u/100).value+l;this.logger.debug("Purchase total:",p);const h=await prepareSplits({splits:c,extraAmount:l,claimableTokensClient:this.claimableTokensClient,logger:this.logger});this.logger.debug("Calculated splits:",h);const f=await this.paymentRouterClient.createRouteInstruction({splits:h,total:p,mint:"USDC"}),m=await this.paymentRouterClient.createPurchaseMemoInstruction({contentId:i,contentType:"track",blockNumber:s.blocknumber,buyerUserId:n,accessType:d});let y;try{y=await this.solanaRelay.getLocationInstruction()}catch(e){this.logger.warn("Unable to compute location memo instruction")}return{instructions:{routeInstruction:f,memoInstruction:m,locationMemoInstruction:y},total:p}}async purchaseTrack(e){const{wallet:t}=await parseParams("purchaseTrack",PurchaseTrackSchema)(e),{wallet:r,walletAdapter:n,...i}=e,{instructions:{routeInstruction:a,memoInstruction:o,locationMemoInstruction:s},total:u}=await this.getPurchaseTrackInstructions(i);let c;const d="USDC";if(t){this.logger.debug("Using provided wallet to purchase...",{wallet:t.toBase58()});const e=await this.paymentRouterClient.createTransferInstruction({sourceWallet:t,total:u,mint:d});c=await this.solanaClient.buildTransaction({feePayer:t,instructions:[e,a,o,s].filter(Boolean)})}else{this.logger.debug(`Using userBank ${await this.claimableTokensClient.deriveUserBank({mint:"USDC"})} to purchase...`);const e=await this.paymentRouterClient.getOrCreateProgramTokenAccount({mint:d}),r=await this.claimableTokensClient.createTransferSecpInstruction({destination:e.address,mint:d,amount:u}),n=await this.claimableTokensClient.createTransferInstruction({destination:e.address,mint:d});c=await this.solanaClient.buildTransaction({feePayer:t,instructions:[r,n,a,o,s].filter(Boolean)})}if(e.walletAdapter){if(!e.walletAdapter.publicKey)throw new Error("Param walletAdapter was specified, but no wallet selected");return await e.walletAdapter.sendTransaction(c,this.solanaClient.connection)}return this.solanaClient.sendTransaction(c,{skipPreflight:!0})}async generateTrackId(){return this.trackUploadHelper.generateId("track")}}const EventMetadataSchema=z.object({userId:z.number(),eventId:z.number(),eventType:z.nativeEnum(EventEventTypeEnum).optional(),entityType:z.nativeEnum(EventEntityTypeEnum).optional(),entityId:z.number().optional(),endDate:z.string().optional(),eventData:z.record(z.any()).optional()}),CreateEventSchema=EventMetadataSchema.omit({eventId:!0}).extend({eventId:z.number().optional()}),UpdateEventSchema=EventMetadataSchema.pick({userId:!0,eventId:!0,endDate:!0,eventData:!0}),DeleteEventSchema=EventMetadataSchema.pick({userId:!0,eventId:!0});class EventsApi extends EventsApi$1{constructor(e,t,r){super(e),_defineProperty$3(this,"entityManager",void 0),_defineProperty$3(this,"logger",void 0),this.entityManager=t,this.logger=r,this.logger=r.createPrefixedLogger("[events-api]")}async generateEventId(){const e=await this.getUnclaimedEventID(),{data:t}=e;return t?decodeHashId(t):Math.floor(1e6*Math.random())}async createEvent(e){const t=await parseParams("createEvent",CreateEventSchema)(e),{userId:r,eventId:n,eventType:i,entityType:a,entityId:o,endDate:s,eventData:u}=t,c=null!=n?n:await this.generateEventId(),d=await this.entityManager.manageEntity({entityId:c,userId:r,entityType:EntityType.EVENT,action:Action.CREATE,metadata:JSON.stringify({cid:"",data:snakecaseKeys({eventType:i,entityType:a,entityId:o,endDate:s,eventData:u})})});return this.logger.info("Successfully created a event"),d}async updateEvent(e){const t=await parseParams("updateEvent",UpdateEventSchema)(e),{userId:r,eventId:n,endDate:i,eventData:a}=t,o=await this.entityManager.manageEntity({entityId:n,userId:r,entityType:EntityType.EVENT,action:Action.UPDATE,metadata:JSON.stringify({cid:"",data:snakecaseKeys({endDate:i,eventData:a})})});return this.logger.info("Successfully updated the event"),o}async deleteEvent(e){const t=await parseParams("deleteEvent",DeleteEventSchema)(e),{userId:r,eventId:n}=t,i=await this.entityManager.manageEntity({entityId:n,userId:r,entityType:EntityType.EVENT,action:Action.DELETE,metadata:""});return this.logger.info("Successfully deleted the event"),i}}const isApiKeyValid=e=>{try{if(40!==e.length)return!1;return/^[0-9a-fA-F]+$/.test(e)}catch(e){return!1}},CreateGrantSchema=z.object({userId:HashId,appApiKey:z.custom((e=>isApiKeyValid(e)))}),AddManagerSchema=z.object({userId:HashId,managerUserId:HashId});z.object({userId:HashId,managerUserId:HashId});const RevokeGrantSchema=z.object({userId:HashId,appApiKey:z.custom((e=>isApiKeyValid(e)))}),ApproveGrantSchema=z.object({userId:HashId,grantorUserId:HashId});class GrantsApi{constructor(e,t,r){_defineProperty$3(this,"entityManager",void 0),_defineProperty$3(this,"usersApi",void 0),this.entityManager=t,this.usersApi=r}async createGrant(e){const{userId:t,appApiKey:r}=await parseParams("createGrant",CreateGrantSchema)(e);return await this.entityManager.manageEntity({userId:t,entityType:EntityType.GRANT,entityId:0,action:Action.CREATE,metadata:JSON.stringify({grantee_address:`0x${r}`})})}async addManager(e){const{userId:t,managerUserId:r}=await parseParams("addManager",AddManagerSchema)(e);let n;try{if(n=(await this.usersApi.getUser({id:encodeHashId(r)})).data,!n)throw new Error}catch(e){throw new Error("`managerUserId` passed to `addManager` method is invalid.")}return await this.entityManager.manageEntity({userId:t,entityType:EntityType.GRANT,entityId:0,action:Action.CREATE,metadata:JSON.stringify({grantee_address:n.ercWallet})})}async removeManager(e){const{userId:t,managerUserId:r}=await parseParams("addManager",AddManagerSchema)(e);let n;try{if(n=(await this.usersApi.getUser({id:encodeHashId(r)})).data,!n)throw new Error}catch(e){throw new Error("`managerUserId` passed to `removeManager` method is invalid.")}return await this.entityManager.manageEntity({userId:t,entityType:EntityType.GRANT,entityId:0,action:Action.DELETE,metadata:JSON.stringify({grantee_address:n.ercWallet})})}async revokeGrant(e){const{userId:t,appApiKey:r}=await parseParams("revokeGrant",RevokeGrantSchema)(e);return await this.entityManager.manageEntity({userId:t,entityType:EntityType.GRANT,entityId:0,action:Action.DELETE,metadata:JSON.stringify({grantee_address:`0x${r}`})})}async approveGrant(e){const{userId:t,grantorUserId:r}=await parseParams("approveGrant",ApproveGrantSchema)(e);return await this.entityManager.manageEntity({userId:t,entityType:EntityType.GRANT,entityId:0,action:Action.APPROVE,metadata:JSON.stringify({grantor_user_id:r})})}}function equals$1(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function coerce(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function base(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),o=a.charCodeAt(0);if(255!==r[o])throw new TypeError(a+" is ambiguous");r[o]=i}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),d=Math.log(256)/Math.log(s);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===u;)n++,t++;for(var a=(e.length-t)*c+1>>>0,o=new Uint8Array(a);e[t];){var d=r[e.charCodeAt(t)];if(255===d)return;for(var l=0,p=a-1;(0!==d||l<i)&&-1!==p;p--,l++)d+=s*o[p]>>>0,o[p]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");i=l,t++}if(" "!==e[t]){for(var h=a-i;h!==a&&0===o[h];)h++;for(var f=new Uint8Array(n+(a-h)),m=n;h!==a;)f[m++]=o[h++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,a=t.length;i!==a&&0===t[i];)i++,r++;for(var o=(a-i)*d+1>>>0,c=new Uint8Array(o);i!==a;){for(var l=t[i],p=0,h=o-1;(0!==l||p<n)&&-1!==h;h--,p++)l+=256*c[h]>>>0,c[h]=l%s>>>0,l=l/s>>>0;if(0!==l)throw new Error("Non-zero carry");n=p,i++}for(var f=o-n;f!==o&&0===c[f];)f++;for(var m=u.repeat(r);f<o;++f)m+=e.charAt(c[f]);return m},decodeUnsafe:l,decode:function(e){var r=l(e);if(r)return r;throw new Error(`Non-${t} character`)}}}var src=base,_brrp__multiformats_scope_baseX=src;class Encoder{constructor(e,t,r){_defineProperty$3(this,"name",void 0),_defineProperty$3(this,"prefix",void 0),_defineProperty$3(this,"baseEncode",void 0),this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,t,r){_defineProperty$3(this,"name",void 0),_defineProperty$3(this,"prefix",void 0),_defineProperty$3(this,"baseDecode",void 0),_defineProperty$3(this,"prefixCodePoint",void 0),this.name=e,this.prefix=t;const n=t.codePointAt(0);if(void 0===n)throw new Error("Invalid prefix character");this.prefixCodePoint=n,this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){_defineProperty$3(this,"decoders",void 0),this.decoders=e}or(e){return or(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(null!=r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function or(e,t){var r,n;return new ComposedDecoder({...null!==(r=e.decoders)&&void 0!==r?r:{[e.prefix]:e},...null!==(n=t.decoders)&&void 0!==n?n:{[t.prefix]:t}})}class Codec{constructor(e,t,r,n){_defineProperty$3(this,"name",void 0),_defineProperty$3(this,"prefix",void 0),_defineProperty$3(this,"baseEncode",void 0),_defineProperty$3(this,"baseDecode",void 0),_defineProperty$3(this,"encoder",void 0),_defineProperty$3(this,"decoder",void 0),this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new Encoder(e,t,r),this.decoder=new Decoder(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function from$2(e){let{name:t,prefix:r,encode:n,decode:i}=e;return new Codec(t,r,n,i)}function baseX(e){let{name:t,prefix:r,alphabet:n}=e;const{encode:i,decode:a}=_brrp__multiformats_scope_baseX(n,t);return from$2({prefix:r,name:t,encode:i,decode:e=>coerce(a(e))})}function decode$3(e,t,r,n){const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let a=e.length;for(;"="===e[a-1];)--a;const o=new Uint8Array(a*r/8|0);let s=0,u=0,c=0;for(let t=0;t<a;++t){const a=i[e[t]];if(void 0===a)throw new SyntaxError(`Non-${n} character`);u=u<<r|a,s+=r,s>=8&&(s-=8,o[c++]=255&u>>s)}if(s>=r||0!=(255&u<<8-s))throw new SyntaxError("Unexpected end of data");return o}function encode$2(e,t,r){const n="="===t[t.length-1],i=(1<<r)-1;let a="",o=0,s=0;for(let n=0;n<e.length;++n)for(s=s<<8|e[n],o+=8;o>r;)o-=r,a+=t[i&s>>o];if(0!==o&&(a+=t[i&s<<r-o]),n)for(;0!=(a.length*r&7);)a+="=";return a}function rfc4648(e){let{name:t,prefix:r,bitsPerChar:n,alphabet:i}=e;return from$2({prefix:r,name:t,encode:e=>encode$2(e,i,n),decode:e=>decode$3(e,i,n,t)})}const base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const base36=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});const base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var encode_1=encode$1,MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function encode$1(e,t,r){t=t||[];for(var n=r=r||0;e>=INT;)t[r++]=255&e|MSB,e/=128;for(;e&MSBALL;)t[r++]=255&e|MSB,e>>>=7;return t[r]=0|e,encode$1.bytes=r-n+1,t}var decode$2=read,MSB$1=128,REST$1=127;function read(e,t){var r,n=0,i=0,a=t=t||0,o=e.length;do{if(a>=o)throw read.bytes=0,new RangeError("Could not decode varint");r=e[a++],n+=i<28?(r&REST$1)<<i:(r&REST$1)*Math.pow(2,i),i+=7}while(r>=MSB$1);return read.bytes=a-t,n}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(e){return e<N1?1:e<N2?2:e<N3?3:e<N4?4:e<N5?5:e<N6?6:e<N7?7:e<N8?8:e<N9?9:10},varint={encode:encode_1,decode:decode$2,encodingLength:length},_brrp_varint=varint;function decode$1(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[_brrp_varint.decode(e,t),_brrp_varint.decode.bytes]}function encodeTo(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _brrp_varint.encode(e,t,r),t}function encodingLength(e){return _brrp_varint.encodingLength(e)}function create(e,t){const r=t.byteLength,n=encodingLength(e),i=n+encodingLength(r),a=new Uint8Array(i+r);return encodeTo(e,a,0),encodeTo(r,a,n),a.set(t,i),new Digest(e,r,t,a)}function decode(e){const t=coerce(e),[r,n]=decode$1(t),[i,a]=decode$1(t.subarray(n)),o=t.subarray(n+a);if(o.byteLength!==i)throw new Error("Incorrect length");return new Digest(r,i,o,t)}function equals(e,t){if(e===t)return!0;{const r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&equals$1(e.bytes,r.bytes)}}class Digest{constructor(e,t,r,n){_defineProperty$3(this,"code",void 0),_defineProperty$3(this,"size",void 0),_defineProperty$3(this,"digest",void 0),_defineProperty$3(this,"bytes",void 0),this.code=e,this.size=t,this.digest=r,this.bytes=n}}function format(e,t){const{bytes:r,version:n}=e;return 0===n?toStringV0(r,baseCache(e),null!=t?t:base58btc.encoder):toStringV1(r,baseCache(e),null!=t?t:base32.encoder)}const cache=new WeakMap;function baseCache(e){const t=cache.get(e);if(null==t){const t=new Map;return cache.set(e,t),t}return t}class CID{constructor(e,t,r,n){_defineProperty$3(this,"code",void 0),_defineProperty$3(this,"version",void 0),_defineProperty$3(this,"multihash",void 0),_defineProperty$3(this,"bytes",void 0),_defineProperty$3(this,"/",void 0),_defineProperty$3(this,Symbol.toStringTag,"CID"),this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=create(e,t);return CID.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return CID.equals(this,e)}static equals(e,t){const r=t;return null!=r&&e.code===r.code&&e.version===r.version&&equals(e.multihash,r.multihash)}toString(e){return format(this,e)}toJSON(){return{"/":format(this)}}link(){return this}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;const t=e;if(t instanceof CID)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new CID(e,r,n,null!=i?i:encodeCID(e,r,n.bytes))}if(!0===t[cidSymbol]){const{version:e,multihash:r,code:n}=t,i=decode(r);return CID.create(e,n,i)}return null}static create(e,t,r){if("number"!=typeof t)throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(e,t,r,r.bytes);case 1:{const n=encodeCID(e,t,r.bytes);return new CID(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return CID.create(0,DAG_PB_CODE,e)}static createV1(e,t){return CID.create(1,e,t)}static decode(e){const[t,r]=CID.decodeFirst(e);if(0!==r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=CID.inspectBytes(e),r=t.size-t.multihashSize,n=coerce(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),a=new Digest(t.multihashCode,t.digestSize,i,n);return[0===t.version?CID.createV0(a):CID.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=decode$1(e.subarray(t));return t+=n,r};let n=r(),i=DAG_PB_CODE;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const a=t,o=r(),s=r(),u=t+s;return{version:n,codec:i,multihashCode:o,digestSize:s,multihashSize:u-a,size:u}}static parse(e,t){const[r,n]=parseCIDtoBytes(e,t),i=CID.decode(n);if(0===i.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return baseCache(i).set(r,e),i}}function parseCIDtoBytes(e,t){switch(e[0]){case"Q":{const r=null!=t?t:base58btc;return[base58btc.prefix,r.decode(`${base58btc.prefix}${e}`)]}case base58btc.prefix:{const r=null!=t?t:base58btc;return[base58btc.prefix,r.decode(e)]}case base32.prefix:{const r=null!=t?t:base32;return[base32.prefix,r.decode(e)]}case base36.prefix:{const r=null!=t?t:base36;return[base36.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}function toStringV0(e,t,r){const{prefix:n}=r;if(n!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=t.get(n);if(null==i){const i=r.encode(e).slice(1);return t.set(n,i),i}return i}function toStringV1(e,t,r){const{prefix:n}=r,i=t.get(n);if(null==i){const i=r.encode(e);return t.set(n,i),i}return i}const DAG_PB_CODE=112,SHA_256_CODE=18;function encodeCID(e,t,r){const n=encodingLength(e),i=n+encodingLength(t),a=new Uint8Array(i+r.byteLength);return encodeTo(e,a,0),encodeTo(t,a,n),a.set(r,i),a}const cidSymbol=Symbol.for("@ipld/js-cid/CID"),textEncoder=new TextEncoder;new TextDecoder;const code=512;function encode(e){return textEncoder.encode(JSON.stringify(e))}function from$1(e){let{name:t,code:r,encode:n}=e;return new Hasher(t,r,n)}class Hasher{constructor(e,t,r){_defineProperty$3(this,"name",void 0),_defineProperty$3(this,"code",void 0),_defineProperty$3(this,"encode",void 0),this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?create(this.code,t):t.then((e=>create(this.code,e)))}throw Error("Unknown type, must be binary type")}}function sha(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const sha256=from$1({name:"sha2-256",code:18,encode:sha("SHA-256")});from$1({name:"sha2-512",code:19,encode:sha("SHA-512")});const generateMetadataCidV1=async e=>{const t=encode(e),r=await sha256.digest(t);return CID.create(1,code,r)},SolanaAddressSchema=z.string().regex(/^[1-9A-HJ-NP-Za-km-z]+$/,"Solana address must only contain base58 characters").min(32,"Solana address must be at least 32 characters").max(44,"Solana address must not exceed 44 characters").refine((e=>{try{new PublicKey(e);return!0}catch(e){return console.debug(e),!1}})),reactionsMap={"":1,"":2,"":3,"":4};function getReaction(e){return"number"==typeof e?Object.keys(reactionsMap).find((t=>reactionsMap[t]===e)):reactionsMap[e]}const UserEventsSchema=z.object({referrer:z.optional(HashId),isMobileUser:z.optional(z.boolean())}),CreateUserSchema=z.object({profilePictureFile:z.optional(ImageFile),coverArtFile:z.optional(ImageFile),onProgress:z.optional(z.function()),metadata:z.object({allowAiAttribution:z.optional(z.boolean()),bio:z.optional(z.string()),coverPhotoSizes:z.optional(z.string()),donation:z.optional(z.string()),handle:z.optional(z.string()),events:z.optional(UserEventsSchema),location:z.optional(z.string()),name:z.optional(z.string()),profilePictureSizes:z.optional(z.string()),splUsdcPayoutWallet:z.optional(z.string()),wallet:z.string(),website:z.optional(z.string())}).strict()});z.record(z.string(),z.object({signature:z.string()}));const CollectiblesMetadataSchema=z.union([z.object({order:z.array(z.string())}).catchall(z.object({})),z.null()]),PlaylistIdentifierSchema=z.object({type:z.literal("playlist"),playlist_id:z.number()}),ExplorePlaylistIdentifierSchema=z.object({type:z.literal("explore_playlist"),playlist_id:z.string()}),PlaylistLibraryIdentifierSchema=z.union([PlaylistIdentifierSchema,ExplorePlaylistIdentifierSchema]),PlaylistLibraryFolderSchema=z.object({id:z.string(),type:z.literal("folder"),name:z.string(),contents:z.array(z.lazy((()=>z.union([PlaylistLibraryFolderSchema,PlaylistLibraryIdentifierSchema]))))}),PlaylistLibrarySchema=z.object({contents:z.array(z.union([PlaylistLibraryFolderSchema,PlaylistLibraryIdentifierSchema]))}),UpdateProfileSchema=z.object({userId:HashId,events:z.optional(UserEventsSchema),profilePictureFile:z.optional(ImageFile),coverArtFile:z.optional(ImageFile),onProgress:z.optional(z.function()),metadata:z.object({name:z.optional(z.string()),handle:z.optional(z.string()),bio:z.optional(z.string()),website:z.optional(z.string()),donation:z.optional(z.string()),location:z.optional(z.string()),profileType:z.optional(z.enum(["label"]).nullable()),metadataMultihash:z.optional(z.string()),events:z.optional(UserEventsSchema),isDeactivated:z.optional(z.boolean()),artistPickTrackId:z.optional(HashId),allowAiAttribution:z.optional(z.boolean()),playlistLibrary:z.optional(PlaylistLibrarySchema),twitterHandle:z.optional(z.string()),instagramHandle:z.optional(z.string()),tiktokHandle:z.optional(z.string()),splUsdcPayoutWallet:z.optional(SolanaAddressSchema).nullable()}).strict()}).strict(),FollowUserSchema=z.object({userId:HashId,followeeUserId:HashId}).strict(),UnfollowUserSchema=z.object({userId:HashId,followeeUserId:HashId}).strict(),SubscribeToUserSchema=z.object({userId:HashId,subscribeeUserId:HashId}).strict(),UnsubscribeFromUserSchema=z.object({userId:HashId,subscribeeUserId:HashId}).strict(),SendTipSchema=z.object({amount:z.number().positive().int(),senderUserId:HashId,receiverUserId:HashId}).strict(),ReactionTypeSchema=z.custom((e=>Object.keys(reactionsMap).includes(e)),{message:"Invalid reaction type"}).transform(((e,t)=>{const r=getReaction(e);return void 0===r?(t.addIssue({code:z.ZodIssueCode.custom,message:"reactionValue invalid"}),z.NEVER):r})),SendTipReactionRequestSchema=z.object({userId:HashId,metadata:z.object({reactedTo:z.string().nonempty(),reactionValue:ReactionTypeSchema})}),EmailSchema=z.object({emailOwnerUserId:z.number(),receivingUserId:z.number(),initialEmailEncryptionUuid:z.number(),granteeUserIds:z.array(z.string()).optional(),email:z.string()}),WalletSchema=z.discriminatedUnion("chain",[z.object({address:SolanaAddressSchema,chain:z.literal("sol")}),z.object({address:z.string().pipe(EthAddressSchema),chain:z.literal("eth")})]),AddAssociatedWalletSchema=z.object({userId:HashId,wallet:WalletSchema,signature:z.string()}),RemoveAssociatedWalletSchema=z.object({userId:HashId,wallet:WalletSchema}),UpdateCollectiblesSchema=z.object({userId:HashId,collectibles:CollectiblesMetadataSchema});class UsersApi extends UsersApi$2{constructor(e,t,r,n,i,a,o){super(e),_defineProperty$3(this,"storage",void 0),_defineProperty$3(this,"entityManager",void 0),_defineProperty$3(this,"logger",void 0),_defineProperty$3(this,"claimableTokens",void 0),_defineProperty$3(this,"solanaClient",void 0),_defineProperty$3(this,"emailEncryption",void 0),this.storage=t,this.entityManager=r,this.logger=n,this.claimableTokens=i,this.solanaClient=a,this.emailEncryption=o,this.logger=n.createPrefixedLogger("[users-api]")}async generateUserId(){const e=new JSONApiResponse$1(await this.request({path:"/users/unclaimed_id",method:"GET",headers:{},query:{noCache:Math.floor(1e3*Math.random()).toString()}}));return await e.value()}async createUser(e,t){const{onProgress:r,profilePictureFile:n,coverArtFile:i,metadata:a}=await parseParams("createUser",CreateUserSchema)(e),{data:o}=await this.generateUserId();if(!o)throw new Error("Failed to generate userId");const s=HashId.parse(o),[u,c]=await Promise.all([n&&retry3((async()=>await this.storage.uploadFile({file:n,onProgress:r,template:"img_square"})),(e=>{this.logger.info("Retrying uploadProfilePicture",e)})),i&&retry3((async()=>await this.storage.uploadFile({file:i,onProgress:r,template:"img_backdrop"})),(e=>{this.logger.info("Retrying uploadProfileCoverArt",e)}))]),d={...a,userId:s,...u?{profilePicture:null==u?void 0:u.id,profilePictureSizes:null==u?void 0:u.id}:{},...c?{coverPhoto:null==c?void 0:c.id,coverPhotoSizes:null==c?void 0:c.id}:{}},l=snakecaseKeys(d),p=(await generateMetadataCidV1(l)).toString(),{blockHash:h,blockNumber:f}=await this.entityManager.manageEntity({userId:s,entityType:EntityType.USER,entityId:s,action:Action.CREATE,metadata:JSON.stringify({cid:p,data:l}),...t});return{blockHash:h,blockNumber:f,metadata:d}}async createGuestAccount(e){const{data:t}=await this.generateUserId();if(!t)throw new Error("Failed to generate userId");const r=HashId.parse(t),n={userId:r},{blockHash:i,blockNumber:a}=await this.entityManager.manageEntity({userId:r,entityType:EntityType.USER,entityId:r,action:Action.CREATE,metadata:JSON.stringify({cid:null,data:null}),...e});return{blockHash:i,blockNumber:a,metadata:n}}async updateProfile(e,t){const{onProgress:r,profilePictureFile:n,coverArtFile:i,userId:a,metadata:o}=await parseParams("updateProfile",UpdateProfileSchema)(e),[s,u]=await Promise.all([n&&retry3((async()=>await this.storage.uploadFile({file:n,onProgress:r,template:"img_square"})),(e=>{this.logger.info("Retrying uploadProfilePicture",e)})),i&&retry3((async()=>await this.storage.uploadFile({file:i,onProgress:r,template:"img_backdrop"})),(e=>{this.logger.info("Retrying uploadProfileCoverArt",e)}))]),c=snakecaseKeys({...o,...s?{profilePicture:null==s?void 0:s.id,profilePictureSizes:null==s?void 0:s.id}:{},...u?{coverPhoto:null==u?void 0:u.id,coverPhotoSizes:null==u?void 0:u.id}:{}}),d=(await generateMetadataCidV1(c)).toString();return await this.entityManager.manageEntity({userId:a,entityType:EntityType.USER,entityId:a,action:Action.UPDATE,metadata:JSON.stringify({cid:d,data:c}),...t})}async followUser(e,t){const{userId:r,followeeUserId:n}=await parseParams("followUser",FollowUserSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.USER,entityId:n,action:Action.FOLLOW,...t})}async unfollowUser(e,t){const{userId:r,followeeUserId:n}=await parseParams("unfollowUser",UnfollowUserSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.USER,entityId:n,action:Action.UNFOLLOW,...t})}async subscribeToUser(e,t){const{userId:r,subscribeeUserId:n}=await parseParams("subscribeToUser",SubscribeToUserSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.USER,entityId:n,action:Action.SUBSCRIBE,...t})}async unsubscribeFromUser(e,t){const{userId:r,subscribeeUserId:n}=await parseParams("unsubscribeFromUser",UnsubscribeFromUserSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.USER,entityId:n,action:Action.UNSUBSCRIBE,...t})}async downloadSalesAsCSVBlob(e){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling downloadSalesAsCSV.");const t={};void 0!==e.userId&&(t.user_id=e.userId);const r=await this.request({path:"/users/{id}/sales/download".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:t});return await new BlobApiResponse(r).value()}async downloadPurchasesAsCSVBlob(e){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling downloadPurchasesAsCSV.");const t={};void 0!==e.userId&&(t.user_id=e.userId);const r=await this.request({path:"/users/{id}/purchases/download".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:t});return await new BlobApiResponse(r).value()}async downloadUSDCWithdrawalsAsCSVBlob(e){if(null===e.id||void 0===e.id)throw new RequiredError$1("id","Required parameter params.id was null or undefined when calling downloadUSDCWithdrawalsAsCSV.");const t={};void 0!==e.userId&&(t.user_id=e.userId);const r=await this.request({path:"/users/{id}/withdrawals/download".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:{},query:t});return await new BlobApiResponse(r).value()}async sendTip(e){const{amount:t}=await parseParams("sendTip",SendTipSchema)(e),{ethWallet:r}=await this.getWalletAndUserBank(e.senderUserId),{ethWallet:n,userBank:i}=await this.getWalletAndUserBank(e.receiverUserId);if(!r)throw new Error("Invalid sender: No Ethereum wallet found.");if(!n)throw new Error("Invalid recipient: No Ethereum wallet found.");if(!i)throw new Error("Invalid recipient: No user bank found.");const a=await this.claimableTokens.createTransferSecpInstruction({ethWallet:r,destination:i,amount:wAUDIO(t).value,mint:"wAUDIO"}),o=await this.claimableTokens.createTransferInstruction({ethWallet:r,destination:i,mint:"wAUDIO"}),s=await this.solanaClient.buildTransaction({instructions:[a,o]});return await this.claimableTokens.sendTransaction(s)}async sendTipReaction(e,t){const{userId:r,metadata:n}=await parseParams("sendTipReaction",SendTipReactionRequestSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.TIP,entityId:r,action:Action.UPDATE,metadata:JSON.stringify({cid:"",data:snakecaseKeys(n)}),...t})}async getWalletAndUserBank(e){var t;const r=null===(t=(await this.getUser({id:e})).data)||void 0===t?void 0:t.ercWallet;if(!r)return{ethWallet:null,userBank:null};const{userBank:n}=await this.claimableTokens.getOrCreateUserBank({ethWallet:r,mint:"wAUDIO"});return{ethWallet:r,userBank:n}}async shareEmail(e,t){const{emailOwnerUserId:r,receivingUserId:n,email:i,granteeUserIds:a,initialEmailEncryptionUuid:o}=await parseParams("shareEmail",EmailSchema)(e);let s;const u=encodeHashId(r),c=encodeHashId(n),d=encodeHashId(o);if(!u||!c||!d)throw new Error("Email owner user ID and receiving user ID are required");const l=[],{data:{encryptedKey:p,isInitial:h}={encryptedKey:"",isInitial:!1}}=await this.getUserEmailKey({receivingUserId:u,grantorUserId:u});let f,m;if(p)s=await this.emailEncryption.decryptSymmetricKey(p,h?d:u),f=Action.UPDATE,m=EntityType.EMAIL_ACCESS;else{s=this.emailEncryption.createSymmetricKey();const e=await this.emailEncryption.encryptSymmetricKey(u,s);l.push({receiving_user_id:r,grantor_user_id:r,encrypted_key:e}),f=Action.ADD_EMAIL,m=EntityType.ENCRYPTED_EMAIL}const y=await this.emailEncryption.encryptEmail(i,s),g=await this.emailEncryption.encryptSymmetricKey(c,s);l.push({receiving_user_id:n,grantor_user_id:r,encrypted_key:g}),null!=a&&a.length&&await Promise.all(a.map((async e=>{const t=await this.emailEncryption.encryptSymmetricKey(e,s);l.push({receiving_user_id:decodeHashId(e),grantor_user_id:n,encrypted_key:t})})));const b={email_owner_user_id:r,encrypted_email:y,access_grants:l};return await this.entityManager.manageEntity({userId:r,entityType:m,entityId:r,action:f,metadata:JSON.stringify({cid:"",data:b}),...t})}async addAssociatedWallet(e,t){const{userId:r,wallet:{address:n,chain:i},signature:a}=await parseParams("addAssociatedWallet",AddAssociatedWalletSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.ASSOCIATED_WALLET,entityId:0,action:Action.CREATE,metadata:JSON.stringify({cid:"",data:{wallet_address:n,chain:i,signature:a}}),...t})}async removeAssociatedWallet(e){const{userId:t,wallet:{address:r,chain:n}}=await parseParams("removeAssociatedWallet",RemoveAssociatedWalletSchema)(e);return await this.entityManager.manageEntity({userId:t,entityType:EntityType.ASSOCIATED_WALLET,entityId:0,action:Action.DELETE,metadata:JSON.stringify({cid:"",data:{wallet_address:r,chain:n}})})}async updateCollectibles(e){const{userId:t,collectibles:r}=await parseParams("updateCollectibles",UpdateCollectiblesSchema)(e);return await this.entityManager.manageEntity({userId:t,entityType:EntityType.COLLECTIBLES,entityId:0,action:Action.UPDATE,metadata:JSON.stringify({cid:"",data:{collectibles:null!=r?r:{}}})})}}let appName,apiKey;const addAppInfoMiddleware=e=>{let{apiKey:t,appName:r,services:n,basePath:i}=e;return apiKey=t,appName=r,{pre:async e=>{var a,o;if(!r){const e=new Configuration$1({fetchApi:fetch$1,basePath:i}),r=new DeveloperAppsApi(e,n.entityManager);var s;if(apiKey=null!=t?t:(await n.audiusWalletClient.getAddresses())[0],apiKey)appName=null===(s=(await r.getDeveloperApp({address:apiKey})).data)||void 0===s?void 0:s.name}if(!appName&&!apiKey)throw new Error("No appName or apiKey provided");return{...e,url:e.url+(e.url.includes("?")?"&":"?")+querystring$1({app_name:null!==(a=appName)&&void 0!==a?a:"",api_key:null!==(o=apiKey)&&void 0!==o?o:""}),init:{...e.init}}}}},E_CANCELED=new Error("request for lock canceled");var __awaiter$2=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}u((n=n.apply(e,t||[])).next())}))};class Semaphore{constructor(e,t=E_CANCELED){this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}acquire(e=1,t=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise(((r,n)=>{const i={resolve:r,reject:n,weight:e,priority:t},a=findIndexFromEnd(this._queue,(e=>t<=e.priority));-1===a&&e<=this._value?this._dispatchItem(i):this._queue.splice(a+1,0,i)}))}runExclusive(e){return __awaiter$2(this,arguments,void 0,(function*(e,t=1,r=0){const[n,i]=yield this.acquire(t,r);try{return yield e(n)}finally{i()}}))}waitForUnlock(e=1,t=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,t)?Promise.resolve():new Promise((r=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),insertSorted(this._weightedWaiters[e-1],{resolve:r,priority:t})}))}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach((e=>e.reject(this._cancelError))),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){const t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){if(0===this._queue.length)for(let e=this._value;e>0;e--){const t=this._weightedWaiters[e-1];t&&(t.forEach((e=>e.resolve())),this._weightedWaiters[e-1]=[])}else{const e=this._queue[0].priority;for(let t=this._value;t>0;t--){const r=this._weightedWaiters[t-1];if(!r)continue;const n=r.findIndex((t=>t.priority<=e));(-1===n?r:r.splice(0,n)).forEach((e=>e.resolve()))}}}_couldLockImmediately(e,t){return(0===this._queue.length||this._queue[0].priority<t)&&e<=this._value}}function insertSorted(e,t){const r=findIndexFromEnd(e,(e=>t.priority<=e.priority));e.splice(r+1,0,t)}function findIndexFromEnd(e,t){for(let r=e.length-1;r>=0;r--)if(t(e[r]))return r;return-1}var __awaiter$1=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}u((n=n.apply(e,t||[])).next())}))};class Mutex{constructor(e){this._semaphore=new Semaphore(1,e)}acquire(){return __awaiter$1(this,arguments,void 0,(function*(e=0){const[,t]=yield this._semaphore.acquire(1,e);return t}))}runExclusive(e,t=0){return this._semaphore.runExclusive((()=>e()),1,t)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const SIGNATURE_EXPIRY_MS=864e5,MESSAGE_HEADER="Encoded-Data-Message",SIGNATURE_HEADER="Encoded-Data-Signature",addRequestSignatureMiddleware=e=>{let{services:t,apiKey:r,apiSecret:n}=e;const i=new Mutex;let a=null,o=null,s=null,u=null,c=null;const d=async()=>i.runExclusive((async()=>{const{audiusWalletClient:e,logger:i}=t;try{n&&!e&&(c=createAppWalletClient({apiKey:null!=r?r:"0x0000000000000000000000000000000000000000",apiSecret:n}));const t=null!=e?e:c,[i]=await t.getAddresses(),d=(new Date).getTime();if(!a||!s||(!u||u+SIGNATURE_EXPIRY_MS<d)||o!==i){if(!i)throw new Error("Could not get a wallet address.");o=i;const e=`signature:${d}`;s=await t.signMessage({message:e}),a=e,u=d}}catch(e){e instanceof HedgehogWalletNotFoundError||i.warn(`Unable to add request signature: ${e}`)}return{message:a,signature:s}}));return{pre:async e=>{const t=e.init.headers;if(t[MESSAGE_HEADER]&&t[SIGNATURE_HEADER])return e;const{message:r,signature:n}=await d();return r&&n?{...e,url:e.url,init:{...e.init,headers:{...e.init.headers,[MESSAGE_HEADER]:r,[SIGNATURE_HEADER]:n}}}:e}}},DEVELOPER_APP_MAX_DESCRIPTION_LENGTH=128,DEVELOPER_APP_MAX_IMAGE_URL_LENGTH=2e3,DEVELOPER_APP_IMAGE_URL_REGEX=/^(https?):\/\//i,CreateDeveloperAppSchema=z.object({name:z.string(),description:z.optional(z.string().max(DEVELOPER_APP_MAX_DESCRIPTION_LENGTH)),imageUrl:z.optional(z.string().max(DEVELOPER_APP_MAX_IMAGE_URL_LENGTH).refine((e=>DEVELOPER_APP_IMAGE_URL_REGEX.test(e)),{message:"Invalid URL"})),userId:HashId}),UpdateDeveloperAppSchema=z.object({appApiKey:z.custom((e=>isApiKeyValid(e))),name:z.string(),description:z.optional(z.string().max(DEVELOPER_APP_MAX_DESCRIPTION_LENGTH)),imageUrl:z.optional(z.string().max(DEVELOPER_APP_MAX_IMAGE_URL_LENGTH).refine((e=>DEVELOPER_APP_IMAGE_URL_REGEX.test(e)),{message:"Invalid URL"})),userId:HashId}),DeleteDeveloperAppSchema=z.object({userId:HashId,appApiKey:z.custom((e=>isApiKeyValid(e)))}),IsWriteAccessGrantedSchema=z.object({userId:z.string(),apiKey:z.optional(z.custom((e=>isApiKeyValid(e))))}),OAUTH_SCOPE_OPTIONS=["read","write","write_once"],OAUTH_URL={production:"https://audius.co/oauth/auth",staging:"https://staging.audius.co/oauth/auth"};class EmailEncryptionService extends BaseAPI$1{constructor(e,t){super(e),_defineProperty$3(this,"audiusWalletClient",void 0),_defineProperty$3(this,"symmetricKeyCache",new Map),_defineProperty$3(this,"sharedSecretCache",new Map),_defineProperty$3(this,"cacheSize",1e3),this.audiusWalletClient=t}createSymmetricKey(){return crypto.getRandomValues(new Uint8Array(32))}async encryptSymmetricKey(e,t){const r=await this.getPublicKey(e),n=await this.audiusWalletClient.getSharedSecret({publicKey:r}),i=await CryptoUtils.encrypt(n,t);return base64.encode(i)}async decryptSymmetricKey(e,t,r){const n=`${t}-${e}`;return this.symmetricKeyCache.has(n)||(this.symmetricKeyCache.set(n,r?this.decryptSymmetricKeyWithPublicKey(e,r):this.decryptSymmetricKeyDirect(e,t)),this.symmetricKeyCache.size>=this.cacheSize&&this.removeOldestEntries(this.symmetricKeyCache),this.sharedSecretCache.size>=this.cacheSize&&this.removeOldestEntries(this.sharedSecretCache)),this.symmetricKeyCache.get(n)}async encryptEmail(e,t){const r=await CryptoUtils.encryptString(t,e);return base64.encode(r)}async decryptEmail(e,t){return await CryptoUtils.decryptString(t,base64.decode(e))}async createSharedKey(e,t,r){const n=this.createSymmetricKey(),i=[e,...t],a=await Promise.all(i.map((async e=>({receivingId:e,encryptedKey:await this.encryptSymmetricKey(e,n),grantorId:r}))));return{symmetricKey:n,receiverEncryptedKeys:a}}async encryptEmails(e,t,r,n){const{symmetricKey:i,receiverEncryptedKeys:a}=await this.createSharedKey(e,t,r);return{encryptedEmails:await Promise.all(n.map((e=>this.encryptEmail(e,i)))),receiverEncryptedKeys:a}}removeOldestEntries(e){Array.from(e.keys()).slice(0,this.cacheSize/3).forEach((t=>e.delete(t)))}async decryptSymmetricKeyDirect(e,t){const r=await this.getPublicKey(t),n=await this.getSharedSecretWithCache(r);return await CryptoUtils.decrypt(n,base64.decode(e))}async decryptSymmetricKeyWithPublicKey(e,t){const r=base64.decode(t),n=await this.getSharedSecretWithCache(r);return await CryptoUtils.decrypt(n,base64.decode(e))}async getPublicKey(e){const t=await this.request({path:`/comms/pubkey/${e}`,method:"GET",headers:{}}),r=await t.json();return base64.decode(r.data)}async getSharedSecretWithCache(e){const t=Buffer.from(e).toString("base64");return this.sharedSecretCache.has(t)||this.sharedSecretCache.set(t,this.audiusWalletClient.getSharedSecret({publicKey:e})),this.sharedSecretCache.get(t)}}class DeveloperAppsApi extends DeveloperAppsApi$1{constructor(e,t){super(e),_defineProperty$3(this,"entityManager",void 0),this.entityManager=t}async createDeveloperApp(e,t){const{name:r,userId:n,description:i,imageUrl:a}=await parseParams("createDeveloperApp",CreateDeveloperAppSchema)(e),o=generatePrivateKey(),s=privateKeyToAddress(o),u=createAppWalletClient({apiKey:s,apiSecret:o}),c=`Creating Audius developer app at ${Math.round((new Date).getTime()/1e3)}`,d=await u.signMessage({message:c});return{...await this.entityManager.manageEntity({userId:n,entityType:EntityType.DEVELOPER_APP,entityId:0,action:Action.CREATE,metadata:JSON.stringify({name:r,description:i,image_url:a,app_signature:{message:c,signature:d}}),...t}),apiKey:s.slice(2).toLowerCase(),apiSecret:o.slice(2).toLowerCase()}}async updateDeveloperApp(e,t){const{appApiKey:r,name:n,userId:i,description:a,imageUrl:o}=await parseParams("updateDeveloperApp",UpdateDeveloperAppSchema)(e);return{...await this.entityManager.manageEntity({userId:i,entityType:EntityType.DEVELOPER_APP,entityId:0,action:Action.UPDATE,metadata:JSON.stringify({address:`0x${r}`,name:n,description:a,image_url:o}),...t})}}async deleteDeveloperApp(e){const{userId:t,appApiKey:r}=await parseParams("deleteDeveloperApp",DeleteDeveloperAppSchema)(e);return await this.entityManager.manageEntity({userId:t,entityType:EntityType.DEVELOPER_APP,entityId:0,action:Action.DELETE,metadata:JSON.stringify({address:`0x${r}`})})}}const MarkAllNotificationsAsViewedSchema=z.object({userId:HashId}),UpdatePlaylistLastViewedAtSchema=z.object({playlistId:HashId,userId:HashId});z.object({data:z.any()});class NotificationsApi{constructor(e,t){_defineProperty$3(this,"entityManager",void 0),this.entityManager=t}async markAllNotificationsAsViewed(e){const{userId:t}=await parseParams("markAllNotificationsAsViewed",MarkAllNotificationsAsViewedSchema)(e);return await this.entityManager.manageEntity({userId:t,entityType:EntityType.NOTIFICATION,entityId:t,action:Action.VIEW,metadata:""})}async updatePlaylistLastViewedAt(e){const{playlistId:t,userId:r}=await parseParams("updatePlaylistLastViewedAt",UpdatePlaylistLastViewedAtSchema)(e);return await this.entityManager.manageEntity({userId:r,entityType:EntityType.NOTIFICATION,entityId:t,action:Action.VIEW_PLAYLIST,metadata:""})}}const isOAuthScopeValid=e=>{const t=new Set(OAUTH_SCOPE_OPTIONS);return-1===e.findIndex((e=>!t.has(e)))},isWriteOnceParams=e=>"tx"in e&&"connect_dashboard_wallet"===e.tx&&"wallet"in e||"disconnect_dashboard_wallet"===e.tx&&"wallet"in e,CSS="\n.audiusLoginButton {\n  cursor: pointer;\n  font-family: Helvetica, Arial, sans-serif;\n  text-align: center;\n  color: #FFFFFF;\n  font-weight: 700;\n  font-size: 14px;\n  line-height: 100%;\n  align-items: center;\n  display: flex;\n  border: 0;\n  height: 28px;\n  justify-content: center;\n  padding: 0px 16px;\n  background: #CC0FE0;\n  border-radius: 4px;\n  transition: all 0.07s ease-in-out;\n}\n\n.audiusLoginButton:hover {\n  background: #D127E3;\n  transform: perspective(1px) scale3d(1.04, 1.04, 1.04);\n}\n\n.audiusLoginButton.disableHoverGrow:hover {\n  transform: none;\n}\n\n.audiusLoginButton:active {\n  background: #A30CB3;\n}\n\n.audiusLoginButton.pill {\n  border-radius: 99px;\n}\n\n.audiusLoginButton.fullWidth {\n  width: 100%;\n}\n\n.audiusLoginButton.small {\n  height: 20px;\n  font-size: 11px;\n  padding: 0px 32px;\n}\n\n.audiusLoginButton.large {\n  height: 40px;\n  font-size: 18px;\n  padding: 0px 18px;\n}\n",generateId=()=>{const e=new Uint8Array(20);return(window.crypto||window.msCrypto).getRandomValues(e),Array.from(e,(function(e){return e.toString(16).padStart(2,"0")})).join("")},generateAudiusLogoSvg=e=>{let t,r;return"small"===e?(t=16,r=5):"medium"===e?(t=18,r=5):(t=24,r=10),`<svg width="${t}px" height="${t}px" viewBox="0 0 56 48" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="padding-right: ${r}px;">\n<g id="Assets" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g id="assets" transform="translate(-1555.000000, -2588.000000)">\n        <g id="audiusLogoGlyph" transform="translate(1555.000000, 2588.000000)">\n            <path d="M55.8191698,46.0362519 L42.4551012,23.3458831 L36.1870263,12.7036635 L29.0910326,0.65551431 C28.5766233,-0.217848954 27.2890668,-0.218676884 26.7734944,0.654065432 L13.3787621,23.3270477 L7.90582764,32.5909699 C7.39025522,33.4637122 8.03324043,34.5553386 9.06332791,34.5560631 L19.4031138,34.56279 C19.881044,34.5631005 20.3230236,34.3136864 20.5623059,33.9087249 L25.9362708,24.8122516 L26.7580568,23.4212248 C26.790518,23.3662709 26.8260456,23.3149392 26.8641108,23.2669192 C27.4325516,22.5520012 28.5935412,22.6041608 29.0755951,23.4226737 L34.6514114,32.8894388 L35.682239,34.6396841 C35.7412402,34.7399672 35.7843808,34.8430445 35.813987,34.9470533 C36.0430129,35.7492145 35.4339691,36.6039494 34.5220954,36.6034319 L22.3586676,36.5954631 C21.8806317,36.5951526 21.4387578,36.8445667 21.1994756,37.2496317 L16.0236614,46.0105861 C15.5080889,46.8833284 16.1510741,47.9749548 17.1810559,47.9756793 L27.9002253,47.9827167 L41.2664086,47.9913065 L54.6590261,47.9999997 C55.6892193,48.0006207 56.3335791,46.9096152 55.8191698,46.0362519" id="Audius-Logo" fill="#ffffff" fill-rule="evenodd"></path>\n            <rect id="bound" x="0" y="0" width="56" height="48"></rect>\n        </g>\n    </g>\n</g>\n</svg>`},CSRF_TOKEN_KEY="audiusOauthState";class OAuth{constructor(e){var t;if(_defineProperty$3(this,"config",void 0),_defineProperty$3(this,"activePopupWindow",void 0),_defineProperty$3(this,"popupCheckInterval",void 0),_defineProperty$3(this,"loginSuccessCallback",void 0),_defineProperty$3(this,"loginErrorCallback",void 0),_defineProperty$3(this,"apiKey",void 0),_defineProperty$3(this,"env","production"),_defineProperty$3(this,"logger",void 0),this.config=e,"undefined"==typeof window)throw new Error("Audius OAuth SDK functions are only available in browser. Refer to our documentation to learn how to implement Audius OAuth manually: https://docs.audius.org/developers/log-in-with-audius#manual-implementation.");this.apiKey=null!==(t=e.apiKey)&&void 0!==t?t:null,this.activePopupWindow=null,this.loginSuccessCallback=null,this.loginErrorCallback=null,this.popupCheckInterval=null,this.logger=e.logger.createPrefixedLogger("[oauth]")}init(e){let{successCallback:t,errorCallback:r,env:n="production"}=e;this.loginSuccessCallback=t,this.loginErrorCallback=null!=r?r:null,this.env=n,window.addEventListener("message",(e=>{this._receiveMessage(e)}),!1)}async isWriteAccessGranted(e){var t;const{userId:r,apiKey:n}=await parseParams("isWriteAccessGranted",IsWriteAccessGrantedSchema)(e);this.apiKey||n||this._surfaceError("Need to init Audius SDK with API key or pass in API Key directly to oauth.isWriteAccessGranted.");const i=null===(t=(await this.config.usersApi.getAuthorizedApps({id:r})).data)||void 0===t?void 0:t.findIndex((e=>e.address.toLowerCase()===`0x${(n||this.apiKey).toLowerCase()}`));return void 0!==i&&i>-1}login(e){let{scope:t="read",params:r,redirectUri:n="postMessage",display:i="popup",responseMode:a="fragment"}=e;const o="string"==typeof t?[t]:t;if(!this.config.appName&&!this.apiKey)return void this._surfaceError("App name not set (set with `init` method).");if(o.includes("write")&&!this.apiKey&&this._surfaceError("The 'write' scope requires Audius SDK to be initialized with an API key"),!this.loginSuccessCallback)return void this._surfaceError("Login success callback not set (set with `init` method).");if(!isOAuthScopeValid(o))return void this._surfaceError("Scope must be `read` or `write`.");const s=o.includes("write")?"write":o.includes("write_once")?"write_once":"read";if("write_once"===s&&!isWriteOnceParams(r))return void this._surfaceError("Missing correct params for `oauth.login`.");const u=generateId();window.localStorage.setItem(CSRF_TOKEN_KEY,u);const c=encodeURIComponent(window.location.origin),d=encodeURIComponent(this.apiKey||this.config.appName),l="write_once"!==s?"":`&tx=${encodeURIComponent(r.tx)}&wallet=${encodeURIComponent(r.wallet)}`,p=`${this.apiKey?"api_key":"app_name"}=${d}`,h=`response_mode=${a}`,f=`${OAUTH_URL[this.env]}?scope=${s}&state=${u}&redirect_uri=${n}&origin=${c}&${h}&${p}${l}&display=${i}`;"postMessage"===n?(this.activePopupWindow=window.open(f,"","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=375, height=785, top=100, left=100"),this._clearPopupCheckInterval(),this.popupCheckInterval=setInterval((()=>{var e;null!==(e=this.activePopupWindow)&&void 0!==e&&e.closed&&(this._surfaceError("The login popup was closed prematurely."),this.popupCheckInterval&&clearInterval(this.popupCheckInterval))}),500)):window.location.href=f}renderButton(e){var t,r;let{element:n,scope:i="read",buttonOptions:a}=e;n||this.logger.error("Target element for Audius OAuth button is empty.");const o=document.createElement("style");o.textContent=CSS,document.head.appendChild(o);const s=document.createElement("button");s.id="audius-login-button",s.classList.add("audiusLoginButton"),"pill"===(null==a?void 0:a.corners)&&s.classList.add("pill"),"small"===(null==a?void 0:a.size)&&s.classList.add("small"),"large"===(null==a?void 0:a.size)&&s.classList.add("large"),null!=a&&a.fullWidth&&s.classList.add("fullWidth"),null!=a&&a.disableHoverGrow&&s.classList.add("disableHoverGrow"),s.innerHTML=`${generateAudiusLogoSvg(null!==(t=null==a?void 0:a.size)&&void 0!==t?t:"medium")} ${null!==(r=null==a?void 0:a.customText)&&void 0!==r?r:"Continue With Audius"}`,s.onclick=()=>{this.login({scope:i})},n.replaceWith(s)}async verifyToken(e){return await this.config.usersApi.verifyIDToken({token:e})}getCsrfToken(){return window.localStorage.getItem(CSRF_TOKEN_KEY)}_surfaceError(e){this.loginErrorCallback?this.loginErrorCallback(e):this.logger.error(e)}_clearPopupCheckInterval(){this.popupCheckInterval&&clearInterval(this.popupCheckInterval)}async _receiveMessage(e){const t=new URL(OAUTH_URL[this.env]).origin;if(e.origin!==t||e.source!==this.activePopupWindow||!e.data.state||!e.data.token)return;this._clearPopupCheckInterval(),this.activePopupWindow&&(this.activePopupWindow.closed||this.activePopupWindow.close(),this.activePopupWindow=null),this.getCsrfToken()!==e.data.state&&this._surfaceError("State mismatch.");const r=await this.verifyToken(e.data.token);null!=r&&r.data?this.loginSuccessCallback&&this.loginSuccessCallback(r.data,e.data.token):this._surfaceError("The token was invalid.")}}const DevAppSchema=z.object({appName:z.optional(z.string()),services:z.optional(z.custom()),apiKey:z.string().min(1),apiSecret:z.optional(z.string().min(1)),environment:z.enum(["development","staging","production"]).optional()}),CustomAppSchema=z.object({appName:z.string().min(1),services:z.optional(z.custom()),apiKey:z.optional(z.string().min(1)),apiSecret:z.optional(z.string().min(1)),environment:z.enum(["development","staging","production"]).optional()}),SdkConfigSchema=z.union([DevAppSchema,CustomAppSchema]),sdk=e=>{SdkConfigSchema.parse(e);const{appName:t,apiKey:r}=e,n=initializeServices(e),i=initializeApis({config:e,apiKey:r,appName:t,services:n});return{oauth:"undefined"!=typeof window?new OAuth({appName:t,apiKey:r,usersApi:i.users,logger:n.logger}):void 0,...i}},initializeServices=e=>{var t,r,n,i,a,o,s,u,c,d,l,p,h,f,m,y,g,b,v,w,_,S,E,A,T,I,$,C,R,k,x,N,O,P,F,B,D,M,L,U,z,J,H,q,j,K,G,W,V,Z,Y,X,Q,ee,te;const re="development"===e.environment?developmentConfig:"staging"===e.environment?stagingConfig:productionConfig,ne=new Logger({logLevel:"production"!==e.environment?"debug":void 0}),ie=null!==(t=null===(r=e.services)||void 0===r?void 0:r.logger)&&void 0!==t?t:ne,ae="undefined"!=typeof window&&void 0!==window.document;e.apiSecret&&ae&&ie.warn("apiSecret should only be provided server side so that it isn't exposed");const oe=null!==(n=null===(i=e.services)||void 0===i?void 0:i.audiusWalletClient)&&void 0!==n?n:createAppWalletClient({apiKey:null!==(a=e.apiKey)&&void 0!==a?a:"0x0000000000000000000000000000000000000000",apiSecret:e.apiSecret}),se=null!==(o=null===(s=e.services)||void 0===s?void 0:s.ethPublicClient)&&void 0!==o?o:createPublicClient({chain:mainnet,transport:http(re.ethereum.rpcEndpoint)}),ue=null!==(u=null===(c=e.services)||void 0===c?void 0:c.ethWalletClient)&&void 0!==u?u:createWalletClient({chain:mainnet,transport:http(re.ethereum.rpcEndpoint)}),ce=null!==(d=null===(l=e.services)||void 0===l?void 0:l.storageNodeSelector)&&void 0!==d?d:new StorageNodeSelector({...getDefaultStorageNodeSelectorConfig(re),logger:ie}),de=null!==(p=null===(h=e.services)||void 0===h?void 0:h.entityManager)&&void 0!==p?p:new EntityManagerClient({...getDefaultEntityManagerConfig(re),audiusWalletClient:oe,logger:ie}),le=null!==(f=null===(m=e.services)||void 0===m?void 0:m.storage)&&void 0!==f?f:new Storage({...getDefaultStorageServiceConfig(),storageNodeSelector:ce,logger:ie}),pe=null!==(y=null===(g=e.services)||void 0===g?void 0:g.antiAbuseOracleSelector)&&void 0!==y?y:new AntiAbuseOracleSelector({...getDefaultAntiAbuseOracleSelectorConfig(re),logger:ie}),he=null!==(b=null===(v=e.services)||void 0===v?void 0:v.antiAbuseOracle)&&void 0!==b?b:new AntiAbuseOracle({antiAbuseOracleSelector:pe}),fe=[addRequestSignatureMiddleware({services:{audiusWalletClient:oe,logger:ie},apiKey:e.apiKey,apiSecret:e.apiSecret})],me=null!==(w=e.services)&&void 0!==w&&w.solanaRelay?e.services.solanaRelay.withMiddleware(addRequestSignatureMiddleware({services:{audiusWalletClient:oe,logger:ie},apiKey:e.apiKey,apiSecret:e.apiSecret})):new SolanaRelay(new Configuration$1({middleware:fe})),ye=null!==(_=e.services)&&void 0!==_&&_.archiverService?e.services.archiverService.withMiddleware(addRequestSignatureMiddleware({services:{audiusWalletClient:oe,logger:ie},apiKey:e.apiKey,apiSecret:e.apiSecret})):void 0,ge=null!==(S=null===(E=e.services)||void 0===E?void 0:E.emailEncryptionService)&&void 0!==S?S:new EmailEncryptionService(new Configuration$1({fetchApi:fetch$1,basePath:"",middleware:fe}),oe),be=null!==(A=null===(T=e.services)||void 0===T?void 0:T.solanaWalletAdapter)&&void 0!==A?A:new SolanaRelayWalletAdapter({solanaRelay:me}),ve=null!==(I=null===($=e.services)||void 0===$?void 0:$.solanaClient)&&void 0!==I?I:new SolanaClient({...getDefaultSolanaClientConfig(re),solanaWalletAdapter:be,logger:ie});return{storageNodeSelector:ce,antiAbuseOracleSelector:pe,entityManager:de,storage:le,audiusWalletClient:oe,ethPublicClient:se,ethWalletClient:ue,claimableTokensClient:null!==(C=null===(R=e.services)||void 0===R?void 0:R.claimableTokensClient)&&void 0!==C?C:new ClaimableTokensClient({...getDefaultClaimableTokensConfig(re),solanaClient:ve,audiusWalletClient:oe,logger:ie}),rewardManagerClient:null!==(k=null===(x=e.services)||void 0===x?void 0:x.rewardManagerClient)&&void 0!==k?k:new RewardManagerClient({...getDefaultRewardManagerClentConfig(re),solanaClient:ve,logger:ie}),paymentRouterClient:null!==(N=null===(O=e.services)||void 0===O?void 0:O.paymentRouterClient)&&void 0!==N?N:new PaymentRouterClient({...getDefaultPaymentRouterClientConfig(re),solanaClient:ve}),solanaClient:ve,solanaWalletAdapter:be,solanaRelay:me,antiAbuseOracle:he,audiusTokenClient:null!==(P=null===(F=e.services)||void 0===F?void 0:F.audiusTokenClient)&&void 0!==P?P:new AudiusTokenClient({audiusWalletClient:oe,ethPublicClient:se,ethWalletClient:ue,...getDefaultAudiusTokenConfig(re)}),claimsManagerClient:null!==(B=null===(D=e.services)||void 0===D?void 0:D.claimsManagerClient)&&void 0!==B?B:new ClaimsManagerClient({...getDefaultClaimsManagerConfig(re)}),delegateManagerClient:null!==(M=null===(L=e.services)||void 0===L?void 0:L.delegateManagerClient)&&void 0!==M?M:new DelegateManagerClient({audiusWalletClient:oe,ethPublicClient:se,ethWalletClient:ue,...getDefaultDelegateManagerConfig(re)}),stakingClient:null!==(U=null===(z=e.services)||void 0===z?void 0:z.stakingClient)&&void 0!==U?U:new StakingClient({audiusWalletClient:oe,ethPublicClient:se,ethWalletClient:ue,...getDefaultStakingConfig(re)}),trustedNotifierManagerClient:null!==(J=null===(H=e.services)||void 0===H?void 0:H.trustedNotifierManagerClient)&&void 0!==J?J:new TrustedNotifierManagerClient({...getDefaultTrustedNotifierManagerConfig(re)}),audiusWormholeClient:null!==(q=null===(j=e.services)||void 0===j?void 0:j.audiusWormholeClient)&&void 0!==q?q:new AudiusWormholeClient({audiusWalletClient:oe,ethPublicClient:se,ethWalletClient:ue,...getDefaultWormholeConfig(re)}),registryClient:null!==(K=null===(G=e.services)||void 0===G?void 0:G.registryClient)&&void 0!==K?K:new RegistryClient({...getDefaultRegistryConfig(re)}),governanceClient:null!==(W=null===(V=e.services)||void 0===V?void 0:V.governanceClient)&&void 0!==W?W:new GovernanceClient({...getDefaultGovernanceConfig(re)}),serviceTypeManagerClient:null!==(Z=null===(Y=e.services)||void 0===Y?void 0:Y.serviceTypeManagerClient)&&void 0!==Z?Z:new ServiceTypeManagerClient({...getDefaultServiceTypeManagerConfig(re)}),serviceProviderFactoryClient:null!==(X=null===(Q=e.services)||void 0===Q?void 0:Q.serviceProviderFactoryClient)&&void 0!==X?X:new ServiceProviderFactoryClient({...getDefaultServiceProviderFactoryConfig(re)}),ethRewardsManagerClient:null!==(ee=null===(te=e.services)||void 0===te?void 0:te.ethRewardsManagerClient)&&void 0!==ee?ee:new EthRewardsManagerClient({...getDefaultEthRewardsManagerConfig(re)}),emailEncryptionService:ge,archiverService:ye,logger:ie}},initializeApis=e=>{let{config:t,apiKey:r,appName:n,services:i}=e;const a="development"===t.environment?developmentConfig.network.apiEndpoint:"staging"===t.environment?stagingConfig.network.apiEndpoint:productionConfig.network.apiEndpoint,o=`${a}/v1`,s=[addAppInfoMiddleware({apiKey:r,appName:n,services:i,basePath:o}),addRequestSignatureMiddleware({services:i,apiKey:r,apiSecret:t.apiSecret})],u=new Configuration$1({fetchApi:fetch$1,middleware:s,basePath:o}),c=new TracksApi(u,i.storage,i.entityManager,i.logger,i.claimableTokensClient,i.paymentRouterClient,i.solanaRelay,i.solanaClient),d=new UsersApi(u,i.storage,i.entityManager,i.logger,i.claimableTokensClient,i.solanaClient,i.emailEncryptionService),l=new AlbumsApi(u,i.storage,i.entityManager,i.logger,i.claimableTokensClient,i.paymentRouterClient,i.solanaRelay,i.solanaClient),p=new PlaylistsApi$1(u,i.storage,i.entityManager,i.logger),h=new CommentsApi$1(u,i.entityManager,i.logger),f=new ChallengesApi(u),m=new CoinsApi(u),y=new TipsApi$1(u),g=new ResolveApi(u),b=new RewardsApi(u),v=g.resolve.bind(g),w=new ChatsApi(new Configuration$1({basePath:a,fetchApi:fetch$1,middleware:s}),i.audiusWalletClient,i.logger),_=new GrantsApi(u,i.entityManager,d),S=new DeveloperAppsApi(u,i.entityManager),E=new DashboardWalletUsersApi(u,i.entityManager),A=new NotificationsApi(u,i.entityManager),T=new Configuration({basePath:`${o}/full`,fetchApi:fetch$1,middleware:s}),I=new EventsApi(u,i.entityManager,i.logger),$=new ExploreApi$1(u);return{tracks:c,users:d,albums:l,playlists:p,tips:y,resolve:v,full:{tracks:new TracksApi$1(T),users:new UsersApi$1(T),search:new SearchApi(T),playlists:new PlaylistsApi(T),reactions:new ReactionsApi(T),tips:new TipsApi(T),transactions:new TransactionsApi(T),notifications:new NotificationsApi$1(T),cidData:new CidDataApi(T),comments:new CommentsApi(T),explore:new ExploreApi(T)},chats:w,grants:_,developerApps:S,dashboardWalletUsers:E,rewards:b,services:i,comments:h,notifications:A,events:I,explore:$,coins:m,challenges:f}};window.audiusSdk=sdk,window.audiusSdk.config={staging:stagingConfig,production:productionConfig,development:developmentConfig},window.audiusSdk.ParseRequestError=ParseRequestError,window.audiusSdk.Genre=Genre,window.audiusSdk.Mood=Mood,window.audiusSdk.ChallengeId=ChallengeId;var browser$3={exports:{}},lib={},readableBrowser={exports:{}},streamBrowser=events.EventEmitter,require$$3=getAugmentedNamespace(_nodeResolve_empty$1);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty$1(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty$1(e,t,r){return(t=_toPropertyKey$1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$1(n.key),n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey$1(e){var t=_toPrimitive$1(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive$1(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var _require$2=buffer,Buffer$4=_require$2.Buffer,_require2=require$$3,inspect=_require2.inspect,custom=inspect&&inspect.custom||"inspect";function copyBuffer(e,t,r){Buffer$4.prototype.copy.call(e,t,r)}var buffer_list=function(){function e(){_classCallCheck(this,e),this.head=null,this.tail=null,this.length=0}return _createClass(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return Buffer$4.alloc(0);for(var t=Buffer$4.allocUnsafe(e>>>0),r=this.head,n=0;r;)copyBuffer(r.data,t,n),n+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,a=e>i.length?i.length:e;if(a===i.length?n+=i:n+=i.slice(0,e),0===(e-=a)){a===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(a));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=Buffer$4.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,a),0===(e-=a)){a===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(a));break}++n}return this.length-=n,t}},{key:custom,value:function(e,t){return inspect(this,_objectSpread(_objectSpread({},t),{},{depth:0,customInspect:!1}))}}]),e}();function destroy(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(emitErrorNT,this,e)):process.nextTick(emitErrorNT,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted?process.nextTick(emitCloseNT,r):(r._writableState.errorEmitted=!0,process.nextTick(emitErrorAndCloseNT,r,e)):process.nextTick(emitErrorAndCloseNT,r,e):t?(process.nextTick(emitCloseNT,r),t(e)):process.nextTick(emitCloseNT,r)})),this)}function emitErrorAndCloseNT(e,t){emitErrorNT(e,t),emitCloseNT(e)}function emitCloseNT(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(e,t){e.emit("error",t)}function errorOrDestroy$2(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var destroy_1={destroy:destroy,undestroy:undestroy,errorOrDestroy:errorOrDestroy$2},errorsBrowser={};function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var codes={};function createErrorType(e,t,r){r||(r=Error);var n=function(e){function r(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return _inheritsLoose(r,e),r}(r);n.prototype.name=r.name,n.prototype.code=e,codes[e]=n}function oneOf(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}function startsWith(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function endsWith(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function includes(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}createErrorType("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),createErrorType("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i;if("string"==typeof t&&startsWith(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be",endsWith(e," argument"))i="The ".concat(e," ").concat(n," ").concat(oneOf(t,"type"));else{var a=includes(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(a," ").concat(n," ").concat(oneOf(t,"type"))}return i+=". Received type ".concat(typeof r)}),TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=codes;var ERR_INVALID_OPT_VALUE=errorsBrowser.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}function getHighWaterMark$2(e,t,r,n){var i=highWaterMarkFrom(t,n,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new ERR_INVALID_OPT_VALUE(n?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}var state={getHighWaterMark:getHighWaterMark$2},inherits_browser={exports:{}};"function"==typeof Object.create?inherits_browser.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var browser$2=deprecate;function deprecate(e,t){if(config("noDeprecation"))return e;var r=!1;return function(){if(!r){if(config("throwDeprecation"))throw new Error(t);config("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}function config(e){try{if(!commonjsGlobal$1.localStorage)return!1}catch(e){return!1}var t=commonjsGlobal$1.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}var _stream_writable=Writable$1,Duplex$3;function CorkedRequest(e){var t=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish(t,e)}}Writable$1.WritableState=WritableState;var internalUtil={deprecate:browser$2},Stream$1=streamBrowser,Buffer$3=buffer.Buffer,OurUint8Array$1=(void 0!==commonjsGlobal$1?commonjsGlobal$1:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function _uint8ArrayToBuffer$1(e){return Buffer$3.from(e)}function _isUint8Array$1(e){return Buffer$3.isBuffer(e)||e instanceof OurUint8Array$1}var destroyImpl$1=destroy_1,_require$1=state,getHighWaterMark$1=_require$1.getHighWaterMark,_require$codes$3=errorsBrowser.codes,ERR_INVALID_ARG_TYPE$1=_require$codes$3.ERR_INVALID_ARG_TYPE,ERR_METHOD_NOT_IMPLEMENTED$2=_require$codes$3.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK$1=_require$codes$3.ERR_MULTIPLE_CALLBACK,ERR_STREAM_CANNOT_PIPE=_require$codes$3.ERR_STREAM_CANNOT_PIPE,ERR_STREAM_DESTROYED$1=_require$codes$3.ERR_STREAM_DESTROYED,ERR_STREAM_NULL_VALUES=_require$codes$3.ERR_STREAM_NULL_VALUES,ERR_STREAM_WRITE_AFTER_END=_require$codes$3.ERR_STREAM_WRITE_AFTER_END,ERR_UNKNOWN_ENCODING=_require$codes$3.ERR_UNKNOWN_ENCODING,errorOrDestroy$1=destroyImpl$1.errorOrDestroy,realHasInstance;function nop(){}function WritableState(e,t,r){Duplex$3=Duplex$3||_stream_duplex,e=e||{},"boolean"!=typeof r&&(r=t instanceof Duplex$3),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=getHighWaterMark$1(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable$1(e){var t=this instanceof(Duplex$3=Duplex$3||_stream_duplex);if(!t&&!realHasInstance.call(Writable$1,this))return new Writable$1(e);this._writableState=new WritableState(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),Stream$1.call(this)}function writeAfterEnd(e,t){var r=new ERR_STREAM_WRITE_AFTER_END;errorOrDestroy$1(e,r),process.nextTick(t,r)}function validChunk(e,t,r,n){var i;return null===r?i=new ERR_STREAM_NULL_VALUES:"string"==typeof r||t.objectMode||(i=new ERR_INVALID_ARG_TYPE$1("chunk",["string","Buffer"],r)),!i||(errorOrDestroy$1(e,i),process.nextTick(n,i),!1)}function decodeChunk(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=Buffer$3.from(t,r)),t}function writeOrBuffer(e,t,r,n,i,a){if(!r){var o=decodeChunk(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else doWrite(e,t,!1,s,n,i,a);return u}function doWrite(e,t,r,n,i,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new ERR_STREAM_DESTROYED$1("write")):r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function onwriteError(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(finishMaybe,e,t),e._writableState.errorEmitted=!0,errorOrDestroy$1(e,n)):(i(n),e._writableState.errorEmitted=!0,errorOrDestroy$1(e,n),finishMaybe(e,t))}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new ERR_MULTIPLE_CALLBACK$1;if(onwriteStateUpdate(r),t)onwriteError(e,r,n,t,i);else{var a=needFinish(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer(e,r),n?process.nextTick(afterWrite,e,r,a,i):afterWrite(e,r,a,i)}}function afterWrite(e,t,r,n){r||onwriteDrain(e,t),t.pendingcb--,n(),finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var o=0,s=!0;r;)i[o]=r,r.isBuf||(s=!1),r=r.next,o+=1;i.allBuffers=s,doWrite(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new CorkedRequest(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,d=r.callback;if(doWrite(e,t,!1,t.objectMode?1:u.length,u,c,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function callFinal(e,t){e._final((function(r){t.pendingcb--,r&&errorOrDestroy$1(e,r),t.prefinished=!0,e.emit("prefinish"),finishMaybe(e,t)}))}function prefinish$1(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(callFinal,e,t)))}function finishMaybe(e,t){var r=needFinish(t);if(r&&(prefinish$1(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function onCorkedFinish(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}inherits_browser.exports(Writable$1,Stream$1),WritableState.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable$1,Symbol.hasInstance,{value:function(e){return!!realHasInstance.call(this,e)||this===Writable$1&&(e&&e._writableState instanceof WritableState)}})):realHasInstance=function(e){return e instanceof this},Writable$1.prototype.pipe=function(){errorOrDestroy$1(this,new ERR_STREAM_CANNOT_PIPE)},Writable$1.prototype.write=function(e,t,r){var n=this._writableState,i=!1,a=!n.objectMode&&_isUint8Array$1(e);return a&&!Buffer$3.isBuffer(e)&&(e=_uint8ArrayToBuffer$1(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=nop),n.ending?writeAfterEnd(this,r):(a||validChunk(this,n,e,r))&&(n.pendingcb++,i=writeOrBuffer(this,n,a,e,t,r)),i},Writable$1.prototype.cork=function(){this._writableState.corked++},Writable$1.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||clearBuffer(this,e))},Writable$1.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new ERR_UNKNOWN_ENCODING(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(Writable$1.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable$1.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable$1.prototype._write=function(e,t,r){r(new ERR_METHOD_NOT_IMPLEMENTED$2("_write()"))},Writable$1.prototype._writev=null,Writable$1.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||endWritable(this,n,r),this},Object.defineProperty(Writable$1.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Writable$1.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),Writable$1.prototype.destroy=destroyImpl$1.destroy,Writable$1.prototype._undestroy=destroyImpl$1.undestroy,Writable$1.prototype._destroy=function(e,t){t(e)};var objectKeys=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},_stream_duplex=Duplex$2,Readable$1=_stream_readable,Writable=_stream_writable;inherits_browser.exports(Duplex$2,Readable$1);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex$2.prototype[method]||(Duplex$2.prototype[method]=Writable.prototype[method])}function Duplex$2(e){if(!(this instanceof Duplex$2))return new Duplex$2(e);Readable$1.call(this,e),Writable.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend)))}function onend(){this._writableState.ended||process.nextTick(onEndNT,this)}function onEndNT(e){e.end()}Object.defineProperty(Duplex$2.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex$2.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex$2.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Duplex$2.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});var string_decoder={},Buffer$2=safeBuffer.exports.Buffer,isEncoding=Buffer$2.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function normalizeEncoding(e){var t=_normalizeEncoding(e);if("string"!=typeof t&&(Buffer$2.isEncoding===isEncoding||!isEncoding(e)))throw new Error("Unknown encoding: "+e);return t||e}function StringDecoder$1(e){var t;switch(this.encoding=normalizeEncoding(e),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,t=4;break;case"utf8":this.fillLast=utf8FillLast,t=4;break;case"base64":this.text=base64Text,this.end=base64End,t=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$2.allocUnsafe(t)}function utf8CheckByte(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function utf8CheckIncomplete(e,t,r){var n=t.length-1;if(n<r)return 0;var i=utf8CheckByte(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=utf8CheckByte(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=utf8CheckByte(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}function utf8CheckExtraBytes(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}function utf8FillLast(e){var t=this.lastTotal-this.lastNeed,r=utf8CheckExtraBytes(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function utf8Text(e,t){var r=utf8CheckIncomplete(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function utf8End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function utf16Text(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function utf16End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function base64Text(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function base64End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function simpleWrite(e){return e.toString(this.encoding)}function simpleEnd(e){return e&&e.length?this.write(e):""}string_decoder.StringDecoder=StringDecoder$1,StringDecoder$1.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},StringDecoder$1.prototype.end=utf8End,StringDecoder$1.prototype.text=utf8Text,StringDecoder$1.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var ERR_STREAM_PREMATURE_CLOSE=errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;function once$1(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function noop$1(){}function isRequest$1(e){return e.setHeader&&"function"==typeof e.abort}function eos$1(e,t,r){if("function"==typeof t)return eos$1(e,null,t);t||(t={}),r=once$1(r||noop$1);var n=t.readable||!1!==t.readable&&e.readable,i=t.writable||!1!==t.writable&&e.writable,a=function(){e.writable||s()},o=e._writableState&&e._writableState.finished,s=function(){i=!1,o=!0,n||r.call(e)},u=e._readableState&&e._readableState.endEmitted,c=function(){n=!1,u=!0,i||r.call(e)},d=function(t){r.call(e,t)},l=function(){var t;return n&&!u?(e._readableState&&e._readableState.ended||(t=new ERR_STREAM_PREMATURE_CLOSE),r.call(e,t)):i&&!o?(e._writableState&&e._writableState.ended||(t=new ERR_STREAM_PREMATURE_CLOSE),r.call(e,t)):void 0},p=function(){e.req.on("finish",s)};return isRequest$1(e)?(e.on("complete",s),e.on("abort",l),e.req?p():e.on("request",p)):i&&!e._writableState&&(e.on("end",a),e.on("close",a)),e.on("end",c),e.on("finish",s),!1!==t.error&&e.on("error",d),e.on("close",l),function(){e.removeListener("complete",s),e.removeListener("abort",l),e.removeListener("request",p),e.req&&e.req.removeListener("finish",s),e.removeListener("end",a),e.removeListener("close",a),e.removeListener("finish",s),e.removeListener("end",c),e.removeListener("error",d),e.removeListener("close",l)}}var endOfStream=eos$1,_Object$setPrototypeO;function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var finished=endOfStream,kLastResolve=Symbol("lastResolve"),kLastReject=Symbol("lastReject"),kError=Symbol("error"),kEnded=Symbol("ended"),kLastPromise=Symbol("lastPromise"),kHandlePromise=Symbol("handlePromise"),kStream=Symbol("stream");function createIterResult(e,t){return{value:e,done:t}}function readAndResolve(e){var t=e[kLastResolve];if(null!==t){var r=e[kStream].read();null!==r&&(e[kLastPromise]=null,e[kLastResolve]=null,e[kLastReject]=null,t(createIterResult(r,!1)))}}function onReadable(e){process.nextTick(readAndResolve,e)}function wrapForNext(e,t){return function(r,n){e.then((function(){t[kEnded]?r(createIterResult(void 0,!0)):t[kHandlePromise](r,n)}),n)}}var AsyncIteratorPrototype=Object.getPrototypeOf((function(){})),ReadableStreamAsyncIteratorPrototype=Object.setPrototypeOf((_Object$setPrototypeO={get stream(){return this[kStream]},next:function(){var e=this,t=this[kError];if(null!==t)return Promise.reject(t);if(this[kEnded])return Promise.resolve(createIterResult(void 0,!0));if(this[kStream].destroyed)return new Promise((function(t,r){process.nextTick((function(){e[kError]?r(e[kError]):t(createIterResult(void 0,!0))}))}));var r,n=this[kLastPromise];if(n)r=new Promise(wrapForNext(n,this));else{var i=this[kStream].read();if(null!==i)return Promise.resolve(createIterResult(i,!1));r=new Promise(this[kHandlePromise])}return this[kLastPromise]=r,r}},_defineProperty(_Object$setPrototypeO,Symbol.asyncIterator,(function(){return this})),_defineProperty(_Object$setPrototypeO,"return",(function(){var e=this;return new Promise((function(t,r){e[kStream].destroy(null,(function(e){e?r(e):t(createIterResult(void 0,!0))}))}))})),_Object$setPrototypeO),AsyncIteratorPrototype),createReadableStreamAsyncIterator$1=function(e){var t,r=Object.create(ReadableStreamAsyncIteratorPrototype,(_defineProperty(t={},kStream,{value:e,writable:!0}),_defineProperty(t,kLastResolve,{value:null,writable:!0}),_defineProperty(t,kLastReject,{value:null,writable:!0}),_defineProperty(t,kError,{value:null,writable:!0}),_defineProperty(t,kEnded,{value:e._readableState.endEmitted,writable:!0}),_defineProperty(t,kHandlePromise,{value:function(e,t){var n=r[kStream].read();n?(r[kLastPromise]=null,r[kLastResolve]=null,r[kLastReject]=null,e(createIterResult(n,!1))):(r[kLastResolve]=e,r[kLastReject]=t)},writable:!0}),t));return r[kLastPromise]=null,finished(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[kLastReject];return null!==t&&(r[kLastPromise]=null,r[kLastResolve]=null,r[kLastReject]=null,t(e)),void(r[kError]=e)}var n=r[kLastResolve];null!==n&&(r[kLastPromise]=null,r[kLastResolve]=null,r[kLastReject]=null,n(createIterResult(void 0,!0))),r[kEnded]=!0})),e.on("readable",onReadable.bind(null,r)),r},async_iterator=createReadableStreamAsyncIterator$1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")},_stream_readable=Readable,Duplex$1;Readable.ReadableState=ReadableState;var EElistenerCount=function(e,t){return e.listeners(t).length},Stream=streamBrowser,Buffer$1=buffer.Buffer,OurUint8Array=(void 0!==commonjsGlobal$1?commonjsGlobal$1:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function _uint8ArrayToBuffer(e){return Buffer$1.from(e)}function _isUint8Array(e){return Buffer$1.isBuffer(e)||e instanceof OurUint8Array}var debugUtil=require$$3,debug;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var BufferList=buffer_list,destroyImpl=destroy_1,_require=state,getHighWaterMark=_require.getHighWaterMark,_require$codes$2=errorsBrowser.codes,ERR_INVALID_ARG_TYPE=_require$codes$2.ERR_INVALID_ARG_TYPE,ERR_STREAM_PUSH_AFTER_EOF=_require$codes$2.ERR_STREAM_PUSH_AFTER_EOF,ERR_METHOD_NOT_IMPLEMENTED$1=_require$codes$2.ERR_METHOD_NOT_IMPLEMENTED,ERR_STREAM_UNSHIFT_AFTER_END_EVENT=_require$codes$2.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,StringDecoder,createReadableStreamAsyncIterator,from;inherits_browser.exports(Readable,Stream);var errorOrDestroy=destroyImpl.errorOrDestroy,kProxyEvents=["error","close","destroy","pause","resume"];function prependListener(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function ReadableState(e,t,r){Duplex$1=Duplex$1||_stream_duplex,e=e||{},"boolean"!=typeof r&&(r=t instanceof Duplex$1),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=getHighWaterMark(this,e,"readableHighWaterMark",r),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder||(StringDecoder=string_decoder.StringDecoder),this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){if(Duplex$1=Duplex$1||_stream_duplex,!(this instanceof Readable))return new Readable(e);var t=this instanceof Duplex$1;this._readableState=new ReadableState(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),Stream.call(this)}function readableAddChunk(e,t,r,n,i){debug("readableAddChunk",t);var a,o=e._readableState;if(null===t)o.reading=!1,onEofChunk(e,o);else if(i||(a=chunkInvalid(o,t)),a)errorOrDestroy(e,a);else if(o.objectMode||t&&t.length>0)if("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===Buffer$1.prototype||(t=_uint8ArrayToBuffer(t)),n)o.endEmitted?errorOrDestroy(e,new ERR_STREAM_UNSHIFT_AFTER_END_EVENT):addChunk(e,o,t,!0);else if(o.ended)errorOrDestroy(e,new ERR_STREAM_PUSH_AFTER_EOF);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?addChunk(e,o,t,!1):maybeReadMore(e,o)):addChunk(e,o,t,!1)}else n||(o.reading=!1,maybeReadMore(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function addChunk(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&emitReadable(e)),maybeReadMore(e,t)}function chunkInvalid(e,t){var r;return _isUint8Array(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new ERR_INVALID_ARG_TYPE("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(e,t){t(e)},Readable.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=Buffer$1.from(e,t),t=""),r=!0),readableAddChunk(this,e,t,!1,r)},Readable.prototype.unshift=function(e){return readableAddChunk(this,e,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(e){StringDecoder||(StringDecoder=string_decoder.StringDecoder);var t=new StringDecoder(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var MAX_HWM=1073741824;function computeNewHighWaterMark(e){return e>=MAX_HWM?e=MAX_HWM:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=computeNewHighWaterMark(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function onEofChunk(e,t){if(debug("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?emitReadable(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,emitReadable_(e)))}}function emitReadable(e){var t=e._readableState;debug("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(emitReadable_,e))}function emitReadable_(e){var t=e._readableState;debug("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(debug("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&EElistenerCount(e,"data")&&(t.flowing=!0,flow(e))}}function updateReadableListening(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function nReadingNextTick(e){debug("readable nexttick read 0"),e.read(0)}function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(resume_,e,t))}function resume_(e,t){debug("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){var t=e._readableState;for(debug("flow",t.flowing);t.flowing&&null!==e.read(););}function fromList(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function endReadable(e){var t=e._readableState;debug("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(endReadableNT,t,e))}function endReadableNT(e,t){if(debug("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function indexOf(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Readable.prototype.read=function(e){debug("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return debug("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,t))&&t.ended)return 0===t.length&&endReadable(this),null;var n,i=t.needReadable;return debug("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&debug("length less than watermark",i=!0),t.ended||t.reading?debug("reading or ended",i=!1):i&&(debug("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=howMuchToRead(r,t))),null===(n=e>0?fromList(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&endReadable(this)),null!==n&&this.emit("data",n),n},Readable.prototype._read=function(e){errorOrDestroy(this,new ERR_METHOD_NOT_IMPLEMENTED$1("_read()"))},Readable.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,debug("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?o:h;function a(t,i){debug("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,debug("cleanup"),e.removeListener("close",l),e.removeListener("finish",p),e.removeListener("drain",s),e.removeListener("error",d),e.removeListener("unpipe",a),r.removeListener("end",o),r.removeListener("end",h),r.removeListener("data",c),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||s())}function o(){debug("onend"),e.end()}n.endEmitted?process.nextTick(i):r.once("end",i),e.on("unpipe",a);var s=pipeOnDrain(r);e.on("drain",s);var u=!1;function c(t){debug("ondata");var i=e.write(t);debug("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==indexOf(n.pipes,e))&&!u&&(debug("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function d(t){debug("onerror",t),h(),e.removeListener("error",d),0===EElistenerCount(e,"error")&&errorOrDestroy(e,t)}function l(){e.removeListener("finish",p),h()}function p(){debug("onfinish"),e.removeListener("close",l),h()}function h(){debug("unpipe"),r.unpipe(e)}return r.on("data",c),prependListener(e,"error",d),e.once("close",l),e.once("finish",p),e.emit("pipe",r),n.flowing||(debug("pipe resume"),r.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=indexOf(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},Readable.prototype.on=function(e,t){var r=Stream.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,debug("on readable",n.length,n.reading),n.length?emitReadable(this):n.reading||process.nextTick(nReadingNextTick,this))),r},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(e,t){var r=Stream.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(updateReadableListening,this),r},Readable.prototype.removeAllListeners=function(e){var t=Stream.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(updateReadableListening,this),t},Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!e.readableListening,resume(this,e)),e.paused=!1,this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(debug("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(debug("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<kProxyEvents.length;a++)e.on(kProxyEvents[a],this.emit.bind(this,kProxyEvents[a]));return this._read=function(t){debug("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(Readable.prototype[Symbol.asyncIterator]=function(){return void 0===createReadableStreamAsyncIterator&&(createReadableStreamAsyncIterator=async_iterator),createReadableStreamAsyncIterator(this)}),Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),Readable._fromList=fromList,Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(Readable.from=function(e,t){return void 0===from&&(from=fromBrowser),from(Readable,e,t)});var _stream_transform=Transform$1,_require$codes$1=errorsBrowser.codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes$1.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=_stream_duplex;function afterTransform(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new ERR_MULTIPLE_CALLBACK);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Transform$1(e){if(!(this instanceof Transform$1))return new Transform$1(e);Duplex.call(this,e),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",prefinish)}function prefinish(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush((function(t,r){done(e,t,r)}))}function done(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(e._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return e.push(null)}inherits_browser.exports(Transform$1,Duplex),Transform$1.prototype.push=function(e,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,e,t)},Transform$1.prototype._transform=function(e,t,r){r(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))},Transform$1.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform$1.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},Transform$1.prototype._destroy=function(e,t){Duplex.prototype._destroy.call(this,e,(function(e){t(e)}))};var _stream_passthrough=PassThrough,Transform=_stream_transform,eos;function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);Transform.call(this,e)}function once(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}inherits_browser.exports(PassThrough,Transform),PassThrough.prototype._transform=function(e,t,r){r(null,e)};var _require$codes=errorsBrowser.codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop(e){if(e)throw e}function isRequest(e){return e.setHeader&&"function"==typeof e.abort}function destroyer(e,t,r,n){n=once(n);var i=!1;e.on("close",(function(){i=!0})),void 0===eos&&(eos=endOfStream),eos(e,{readable:t,writable:r},(function(e){if(e)return n(e);i=!0,n()}));var a=!1;return function(t){if(!i&&!a)return a=!0,isRequest(e)?e.abort():"function"==typeof e.destroy?e.destroy():void n(t||new ERR_STREAM_DESTROYED("pipe"))}}function call(e){e()}function pipe(e,t){return e.pipe(t)}function popCallback(e){return e.length?"function"!=typeof e[e.length-1]?noop:e.pop():noop}function pipeline(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=popCallback(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new ERR_MISSING_ARGS("streams");var a=t.map((function(e,r){var o=r<t.length-1;return destroyer(e,o,r>0,(function(e){n||(n=e),e&&a.forEach(call),o||(a.forEach(call),i(n))}))}));return t.reduce(pipe)}var pipeline_1=pipeline;!function(e,t){(t=e.exports=_stream_readable).Stream=t,t.Readable=t,t.Writable=_stream_writable,t.Duplex=_stream_duplex,t.Transform=_stream_transform,t.PassThrough=_stream_passthrough,t.finished=endOfStream,t.pipeline=pipeline_1}(readableBrowser,readableBrowser.exports),Object.defineProperty(lib,"__esModule",{value:!0}),lib.ReadableWebToNodeStream=void 0;const readable_stream_1=readableBrowser.exports;class ReadableWebToNodeStream extends readable_stream_1.Readable{constructor(e){super(),this.bytesRead=0,this.released=!1,this.reader=e.getReader()}async _read(){if(this.released)return void this.push(null);this.pendingRead=this.reader.read();const e=await this.pendingRead;delete this.pendingRead,e.done||this.released?this.push(null):(this.bytesRead+=e.value.length,this.push(e.value))}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}lib.ReadableWebToNodeStream=ReadableWebToNodeStream,function(e){const{ReadableWebToNodeStream:t}=lib,r=core$1;Object.assign(e.exports,r,{fromStream:async function(e){const n=new t(e),i=await r.fromStream(n);return await n.close(),i},fromBlob:async function(e){const t=await function(e){if(e.arrayBuffer)return e.arrayBuffer();return new Promise(((t,r)=>{const n=new FileReader;n.addEventListener("loadend",(e=>{t(e.target.result)})),n.addEventListener("error",(e=>{r(new Error(e.message))})),n.addEventListener("abort",(e=>{r(new Error(e.type))})),n.readAsArrayBuffer(e)}))}(e);return r.fromBuffer(Buffer.from(t))}})}(browser$3);var browser=browser$3.exports,browser$1=_mergeNamespaces({__proto__:null,default:browser},[browser$3.exports])})();
//# sourceMappingURL=sdk.min.js.map
